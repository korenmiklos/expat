
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      17.0
___/   /   /___/   /   /___/       BE—Basic Edition

 Statistics and Data Science       Copyright 1985-2021 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: 6-user network perpetual
Serial number: 501706335292
  Licensed to: Miklos Koren
               Central European University

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.

. do code/compare_sample.do 

. use "temp/analysis_sample.dta"

. keep frame_id_numeric year foreign has_expat_ceo

. rename foreign new_foreign

. rename has_expat_ceo new_expat

. 
. merge 1:1 frame_id_numeric year using "temp/analysis_sample-2022-05-05.dta", 
> keepusing(foreign has_expat_ceo) nogen

    Result                      Number of obs
    -----------------------------------------
    Not matched                       531,913
        from master                   530,584  
        from using                      1,329  

    Matched                            10,171  
    -----------------------------------------

. rename foreign old_foreign

. rename has_expat_ceo old_expat

. 
. compress
  (0 bytes saved)

. save "temp/compare_sample.dta", replace
file temp/compare_sample.dta saved

. 
. foreach X of varlist _all {
  2.         label variable `X' ""
  3. }

. egen ft = tag(frame_id_numeric)

. foreach X in foreign expat {
  2.         tabulate old_`X' new_`X', missing
  3.         foreach t in old new {
  4.                 egen `t'_ever_`X' = max(`t'_`X'), by(frame_id_numeric)
  5.         }
  6.         tabulate old_`X' new_`X' if new_ever_foreign, missing
  7.         tabulate old_ever_`X' new_ever_`X' if ft, missing
  8. }

old_foreig |           new_foreign
         n |         0          1          . |     Total
-----------+---------------------------------+----------
         0 |     5,768        195        727 |     6,690 
         1 |        20      4,154        636 |     4,810 
         . |   268,149      8,504    253,931 |   530,584 
-----------+---------------------------------+----------
     Total |   273,937     12,853    255,294 |   542,084 
(517,580 missing values generated)
(1,327 missing values generated)

old_foreig |           new_foreign
         n |         0          1          . |     Total
-----------+---------------------------------+----------
         0 |     5,743        195        721 |     6,659 
         1 |        15      4,154        627 |     4,796 
         . |     4,493      8,504     14,552 |    27,549 
-----------+---------------------------------+----------
     Total |    10,251     12,853     15,900 |    39,004 

old_ever_f |         new_ever_foreign
    oreign |         0          1          . |     Total
-----------+---------------------------------+----------
         1 |         8        980        139 |     1,127 
         . |    22,342        639          0 |    22,981 
-----------+---------------------------------+----------
     Total |    22,350      1,619        139 |    24,108 

           |            new_expat
 old_expat |         0          1          . |     Total
-----------+---------------------------------+----------
         0 |     7,768        570      1,099 |     9,437 
         1 |        20      1,779        264 |     2,063 
         . |   271,690      4,963    253,931 |   530,584 
-----------+---------------------------------+----------
     Total |   279,478      7,312    255,294 |   542,084 
(517,580 missing values generated)
(1,327 missing values generated)

           |            new_expat
 old_expat |         0          1          . |     Total
-----------+---------------------------------+----------
         0 |     7,738        570      1,084 |     9,392 
         1 |        20      1,779        264 |     2,063 
         . |     8,034      4,963     14,552 |    27,549 
-----------+---------------------------------+----------
     Total |    15,792      7,312     15,900 |    39,004 

old_ever_e |          new_ever_expat
      xpat |         0          1          . |     Total
-----------+---------------------------------+----------
         0 |       527         87         89 |       703 
         1 |         3        371         50 |       424 
         . |    22,823        158          0 |    22,981 
-----------+---------------------------------+----------
     Total |    23,353        616        139 |    24,108 

. 
. 
. 
end of do-file
