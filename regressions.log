
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      18.0
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: Single-user 2-core  perpetual
Serial number: 501806323834
  Licensed to: Miklos Koren
               CEU MicroData

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased;
          see help set_maxvar.

. do code/estimate/regressions.do 

. **************
. *Prepare data
. **************
. 
. * find root folder
. here
/Users/koren/Tresorit/Mac/projects/expat/

. global here = r(here)

. 
. use "$here/temp/analysis_sample.dta", clear

. 
. *Samples
. global local_sample "((ever_local==1 | foreign==0) & (added_controls==0))"

. global expat_sample "((ever_expat==1 | foreign==0) & (added_controls==0))"

. global diff_sample "(ever_local==1 | ever_expat==1 | foreign==0)"

. 
. global varlist_rhs "lnK lnL TFP export_entry lnEx lnQd  "

. local pre 4

. local post 4

. 
. generate byte diff_treatment = has_expat_ceo | local_ceo

. * add explicit control firms
. * only keep control years of these firms
. generate byte control = (foreign==0)

. expand 1+control, generate(added_controls)
(4,559 observations created)

. tabulate time_foreign added_controls 

           | Expanded observation
time_forei |         type
        gn | Original   Duplicate |     Total
-----------+----------------------+----------
        -7 |       388        388 |       776 
        -6 |       443        443 |       886 
        -5 |       507        507 |     1,014 
        -4 |       591        591 |     1,182 
        -3 |       692        692 |     1,384 
        -2 |       810        810 |     1,620 
        -1 |     1,128      1,128 |     2,256 
         0 |     1,175          0 |     1,175 
         1 |     1,023          0 |     1,023 
         2 |       847          0 |       847 
         3 |       713          0 |       713 
         4 |       607          0 |       607 
         5 |       527          0 |       527 
-----------+----------------------+----------
     Total |     9,451      4,559 |    14,010 

. * these firms need a new id
. replace frame_id_numeric = 10*frame_id_numeric if added_controls==1
(4,559 real changes made)

. 
. ****Average effect, foreign_hire sample, local and expat separately, xthdidre
> g
. local options group(frame_id_numeric) vce(cluster frame_id_numeric) controlgr
> oup(notyet)

. foreach Y in $varlist_rhs {
  2. 
.     display
  3.     display
  4.     display
  5.     display "=== Variable: `Y' ==="
  6.     clonevar difference = `Y'
  7.     replace difference = -`Y' if ever_local==1 & added_controls==0
  8.     replace difference = -`Y' if added_controls==1
  9. 
.     eststo clear
 10.     quietly xthdidregress ra (`Y') (local_ceo) if $local_sample, `options'
 11.     eststo: quietly eventbaseline, pre(`pre') post(`post') baseline(atet)
 12.     quietly xthdidregress ra (`Y') (has_expat_ceo) if $expat_sample, `opti
> ons'
 13.     eststo: quietly eventbaseline, pre(`pre') post(`post') baseline(atet)
 14.     quietly xthdidregress ra (difference) (diff_treatment) if $diff_sample
> , `options'
 15.     eststo: quietly eventbaseline, pre(`pre') post(`post') baseline(atet)
 16. 
.     display
 17.     display "=== Full sample ==="
 18.     esttab, b(3) se  style(tex)
 19. 
.     eststo clear
 20.     quietly xthdidregress ra (`Y') (local_ceo) if $local_sample & industri
> al_pre==1,  `options'
 21.     eststo: quietly eventbaseline, pre(`pre') post(`post') baseline(atet)
 22.     quietly xthdidregress ra (`Y') (has_expat_ceo) if $expat_sample & indu
> strial_pre==1,  `options'
 23.     eststo: quietly eventbaseline, pre(`pre') post(`post') baseline(atet)
 24.     quietly xthdidregress ra (difference) (diff_treatment) if $diff_sample
>  & industrial_pre==1, `options'
 25.     eststo: quietly eventbaseline, pre(`pre') post(`post') baseline(atet)
 26. 
.     display
 27.     display "=== Industry sample ==="
 28.     esttab, b(3) se  style(tex)
 29. 
.     eststo clear
 30.     quietly xthdidregress ra (`Y') (local_ceo) if $local_sample & industri
> al_pre==0,  `options'
 31.     eststo: quietly eventbaseline, pre(`pre') post(`post') baseline(atet)
 32.     quietly xthdidregress ra (`Y') (has_expat_ceo) if $expat_sample & indu
> strial_pre==0,  `options'
 33.     eststo: quietly eventbaseline, pre(`pre') post(`post') baseline(atet)
 34.     quietly xthdidregress ra (difference) (diff_treatment) if $diff_sample
>  & industrial_pre==0, `options'
 35.     eststo: quietly eventbaseline, pre(`pre') post(`post') baseline(atet)
 36. 
.     display
 37.     display "=== Service sample ==="
 38.     esttab, b(3) se style(tex)
 39. 
.     drop difference
 40. }



=== Variable: lnK ===
(6,115 real changes made)
(4,559 real changes made)
(est1 stored)
(est2 stored)
(est3 stored)

=== Full sample ===

------------------------------------------------------------
                      (1)             (2)             (3)   \\
                      lnK             lnK      difference   \\
------------------------------------------------------------
ATET                0.035           0.307**         0.332***\\
                  (0.089)         (0.112)         (0.076)   \\
------------------------------------------------------------
N                    6393            5752           12145   \\
------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(est1 stored)
(est2 stored)
(est3 stored)

=== Industry sample ===

------------------------------------------------------------
                      (1)             (2)             (3)   \\
                      lnK             lnK      difference   \\
------------------------------------------------------------
ATET                0.167           0.413**         0.345** \\
                  (0.129)         (0.149)         (0.108)   \\
------------------------------------------------------------
N                    2872            2671            5543   \\
------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(est1 stored)
(est2 stored)
(est3 stored)

=== Service sample ===

------------------------------------------------------------
                      (1)             (2)             (3)   \\
                      lnK             lnK      difference   \\
------------------------------------------------------------
ATET               -0.042           0.234           0.318** \\
                  (0.119)         (0.166)         (0.106)   \\
------------------------------------------------------------
N                    3521            3081            6602   \\
------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001



=== Variable: lnL ===
(5,769 real changes made)
(4,237 real changes made)
(est1 stored)
(est2 stored)
(est3 stored)

=== Full sample ===

------------------------------------------------------------
                      (1)             (2)             (3)   \\
                      lnL             lnL      difference   \\
------------------------------------------------------------
ATET                0.136           0.546***        0.114   \\
                  (0.084)         (0.113)         (0.069)   \\
------------------------------------------------------------
N                    6393            5752           12145   \\
------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(est1 stored)
(est2 stored)
(est3 stored)

=== Industry sample ===

------------------------------------------------------------
                      (1)             (2)             (3)   \\
                      lnL             lnL      difference   \\
------------------------------------------------------------
ATET                0.262           0.409**         0.003   \\
                  (0.136)         (0.146)         (0.103)   \\
------------------------------------------------------------
N                    2872            2671            5543   \\
------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(est1 stored)
(est2 stored)
(est3 stored)

=== Service sample ===

------------------------------------------------------------
                      (1)             (2)             (3)   \\
                      lnL             lnL      difference   \\
------------------------------------------------------------
ATET                0.053           0.777***        0.201*  \\
                  (0.106)         (0.174)         (0.092)   \\
------------------------------------------------------------
N                    3521            3081            6602   \\
------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001



=== Variable: TFP ===
(5,997 real changes made)
(4,446 real changes made)
(est1 stored)
(est2 stored)
(est3 stored)

=== Full sample ===

------------------------------------------------------------
                      (1)             (2)             (3)   \\
                      TFP             TFP      difference   \\
------------------------------------------------------------
ATET                0.059           0.168**         0.033   \\
                  (0.032)         (0.057)         (0.029)   \\
------------------------------------------------------------
N                    6393            5752           12145   \\
------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(est1 stored)
(est2 stored)
(est3 stored)

=== Industry sample ===

------------------------------------------------------------
                      (1)             (2)             (3)   \\
                      TFP             TFP      difference   \\
------------------------------------------------------------
ATET                0.055           0.107           0.058   \\
                  (0.053)         (0.068)         (0.042)   \\
------------------------------------------------------------
N                    2872            2671            5543   \\
------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(est1 stored)
(est2 stored)
(est3 stored)

=== Service sample ===

------------------------------------------------------------
                      (1)             (2)             (3)   \\
                      TFP             TFP      difference   \\
------------------------------------------------------------
ATET                0.046           0.234*          0.024   \\
                  (0.039)         (0.094)         (0.039)   \\
------------------------------------------------------------
N                    3521            3081            6602   \\
------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001



=== Variable: export_entry ===
(8,133 missing values generated)
(395 real changes made)
(80 real changes made)
(est1 stored)
(est2 stored)
