
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      18.0
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: Single-user 2-core  perpetual
Serial number: 501806323834
  Licensed to: Miklos Koren
               CEU MicroData

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased;
          see help set_maxvar.

. do code/estimate/regressions.do 

. set varabbrev off, permanently
(set varabbrev preference recorded)

. here
/Users/koren/Tresorit/Mac/projects/expat/

. global here = r(here)

. use "$here/temp/analysis_sample.dta", clear

. 
. *Samples
. global local_sample "(ever_local==1 | foreign==0) & !fake"

. global expat_sample "(ever_expat==1 | foreign==0) & !fake"

. 
. global varlist_rhs "lnK lnL TFP lnQ lnEx lnQd exporter"

. 
. do "code/create/fake_controls.do"

. tempfile fake

. * generate fake controls with 0 effect, to estimate the average effect in the
>  treatment group
. levelsof year, local(years)
1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999
>  2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2
> 015 2016 2017 2018

. local N_years : word count `years'

. local K 2

. 
. preserve

.     clear

.     set obs `=`K'*`N_years''
Number of observations (_N) was 0, now 70.

.     generate long frame_id_numeric = .
(70 missing values generated)

.     forvalues k = 1/`K' {
  2.         replace frame_id_numeric = `k' if inrange(_n, (`k'-1)*`N_years'+1,
>  `k'*`N_years')
  3.     }
(35 real changes made)
(35 real changes made)

.     generate year = .
(70 missing values generated)

.     forvalues i = 1/`N_years' {
  2.         local year : word `i' of `years'
  3.         replace year = `year' if _n == (frame_id_numeric - 1)*`N_years' + 
> `i'
  4.     }
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)
(2 real changes made)

.     foreach Y in $varlist_rhs local_ceo has_expat_ceo ever_expat ever_local {
  2.         generate `Y' = 0
  3.     }

.     compress
  variable frame_id_numeric was long now byte
  variable year was float now int
  variable lnK was float now byte
  variable lnL was float now byte
  variable TFP was float now byte
  variable lnQ was float now byte
  variable lnEx was float now byte
  variable lnQd was float now byte
  variable exporter was float now byte
  variable local_ceo was float now byte
  variable has_expat_ceo was float now byte
  variable ever_expat was float now byte
  variable ever_local was float now byte
  (2,660 bytes saved)

.     save `fake', replace
(file /var/folders/3b/07ltjm9n0rq1pwkn1_49vqn40000gn/T//St51611.000001 not
    found)
file /var/folders/3b/07ltjm9n0rq1pwkn1_49vqn40000gn/T//St51611.000001 saved
    as .dta format

. restore

. append using `fake', generate(fake)

. 
. xtset frame_id_numeric year

Panel variable: frame_id_numeric (unbalanced)
 Time variable: year, 1984 to 2018, but with gaps
         Delta: 1 unit

. 
end of do-file

. 
. ****Average effect, foreign_hire sample, local and expat separately, xthdidre
> g
. 
. *Full sample
. foreach Y in $varlist_rhs {
  2. 
.     display "`Y'"
  3. 
.     eststo clear
  4.     xtset frame_id_numeric year
  5. 
.     tabulate local_ceo if $local_sample, missing
  6. 
.     quietly xthdidregress ra (`Y') (local_ceo) if $local_sample, group(frame_
> id_numeric) vce(cluster frame_id_numeric) controlgroup(notyet)
  7.     eststo: quietly eventbaseline, pre(4) post(4) baseline(-1)
  8. 
.     quietly xthdidregress ra (`Y') (has_expat_ceo) if $expat_sample, group(fr
> ame_id_numeric) vce(cluster frame_id_numeric) controlgroup(notyet)
  9.     eststo: quietly eventbaseline, pre(4) post(4) baseline(-1)
 10. 
.     quietly xthdidregress ra (`Y') (local_ceo) if (ever_local==1)|fake, group
> (frame_id_numeric) vce(cluster frame_id_numeric) controlgroup(never)
 11.     eststo: quietly eventbaseline, pre(4) post(4) baseline(-1)
 12. 
.     quietly xthdidregress ra (`Y') (has_expat_ceo) if (ever_expat==1)|fake, g
> roup(frame_id_numeric) vce(cluster frame_id_numeric) controlgroup(never)
 13.     eststo: quietly eventbaseline, pre(4) post(4) baseline(-1)
 14. 
.     display "Full sample"
 15.     esttab, b(3) se  style(tex)
 16. 
. }
lnK

Panel variable: frame_id_numeric (unbalanced)
 Time variable: year, 1984 to 2018, but with gaps
         Delta: 1 unit

  local_ceo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,843       58.40       58.40
          1 |      2,737       41.60      100.00
------------+-----------------------------------
      Total |      6,580      100.00
(est1 stored)
(est2 stored)
(est3 stored)
(est4 stored)
Full sample

----------------------------------------------------------------------------
                      (1)             (2)             (3)             (4)   \\
                      lnK             lnK             lnK             lnK   \\
----------------------------------------------------------------------------
-4                 -0.071           0.207          -0.563***       -0.328*  \\
                  (0.078)         (0.131)         (0.070)         (0.140)   \\

-3                  0.008           0.139          -0.328***       -0.182   \\
                  (0.060)         (0.120)         (0.056)         (0.124)   \\

-2                  0.048           0.115          -0.153***       -0.061   \\
                  (0.042)         (0.083)         (0.037)         (0.083)   \\

-1                  0.000           0.000           0.000           0.000   \\
                      (.)             (.)             (.)             (.)   \\

0                   0.061           0.254***        0.254***        0.508***\\
                  (0.046)         (0.067)         (0.047)         (0.067)   \\

1                   0.005           0.373***        0.347***        0.743***\\
                  (0.066)         (0.094)         (0.059)         (0.092)   \\

2                   0.011           0.442***        0.523***        0.893***\\
                  (0.092)         (0.116)         (0.073)         (0.109)   \\

3                   0.029           0.526***        0.499***        0.924***\\
                  (0.119)         (0.152)         (0.094)         (0.126)   \\

4                   0.192           0.851***        0.573***        1.119***\\
                  (0.153)         (0.186)         (0.105)         (0.148)   \\
----------------------------------------------------------------------------
N                    5908            4852            4987            2070   \\
----------------------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
lnL

Panel variable: frame_id_numeric (unbalanced)
 Time variable: year, 1984 to 2018, but with gaps
         Delta: 1 unit

  local_ceo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,843       58.40       58.40
          1 |      2,737       41.60      100.00
------------+-----------------------------------
      Total |      6,580      100.00
(est1 stored)
(est2 stored)
