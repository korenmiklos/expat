
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 2-core Stata perpetual license:
       Serial number:  501506203290
         Licensed to:  Miklos Koren
                       CEU MicroData


Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do create_firm_events.do 

. clear all

. use "temp/firm_year_panel.dta"

. 
. * managers in first year not classified as new hires
. bysort frame_id (year): generate new_hire = (new_local | new_expat) & !(_n==1
> )

. bysort frame_id (year): generate owner_spell = sum(foreign != foreign[_n-1])

. bysort frame_id (year): generate manager_spell = sum(new_hire)

. bysort frame_id owner_spell (year): generate within_owner_manager_spell = sum
> (new_hire)

. 
. tempvar min max

. egen `min' = min(year), by(frame_id owner_spell)

. egen `max' = max(year), by(frame_id owner_spell)

. 
. generate num_years = `max' - `min' + 1

. egen num_managers_hired = sum(new_hire), by(frame_id owner_spell)

. egen otag = tag(frame_id owner_spell)

. egen start_as_domestic = max((owner_spell==1) & !foreign), by(frame_id)

. generate managers_per_year = num_managers_hired / num_years

. 
. bysort foreign: summarize num_managers_hired if otag, detail

-------------------------------------------------------------------------------
-> foreign = 0

                     num_managers_hired
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs              33,362
25%            0              0       Sum of Wgt.      33,362

50%            0                      Mean           .7204304
                        Largest       Std. Dev.         1.176
75%            1             10
90%            2             10       Variance       1.382976
95%            3             11       Skewness       2.229763
99%            5             11       Kurtosis       9.404989

-------------------------------------------------------------------------------
-> foreign = 1

                     num_managers_hired
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs               7,322
25%            0              0       Sum of Wgt.       7,322

50%            1                      Mean           1.420104
                        Largest       Std. Dev.      1.935222
75%            2             11
90%            4             11       Variance       3.745084
95%            6             12       Skewness       1.802181
99%            8             13       Kurtosis        6.41605


. 
. table owner_spell foreign if otag, c(mean num_managers_hired )

------------------------------
owner_spe | (firstnm) foreign 
ll        |        0         1
----------+-------------------
        1 | .7196107  1.453197
        2 | .6643519  1.448843
        3 | .8782051  .8451443
        4 |           1.142857
------------------------------

. table owner_spell foreign if otag & start_as_domestic , c(mean num_managers_h
> ired )

------------------------------
owner_spe | (firstnm) foreign 
ll        |        0         1
----------+-------------------
        1 | .7196107          
        2 |           1.448843
        3 | .8782051          
        4 |           1.142857
------------------------------

. table owner_spell foreign if otag & start_as_domestic , c(mean num_years )

------------------------------
owner_spe | (firstnm) foreign 
ll        |        0         1
----------+-------------------
        1 | 9.115323          
        2 |            7.17018
        3 | 6.533654          
        4 |           7.142857
------------------------------

. table owner_spell foreign if otag & start_as_domestic , c(mean managers_per_y
> ear )

------------------------------
owner_spe | (firstnm) foreign 
ll        |        0         1
----------+-------------------
        1 | .0638958          
        2 |           .2511546
        3 | .1896446          
        4 |            .085873
------------------------------

. 
. tabulate within_owner_manager_spell  foreign if start_as_domestic & owner_spe
> ll <= 2, column

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

within_own |
er_manager |   (firstnm) foreign
    _spell |         0          1 |     Total
-----------+----------------------+----------
         0 |   167,024      4,131 |   171,155 
           |     59.93      30.45 |     58.56 
-----------+----------------------+----------
         1 |    67,036      4,137 |    71,173 
           |     24.05      30.49 |     24.35 
-----------+----------------------+----------
         2 |    27,089      2,296 |    29,385 
           |      9.72      16.92 |     10.05 
-----------+----------------------+----------
         3 |    10,515      1,309 |    11,824 
           |      3.77       9.65 |      4.05 
-----------+----------------------+----------
         4 |     4,279        715 |     4,994 
           |      1.54       5.27 |      1.71 
-----------+----------------------+----------
         5 |     1,690        471 |     2,161 
           |      0.61       3.47 |      0.74 
-----------+----------------------+----------
         6 |       644        285 |       929 
           |      0.23       2.10 |      0.32 
-----------+----------------------+----------
         7 |       267        126 |       393 
           |      0.10       0.93 |      0.13 
-----------+----------------------+----------
         8 |        99         61 |       160 
           |      0.04       0.45 |      0.05 
-----------+----------------------+----------
         9 |        34         25 |        59 
           |      0.01       0.18 |      0.02 
-----------+----------------------+----------
        10 |        14          8 |        22 
           |      0.01       0.06 |      0.01 
-----------+----------------------+----------
        11 |         5          4 |         9 
           |      0.00       0.03 |      0.00 
-----------+----------------------+----------
     Total |   278,696     13,568 |   292,264 
           |    100.00     100.00 |    100.00 

. 
end of do-file
