-----------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Tresors/Data3/projects/expat-analysis/output/estimate.log
  log type:  text
 opened on:  20 Nov 2018, 19:36:33

. 
. use temp/analysis_sample

. 
. local sample_baseline expat!=.&greenfield!=1

. local sample_manufacturing `sample_baseline' & manufacturing==1

. local sample_acquisitions `sample_baseline' & ever_foreign==1

. 
. local samples baseline manufacturing acquisitions

. 
. local scale lnL lnK lnQ

. local intensity lnKL lnQL exporter inv

. 
. egen person_tag = tag(frame_id manager_id)

. egen N = sum(person_tag), by(frame_id)

. gen inverse_weight = 1/N

. 
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. foreach sample in `samples' {
  2.         foreach group in scale intensity {
  3.                 foreach X of var ``group'' {
  4.                         xtreg `X' foreign during_domestic after_domestic during_expat afte
> r_expat i.ind_year i.age_cat if `sample_`sample'' [aw=inverse_weight], i(id ) fe vce(cluster 
> id)
  5.                         local r2_w = `e(r2_w)'
  6.                         do regram output/regression/`sample'_`group' `X' `X' R2_within "`r
> 2_w'"
  7.                 }
  8.         }
  9. }
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    457,999
Group variable: id                              Number of groups  =      9,943

R-sq:                                           Obs per group:
     within  = 0.1155                                         min =          1
     between = 0.0333                                         avg =       46.1
     overall = 0.0814                                         max =      4,150

                                                F(59,9942)        =      49.81
corr(u_i, Xb)  = -0.0300                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,943 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0277224   .0448617     0.62   0.537    -.0602156    .1156604
during_domestic |  -.0779186   .0101225    -7.70   0.000    -.0977608   -.0580764
 after_domestic |  -.1738581   .0144919   -12.00   0.000    -.2022651   -.1454511
   during_expat |  -.0717728   .0376722    -1.91   0.057     -.145618    .0020723
    after_expat |  -.0846402   .0368279    -2.30   0.022    -.1568304   -.0124499
                |
       ind_year |
             2  |  -.1588892   .0180468    -8.80   0.000    -.1942646   -.1235138
             3  |  -.3228431   .0231532   -13.94   0.000    -.3682281    -.277458
             4  |  -.4512782   .0255239   -17.68   0.000    -.5013101   -.4012463
             5  |   -.553883   .0280079   -19.78   0.000    -.6087841   -.4989819
             6  |   -.661851   .0302028   -21.91   0.000    -.7210546   -.6026474
             7  |  -.7374768   .0322401   -22.87   0.000    -.8006739   -.6742797
             8  |  -.8169694   .0343244   -23.80   0.000    -.8842522   -.7496865
             9  |  -.9053699   .0366577   -24.70   0.000    -.9772264   -.8335133
            10  |   -.972225   .0386107   -25.18   0.000     -1.04791   -.8965402
            11  |  -1.047851   .0400201   -26.18   0.000    -1.126299   -.9694038
            12  |  -1.082507   .0411485   -26.31   0.000    -1.163166   -1.001847
            13  |  -1.116028   .0420912   -26.51   0.000    -1.198535    -1.03352
            14  |  -1.157425   .0433074   -26.73   0.000    -1.242317   -1.072534
            15  |  -1.167084   .0442714   -26.36   0.000    -1.253865   -1.080303
            16  |  -1.187954   .0451516   -26.31   0.000     -1.27646   -1.099448
            17  |  -1.219619   .0461799   -26.41   0.000    -1.310141   -1.129097
            18  |  -1.260126   .0466697   -27.00   0.000    -1.351608   -1.168644
            19  |  -1.283642   .0473772   -27.09   0.000    -1.376511   -1.190773
            20  |  -1.307513   .0478153   -27.35   0.000     -1.40124   -1.213785
            21  |  -1.334059   .0485142   -27.50   0.000    -1.429157   -1.238961
            22  |  -1.359415   .0493034   -27.57   0.000     -1.45606    -1.26277
            23  |  -1.367544   .0496996   -27.52   0.000    -1.464966   -1.270123
            24  |  -1.375412   .0505777   -27.19   0.000    -1.474554   -1.276269
            25  |  -1.359421   .0510547   -26.63   0.000    -1.459498   -1.259343
            26  |    .445341   .0696377     6.40   0.000      .308837     .581845
            27  |   .2848418   .0676364     4.21   0.000     .1522607    .4174229
            28  |   .1748466   .0653662     2.67   0.007     .0467157    .3029776
            29  |   .0624995   .0641143     0.97   0.330    -.0631776    .1881766
            30  |  -.0440681   .0628994    -0.70   0.484    -.1673636    .0792273
            31  |  -.1365499   .0619171    -2.21   0.027      -.25792   -.0151798
            32  |     -.2042   .0608255    -3.36   0.001    -.3234303   -.0849696
            33  |  -.2941056   .0604367    -4.87   0.000    -.4125737   -.1756374
            34  |  -.3665751   .0601361    -6.10   0.000    -.4844542   -.2486961
            35  |  -.4267388   .0605785    -7.04   0.000     -.545485   -.3079926
            36  |  -.4976866   .0611392    -8.14   0.000    -.6175319   -.3778414
            37  |  -.5433324   .0611003    -8.89   0.000    -.6631013   -.4235635
            38  |  -.6004884   .0614883    -9.77   0.000    -.7210179    -.479959
            39  |  -.6366242   .0618287   -10.30   0.000     -.757821   -.5154274
            40  |   -.652328   .0624599   -10.44   0.000    -.7747621    -.529894
            41  |  -.6735542   .0627384   -10.74   0.000    -.7965341   -.5505743
            42  |  -.6982844   .0632483   -11.04   0.000    -.8222639   -.5743048
            43  |  -.7913215   .0644315   -12.28   0.000    -.9176203   -.6650227
            44  |  -.8102014    .065498   -12.37   0.000    -.9385908    -.681812
            45  |  -.7982257   .0659364   -12.11   0.000    -.9274744    -.668977
            46  |  -.8082441   .0668577   -12.09   0.000    -.9392987   -.6771895
            47  |  -.8085828   .0675574   -11.97   0.000    -.9410089   -.6761566
            48  |  -.7972819   .0678486   -11.75   0.000     -.930279   -.6642849
            49  |  -.7939337    .069076   -11.49   0.000    -.9293366   -.6585308
            50  |  -.7823151   .0691072   -11.32   0.000    -.9177791   -.6468511
                |
        age_cat |
             2  |   .4002075   .0191098    20.94   0.000     .3627484    .4376666
             3  |   .6809236    .021972    30.99   0.000      .637854    .7239933
             4  |   1.054176   .0254986    41.34   0.000     1.004193    1.104158
             5  |    1.43725   .0306564    46.88   0.000     1.377157    1.497343
             6  |   1.755085   .0369975    47.44   0.000     1.682563    1.827608
                |
          _cons |   3.205021   .0366849    87.37   0.000     3.133112    3.276931
----------------+----------------------------------------------------------------
        sigma_u |  .98955031
        sigma_e |  .78900225
            rho |  .61134345   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1154786331016351

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    457,999
Group variable: id                              Number of groups  =      9,943

R-sq:                                           Obs per group:
     within  = 0.1155                                         min =          1
     between = 0.0333                                         avg =       46.1
     overall = 0.0814                                         max =      4,150

                                                F(59,9942)        =      49.81
corr(u_i, Xb)  = -0.0300                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,943 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0277224   .0448617     0.62   0.537    -.0602156    .1156604
during_domestic |  -.0779186   .0101225    -7.70   0.000    -.0977608   -.0580764
 after_domestic |  -.1738581   .0144919   -12.00   0.000    -.2022651   -.1454511
   during_expat |  -.0717728   .0376722    -1.91   0.057     -.145618    .0020723
    after_expat |  -.0846402   .0368279    -2.30   0.022    -.1568304   -.0124499
                |
       ind_year |
             2  |  -.1588892   .0180468    -8.80   0.000    -.1942646   -.1235138
             3  |  -.3228431   .0231532   -13.94   0.000    -.3682281    -.277458
             4  |  -.4512782   .0255239   -17.68   0.000    -.5013101   -.4012463
             5  |   -.553883   .0280079   -19.78   0.000    -.6087841   -.4989819
             6  |   -.661851   .0302028   -21.91   0.000    -.7210546   -.6026474
             7  |  -.7374768   .0322401   -22.87   0.000    -.8006739   -.6742797
             8  |  -.8169694   .0343244   -23.80   0.000    -.8842522   -.7496865
             9  |  -.9053699   .0366577   -24.70   0.000    -.9772264   -.8335133
            10  |   -.972225   .0386107   -25.18   0.000     -1.04791   -.8965402
            11  |  -1.047851   .0400201   -26.18   0.000    -1.126299   -.9694038
            12  |  -1.082507   .0411485   -26.31   0.000    -1.163166   -1.001847
            13  |  -1.116028   .0420912   -26.51   0.000    -1.198535    -1.03352
            14  |  -1.157425   .0433074   -26.73   0.000    -1.242317   -1.072534
            15  |  -1.167084   .0442714   -26.36   0.000    -1.253865   -1.080303
            16  |  -1.187954   .0451516   -26.31   0.000     -1.27646   -1.099448
            17  |  -1.219619   .0461799   -26.41   0.000    -1.310141   -1.129097
            18  |  -1.260126   .0466697   -27.00   0.000    -1.351608   -1.168644
            19  |  -1.283642   .0473772   -27.09   0.000    -1.376511   -1.190773
            20  |  -1.307513   .0478153   -27.35   0.000     -1.40124   -1.213785
            21  |  -1.334059   .0485142   -27.50   0.000    -1.429157   -1.238961
            22  |  -1.359415   .0493034   -27.57   0.000     -1.45606    -1.26277
            23  |  -1.367544   .0496996   -27.52   0.000    -1.464966   -1.270123
            24  |  -1.375412   .0505777   -27.19   0.000    -1.474554   -1.276269
            25  |  -1.359421   .0510547   -26.63   0.000    -1.459498   -1.259343
            26  |    .445341   .0696377     6.40   0.000      .308837     .581845
            27  |   .2848418   .0676364     4.21   0.000     .1522607    .4174229
            28  |   .1748466   .0653662     2.67   0.007     .0467157    .3029776
            29  |   .0624995   .0641143     0.97   0.330    -.0631776    .1881766
            30  |  -.0440681   .0628994    -0.70   0.484    -.1673636    .0792273
            31  |  -.1365499   .0619171    -2.21   0.027      -.25792   -.0151798
            32  |     -.2042   .0608255    -3.36   0.001    -.3234303   -.0849696
            33  |  -.2941056   .0604367    -4.87   0.000    -.4125737   -.1756374
            34  |  -.3665751   .0601361    -6.10   0.000    -.4844542   -.2486961
            35  |  -.4267388   .0605785    -7.04   0.000     -.545485   -.3079926
            36  |  -.4976866   .0611392    -8.14   0.000    -.6175319   -.3778414
            37  |  -.5433324   .0611003    -8.89   0.000    -.6631013   -.4235635
            38  |  -.6004884   .0614883    -9.77   0.000    -.7210179    -.479959
            39  |  -.6366242   .0618287   -10.30   0.000     -.757821   -.5154274
            40  |   -.652328   .0624599   -10.44   0.000    -.7747621    -.529894
            41  |  -.6735542   .0627384   -10.74   0.000    -.7965341   -.5505743
            42  |  -.6982844   .0632483   -11.04   0.000    -.8222639   -.5743048
            43  |  -.7913215   .0644315   -12.28   0.000    -.9176203   -.6650227
            44  |  -.8102014    .065498   -12.37   0.000    -.9385908    -.681812
            45  |  -.7982257   .0659364   -12.11   0.000    -.9274744    -.668977
            46  |  -.8082441   .0668577   -12.09   0.000    -.9392987   -.6771895
            47  |  -.8085828   .0675574   -11.97   0.000    -.9410089   -.6761566
            48  |  -.7972819   .0678486   -11.75   0.000     -.930279   -.6642849
            49  |  -.7939337    .069076   -11.49   0.000    -.9293366   -.6585308
            50  |  -.7823151   .0691072   -11.32   0.000    -.9177791   -.6468511
                |
        age_cat |
             2  |   .4002075   .0191098    20.94   0.000     .3627484    .4376666
             3  |   .6809236    .021972    30.99   0.000      .637854    .7239933
             4  |   1.054176   .0254986    41.34   0.000     1.004193    1.104158
             5  |    1.43725   .0306564    46.88   0.000     1.377157    1.497343
             6  |   1.755085   .0369975    47.44   0.000     1.682563    1.827608
                |
          _cons |   3.205021   .0366849    87.37   0.000     3.133112    3.276931
----------------+----------------------------------------------------------------
        sigma_u |  .98955031
        sigma_e |  .78900225
            rho |  .61134345   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    421,477
Group variable: id                              Number of groups  =      9,641

R-sq:                                           Obs per group:
     within  = 0.1995                                         min =          1
     between = 0.1060                                         avg =       43.7
     overall = 0.0761                                         max =      3,984

                                                F(59,9640)        =      92.65
corr(u_i, Xb)  = 0.0626                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,641 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0469311   .0608554     0.77   0.441    -.0723582    .1662204
during_domestic |  -.0982406   .0136854    -7.18   0.000    -.1250669   -.0714142
 after_domestic |  -.1763213   .0188007    -9.38   0.000    -.2131746   -.1394681
   during_expat |  -.1020166    .047788    -2.13   0.033     -.195691   -.0083421
    after_expat |  -.1877829   .0442092    -4.25   0.000    -.2744423   -.1011236
                |
       ind_year |
             2  |  -.1189534   .0309551    -3.84   0.000    -.1796318   -.0582749
             3  |   .2401583    .037124     6.47   0.000     .1673874    .3129292
             4  |   .2697451   .0403489     6.69   0.000     .1906528    .3488375
             5  |   .3233105     .04387     7.37   0.000     .2373161    .4093048
             6  |   .4461232   .0464975     9.59   0.000     .3549784    .5372681
             7  |   .5928608   .0492926    12.03   0.000     .4962369    .6894846
             8  |   .6640375   .0518997    12.79   0.000     .5623032    .7657717
             9  |   .7242977   .0544289    13.31   0.000     .6176057    .8309897
            10  |   .7881422   .0567603    13.89   0.000       .67688    .8994044
            11  |   .8512142   .0588991    14.45   0.000     .7357596    .9666688
            12  |   .8989249   .0609857    14.74   0.000     .7793801     1.01847
            13  |   .9510416   .0624823    15.22   0.000     .8285631     1.07352
            14  |   .9476654   .0640623    14.79   0.000     .8220897    1.073241
            15  |   .9271524   .0652984    14.20   0.000     .7991537    1.055151
            16  |   .9655101   .0668776    14.44   0.000     .8344159    1.096604
            17  |   .9950702    .067875    14.66   0.000     .8620209     1.12812
            18  |   .9869394   .0689052    14.32   0.000     .8518707    1.122008
            19  |    .932359   .0697093    13.37   0.000     .7957142    1.069004
            20  |   .9121561   .0705952    12.92   0.000     .7737747    1.050538
            21  |   .9335202   .0713415    13.09   0.000     .7936758    1.073365
            22  |   .9440266   .0727105    12.98   0.000     .8014987    1.086555
            23  |   1.046064   .0738812    14.16   0.000     .9012409    1.190886
            24  |   .7499198   .0792718     9.46   0.000     .5945304    .9053091
            25  |   .7690727   .0864917     8.89   0.000     .5995309    .9386145
            26  |   .7551561    .094097     8.03   0.000     .5707063    .9396059
            27  |   .6556488   .0887444     7.39   0.000     .4816911    .8296065
            28  |   .8010049   .0826676     9.69   0.000      .638959    .9630508
            29  |    .797191   .0810668     9.83   0.000      .638283    .9560989
            30  |   .8156388   .0804522    10.14   0.000     .6579356     .973342
            31  |    .864583    .079465    10.88   0.000      .708815    1.020351
            32  |   1.032782   .0777313    13.29   0.000     .8804126    1.185152
            33  |   1.049996   .0779723    13.47   0.000     .8971539    1.202838
            34  |   1.083944   .0783215    13.84   0.000     .9304177    1.237471
            35  |   1.112405   .0791182    14.06   0.000     .9573168    1.267493
            36  |   1.191388   .0800319    14.89   0.000     1.034509    1.348268
            37  |   1.257771   .0811574    15.50   0.000     1.098685    1.416857
            38  |   1.270227   .0815932    15.57   0.000     1.110287    1.430167
            39  |   1.267088   .0824926    15.36   0.000     1.105385    1.428791
            40  |   1.273127   .0837084    15.21   0.000     1.109041    1.437213
            41  |   1.332707   .0851302    15.65   0.000     1.165834    1.499581
            42  |   1.387595   .0856613    16.20   0.000     1.219681    1.555509
            43  |   1.343152   .0871307    15.42   0.000     1.172358    1.513947
            44  |   1.326858   .0877338    15.12   0.000     1.154881    1.498835
            45  |   1.371172   .0884394    15.50   0.000     1.197813    1.544532
            46  |   1.369817   .0892208    15.35   0.000     1.194925    1.544708
            47  |   1.417312   .0905027    15.66   0.000     1.239908    1.594717
            48  |    1.48336   .0914468    16.22   0.000     1.304105    1.662615
            49  |   1.402514   .0998772    14.04   0.000     1.206733    1.598294
            50  |   1.546432   .1047153    14.77   0.000     1.341168    1.751696
                |
        age_cat |
             2  |   .4602435   .0321113    14.33   0.000     .3972986    .5231885
             3  |     .77284    .035936    21.51   0.000     .7023979    .8432821
             4  |   1.177346   .0398426    29.55   0.000     1.099246    1.255446
             5  |   1.521479   .0461062    33.00   0.000     1.431101    1.611857
             6  |   1.812997    .054658    33.17   0.000     1.705856    1.920138
                |
          _cons |   7.683378     .05583   137.62   0.000     7.573939    7.792816
----------------+----------------------------------------------------------------
        sigma_u |  1.7263736
        sigma_e |  1.0662553
            rho |  .72387007   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .199493113538135

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    421,477
Group variable: id                              Number of groups  =      9,641

R-sq:                                           Obs per group:
     within  = 0.1995                                         min =          1
     between = 0.1060                                         avg =       43.7
     overall = 0.0761                                         max =      3,984

                                                F(59,9640)        =      92.65
corr(u_i, Xb)  = 0.0626                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,641 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0469311   .0608554     0.77   0.441    -.0723582    .1662204
during_domestic |  -.0982406   .0136854    -7.18   0.000    -.1250669   -.0714142
 after_domestic |  -.1763213   .0188007    -9.38   0.000    -.2131746   -.1394681
   during_expat |  -.1020166    .047788    -2.13   0.033     -.195691   -.0083421
    after_expat |  -.1877829   .0442092    -4.25   0.000    -.2744423   -.1011236
                |
       ind_year |
             2  |  -.1189534   .0309551    -3.84   0.000    -.1796318   -.0582749
             3  |   .2401583    .037124     6.47   0.000     .1673874    .3129292
             4  |   .2697451   .0403489     6.69   0.000     .1906528    .3488375
             5  |   .3233105     .04387     7.37   0.000     .2373161    .4093048
             6  |   .4461232   .0464975     9.59   0.000     .3549784    .5372681
             7  |   .5928608   .0492926    12.03   0.000     .4962369    .6894846
             8  |   .6640375   .0518997    12.79   0.000     .5623032    .7657717
             9  |   .7242977   .0544289    13.31   0.000     .6176057    .8309897
            10  |   .7881422   .0567603    13.89   0.000       .67688    .8994044
            11  |   .8512142   .0588991    14.45   0.000     .7357596    .9666688
            12  |   .8989249   .0609857    14.74   0.000     .7793801     1.01847
            13  |   .9510416   .0624823    15.22   0.000     .8285631     1.07352
            14  |   .9476654   .0640623    14.79   0.000     .8220897    1.073241
            15  |   .9271524   .0652984    14.20   0.000     .7991537    1.055151
            16  |   .9655101   .0668776    14.44   0.000     .8344159    1.096604
            17  |   .9950702    .067875    14.66   0.000     .8620209     1.12812
            18  |   .9869394   .0689052    14.32   0.000     .8518707    1.122008
            19  |    .932359   .0697093    13.37   0.000     .7957142    1.069004
            20  |   .9121561   .0705952    12.92   0.000     .7737747    1.050538
            21  |   .9335202   .0713415    13.09   0.000     .7936758    1.073365
            22  |   .9440266   .0727105    12.98   0.000     .8014987    1.086555
            23  |   1.046064   .0738812    14.16   0.000     .9012409    1.190886
            24  |   .7499198   .0792718     9.46   0.000     .5945304    .9053091
            25  |   .7690727   .0864917     8.89   0.000     .5995309    .9386145
            26  |   .7551561    .094097     8.03   0.000     .5707063    .9396059
            27  |   .6556488   .0887444     7.39   0.000     .4816911    .8296065
            28  |   .8010049   .0826676     9.69   0.000      .638959    .9630508
            29  |    .797191   .0810668     9.83   0.000      .638283    .9560989
            30  |   .8156388   .0804522    10.14   0.000     .6579356     .973342
            31  |    .864583    .079465    10.88   0.000      .708815    1.020351
            32  |   1.032782   .0777313    13.29   0.000     .8804126    1.185152
            33  |   1.049996   .0779723    13.47   0.000     .8971539    1.202838
            34  |   1.083944   .0783215    13.84   0.000     .9304177    1.237471
            35  |   1.112405   .0791182    14.06   0.000     .9573168    1.267493
            36  |   1.191388   .0800319    14.89   0.000     1.034509    1.348268
            37  |   1.257771   .0811574    15.50   0.000     1.098685    1.416857
            38  |   1.270227   .0815932    15.57   0.000     1.110287    1.430167
            39  |   1.267088   .0824926    15.36   0.000     1.105385    1.428791
            40  |   1.273127   .0837084    15.21   0.000     1.109041    1.437213
            41  |   1.332707   .0851302    15.65   0.000     1.165834    1.499581
            42  |   1.387595   .0856613    16.20   0.000     1.219681    1.555509
            43  |   1.343152   .0871307    15.42   0.000     1.172358    1.513947
            44  |   1.326858   .0877338    15.12   0.000     1.154881    1.498835
            45  |   1.371172   .0884394    15.50   0.000     1.197813    1.544532
            46  |   1.369817   .0892208    15.35   0.000     1.194925    1.544708
            47  |   1.417312   .0905027    15.66   0.000     1.239908    1.594717
            48  |    1.48336   .0914468    16.22   0.000     1.304105    1.662615
            49  |   1.402514   .0998772    14.04   0.000     1.206733    1.598294
            50  |   1.546432   .1047153    14.77   0.000     1.341168    1.751696
                |
        age_cat |
             2  |   .4602435   .0321113    14.33   0.000     .3972986    .5231885
             3  |     .77284    .035936    21.51   0.000     .7023979    .8432821
             4  |   1.177346   .0398426    29.55   0.000     1.099246    1.255446
             5  |   1.521479   .0461062    33.00   0.000     1.431101    1.611857
             6  |   1.812997    .054658    33.17   0.000     1.705856    1.920138
                |
          _cons |   7.683378     .05583   137.62   0.000     7.573939    7.792816
----------------+----------------------------------------------------------------
        sigma_u |  1.7263736
        sigma_e |  1.0662553
            rho |  .72387007   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    457,999
Group variable: id                              Number of groups  =      9,943

R-sq:                                           Obs per group:
     within  = 0.2499                                         min =          1
     between = 0.0605                                         avg =       46.1
     overall = 0.0983                                         max =      4,150

                                                F(59,9942)        =     155.12
corr(u_i, Xb)  = 0.0486                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,943 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .1117395   .0437278     2.56   0.011     .0260242    .1974548
during_domestic |  -.1039057    .011315    -9.18   0.000    -.1260855    -.081726
 after_domestic |   -.181019   .0155477   -11.64   0.000    -.2114955   -.1505424
   during_expat |   .0165366   .0422819     0.39   0.696    -.0663445    .0994178
    after_expat |   .0432649   .0387518     1.12   0.264    -.0326964    .1192262
                |
       ind_year |
             2  |  -.0068001   .0212612    -0.32   0.749    -.0484762    .0348761
             3  |   .0353698   .0257167     1.38   0.169    -.0150402    .0857797
             4  |    .104347   .0287315     3.63   0.000     .0480274    .1606665
             5  |    .167828   .0314835     5.33   0.000     .1061139    .2295421
             6  |   .2526512   .0336833     7.50   0.000      .186625    .3186774
             7  |   .3074526   .0360419     8.53   0.000     .2368033     .378102
             8  |   .3159238   .0384359     8.22   0.000     .2405817    .3912659
             9  |   .3594856   .0408391     8.80   0.000     .2794327    .4395385
            10  |   .4164256   .0432715     9.62   0.000     .3316046    .5012465
            11  |   .4255951    .044788     9.50   0.000     .3378015    .5133886
            12  |   .4190336   .0463795     9.03   0.000     .3281205    .5099468
            13  |   .4508838   .0472207     9.55   0.000     .3583216     .543446
            14  |   .4510965   .0488603     9.23   0.000     .3553204    .5468725
            15  |   .5103288    .050128    10.18   0.000     .4120679    .6085898
            16  |   .5262348   .0512926    10.26   0.000      .425691    .6267786
            17  |   .5554221   .0528989    10.50   0.000     .4517296    .6591146
            18  |   .4604724   .0534881     8.61   0.000     .3556248    .5653199
            19  |   .4728724   .0544682     8.68   0.000     .3661037     .579641
            20  |   .4942189   .0549074     9.00   0.000     .3865894    .6018485
            21  |   .4936862     .05566     8.87   0.000     .3845813    .6027911
            22  |   .5265648   .0567046     9.29   0.000     .4154123    .6377174
            23  |   .5652206   .0575192     9.83   0.000     .4524713    .6779698
            24  |   .5882996   .0580298    10.14   0.000     .4745495    .7020498
            25  |   .6038358   .0585657    10.31   0.000     .4890353    .7186364
            26  |   .1775468   .0732465     2.42   0.015     .0339688    .3211248
            27  |   .1690666   .0689952     2.45   0.014     .0338221    .3043112
            28  |   .2553115   .0659877     3.87   0.000     .1259622    .3846609
            29  |   .3755023   .0646035     5.81   0.000     .2488664    .5021382
            30  |   .4657793   .0634397     7.34   0.000     .3414246     .590134
            31  |   .5414713    .063174     8.57   0.000     .4176375    .6653052
            32  |   .6355083   .0623984    10.18   0.000     .5131948    .7578219
            33  |    .638831    .062851    10.16   0.000     .5156302    .7620317
            34  |   .7129021   .0624279    11.42   0.000     .5905308    .8352735
            35  |   .7469483   .0633362    11.79   0.000     .6227965    .8711002
            36  |   .7394655   .0634173    11.66   0.000     .6151548    .8637763
            37  |   .7609009   .0636797    11.95   0.000     .6360758     .885726
            38  |   .7937033   .0645495    12.30   0.000     .6671733    .9202334
            39  |     .81397   .0652456    12.48   0.000     .6860754    .9418647
            40  |    .901164   .0660589    13.64   0.000     .7716751    1.030653
            41  |   .9732883   .0659844    14.75   0.000     .8439455    1.102631
            42  |   1.013852   .0667351    15.19   0.000     .8830378    1.144666
            43  |     .90329   .0679882    13.29   0.000     .7700193    1.036561
            44  |   .9186222    .069832    13.15   0.000     .7817372    1.055507
            45  |   1.013977   .0703987    14.40   0.000     .8759809    1.151972
            46  |    1.01285   .0719546    14.08   0.000     .8718039    1.153895
            47  |   1.035766   .0728366    14.22   0.000     .8929914     1.17854
            48  |   1.085465   .0735462    14.76   0.000     .9412996     1.22963
            49  |    1.09492   .0751162    14.58   0.000     .9476775    1.242163
            50  |   1.123384   .0751457    14.95   0.000     .9760833    1.270685
                |
        age_cat |
             2  |   .9926448    .024997    39.71   0.000     .9436457    1.041644
             3  |   1.299631   .0273559    47.51   0.000     1.246008    1.353254
             4  |   1.658834   .0306667    54.09   0.000     1.598722    1.718947
             5  |   2.003457   .0359961    55.66   0.000     1.932898    2.074017
             6  |   2.303872    .043498    52.97   0.000     2.218608    2.389137
                |
          _cons |   10.23752   .0419564   244.00   0.000     10.15527    10.31976
----------------+----------------------------------------------------------------
        sigma_u |  1.4292241
        sigma_e |   .9024262
            rho |  .71496063   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2499060742367093

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    457,999
Group variable: id                              Number of groups  =      9,943

R-sq:                                           Obs per group:
     within  = 0.2499                                         min =          1
     between = 0.0605                                         avg =       46.1
     overall = 0.0983                                         max =      4,150

                                                F(59,9942)        =     155.12
corr(u_i, Xb)  = 0.0486                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,943 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .1117395   .0437278     2.56   0.011     .0260242    .1974548
during_domestic |  -.1039057    .011315    -9.18   0.000    -.1260855    -.081726
 after_domestic |   -.181019   .0155477   -11.64   0.000    -.2114955   -.1505424
   during_expat |   .0165366   .0422819     0.39   0.696    -.0663445    .0994178
    after_expat |   .0432649   .0387518     1.12   0.264    -.0326964    .1192262
                |
       ind_year |
             2  |  -.0068001   .0212612    -0.32   0.749    -.0484762    .0348761
             3  |   .0353698   .0257167     1.38   0.169    -.0150402    .0857797
             4  |    .104347   .0287315     3.63   0.000     .0480274    .1606665
             5  |    .167828   .0314835     5.33   0.000     .1061139    .2295421
             6  |   .2526512   .0336833     7.50   0.000      .186625    .3186774
             7  |   .3074526   .0360419     8.53   0.000     .2368033     .378102
             8  |   .3159238   .0384359     8.22   0.000     .2405817    .3912659
             9  |   .3594856   .0408391     8.80   0.000     .2794327    .4395385
            10  |   .4164256   .0432715     9.62   0.000     .3316046    .5012465
            11  |   .4255951    .044788     9.50   0.000     .3378015    .5133886
            12  |   .4190336   .0463795     9.03   0.000     .3281205    .5099468
            13  |   .4508838   .0472207     9.55   0.000     .3583216     .543446
            14  |   .4510965   .0488603     9.23   0.000     .3553204    .5468725
            15  |   .5103288    .050128    10.18   0.000     .4120679    .6085898
            16  |   .5262348   .0512926    10.26   0.000      .425691    .6267786
            17  |   .5554221   .0528989    10.50   0.000     .4517296    .6591146
            18  |   .4604724   .0534881     8.61   0.000     .3556248    .5653199
            19  |   .4728724   .0544682     8.68   0.000     .3661037     .579641
            20  |   .4942189   .0549074     9.00   0.000     .3865894    .6018485
            21  |   .4936862     .05566     8.87   0.000     .3845813    .6027911
            22  |   .5265648   .0567046     9.29   0.000     .4154123    .6377174
            23  |   .5652206   .0575192     9.83   0.000     .4524713    .6779698
            24  |   .5882996   .0580298    10.14   0.000     .4745495    .7020498
            25  |   .6038358   .0585657    10.31   0.000     .4890353    .7186364
            26  |   .1775468   .0732465     2.42   0.015     .0339688    .3211248
            27  |   .1690666   .0689952     2.45   0.014     .0338221    .3043112
            28  |   .2553115   .0659877     3.87   0.000     .1259622    .3846609
            29  |   .3755023   .0646035     5.81   0.000     .2488664    .5021382
            30  |   .4657793   .0634397     7.34   0.000     .3414246     .590134
            31  |   .5414713    .063174     8.57   0.000     .4176375    .6653052
            32  |   .6355083   .0623984    10.18   0.000     .5131948    .7578219
            33  |    .638831    .062851    10.16   0.000     .5156302    .7620317
            34  |   .7129021   .0624279    11.42   0.000     .5905308    .8352735
            35  |   .7469483   .0633362    11.79   0.000     .6227965    .8711002
            36  |   .7394655   .0634173    11.66   0.000     .6151548    .8637763
            37  |   .7609009   .0636797    11.95   0.000     .6360758     .885726
            38  |   .7937033   .0645495    12.30   0.000     .6671733    .9202334
            39  |     .81397   .0652456    12.48   0.000     .6860754    .9418647
            40  |    .901164   .0660589    13.64   0.000     .7716751    1.030653
            41  |   .9732883   .0659844    14.75   0.000     .8439455    1.102631
            42  |   1.013852   .0667351    15.19   0.000     .8830378    1.144666
            43  |     .90329   .0679882    13.29   0.000     .7700193    1.036561
            44  |   .9186222    .069832    13.15   0.000     .7817372    1.055507
            45  |   1.013977   .0703987    14.40   0.000     .8759809    1.151972
            46  |    1.01285   .0719546    14.08   0.000     .8718039    1.153895
            47  |   1.035766   .0728366    14.22   0.000     .8929914     1.17854
            48  |   1.085465   .0735462    14.76   0.000     .9412996     1.22963
            49  |    1.09492   .0751162    14.58   0.000     .9476775    1.242163
            50  |   1.123384   .0751457    14.95   0.000     .9760833    1.270685
                |
        age_cat |
             2  |   .9926448    .024997    39.71   0.000     .9436457    1.041644
             3  |   1.299631   .0273559    47.51   0.000     1.246008    1.353254
             4  |   1.658834   .0306667    54.09   0.000     1.598722    1.718947
             5  |   2.003457   .0359961    55.66   0.000     1.932898    2.074017
             6  |   2.303872    .043498    52.97   0.000     2.218608    2.389137
                |
          _cons |   10.23752   .0419564   244.00   0.000     10.15527    10.31976
----------------+----------------------------------------------------------------
        sigma_u |  1.4292241
        sigma_e |   .9024262
            rho |  .71496063   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    421,477
Group variable: id                              Number of groups  =      9,641

R-sq:                                           Obs per group:
     within  = 0.2389                                         min =          1
     between = 0.0686                                         avg =       43.7
     overall = 0.1174                                         max =      3,984

                                                F(59,9640)        =     127.79
corr(u_i, Xb)  = -0.0016                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,641 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0025962   .0506863     0.05   0.959    -.0967595    .1019519
during_domestic |  -.0208275   .0112098    -1.86   0.063    -.0428011    .0011461
 after_domestic |  -.0164174   .0148355    -1.11   0.268    -.0454981    .0126633
   during_expat |  -.0284261   .0375145    -0.76   0.449    -.1019625    .0451102
    after_expat |  -.1320319    .037212    -3.55   0.000    -.2049753   -.0590885
                |
       ind_year |
             2  |   .0807795   .0257108     3.14   0.002     .0303809    .1311782
             3  |   .6054061   .0299878    20.19   0.000     .5466237    .6641885
             4  |   .7588372   .0319636    23.74   0.000     .6961818    .8214926
             5  |   .9181365   .0340802    26.94   0.000     .8513322    .9849408
             6  |    1.15604   .0356754    32.40   0.000     1.086108    1.225971
             7  |   1.379748   .0370818    37.21   0.000      1.30706    1.452436
             8  |   1.525011   .0389815    39.12   0.000     1.448599    1.601423
             9  |   1.661092   .0403713    41.15   0.000     1.581956    1.740228
            10  |   1.789607   .0415903    43.03   0.000     1.708081    1.871133
            11  |    1.93028   .0426155    45.30   0.000     1.846744    2.013815
            12  |   2.004346   .0439564    45.60   0.000     1.918182    2.090509
            13  |   2.083805   .0448766    46.43   0.000     1.995837    2.171772
            14  |   2.114405   .0457812    46.19   0.000     2.024664    2.204145
            15  |   2.093539    .046838    44.70   0.000     2.001727    2.185351
            16  |   2.150086   .0479322    44.86   0.000     2.056129    2.244043
            17  |   2.207347    .048804    45.23   0.000      2.11168    2.303013
            18  |   2.244534    .049947    44.94   0.000     2.146627     2.34244
            19  |   2.210348   .0503945    43.86   0.000     2.111564    2.309131
            20  |   2.199108   .0514871    42.71   0.000     2.098183    2.300034
            21  |   2.244586   .0525251    42.73   0.000     2.141626    2.347546
            22  |   2.273879   .0535859    42.43   0.000     2.168839    2.378918
            23  |   2.369857   .0547405    43.29   0.000     2.262554     2.47716
            24  |   1.919024   .0628082    30.55   0.000     1.795907    2.042141
            25  |   1.932621   .0710217    27.21   0.000     1.793404    2.071838
            26  |    .364996   .0700795     5.21   0.000     .2276255    .5023665
            27  |   .4312433   .0655053     6.58   0.000     .3028391    .5596475
            28  |   .6917349   .0619578    11.16   0.000     .5702845    .8131853
            29  |   .8015489   .0603322    13.29   0.000     .6832851    .9198127
            30  |   .9225345   .0599467    15.39   0.000     .8050263    1.040043
            31  |   1.046816    .060102    17.42   0.000     .9290033    1.164628
            32  |   1.292361   .0591175    21.86   0.000     1.176479    1.408244
            33  |   1.393328   .0594952    23.42   0.000     1.276705    1.509951
            34  |   1.498092   .0599582    24.99   0.000     1.380561    1.615622
            35  |   1.581556   .0605286    26.13   0.000     1.462907    1.700204
            36  |   1.727125   .0609768    28.32   0.000     1.607597    1.846652
            37  |   1.842115   .0617889    29.81   0.000     1.720995    1.963234
            38  |   1.899961   .0619411    30.67   0.000     1.778544    2.021379
            39  |   1.936244   .0623868    31.04   0.000     1.813953    2.058536
            40  |   1.954483   .0631032    30.97   0.000     1.830787    2.078178
            41  |   2.032246   .0636593    31.92   0.000     1.907461    2.157032
            42  |   2.108072   .0638859    33.00   0.000     1.982842    2.233302
            43  |    2.15659   .0650269    33.16   0.000     2.029124    2.284056
            44  |    2.15123   .0652634    32.96   0.000       2.0233     2.27916
            45  |   2.186363   .0659231    33.17   0.000      2.05714    2.315586
            46  |   2.194642   .0664988    33.00   0.000     2.064291    2.324994
            47  |   2.240631   .0675514    33.17   0.000     2.108216    2.373046
            48  |   2.282342   .0679744    33.58   0.000     2.149098    2.415586
            49  |   2.047678   .0743355    27.55   0.000     1.901965    2.193392
            50  |   2.149049   .0790638    27.18   0.000     1.994067    2.304031
                |
        age_cat |
             2  |   .0920581   .0295908     3.11   0.002     .0340539    .1500623
             3  |   .1553666   .0322525     4.82   0.000     .0921449    .2185882
             4  |   .2233685   .0344356     6.49   0.000     .1558675    .2908695
             5  |   .2119592   .0389856     5.44   0.000     .1355391    .2883792
             6  |   .2142258    .045091     4.75   0.000      .125838    .3026135
                |
          _cons |   4.290313   .0437071    98.16   0.000     4.204637    4.375988
----------------+----------------------------------------------------------------
        sigma_u |  1.5316004
        sigma_e |  .92678863
            rho |  .73197888   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2389287707982817

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    421,477
Group variable: id                              Number of groups  =      9,641

R-sq:                                           Obs per group:
     within  = 0.2389                                         min =          1
     between = 0.0686                                         avg =       43.7
     overall = 0.1174                                         max =      3,984

                                                F(59,9640)        =     127.79
corr(u_i, Xb)  = -0.0016                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,641 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0025962   .0506863     0.05   0.959    -.0967595    .1019519
during_domestic |  -.0208275   .0112098    -1.86   0.063    -.0428011    .0011461
 after_domestic |  -.0164174   .0148355    -1.11   0.268    -.0454981    .0126633
   during_expat |  -.0284261   .0375145    -0.76   0.449    -.1019625    .0451102
    after_expat |  -.1320319    .037212    -3.55   0.000    -.2049753   -.0590885
                |
       ind_year |
             2  |   .0807795   .0257108     3.14   0.002     .0303809    .1311782
             3  |   .6054061   .0299878    20.19   0.000     .5466237    .6641885
             4  |   .7588372   .0319636    23.74   0.000     .6961818    .8214926
             5  |   .9181365   .0340802    26.94   0.000     .8513322    .9849408
             6  |    1.15604   .0356754    32.40   0.000     1.086108    1.225971
             7  |   1.379748   .0370818    37.21   0.000      1.30706    1.452436
             8  |   1.525011   .0389815    39.12   0.000     1.448599    1.601423
             9  |   1.661092   .0403713    41.15   0.000     1.581956    1.740228
            10  |   1.789607   .0415903    43.03   0.000     1.708081    1.871133
            11  |    1.93028   .0426155    45.30   0.000     1.846744    2.013815
            12  |   2.004346   .0439564    45.60   0.000     1.918182    2.090509
            13  |   2.083805   .0448766    46.43   0.000     1.995837    2.171772
            14  |   2.114405   .0457812    46.19   0.000     2.024664    2.204145
            15  |   2.093539    .046838    44.70   0.000     2.001727    2.185351
            16  |   2.150086   .0479322    44.86   0.000     2.056129    2.244043
            17  |   2.207347    .048804    45.23   0.000      2.11168    2.303013
            18  |   2.244534    .049947    44.94   0.000     2.146627     2.34244
            19  |   2.210348   .0503945    43.86   0.000     2.111564    2.309131
            20  |   2.199108   .0514871    42.71   0.000     2.098183    2.300034
            21  |   2.244586   .0525251    42.73   0.000     2.141626    2.347546
            22  |   2.273879   .0535859    42.43   0.000     2.168839    2.378918
            23  |   2.369857   .0547405    43.29   0.000     2.262554     2.47716
            24  |   1.919024   .0628082    30.55   0.000     1.795907    2.042141
            25  |   1.932621   .0710217    27.21   0.000     1.793404    2.071838
            26  |    .364996   .0700795     5.21   0.000     .2276255    .5023665
            27  |   .4312433   .0655053     6.58   0.000     .3028391    .5596475
            28  |   .6917349   .0619578    11.16   0.000     .5702845    .8131853
            29  |   .8015489   .0603322    13.29   0.000     .6832851    .9198127
            30  |   .9225345   .0599467    15.39   0.000     .8050263    1.040043
            31  |   1.046816    .060102    17.42   0.000     .9290033    1.164628
            32  |   1.292361   .0591175    21.86   0.000     1.176479    1.408244
            33  |   1.393328   .0594952    23.42   0.000     1.276705    1.509951
            34  |   1.498092   .0599582    24.99   0.000     1.380561    1.615622
            35  |   1.581556   .0605286    26.13   0.000     1.462907    1.700204
            36  |   1.727125   .0609768    28.32   0.000     1.607597    1.846652
            37  |   1.842115   .0617889    29.81   0.000     1.720995    1.963234
            38  |   1.899961   .0619411    30.67   0.000     1.778544    2.021379
            39  |   1.936244   .0623868    31.04   0.000     1.813953    2.058536
            40  |   1.954483   .0631032    30.97   0.000     1.830787    2.078178
            41  |   2.032246   .0636593    31.92   0.000     1.907461    2.157032
            42  |   2.108072   .0638859    33.00   0.000     1.982842    2.233302
            43  |    2.15659   .0650269    33.16   0.000     2.029124    2.284056
            44  |    2.15123   .0652634    32.96   0.000       2.0233     2.27916
            45  |   2.186363   .0659231    33.17   0.000      2.05714    2.315586
            46  |   2.194642   .0664988    33.00   0.000     2.064291    2.324994
            47  |   2.240631   .0675514    33.17   0.000     2.108216    2.373046
            48  |   2.282342   .0679744    33.58   0.000     2.149098    2.415586
            49  |   2.047678   .0743355    27.55   0.000     1.901965    2.193392
            50  |   2.149049   .0790638    27.18   0.000     1.994067    2.304031
                |
        age_cat |
             2  |   .0920581   .0295908     3.11   0.002     .0340539    .1500623
             3  |   .1553666   .0322525     4.82   0.000     .0921449    .2185882
             4  |   .2233685   .0344356     6.49   0.000     .1558675    .2908695
             5  |   .2119592   .0389856     5.44   0.000     .1355391    .2883792
             6  |   .2142258    .045091     4.75   0.000      .125838    .3026135
                |
          _cons |   4.290313   .0437071    98.16   0.000     4.204637    4.375988
----------------+----------------------------------------------------------------
        sigma_u |  1.5316004
        sigma_e |  .92678863
            rho |  .73197888   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    457,999
Group variable: id                              Number of groups  =      9,943

R-sq:                                           Obs per group:
     within  = 0.3657                                         min =          1
     between = 0.1328                                         avg =       46.1
     overall = 0.2039                                         max =      4,150

                                                F(59,9942)        =     274.28
corr(u_i, Xb)  = 0.0193                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,943 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0840171   .0281746     2.98   0.003     .0287891    .1392451
during_domestic |  -.0259871   .0069808    -3.72   0.000     -.039671   -.0123032
 after_domestic |  -.0071608   .0092175    -0.78   0.437     -.025229    .0109073
   during_expat |   .0883095   .0253691     3.48   0.001     .0385809    .1380381
    after_expat |   .1279051   .0243513     5.25   0.000     .0801717    .1756385
                |
       ind_year |
             2  |   .1520891   .0154279     9.86   0.000     .1218474    .1823309
             3  |   .3582128   .0178642    20.05   0.000     .3231954    .3932302
             4  |   .5556252   .0195258    28.46   0.000     .5173506    .5938997
             5  |    .721711   .0207522    34.78   0.000     .6810325    .7623896
             6  |   .9145022   .0217387    42.07   0.000     .8718901    .9571144
             7  |   1.044929    .022592    46.25   0.000     1.000644    1.089214
             8  |   1.132893   .0234922    48.22   0.000     1.086844    1.178943
             9  |   1.264855   .0243643    51.91   0.000     1.217097    1.312614
            10  |   1.388651    .025605    54.23   0.000      1.33846    1.438841
            11  |   1.473446   .0263556    55.91   0.000     1.421784    1.525109
            12  |    1.50154   .0271613    55.28   0.000     1.448299    1.554782
            13  |   1.566911   .0278695    56.22   0.000     1.512281    1.621541
            14  |   1.608522   .0286557    56.13   0.000     1.552351    1.664693
            15  |   1.677413   .0292101    57.43   0.000     1.620155     1.73467
            16  |   1.714189   .0299607    57.21   0.000      1.65546    1.772918
            17  |   1.775041   .0309904    57.28   0.000     1.714294    1.835789
            18  |   1.720599    .031193    55.16   0.000     1.659454    1.781743
            19  |   1.756514   .0321591    54.62   0.000     1.693476    1.819553
            20  |   1.801731   .0329046    54.76   0.000     1.737232    1.866231
            21  |   1.827745   .0340199    53.73   0.000     1.761059    1.894431
            22  |    1.88598   .0343757    54.86   0.000     1.818596    1.953363
            23  |   1.932765   .0349868    55.24   0.000     1.864184    2.001346
            24  |   1.963711   .0348253    56.39   0.000     1.895447    2.031976
            25  |   1.963257   .0350425    56.02   0.000     1.894566    2.031947
            26  |  -.2677942   .0413626    -6.47   0.000    -.3488732   -.1867151
            27  |  -.1157752   .0407647    -2.84   0.005    -.1956822   -.0358681
            28  |   .0804649   .0397891     2.02   0.043     .0024701    .1584597
            29  |   .3130028   .0384539     8.14   0.000     .2376254    .3883802
            30  |   .5098474   .0380591    13.40   0.000     .4352439     .584451
            31  |   .6780213    .038471    17.62   0.000     .6026103    .7534322
            32  |   .8397083   .0381845    21.99   0.000     .7648589    .9145578
            33  |   .9329365   .0383735    24.31   0.000     .8577167    1.008156
            34  |   1.079477   .0382353    28.23   0.000     1.004528    1.154426
            35  |   1.173687   .0382228    30.71   0.000     1.098763    1.248612
            36  |   1.237152   .0383457    32.26   0.000     1.161987    1.312318
            37  |   1.304233   .0386369    33.76   0.000     1.228497    1.379969
            38  |   1.394192   .0391195    35.64   0.000      1.31751    1.470874
            39  |   1.450594   .0394842    36.74   0.000     1.373197    1.527991
            40  |   1.553492   .0399931    38.84   0.000     1.475097    1.631887
            41  |   1.646842   .0393387    41.86   0.000     1.569731    1.723954
            42  |   1.712136   .0399994    42.80   0.000     1.633729    1.790543
            43  |   1.694611   .0405155    41.83   0.000     1.615193     1.77403
            44  |   1.728824   .0414675    41.69   0.000     1.647539    1.810108
            45  |   1.812202   .0416645    43.50   0.000     1.730531    1.893873
            46  |   1.821094   .0424308    42.92   0.000     1.737921    1.904267
            47  |   1.844349   .0423648    43.53   0.000     1.761305    1.927392
            48  |   1.882747    .042895    43.89   0.000     1.798664     1.96683
            49  |   1.888854   .0442172    42.72   0.000     1.802179    1.975529
            50  |   1.905699   .0438563    43.45   0.000     1.819732    1.991666
                |
        age_cat |
             2  |   .5924373   .0201253    29.44   0.000     .5529875     .631887
             3  |   .6187071   .0213108    29.03   0.000     .5769336    .6604806
             4  |   .6046585   .0227276    26.60   0.000     .5601078    .6492092
             5  |   .5662074   .0252316    22.44   0.000     .5167483    .6156665
             6  |    .548787   .0287987    19.06   0.000     .4923357    .6052383
                |
          _cons |   7.032495   .0276799   254.06   0.000     6.978237    7.086753
----------------+----------------------------------------------------------------
        sigma_u |  1.1338991
        sigma_e |  .62698213
            rho |  .76584543   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3656611549230884

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    457,999
Group variable: id                              Number of groups  =      9,943

R-sq:                                           Obs per group:
     within  = 0.3657                                         min =          1
     between = 0.1328                                         avg =       46.1
     overall = 0.2039                                         max =      4,150

                                                F(59,9942)        =     274.28
corr(u_i, Xb)  = 0.0193                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,943 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0840171   .0281746     2.98   0.003     .0287891    .1392451
during_domestic |  -.0259871   .0069808    -3.72   0.000     -.039671   -.0123032
 after_domestic |  -.0071608   .0092175    -0.78   0.437     -.025229    .0109073
   during_expat |   .0883095   .0253691     3.48   0.001     .0385809    .1380381
    after_expat |   .1279051   .0243513     5.25   0.000     .0801717    .1756385
                |
       ind_year |
             2  |   .1520891   .0154279     9.86   0.000     .1218474    .1823309
             3  |   .3582128   .0178642    20.05   0.000     .3231954    .3932302
             4  |   .5556252   .0195258    28.46   0.000     .5173506    .5938997
             5  |    .721711   .0207522    34.78   0.000     .6810325    .7623896
             6  |   .9145022   .0217387    42.07   0.000     .8718901    .9571144
             7  |   1.044929    .022592    46.25   0.000     1.000644    1.089214
             8  |   1.132893   .0234922    48.22   0.000     1.086844    1.178943
             9  |   1.264855   .0243643    51.91   0.000     1.217097    1.312614
            10  |   1.388651    .025605    54.23   0.000      1.33846    1.438841
            11  |   1.473446   .0263556    55.91   0.000     1.421784    1.525109
            12  |    1.50154   .0271613    55.28   0.000     1.448299    1.554782
            13  |   1.566911   .0278695    56.22   0.000     1.512281    1.621541
            14  |   1.608522   .0286557    56.13   0.000     1.552351    1.664693
            15  |   1.677413   .0292101    57.43   0.000     1.620155     1.73467
            16  |   1.714189   .0299607    57.21   0.000      1.65546    1.772918
            17  |   1.775041   .0309904    57.28   0.000     1.714294    1.835789
            18  |   1.720599    .031193    55.16   0.000     1.659454    1.781743
            19  |   1.756514   .0321591    54.62   0.000     1.693476    1.819553
            20  |   1.801731   .0329046    54.76   0.000     1.737232    1.866231
            21  |   1.827745   .0340199    53.73   0.000     1.761059    1.894431
            22  |    1.88598   .0343757    54.86   0.000     1.818596    1.953363
            23  |   1.932765   .0349868    55.24   0.000     1.864184    2.001346
            24  |   1.963711   .0348253    56.39   0.000     1.895447    2.031976
            25  |   1.963257   .0350425    56.02   0.000     1.894566    2.031947
            26  |  -.2677942   .0413626    -6.47   0.000    -.3488732   -.1867151
            27  |  -.1157752   .0407647    -2.84   0.005    -.1956822   -.0358681
            28  |   .0804649   .0397891     2.02   0.043     .0024701    .1584597
            29  |   .3130028   .0384539     8.14   0.000     .2376254    .3883802
            30  |   .5098474   .0380591    13.40   0.000     .4352439     .584451
            31  |   .6780213    .038471    17.62   0.000     .6026103    .7534322
            32  |   .8397083   .0381845    21.99   0.000     .7648589    .9145578
            33  |   .9329365   .0383735    24.31   0.000     .8577167    1.008156
            34  |   1.079477   .0382353    28.23   0.000     1.004528    1.154426
            35  |   1.173687   .0382228    30.71   0.000     1.098763    1.248612
            36  |   1.237152   .0383457    32.26   0.000     1.161987    1.312318
            37  |   1.304233   .0386369    33.76   0.000     1.228497    1.379969
            38  |   1.394192   .0391195    35.64   0.000      1.31751    1.470874
            39  |   1.450594   .0394842    36.74   0.000     1.373197    1.527991
            40  |   1.553492   .0399931    38.84   0.000     1.475097    1.631887
            41  |   1.646842   .0393387    41.86   0.000     1.569731    1.723954
            42  |   1.712136   .0399994    42.80   0.000     1.633729    1.790543
            43  |   1.694611   .0405155    41.83   0.000     1.615193     1.77403
            44  |   1.728824   .0414675    41.69   0.000     1.647539    1.810108
            45  |   1.812202   .0416645    43.50   0.000     1.730531    1.893873
            46  |   1.821094   .0424308    42.92   0.000     1.737921    1.904267
            47  |   1.844349   .0423648    43.53   0.000     1.761305    1.927392
            48  |   1.882747    .042895    43.89   0.000     1.798664     1.96683
            49  |   1.888854   .0442172    42.72   0.000     1.802179    1.975529
            50  |   1.905699   .0438563    43.45   0.000     1.819732    1.991666
                |
        age_cat |
             2  |   .5924373   .0201253    29.44   0.000     .5529875     .631887
             3  |   .6187071   .0213108    29.03   0.000     .5769336    .6604806
             4  |   .6046585   .0227276    26.60   0.000     .5601078    .6492092
             5  |   .5662074   .0252316    22.44   0.000     .5167483    .6156665
             6  |    .548787   .0287987    19.06   0.000     .4923357    .6052383
                |
          _cons |   7.032495   .0276799   254.06   0.000     6.978237    7.086753
----------------+----------------------------------------------------------------
        sigma_u |  1.1338991
        sigma_e |  .62698213
            rho |  .76584543   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    457,999
Group variable: id                              Number of groups  =      9,943

R-sq:                                           Obs per group:
     within  = 0.0347                                         min =          1
     between = 0.1327                                         avg =       46.1
     overall = 0.0738                                         max =      4,150

                                                F(59,9942)        =      27.62
corr(u_i, Xb)  = 0.1764                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,943 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0103998   .0130358     0.80   0.425     -.015153    .0359525
during_domestic |  -.0124286   .0031617    -3.93   0.000    -.0186261    -.006231
 after_domestic |  -.0246681   .0041784    -5.90   0.000    -.0328585   -.0164777
   during_expat |   .0207001   .0110568     1.87   0.061    -.0009735    .0423736
    after_expat |   .0068989   .0095904     0.72   0.472    -.0119002     .025698
                |
       ind_year |
             2  |  -.0152607   .0069635    -2.19   0.028    -.0289105   -.0016108
             3  |  -.0283575   .0079364    -3.57   0.000    -.0439145   -.0128005
             4  |  -.0405302   .0085621    -4.73   0.000    -.0573137   -.0237467
             5  |  -.0474182   .0089603    -5.29   0.000    -.0649822   -.0298543
             6  |  -.0544433   .0093512    -5.82   0.000    -.0727735   -.0361131
             7  |  -.0573519    .009606    -5.97   0.000    -.0761815   -.0385222
             8  |  -.0746985   .0097524    -7.66   0.000    -.0938152   -.0555818
             9  |  -.0702832   .0100027    -7.03   0.000    -.0898905   -.0506759
            10  |   -.074359   .0103156    -7.21   0.000    -.0945798   -.0541383
            11  |  -.0811339   .0107346    -7.56   0.000    -.1021759   -.0600918
            12  |  -.0821645    .010903    -7.54   0.000    -.1035365   -.0607924
            13  |  -.0787937   .0111593    -7.06   0.000    -.1006682   -.0569192
            14  |  -.0672593   .0115521    -5.82   0.000    -.0899037   -.0446149
            15  |   -.057222   .0117584    -4.87   0.000    -.0802708   -.0341732
            16  |  -.0316589   .0121568    -2.60   0.009    -.0554888   -.0078291
            17  |  -.0102579   .0123969    -0.83   0.408    -.0345584    .0140426
            18  |  -.0012047    .012859    -0.09   0.925     -.026411    .0240016
            19  |   .0009382   .0128887     0.07   0.942    -.0243262    .0262026
            20  |   .0148346   .0132647     1.12   0.263    -.0111669    .0408361
            21  |   .0090842   .0134996     0.67   0.501    -.0173776    .0355461
            22  |   .0181324     .01367     1.33   0.185    -.0086635    .0449284
            23  |   .0059765   .0137921     0.43   0.665    -.0210588    .0330117
            24  |   -.061517   .0138842    -4.43   0.000    -.0887328   -.0343011
            25  |  -.0880981   .0140109    -6.29   0.000    -.1155624   -.0606339
            26  |   .0704794   .0192343     3.66   0.000     .0327763    .1081825
            27  |   .0503064   .0180001     2.79   0.005     .0150225    .0855904
            28  |   .0617231   .0171053     3.61   0.000     .0281933    .0952529
            29  |   .0612744   .0167164     3.67   0.000     .0285069    .0940419
            30  |   .0751234    .016531     4.54   0.000     .0427193    .1075275
            31  |   .0542769   .0162363     3.34   0.001     .0224504    .0861034
            32  |    .060187   .0160023     3.76   0.000     .0288193    .0915547
            33  |   .0422186   .0160365     2.63   0.008     .0107839    .0736534
            34  |   .0446934   .0160344     2.79   0.005     .0132626    .0761241
            35  |   .0545333   .0159675     3.42   0.001     .0232338    .0858328
            36  |   .0466234   .0161754     2.88   0.004     .0149163    .0783304
            37  |   .0476034     .01619     2.94   0.003     .0158678    .0793391
            38  |   .0489896   .0162342     3.02   0.003     .0171673    .0808119
            39  |   .0492601   .0164803     2.99   0.003     .0169554    .0815648
            40  |    .060142   .0165733     3.63   0.000     .0276551     .092629
            41  |   .0754374   .0168109     4.49   0.000     .0424847    .1083901
            42  |   .0783844   .0170839     4.59   0.000     .0448966    .1118722
            43  |   .0918948   .0174345     5.27   0.000     .0577196      .12607
            44  |   .1028095   .0177832     5.78   0.000     .0679508    .1376682
            45  |    .115859   .0177326     6.53   0.000     .0810995    .1506184
            46  |   .1217559   .0180335     6.75   0.000     .0864065    .1571052
            47  |   .1362671   .0182764     7.46   0.000     .1004416    .1720926
            48  |   .1263648    .018466     6.84   0.000     .0901677    .1625619
            49  |  -.0796764   .0192636    -4.14   0.000    -.1174369   -.0419158
            50  |  -.1252688    .019467    -6.43   0.000    -.1634281   -.0871094
                |
        age_cat |
             2  |   .0548324   .0058943     9.30   0.000     .0432784    .0663865
             3  |   .0758738   .0064871    11.70   0.000     .0631578    .0885898
             4  |   .1120923   .0069247    16.19   0.000     .0985184    .1256661
             5  |   .1484979   .0082708    17.95   0.000     .1322855    .1647104
             6  |   .1753482    .009905    17.70   0.000     .1559323    .1947641
                |
          _cons |   .2037173   .0098879    20.60   0.000     .1843351    .2230996
----------------+----------------------------------------------------------------
        sigma_u |  .35501384
        sigma_e |  .29217499
            rho |  .59618828   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0347091611693734

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    457,999
Group variable: id                              Number of groups  =      9,943

R-sq:                                           Obs per group:
     within  = 0.0347                                         min =          1
     between = 0.1327                                         avg =       46.1
     overall = 0.0738                                         max =      4,150

                                                F(59,9942)        =      27.62
corr(u_i, Xb)  = 0.1764                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,943 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0103998   .0130358     0.80   0.425     -.015153    .0359525
during_domestic |  -.0124286   .0031617    -3.93   0.000    -.0186261    -.006231
 after_domestic |  -.0246681   .0041784    -5.90   0.000    -.0328585   -.0164777
   during_expat |   .0207001   .0110568     1.87   0.061    -.0009735    .0423736
    after_expat |   .0068989   .0095904     0.72   0.472    -.0119002     .025698
                |
       ind_year |
             2  |  -.0152607   .0069635    -2.19   0.028    -.0289105   -.0016108
             3  |  -.0283575   .0079364    -3.57   0.000    -.0439145   -.0128005
             4  |  -.0405302   .0085621    -4.73   0.000    -.0573137   -.0237467
             5  |  -.0474182   .0089603    -5.29   0.000    -.0649822   -.0298543
             6  |  -.0544433   .0093512    -5.82   0.000    -.0727735   -.0361131
             7  |  -.0573519    .009606    -5.97   0.000    -.0761815   -.0385222
             8  |  -.0746985   .0097524    -7.66   0.000    -.0938152   -.0555818
             9  |  -.0702832   .0100027    -7.03   0.000    -.0898905   -.0506759
            10  |   -.074359   .0103156    -7.21   0.000    -.0945798   -.0541383
            11  |  -.0811339   .0107346    -7.56   0.000    -.1021759   -.0600918
            12  |  -.0821645    .010903    -7.54   0.000    -.1035365   -.0607924
            13  |  -.0787937   .0111593    -7.06   0.000    -.1006682   -.0569192
            14  |  -.0672593   .0115521    -5.82   0.000    -.0899037   -.0446149
            15  |   -.057222   .0117584    -4.87   0.000    -.0802708   -.0341732
            16  |  -.0316589   .0121568    -2.60   0.009    -.0554888   -.0078291
            17  |  -.0102579   .0123969    -0.83   0.408    -.0345584    .0140426
            18  |  -.0012047    .012859    -0.09   0.925     -.026411    .0240016
            19  |   .0009382   .0128887     0.07   0.942    -.0243262    .0262026
            20  |   .0148346   .0132647     1.12   0.263    -.0111669    .0408361
            21  |   .0090842   .0134996     0.67   0.501    -.0173776    .0355461
            22  |   .0181324     .01367     1.33   0.185    -.0086635    .0449284
            23  |   .0059765   .0137921     0.43   0.665    -.0210588    .0330117
            24  |   -.061517   .0138842    -4.43   0.000    -.0887328   -.0343011
            25  |  -.0880981   .0140109    -6.29   0.000    -.1155624   -.0606339
            26  |   .0704794   .0192343     3.66   0.000     .0327763    .1081825
            27  |   .0503064   .0180001     2.79   0.005     .0150225    .0855904
            28  |   .0617231   .0171053     3.61   0.000     .0281933    .0952529
            29  |   .0612744   .0167164     3.67   0.000     .0285069    .0940419
            30  |   .0751234    .016531     4.54   0.000     .0427193    .1075275
            31  |   .0542769   .0162363     3.34   0.001     .0224504    .0861034
            32  |    .060187   .0160023     3.76   0.000     .0288193    .0915547
            33  |   .0422186   .0160365     2.63   0.008     .0107839    .0736534
            34  |   .0446934   .0160344     2.79   0.005     .0132626    .0761241
            35  |   .0545333   .0159675     3.42   0.001     .0232338    .0858328
            36  |   .0466234   .0161754     2.88   0.004     .0149163    .0783304
            37  |   .0476034     .01619     2.94   0.003     .0158678    .0793391
            38  |   .0489896   .0162342     3.02   0.003     .0171673    .0808119
            39  |   .0492601   .0164803     2.99   0.003     .0169554    .0815648
            40  |    .060142   .0165733     3.63   0.000     .0276551     .092629
            41  |   .0754374   .0168109     4.49   0.000     .0424847    .1083901
            42  |   .0783844   .0170839     4.59   0.000     .0448966    .1118722
            43  |   .0918948   .0174345     5.27   0.000     .0577196      .12607
            44  |   .1028095   .0177832     5.78   0.000     .0679508    .1376682
            45  |    .115859   .0177326     6.53   0.000     .0810995    .1506184
            46  |   .1217559   .0180335     6.75   0.000     .0864065    .1571052
            47  |   .1362671   .0182764     7.46   0.000     .1004416    .1720926
            48  |   .1263648    .018466     6.84   0.000     .0901677    .1625619
            49  |  -.0796764   .0192636    -4.14   0.000    -.1174369   -.0419158
            50  |  -.1252688    .019467    -6.43   0.000    -.1634281   -.0871094
                |
        age_cat |
             2  |   .0548324   .0058943     9.30   0.000     .0432784    .0663865
             3  |   .0758738   .0064871    11.70   0.000     .0631578    .0885898
             4  |   .1120923   .0069247    16.19   0.000     .0985184    .1256661
             5  |   .1484979   .0082708    17.95   0.000     .1322855    .1647104
             6  |   .1753482    .009905    17.70   0.000     .1559323    .1947641
                |
          _cons |   .2037173   .0098879    20.60   0.000     .1843351    .2230996
----------------+----------------------------------------------------------------
        sigma_u |  .35501384
        sigma_e |  .29217499
            rho |  .59618828   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    384,784
Group variable: id                              Number of groups  =      9,331

R-sq:                                           Obs per group:
     within  = 0.0317                                         min =          1
     between = 0.0033                                         avg =       41.2
     overall = 0.0212                                         max =      3,652

                                                F(56,9330)        =      66.48
corr(u_i, Xb)  = -0.1377                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,331 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0233866   .0252932    -0.92   0.355    -.0729667    .0261935
during_domestic |  -.0055293   .0064594    -0.86   0.392    -.0181912    .0071325
 after_domestic |  -.0073419   .0071839    -1.02   0.307     -.021424    .0067402
   during_expat |  -.0257115   .0212381    -1.21   0.226     -.067343    .0159199
    after_expat |  -.0106129   .0130199    -0.82   0.415    -.0361348     .014909
                |
       ind_year |
             3  |  -.0439285    .027022    -1.63   0.104    -.0968975    .0090405
             4  |  -.0380557   .0270664    -1.41   0.160    -.0911117    .0150004
             5  |  -.0077458   .0271266    -0.29   0.775    -.0609198    .0454283
             6  |   .0037576   .0269477     0.14   0.889    -.0490658     .056581
             7  |   .0970319    .026852     3.61   0.000     .0443961    .1496677
             8  |  -.0018157   .0270922    -0.07   0.947    -.0549224    .0512909
             9  |   .0217724   .0271188     0.80   0.422    -.0313863    .0749311
            10  |  -.0201696   .0267035    -0.76   0.450    -.0725144    .0321752
            11  |   .0583486   .0270416     2.16   0.031      .005341    .1113561
            12  |   .0369846   .0273356     1.35   0.176     -.016599    .0905683
            13  |  -.0959724   .0276201    -3.47   0.001    -.1501138   -.0418309
            14  |  -.1716639   .0273058    -6.29   0.000    -.2251893   -.1181386
            15  |  -.0667843   .0273883    -2.44   0.015    -.1204713   -.0130972
            16  |  -.0624974   .0283817    -2.20   0.028    -.1181318    -.006863
            17  |  -.0828914   .0285446    -2.90   0.004    -.1388451   -.0269378
            18  |  -.0417669   .0283539    -1.47   0.141    -.0973467    .0138129
            19  |  -.1055836   .0285146    -3.70   0.000    -.1614784   -.0496887
            20  |  -.0362336   .0286955    -1.26   0.207     -.092483    .0200157
            21  |  -.1694182   .0289284    -5.86   0.000    -.2261242   -.1127122
            22  |    .146952   .0295733     4.97   0.000     .0889819    .2049222
            23  |  -.1203367   .0300255    -4.01   0.000    -.1791932   -.0614802
            24  |  -.5373006   .0317843   -16.90   0.000    -.5996048   -.4749965
            25  |  -.0896017   .0381284    -2.35   0.019    -.1643417   -.0148617
            27  |  -.0497072   .0406866    -1.22   0.222    -.1294618    .0300474
            28  |  -.2902827   .0382537    -7.59   0.000    -.3652684   -.2152971
            29  |  -.1037891   .0363342    -2.86   0.004    -.1750122   -.0325661
            30  |  -.2354298   .0358513    -6.57   0.000    -.3057062   -.1651534
            31  |  -.0692175   .0355164    -1.95   0.051    -.1388375    .0004025
            32  |  -.1661371   .0354872    -4.68   0.000    -.2356997   -.0965745
            33  |  -.0394458   .0348679    -1.13   0.258    -.1077946    .0289029
            34  |  -.1736982    .034528    -5.03   0.000    -.2413807   -.1060157
            35  |  -.0891021   .0348525    -2.56   0.011    -.1574205   -.0207836
            36  |  -.0787193   .0350806    -2.24   0.025    -.1474851   -.0099536
            37  |  -.1823713   .0350391    -5.20   0.000    -.2510555   -.1136871
            38  |  -.0978367   .0349104    -2.80   0.005    -.1662686   -.0294047
            39  |  -.2129804   .0352536    -6.04   0.000    -.2820852   -.1438756
            40  |  -.2039406   .0352995    -5.78   0.000    -.2731352   -.1347459
            41  |  -.2134688   .0362819    -5.88   0.000    -.2845891   -.1423484
            42  |  -.1295163   .0365598    -3.54   0.000    -.2011815   -.0578511
            43  |   -.079413   .0362795    -2.19   0.029    -.1505287   -.0082972
            44  |  -.1526014   .0371053    -4.11   0.000    -.2253359   -.0798669
            45  |   -.405029   .0362391   -11.18   0.000    -.4760654   -.3339925
            46  |  -.2535528   .0369978    -6.85   0.000    -.3260766    -.181029
            47  |  -.0467856   .0381401    -1.23   0.220    -.1215485    .0279774
            48  |  -.3556303   .0380068    -9.36   0.000    -.4301319   -.2811287
            49  |  -.8049704    .039632   -20.31   0.000    -.8826577    -.727283
            50  |  -.2594603   .0516954    -5.02   0.000    -.3607945   -.1581261
                |
        age_cat |
             3  |  -.1150131   .0219568    -5.24   0.000    -.1580532    -.071973
             4  |  -.2574432   .0202485   -12.71   0.000    -.2971346   -.2177518
             5  |  -.3532144   .0210537   -16.78   0.000    -.3944842   -.3119447
             6  |   -.419106    .022244   -18.84   0.000    -.4627091   -.3755028
                |
          _cons |   .3297685   .0284467    11.59   0.000     .2740067    .3855303
----------------+----------------------------------------------------------------
        sigma_u |  .41209984
        sigma_e |  .84477184
            rho |  .19222735   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0316716967643355

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    384,784
Group variable: id                              Number of groups  =      9,331

R-sq:                                           Obs per group:
     within  = 0.0317                                         min =          1
     between = 0.0033                                         avg =       41.2
     overall = 0.0212                                         max =      3,652

                                                F(56,9330)        =      66.48
corr(u_i, Xb)  = -0.1377                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 9,331 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0233866   .0252932    -0.92   0.355    -.0729667    .0261935
during_domestic |  -.0055293   .0064594    -0.86   0.392    -.0181912    .0071325
 after_domestic |  -.0073419   .0071839    -1.02   0.307     -.021424    .0067402
   during_expat |  -.0257115   .0212381    -1.21   0.226     -.067343    .0159199
    after_expat |  -.0106129   .0130199    -0.82   0.415    -.0361348     .014909
                |
       ind_year |
             3  |  -.0439285    .027022    -1.63   0.104    -.0968975    .0090405
             4  |  -.0380557   .0270664    -1.41   0.160    -.0911117    .0150004
             5  |  -.0077458   .0271266    -0.29   0.775    -.0609198    .0454283
             6  |   .0037576   .0269477     0.14   0.889    -.0490658     .056581
             7  |   .0970319    .026852     3.61   0.000     .0443961    .1496677
             8  |  -.0018157   .0270922    -0.07   0.947    -.0549224    .0512909
             9  |   .0217724   .0271188     0.80   0.422    -.0313863    .0749311
            10  |  -.0201696   .0267035    -0.76   0.450    -.0725144    .0321752
            11  |   .0583486   .0270416     2.16   0.031      .005341    .1113561
            12  |   .0369846   .0273356     1.35   0.176     -.016599    .0905683
            13  |  -.0959724   .0276201    -3.47   0.001    -.1501138   -.0418309
            14  |  -.1716639   .0273058    -6.29   0.000    -.2251893   -.1181386
            15  |  -.0667843   .0273883    -2.44   0.015    -.1204713   -.0130972
            16  |  -.0624974   .0283817    -2.20   0.028    -.1181318    -.006863
            17  |  -.0828914   .0285446    -2.90   0.004    -.1388451   -.0269378
            18  |  -.0417669   .0283539    -1.47   0.141    -.0973467    .0138129
            19  |  -.1055836   .0285146    -3.70   0.000    -.1614784   -.0496887
            20  |  -.0362336   .0286955    -1.26   0.207     -.092483    .0200157
            21  |  -.1694182   .0289284    -5.86   0.000    -.2261242   -.1127122
            22  |    .146952   .0295733     4.97   0.000     .0889819    .2049222
            23  |  -.1203367   .0300255    -4.01   0.000    -.1791932   -.0614802
            24  |  -.5373006   .0317843   -16.90   0.000    -.5996048   -.4749965
            25  |  -.0896017   .0381284    -2.35   0.019    -.1643417   -.0148617
            27  |  -.0497072   .0406866    -1.22   0.222    -.1294618    .0300474
            28  |  -.2902827   .0382537    -7.59   0.000    -.3652684   -.2152971
            29  |  -.1037891   .0363342    -2.86   0.004    -.1750122   -.0325661
            30  |  -.2354298   .0358513    -6.57   0.000    -.3057062   -.1651534
            31  |  -.0692175   .0355164    -1.95   0.051    -.1388375    .0004025
            32  |  -.1661371   .0354872    -4.68   0.000    -.2356997   -.0965745
            33  |  -.0394458   .0348679    -1.13   0.258    -.1077946    .0289029
            34  |  -.1736982    .034528    -5.03   0.000    -.2413807   -.1060157
            35  |  -.0891021   .0348525    -2.56   0.011    -.1574205   -.0207836
            36  |  -.0787193   .0350806    -2.24   0.025    -.1474851   -.0099536
            37  |  -.1823713   .0350391    -5.20   0.000    -.2510555   -.1136871
            38  |  -.0978367   .0349104    -2.80   0.005    -.1662686   -.0294047
            39  |  -.2129804   .0352536    -6.04   0.000    -.2820852   -.1438756
            40  |  -.2039406   .0352995    -5.78   0.000    -.2731352   -.1347459
            41  |  -.2134688   .0362819    -5.88   0.000    -.2845891   -.1423484
            42  |  -.1295163   .0365598    -3.54   0.000    -.2011815   -.0578511
            43  |   -.079413   .0362795    -2.19   0.029    -.1505287   -.0082972
            44  |  -.1526014   .0371053    -4.11   0.000    -.2253359   -.0798669
            45  |   -.405029   .0362391   -11.18   0.000    -.4760654   -.3339925
            46  |  -.2535528   .0369978    -6.85   0.000    -.3260766    -.181029
            47  |  -.0467856   .0381401    -1.23   0.220    -.1215485    .0279774
            48  |  -.3556303   .0380068    -9.36   0.000    -.4301319   -.2811287
            49  |  -.8049704    .039632   -20.31   0.000    -.8826577    -.727283
            50  |  -.2594603   .0516954    -5.02   0.000    -.3607945   -.1581261
                |
        age_cat |
             3  |  -.1150131   .0219568    -5.24   0.000    -.1580532    -.071973
             4  |  -.2574432   .0202485   -12.71   0.000    -.2971346   -.2177518
             5  |  -.3532144   .0210537   -16.78   0.000    -.3944842   -.3119447
             6  |   -.419106    .022244   -18.84   0.000    -.4627091   -.3755028
                |
          _cons |   .3297685   .0284467    11.59   0.000     .2740067    .3855303
----------------+----------------------------------------------------------------
        sigma_u |  .41209984
        sigma_e |  .84477184
            rho |  .19222735   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    117,012
Group variable: id                              Number of groups  =      3,268

R-sq:                                           Obs per group:
     within  = 0.0687                                         min =          1
     between = 0.0182                                         avg =       35.8
     overall = 0.0401                                         max =      1,475

                                                F(34,3267)        =      17.86
corr(u_i, Xb)  = 0.0393                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,268 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0151165   .0526379    -0.29   0.774    -.1183232    .0880901
during_domestic |  -.1010002   .0157133    -6.43   0.000    -.1318092   -.0701912
 after_domestic |  -.1907349   .0249088    -7.66   0.000    -.2395734   -.1418964
   during_expat |  -.1499582   .0550009    -2.73   0.006    -.2577981   -.0421184
    after_expat |  -.1362631   .0523521    -2.60   0.009    -.2389093   -.0336169
                |
       ind_year |
            27  |  -.1209613   .0236788    -5.11   0.000     -.167388   -.0745345
            28  |  -.1995173    .029528    -6.76   0.000    -.2574125    -.141622
            29  |  -.2731473   .0335168    -8.15   0.000    -.3388633   -.2074313
            30  |  -.3369383   .0376815    -8.94   0.000    -.4108202   -.2630565
            31  |  -.3954084   .0415177    -9.52   0.000    -.4768118   -.3140049
            32  |  -.4227618   .0445935    -9.48   0.000    -.5101958   -.3353278
            33  |  -.4786245   .0479015    -9.99   0.000    -.5725445   -.3847046
            34  |  -.5203102   .0509547   -10.21   0.000    -.6202165   -.4204038
            35  |  -.5604626   .0537071   -10.44   0.000    -.6657657   -.4551596
            36  |  -.6091505   .0559002   -10.90   0.000    -.7187535   -.4995475
            37  |   -.637874   .0573824   -11.12   0.000     -.750383   -.5253649
            38  |  -.6847689   .0595158   -11.51   0.000    -.8014611   -.5680768
            39  |  -.7238646    .061594   -11.75   0.000    -.8446314   -.6030979
            40  |  -.7182183   .0636997   -11.28   0.000    -.8431137   -.5933229
            41  |  -.7169223   .0647853   -11.07   0.000    -.8439463   -.5898983
            42  |  -.7437405   .0662076   -11.23   0.000    -.8735531    -.613928
            43  |  -.8456558   .0675858   -12.51   0.000    -.9781705    -.713141
            44  |  -.8515096   .0695922   -12.24   0.000    -.9879583   -.7150609
            45  |   -.830144   .0705899   -11.76   0.000     -.968549    -.691739
            46  |  -.8322843   .0720972   -11.54   0.000    -.9736445    -.690924
            47  |  -.8187288   .0730032   -11.21   0.000    -.9618654   -.6755922
            48  |  -.7942409   .0735226   -10.80   0.000     -.938396   -.6500859
            49  |  -.7680671   .0752781   -10.20   0.000    -.9156642     -.62047
            50  |  -.7497248    .075171    -9.97   0.000    -.8971119   -.6023377
                |
        age_cat |
             2  |   .3114787   .0323865     9.62   0.000     .2479788    .3749787
             3  |   .5325974   .0372465    14.30   0.000     .4595687    .6056262
             4  |   .7920171   .0443664    17.85   0.000     .7050283    .8790059
             5  |   1.050358   .0529697    19.83   0.000     .9465004    1.154215
             6  |   1.238918   .0630778    19.64   0.000     1.115242    1.362594
                |
          _cons |   3.621981    .042592    85.04   0.000     3.538471    3.705491
----------------+----------------------------------------------------------------
        sigma_u |  1.0616482
        sigma_e |   .6574087
            rho |   .7228302   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0687266990536173

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    117,012
Group variable: id                              Number of groups  =      3,268

R-sq:                                           Obs per group:
     within  = 0.0687                                         min =          1
     between = 0.0182                                         avg =       35.8
     overall = 0.0401                                         max =      1,475

                                                F(34,3267)        =      17.86
corr(u_i, Xb)  = 0.0393                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,268 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0151165   .0526379    -0.29   0.774    -.1183232    .0880901
during_domestic |  -.1010002   .0157133    -6.43   0.000    -.1318092   -.0701912
 after_domestic |  -.1907349   .0249088    -7.66   0.000    -.2395734   -.1418964
   during_expat |  -.1499582   .0550009    -2.73   0.006    -.2577981   -.0421184
    after_expat |  -.1362631   .0523521    -2.60   0.009    -.2389093   -.0336169
                |
       ind_year |
            27  |  -.1209613   .0236788    -5.11   0.000     -.167388   -.0745345
            28  |  -.1995173    .029528    -6.76   0.000    -.2574125    -.141622
            29  |  -.2731473   .0335168    -8.15   0.000    -.3388633   -.2074313
            30  |  -.3369383   .0376815    -8.94   0.000    -.4108202   -.2630565
            31  |  -.3954084   .0415177    -9.52   0.000    -.4768118   -.3140049
            32  |  -.4227618   .0445935    -9.48   0.000    -.5101958   -.3353278
            33  |  -.4786245   .0479015    -9.99   0.000    -.5725445   -.3847046
            34  |  -.5203102   .0509547   -10.21   0.000    -.6202165   -.4204038
            35  |  -.5604626   .0537071   -10.44   0.000    -.6657657   -.4551596
            36  |  -.6091505   .0559002   -10.90   0.000    -.7187535   -.4995475
            37  |   -.637874   .0573824   -11.12   0.000     -.750383   -.5253649
            38  |  -.6847689   .0595158   -11.51   0.000    -.8014611   -.5680768
            39  |  -.7238646    .061594   -11.75   0.000    -.8446314   -.6030979
            40  |  -.7182183   .0636997   -11.28   0.000    -.8431137   -.5933229
            41  |  -.7169223   .0647853   -11.07   0.000    -.8439463   -.5898983
            42  |  -.7437405   .0662076   -11.23   0.000    -.8735531    -.613928
            43  |  -.8456558   .0675858   -12.51   0.000    -.9781705    -.713141
            44  |  -.8515096   .0695922   -12.24   0.000    -.9879583   -.7150609
            45  |   -.830144   .0705899   -11.76   0.000     -.968549    -.691739
            46  |  -.8322843   .0720972   -11.54   0.000    -.9736445    -.690924
            47  |  -.8187288   .0730032   -11.21   0.000    -.9618654   -.6755922
            48  |  -.7942409   .0735226   -10.80   0.000     -.938396   -.6500859
            49  |  -.7680671   .0752781   -10.20   0.000    -.9156642     -.62047
            50  |  -.7497248    .075171    -9.97   0.000    -.8971119   -.6023377
                |
        age_cat |
             2  |   .3114787   .0323865     9.62   0.000     .2479788    .3749787
             3  |   .5325974   .0372465    14.30   0.000     .4595687    .6056262
             4  |   .7920171   .0443664    17.85   0.000     .7050283    .8790059
             5  |   1.050358   .0529697    19.83   0.000     .9465004    1.154215
             6  |   1.238918   .0630778    19.64   0.000     1.115242    1.362594
                |
          _cons |   3.621981    .042592    85.04   0.000     3.538471    3.705491
----------------+----------------------------------------------------------------
        sigma_u |  1.0616482
        sigma_e |   .6574087
            rho |   .7228302   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    108,607
Group variable: id                              Number of groups  =      3,159

R-sq:                                           Obs per group:
     within  = 0.1818                                         min =          1
     between = 0.0508                                         avg =       34.4
     overall = 0.0306                                         max =      1,416

                                                F(34,3158)        =      38.01
corr(u_i, Xb)  = -0.0189                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,159 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0953824   .0935569    -1.02   0.308    -.2788208    .0880561
during_domestic |   -.134351    .024842    -5.41   0.000    -.1830592   -.0856428
 after_domestic |   -.196423   .0340329    -5.77   0.000    -.2631518   -.1296942
   during_expat |  -.0988109   .0680561    -1.45   0.147    -.2322495    .0346277
    after_expat |  -.1284258   .0705273    -1.82   0.069    -.2667099    .0098582
                |
       ind_year |
            27  |  -.0875418    .041458    -2.11   0.035    -.1688292   -.0062544
            28  |   .0472613    .050221     0.94   0.347    -.0512077    .1457303
            29  |   .0528036   .0568813     0.93   0.353    -.0587245    .1643317
            30  |   .0770946   .0627768     1.23   0.220    -.0459928    .2001821
            31  |   .1487671   .0688617     2.16   0.031     .0137489    .2837853
            32  |   .3357906   .0738854     4.54   0.000     .1909223    .4806588
            33  |   .3638199   .0795004     4.58   0.000     .2079423    .5196975
            34  |   .4012915   .0843808     4.76   0.000     .2358447    .5667382
            35  |   .4392885   .0882045     4.98   0.000     .2663446    .6122324
            36  |   .5245238   .0923568     5.68   0.000     .3434384    .7056092
            37  |   .5854643   .0956398     6.12   0.000     .3979419    .7729867
            38  |   .5922727   .0979369     6.05   0.000     .4002463    .7842992
            39  |   .5913096   .0998207     5.92   0.000     .3955896    .7870295
            40  |   .5895562   .1026757     5.74   0.000     .3882384     .790874
            41  |   .6569674    .105849     6.21   0.000     .4494276    .8645072
            42  |   .7144575   .1083634     6.59   0.000     .5019876    .9269274
            43  |   .6601944   .1102917     5.99   0.000     .4439437    .8764451
            44  |   .6525266   .1127582     5.79   0.000     .4314397    .8736134
            45  |   .7025136   .1138054     6.17   0.000     .4793735    .9256537
            46  |   .7010064   .1149885     6.10   0.000     .4755467    .9264661
            47  |   .7792031   .1165556     6.69   0.000     .5506707    1.007735
            48  |   .8492156    .117815     7.21   0.000     .6182138    1.080217
            49  |   .7870807   .1254058     6.28   0.000     .5411956    1.032966
            50  |   .9486539   .1282602     7.40   0.000     .6971723    1.200136
                |
        age_cat |
             2  |   .4289996   .0577659     7.43   0.000     .3157371    .5422621
             3  |   .7610675   .0661862    11.50   0.000     .6312952    .8908398
             4  |   1.120427   .0749951    14.94   0.000      .973383    1.267471
             5  |    1.40768   .0874936    16.09   0.000      1.23613     1.57923
             6  |   1.642417   .1019792    16.11   0.000     1.442464    1.842369
                |
          _cons |    8.44053   .0722798   116.78   0.000      8.29881    8.582251
----------------+----------------------------------------------------------------
        sigma_u |  1.8550016
        sigma_e |  .97486554
            rho |  .78358514   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1817500593748346

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    108,607
Group variable: id                              Number of groups  =      3,159

R-sq:                                           Obs per group:
     within  = 0.1818                                         min =          1
     between = 0.0508                                         avg =       34.4
     overall = 0.0306                                         max =      1,416

                                                F(34,3158)        =      38.01
corr(u_i, Xb)  = -0.0189                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,159 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0953824   .0935569    -1.02   0.308    -.2788208    .0880561
during_domestic |   -.134351    .024842    -5.41   0.000    -.1830592   -.0856428
 after_domestic |   -.196423   .0340329    -5.77   0.000    -.2631518   -.1296942
   during_expat |  -.0988109   .0680561    -1.45   0.147    -.2322495    .0346277
    after_expat |  -.1284258   .0705273    -1.82   0.069    -.2667099    .0098582
                |
       ind_year |
            27  |  -.0875418    .041458    -2.11   0.035    -.1688292   -.0062544
            28  |   .0472613    .050221     0.94   0.347    -.0512077    .1457303
            29  |   .0528036   .0568813     0.93   0.353    -.0587245    .1643317
            30  |   .0770946   .0627768     1.23   0.220    -.0459928    .2001821
            31  |   .1487671   .0688617     2.16   0.031     .0137489    .2837853
            32  |   .3357906   .0738854     4.54   0.000     .1909223    .4806588
            33  |   .3638199   .0795004     4.58   0.000     .2079423    .5196975
            34  |   .4012915   .0843808     4.76   0.000     .2358447    .5667382
            35  |   .4392885   .0882045     4.98   0.000     .2663446    .6122324
            36  |   .5245238   .0923568     5.68   0.000     .3434384    .7056092
            37  |   .5854643   .0956398     6.12   0.000     .3979419    .7729867
            38  |   .5922727   .0979369     6.05   0.000     .4002463    .7842992
            39  |   .5913096   .0998207     5.92   0.000     .3955896    .7870295
            40  |   .5895562   .1026757     5.74   0.000     .3882384     .790874
            41  |   .6569674    .105849     6.21   0.000     .4494276    .8645072
            42  |   .7144575   .1083634     6.59   0.000     .5019876    .9269274
            43  |   .6601944   .1102917     5.99   0.000     .4439437    .8764451
            44  |   .6525266   .1127582     5.79   0.000     .4314397    .8736134
            45  |   .7025136   .1138054     6.17   0.000     .4793735    .9256537
            46  |   .7010064   .1149885     6.10   0.000     .4755467    .9264661
            47  |   .7792031   .1165556     6.69   0.000     .5506707    1.007735
            48  |   .8492156    .117815     7.21   0.000     .6182138    1.080217
            49  |   .7870807   .1254058     6.28   0.000     .5411956    1.032966
            50  |   .9486539   .1282602     7.40   0.000     .6971723    1.200136
                |
        age_cat |
             2  |   .4289996   .0577659     7.43   0.000     .3157371    .5422621
             3  |   .7610675   .0661862    11.50   0.000     .6312952    .8908398
             4  |   1.120427   .0749951    14.94   0.000      .973383    1.267471
             5  |    1.40768   .0874936    16.09   0.000      1.23613     1.57923
             6  |   1.642417   .1019792    16.11   0.000     1.442464    1.842369
                |
          _cons |    8.44053   .0722798   116.78   0.000      8.29881    8.582251
----------------+----------------------------------------------------------------
        sigma_u |  1.8550016
        sigma_e |  .97486554
            rho |  .78358514   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    117,012
Group variable: id                              Number of groups  =      3,268

R-sq:                                           Obs per group:
     within  = 0.3179                                         min =          1
     between = 0.0987                                         avg =       35.8
     overall = 0.0863                                         max =      1,475

                                                F(34,3267)        =      97.25
corr(u_i, Xb)  = 0.0266                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,268 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0337764   .0603742     0.56   0.576    -.0845987    .1521515
during_domestic |  -.1528745    .017875    -8.55   0.000    -.1879219   -.1178271
 after_domestic |  -.1914264    .026098    -7.33   0.000    -.2425964   -.1402564
   during_expat |  -.0280422   .0630923    -0.44   0.657    -.1517466    .0956623
    after_expat |   .0281309   .0630285     0.45   0.655    -.0954485    .1517103
                |
       ind_year |
            27  |   .0465667   .0298612     1.56   0.119    -.0119818    .1051153
            28  |   .1689363   .0356028     4.75   0.000     .0991302    .2387424
            29  |   .3299982   .0404881     8.15   0.000     .2506136    .4093828
            30  |   .4464586   .0442174    10.10   0.000     .3597619    .5331553
            31  |   .5471107   .0483297    11.32   0.000     .4523512    .6418702
            32  |   .6623156   .0519447    12.75   0.000     .5604681    .7641631
            33  |   .6818431   .0558489    12.21   0.000     .5723407    .7913455
            34  |   .7798776   .0591572    13.18   0.000     .6638887    .8958665
            35  |   .8311343   .0630145    13.19   0.000     .7075824    .9546862
            36  |   .8267632   .0658996    12.55   0.000     .6975546    .9559718
            37  |   .8547415   .0682705    12.52   0.000     .7208842    .9885988
            38  |   .8877331   .0708231    12.53   0.000      .748871    1.026595
            39  |   .8914953   .0735286    12.12   0.000     .7473284    1.035662
            40  |   .9999163   .0762254    13.12   0.000     .8504618    1.149371
            41  |   1.086997   .0761053    14.28   0.000     .9377784    1.236216
            42  |   1.121847   .0786571    14.26   0.000     .9676245    1.276069
            43  |   .9914438   .0800296    12.39   0.000     .8345306    1.148357
            44  |   1.015485   .0829173    12.25   0.000     .8529098     1.17806
            45  |   1.131434   .0838406    13.50   0.000     .9670483    1.295819
            46  |   1.131467   .0865928    13.07   0.000     .9616853    1.301249
            47  |   1.178372   .0876307    13.45   0.000     1.006555    1.350188
            48  |   1.252746   .0893531    14.02   0.000     1.077552     1.42794
            49  |    1.28149   .0915995    13.99   0.000     1.101892    1.461089
            50  |   1.328775    .091281    14.56   0.000     1.149801    1.507749
                |
        age_cat |
             2  |   .9095698   .0424931    21.41   0.000     .8262541    .9928856
             3  |   1.148615   .0462233    24.85   0.000     1.057985    1.239244
             4  |   1.406117   .0529012    26.58   0.000     1.302394     1.50984
             5  |   1.669181   .0621028    26.88   0.000     1.547417    1.790945
             6  |   1.893975   .0743163    25.49   0.000     1.748264    2.039686
                |
          _cons |   10.31264    .051552   200.04   0.000     10.21157    10.41372
----------------+----------------------------------------------------------------
        sigma_u |  1.4683797
        sigma_e |   .7551187
            rho |  .79085383   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3179138242315211

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    117,012
Group variable: id                              Number of groups  =      3,268

R-sq:                                           Obs per group:
     within  = 0.3179                                         min =          1
     between = 0.0987                                         avg =       35.8
     overall = 0.0863                                         max =      1,475

                                                F(34,3267)        =      97.25
corr(u_i, Xb)  = 0.0266                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,268 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0337764   .0603742     0.56   0.576    -.0845987    .1521515
during_domestic |  -.1528745    .017875    -8.55   0.000    -.1879219   -.1178271
 after_domestic |  -.1914264    .026098    -7.33   0.000    -.2425964   -.1402564
   during_expat |  -.0280422   .0630923    -0.44   0.657    -.1517466    .0956623
    after_expat |   .0281309   .0630285     0.45   0.655    -.0954485    .1517103
                |
       ind_year |
            27  |   .0465667   .0298612     1.56   0.119    -.0119818    .1051153
            28  |   .1689363   .0356028     4.75   0.000     .0991302    .2387424
            29  |   .3299982   .0404881     8.15   0.000     .2506136    .4093828
            30  |   .4464586   .0442174    10.10   0.000     .3597619    .5331553
            31  |   .5471107   .0483297    11.32   0.000     .4523512    .6418702
            32  |   .6623156   .0519447    12.75   0.000     .5604681    .7641631
            33  |   .6818431   .0558489    12.21   0.000     .5723407    .7913455
            34  |   .7798776   .0591572    13.18   0.000     .6638887    .8958665
            35  |   .8311343   .0630145    13.19   0.000     .7075824    .9546862
            36  |   .8267632   .0658996    12.55   0.000     .6975546    .9559718
            37  |   .8547415   .0682705    12.52   0.000     .7208842    .9885988
            38  |   .8877331   .0708231    12.53   0.000      .748871    1.026595
            39  |   .8914953   .0735286    12.12   0.000     .7473284    1.035662
            40  |   .9999163   .0762254    13.12   0.000     .8504618    1.149371
            41  |   1.086997   .0761053    14.28   0.000     .9377784    1.236216
            42  |   1.121847   .0786571    14.26   0.000     .9676245    1.276069
            43  |   .9914438   .0800296    12.39   0.000     .8345306    1.148357
            44  |   1.015485   .0829173    12.25   0.000     .8529098     1.17806
            45  |   1.131434   .0838406    13.50   0.000     .9670483    1.295819
            46  |   1.131467   .0865928    13.07   0.000     .9616853    1.301249
            47  |   1.178372   .0876307    13.45   0.000     1.006555    1.350188
            48  |   1.252746   .0893531    14.02   0.000     1.077552     1.42794
            49  |    1.28149   .0915995    13.99   0.000     1.101892    1.461089
            50  |   1.328775    .091281    14.56   0.000     1.149801    1.507749
                |
        age_cat |
             2  |   .9095698   .0424931    21.41   0.000     .8262541    .9928856
             3  |   1.148615   .0462233    24.85   0.000     1.057985    1.239244
             4  |   1.406117   .0529012    26.58   0.000     1.302394     1.50984
             5  |   1.669181   .0621028    26.88   0.000     1.547417    1.790945
             6  |   1.893975   .0743163    25.49   0.000     1.748264    2.039686
                |
          _cons |   10.31264    .051552   200.04   0.000     10.21157    10.41372
----------------+----------------------------------------------------------------
        sigma_u |  1.4683797
        sigma_e |   .7551187
            rho |  .79085383   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    108,607
Group variable: id                              Number of groups  =      3,159

R-sq:                                           Obs per group:
     within  = 0.2123                                         min =          1
     between = 0.1004                                         avg =       34.4
     overall = 0.0999                                         max =      1,416

                                                F(34,3158)        =      47.59
corr(u_i, Xb)  = 0.0006                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,159 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.1000982    .082168    -1.22   0.223    -.2612064      .06101
during_domestic |  -.0419226   .0204356    -2.05   0.040    -.0819909   -.0018542
 after_domestic |  -.0137678   .0270277    -0.51   0.611    -.0667614    .0392258
   during_expat |   .0458646   .0510973     0.90   0.369    -.0543226    .1460518
    after_expat |  -.0209545   .0496712    -0.42   0.673    -.1183456    .0764367
                |
       ind_year |
            27  |   .0442872   .0353583     1.25   0.210    -.0250403    .1136148
            28  |    .271821   .0424278     6.41   0.000     .1886322    .3550099
            29  |   .3571478   .0465678     7.67   0.000     .2658416    .4484539
            30  |   .4364906   .0509039     8.57   0.000     .3366826    .5362987
            31  |   .5554493   .0552354    10.06   0.000     .4471485    .6637502
            32  |   .7790973   .0587845    13.25   0.000     .6638376    .8943569
            33  |    .862015   .0629399    13.70   0.000     .7386079    .9854222
            34  |   .9388577   .0669875    14.02   0.000     .8075142    1.070201
            35  |    1.01562   .0698041    14.55   0.000     .8787545    1.152487
            36  |   1.145304   .0726178    15.77   0.000     1.002921    1.287686
            37  |   1.238843   .0754769    16.41   0.000     1.090855    1.386832
            38  |    1.28026   .0768748    16.65   0.000      1.12953    1.430989
            39  |   1.318594   .0780876    16.89   0.000     1.165487    1.471702
            40  |   1.309127   .0798513    16.39   0.000     1.152561    1.465692
            41  |   1.380046   .0817329    16.88   0.000     1.219791    1.540301
            42  |   1.458131   .0839162    17.38   0.000     1.293595    1.622667
            43  |   1.508766   .0861534    17.51   0.000     1.339844    1.677688
            44  |   1.497575   .0877522    17.07   0.000     1.325518    1.669632
            45  |   1.528034   .0884944    17.27   0.000     1.354522    1.701547
            46  |    1.52605   .0894728    17.06   0.000     1.350619    1.701481
            47  |    1.59914    .089885    17.79   0.000     1.422901    1.775379
            48  |   1.627025   .0906314    17.95   0.000     1.449323    1.804728
            49  |   1.384974   .0977848    14.16   0.000     1.193246    1.576702
            50  |   1.504899   .1001709    15.02   0.000     1.308493    1.701306
                |
        age_cat |
             2  |   .1528601   .0550489     2.78   0.006     .0449249    .2607953
             3  |   .2635853   .0618036     4.26   0.000      .142406    .3847647
             4  |   .3866427   .0670787     5.76   0.000     .2551205    .5181649
             5  |   .4298296   .0757283     5.68   0.000     .2813479    .5783112
             6  |   .4929704   .0860523     5.73   0.000     .3242463    .6616946
                |
          _cons |   4.685591   .0634646    73.83   0.000     4.561155    4.810027
----------------+----------------------------------------------------------------
        sigma_u |  1.4949735
        sigma_e |  .83724464
            rho |  .76124093   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2122912907900876

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    108,607
Group variable: id                              Number of groups  =      3,159

R-sq:                                           Obs per group:
     within  = 0.2123                                         min =          1
     between = 0.1004                                         avg =       34.4
     overall = 0.0999                                         max =      1,416

                                                F(34,3158)        =      47.59
corr(u_i, Xb)  = 0.0006                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,159 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.1000982    .082168    -1.22   0.223    -.2612064      .06101
during_domestic |  -.0419226   .0204356    -2.05   0.040    -.0819909   -.0018542
 after_domestic |  -.0137678   .0270277    -0.51   0.611    -.0667614    .0392258
   during_expat |   .0458646   .0510973     0.90   0.369    -.0543226    .1460518
    after_expat |  -.0209545   .0496712    -0.42   0.673    -.1183456    .0764367
                |
       ind_year |
            27  |   .0442872   .0353583     1.25   0.210    -.0250403    .1136148
            28  |    .271821   .0424278     6.41   0.000     .1886322    .3550099
            29  |   .3571478   .0465678     7.67   0.000     .2658416    .4484539
            30  |   .4364906   .0509039     8.57   0.000     .3366826    .5362987
            31  |   .5554493   .0552354    10.06   0.000     .4471485    .6637502
            32  |   .7790973   .0587845    13.25   0.000     .6638376    .8943569
            33  |    .862015   .0629399    13.70   0.000     .7386079    .9854222
            34  |   .9388577   .0669875    14.02   0.000     .8075142    1.070201
            35  |    1.01562   .0698041    14.55   0.000     .8787545    1.152487
            36  |   1.145304   .0726178    15.77   0.000     1.002921    1.287686
            37  |   1.238843   .0754769    16.41   0.000     1.090855    1.386832
            38  |    1.28026   .0768748    16.65   0.000      1.12953    1.430989
            39  |   1.318594   .0780876    16.89   0.000     1.165487    1.471702
            40  |   1.309127   .0798513    16.39   0.000     1.152561    1.465692
            41  |   1.380046   .0817329    16.88   0.000     1.219791    1.540301
            42  |   1.458131   .0839162    17.38   0.000     1.293595    1.622667
            43  |   1.508766   .0861534    17.51   0.000     1.339844    1.677688
            44  |   1.497575   .0877522    17.07   0.000     1.325518    1.669632
            45  |   1.528034   .0884944    17.27   0.000     1.354522    1.701547
            46  |    1.52605   .0894728    17.06   0.000     1.350619    1.701481
            47  |    1.59914    .089885    17.79   0.000     1.422901    1.775379
            48  |   1.627025   .0906314    17.95   0.000     1.449323    1.804728
            49  |   1.384974   .0977848    14.16   0.000     1.193246    1.576702
            50  |   1.504899   .1001709    15.02   0.000     1.308493    1.701306
                |
        age_cat |
             2  |   .1528601   .0550489     2.78   0.006     .0449249    .2607953
             3  |   .2635853   .0618036     4.26   0.000      .142406    .3847647
             4  |   .3866427   .0670787     5.76   0.000     .2551205    .5181649
             5  |   .4298296   .0757283     5.68   0.000     .2813479    .5783112
             6  |   .4929704   .0860523     5.73   0.000     .3242463    .6616946
                |
          _cons |   4.685591   .0634646    73.83   0.000     4.561155    4.810027
----------------+----------------------------------------------------------------
        sigma_u |  1.4949735
        sigma_e |  .83724464
            rho |  .76124093   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    117,012
Group variable: id                              Number of groups  =      3,268

R-sq:                                           Obs per group:
     within  = 0.4825                                         min =          1
     between = 0.2254                                         avg =       35.8
     overall = 0.2823                                         max =      1,475

                                                F(34,3267)        =     212.05
corr(u_i, Xb)  = 0.0346                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,268 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0488929   .0387067     1.26   0.207    -.0269988    .1247847
during_domestic |  -.0518743   .0107348    -4.83   0.000    -.0729218   -.0308267
 after_domestic |  -.0006915   .0147947    -0.05   0.963    -.0296993    .0283162
   during_expat |   .1219161   .0297354     4.10   0.000     .0636142    .1802179
    after_expat |    .164394   .0332353     4.95   0.000     .0992298    .2295582
                |
       ind_year |
            27  |    .167528   .0213467     7.85   0.000     .1256738    .2093822
            28  |   .3684535   .0242726    15.18   0.000     .3208625    .4160445
            29  |   .6031455   .0263925    22.85   0.000      .551398    .6548931
            30  |   .7833969   .0273022    28.69   0.000     .7298657    .8369282
            31  |   .9425191    .028998    32.50   0.000      .885663    .9993751
            32  |   1.085077    .030399    35.69   0.000     1.025474    1.144681
            33  |   1.160468   .0319913    36.27   0.000     1.097743    1.223193
            34  |   1.300188   .0334907    38.82   0.000     1.234523    1.365853
            35  |   1.391597   .0351674    39.57   0.000     1.322645    1.460549
            36  |   1.435914   .0363757    39.47   0.000     1.364592    1.507235
            37  |   1.492615    .037774    39.51   0.000     1.418552    1.566679
            38  |   1.572502   .0396351    39.67   0.000      1.49479    1.650214
            39  |    1.61536   .0413012    39.11   0.000     1.534381    1.696339
            40  |   1.718135   .0429464    40.01   0.000      1.63393    1.802339
            41  |    1.80392   .0428315    42.12   0.000      1.71994    1.887899
            42  |   1.865587   .0446526    41.78   0.000     1.778037    1.953137
            43  |     1.8371   .0449835    40.84   0.000     1.748901    1.925298
            44  |   1.866995   .0469413    39.77   0.000     1.774957    1.959032
            45  |   1.961578   .0474361    41.35   0.000      1.86857    2.054585
            46  |   1.963751   .0485125    40.48   0.000     1.868633    2.058869
            47  |     1.9971   .0490977    40.68   0.000     1.900835    2.093366
            48  |   2.046987   .0494557    41.39   0.000      1.95002    2.143954
            49  |   2.049557    .051528    39.78   0.000     1.948527    2.150588
            50  |     2.0785   .0505845    41.09   0.000     1.979319     2.17768
                |
        age_cat |
             2  |   .5980911   .0346038    17.28   0.000     .5302438    .6659384
             3  |   .6160172   .0367733    16.75   0.000     .5439162    .6881182
             4  |   .6140995   .0398024    15.43   0.000     .5360594    .6921397
             5  |   .6188234   .0434554    14.24   0.000     .5336209    .7040259
             6  |   .6550572   .0485218    13.50   0.000      .559921    .7501934
                |
          _cons |   6.690662   .0366688   182.46   0.000     6.618766    6.762558
----------------+----------------------------------------------------------------
        sigma_u |  1.0165247
        sigma_e |  .50809996
            rho |  .80010225   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .4825333121287039

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    117,012
Group variable: id                              Number of groups  =      3,268

R-sq:                                           Obs per group:
     within  = 0.4825                                         min =          1
     between = 0.2254                                         avg =       35.8
     overall = 0.2823                                         max =      1,475

                                                F(34,3267)        =     212.05
corr(u_i, Xb)  = 0.0346                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,268 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0488929   .0387067     1.26   0.207    -.0269988    .1247847
during_domestic |  -.0518743   .0107348    -4.83   0.000    -.0729218   -.0308267
 after_domestic |  -.0006915   .0147947    -0.05   0.963    -.0296993    .0283162
   during_expat |   .1219161   .0297354     4.10   0.000     .0636142    .1802179
    after_expat |    .164394   .0332353     4.95   0.000     .0992298    .2295582
                |
       ind_year |
            27  |    .167528   .0213467     7.85   0.000     .1256738    .2093822
            28  |   .3684535   .0242726    15.18   0.000     .3208625    .4160445
            29  |   .6031455   .0263925    22.85   0.000      .551398    .6548931
            30  |   .7833969   .0273022    28.69   0.000     .7298657    .8369282
            31  |   .9425191    .028998    32.50   0.000      .885663    .9993751
            32  |   1.085077    .030399    35.69   0.000     1.025474    1.144681
            33  |   1.160468   .0319913    36.27   0.000     1.097743    1.223193
            34  |   1.300188   .0334907    38.82   0.000     1.234523    1.365853
            35  |   1.391597   .0351674    39.57   0.000     1.322645    1.460549
            36  |   1.435914   .0363757    39.47   0.000     1.364592    1.507235
            37  |   1.492615    .037774    39.51   0.000     1.418552    1.566679
            38  |   1.572502   .0396351    39.67   0.000      1.49479    1.650214
            39  |    1.61536   .0413012    39.11   0.000     1.534381    1.696339
            40  |   1.718135   .0429464    40.01   0.000      1.63393    1.802339
            41  |    1.80392   .0428315    42.12   0.000      1.71994    1.887899
            42  |   1.865587   .0446526    41.78   0.000     1.778037    1.953137
            43  |     1.8371   .0449835    40.84   0.000     1.748901    1.925298
            44  |   1.866995   .0469413    39.77   0.000     1.774957    1.959032
            45  |   1.961578   .0474361    41.35   0.000      1.86857    2.054585
            46  |   1.963751   .0485125    40.48   0.000     1.868633    2.058869
            47  |     1.9971   .0490977    40.68   0.000     1.900835    2.093366
            48  |   2.046987   .0494557    41.39   0.000      1.95002    2.143954
            49  |   2.049557    .051528    39.78   0.000     1.948527    2.150588
            50  |     2.0785   .0505845    41.09   0.000     1.979319     2.17768
                |
        age_cat |
             2  |   .5980911   .0346038    17.28   0.000     .5302438    .6659384
             3  |   .6160172   .0367733    16.75   0.000     .5439162    .6881182
             4  |   .6140995   .0398024    15.43   0.000     .5360594    .6921397
             5  |   .6188234   .0434554    14.24   0.000     .5336209    .7040259
             6  |   .6550572   .0485218    13.50   0.000      .559921    .7501934
                |
          _cons |   6.690662   .0366688   182.46   0.000     6.618766    6.762558
----------------+----------------------------------------------------------------
        sigma_u |  1.0165247
        sigma_e |  .50809996
            rho |  .80010225   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    117,012
Group variable: id                              Number of groups  =      3,268

R-sq:                                           Obs per group:
     within  = 0.0500                                         min =          1
     between = 0.0246                                         avg =       35.8
     overall = 0.0183                                         max =      1,475

                                                F(34,3267)        =      22.16
corr(u_i, Xb)  = -0.0001                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,268 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0145672   .0210601    -0.69   0.489    -.0558595    .0267252
during_domestic |  -.0277081    .006659    -4.16   0.000    -.0407644   -.0146518
 after_domestic |  -.0416111   .0086152    -4.83   0.000    -.0585028   -.0247193
   during_expat |   .0104475   .0161815     0.65   0.519    -.0212794    .0421745
    after_expat |  -.0258625    .011344    -2.28   0.023    -.0481044   -.0036205
                |
       ind_year |
            27  |  -.0189801   .0120533    -1.57   0.115    -.0426128    .0046526
            28  |  -.0096554   .0132358    -0.73   0.466    -.0356066    .0162958
            29  |  -.0147032   .0149914    -0.98   0.327    -.0440967    .0146903
            30  |   .0014918    .016371     0.09   0.927    -.0306065    .0335902
            31  |  -.0213934    .017097    -1.25   0.211    -.0549154    .0121285
            32  |  -.0173423   .0180351    -0.96   0.336    -.0527036     .018019
            33  |   -.037801   .0191988    -1.97   0.049    -.0754439   -.0001581
            34  |  -.0373866   .0201978    -1.85   0.064    -.0769883     .002215
            35  |  -.0241991   .0210431    -1.15   0.250    -.0654582    .0170599
            36  |  -.0348259   .0216211    -1.61   0.107    -.0772183    .0075664
            37  |   -.034119   .0222811    -1.53   0.126    -.0778054    .0095674
            38  |  -.0327091   .0227984    -1.43   0.151    -.0774097    .0119914
            39  |  -.0295503   .0233489    -1.27   0.206    -.0753303    .0162296
            40  |  -.0214412    .023922    -0.90   0.370    -.0683448    .0254623
            41  |  -.0055985   .0245129    -0.23   0.819    -.0536608    .0424637
            42  |  -.0020724   .0246839    -0.08   0.933    -.0504699    .0463251
            43  |   .0136859   .0253289     0.54   0.589    -.0359762     .063348
            44  |   .0189533   .0258826     0.73   0.464    -.0317944     .069701
            45  |   .0331514   .0256432     1.29   0.196     -.017127    .0834298
            46  |   .0385244   .0264878     1.45   0.146    -.0134099    .0904587
            47  |    .054795   .0268575     2.04   0.041     .0021357    .1074543
            48  |   .0415928   .0271311     1.53   0.125    -.0116028    .0947884
            49  |  -.1886552   .0285753    -6.60   0.000    -.2446824   -.1326279
            50  |  -.2425742   .0287513    -8.44   0.000    -.2989466   -.1862019
                |
        age_cat |
             2  |    .077472   .0133881     5.79   0.000      .051222    .1037219
             3  |   .0978094   .0145844     6.71   0.000     .0692139    .1264048
             4  |   .1423371   .0155768     9.14   0.000     .1117958    .1728785
             5  |   .1960118   .0188138    10.42   0.000     .1591237    .2328999
             6  |   .2407531   .0222021    10.84   0.000     .1972216    .2842846
                |
          _cons |   .4320886   .0164021    26.34   0.000     .3999291    .4642481
----------------+----------------------------------------------------------------
        sigma_u |  .39559443
        sigma_e |  .31049908
            rho |  .61879039   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0499825621388613

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    117,012
Group variable: id                              Number of groups  =      3,268

R-sq:                                           Obs per group:
     within  = 0.0500                                         min =          1
     between = 0.0246                                         avg =       35.8
     overall = 0.0183                                         max =      1,475

                                                F(34,3267)        =      22.16
corr(u_i, Xb)  = -0.0001                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,268 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0145672   .0210601    -0.69   0.489    -.0558595    .0267252
during_domestic |  -.0277081    .006659    -4.16   0.000    -.0407644   -.0146518
 after_domestic |  -.0416111   .0086152    -4.83   0.000    -.0585028   -.0247193
   during_expat |   .0104475   .0161815     0.65   0.519    -.0212794    .0421745
    after_expat |  -.0258625    .011344    -2.28   0.023    -.0481044   -.0036205
                |
       ind_year |
            27  |  -.0189801   .0120533    -1.57   0.115    -.0426128    .0046526
            28  |  -.0096554   .0132358    -0.73   0.466    -.0356066    .0162958
            29  |  -.0147032   .0149914    -0.98   0.327    -.0440967    .0146903
            30  |   .0014918    .016371     0.09   0.927    -.0306065    .0335902
            31  |  -.0213934    .017097    -1.25   0.211    -.0549154    .0121285
            32  |  -.0173423   .0180351    -0.96   0.336    -.0527036     .018019
            33  |   -.037801   .0191988    -1.97   0.049    -.0754439   -.0001581
            34  |  -.0373866   .0201978    -1.85   0.064    -.0769883     .002215
            35  |  -.0241991   .0210431    -1.15   0.250    -.0654582    .0170599
            36  |  -.0348259   .0216211    -1.61   0.107    -.0772183    .0075664
            37  |   -.034119   .0222811    -1.53   0.126    -.0778054    .0095674
            38  |  -.0327091   .0227984    -1.43   0.151    -.0774097    .0119914
            39  |  -.0295503   .0233489    -1.27   0.206    -.0753303    .0162296
            40  |  -.0214412    .023922    -0.90   0.370    -.0683448    .0254623
            41  |  -.0055985   .0245129    -0.23   0.819    -.0536608    .0424637
            42  |  -.0020724   .0246839    -0.08   0.933    -.0504699    .0463251
            43  |   .0136859   .0253289     0.54   0.589    -.0359762     .063348
            44  |   .0189533   .0258826     0.73   0.464    -.0317944     .069701
            45  |   .0331514   .0256432     1.29   0.196     -.017127    .0834298
            46  |   .0385244   .0264878     1.45   0.146    -.0134099    .0904587
            47  |    .054795   .0268575     2.04   0.041     .0021357    .1074543
            48  |   .0415928   .0271311     1.53   0.125    -.0116028    .0947884
            49  |  -.1886552   .0285753    -6.60   0.000    -.2446824   -.1326279
            50  |  -.2425742   .0287513    -8.44   0.000    -.2989466   -.1862019
                |
        age_cat |
             2  |    .077472   .0133881     5.79   0.000      .051222    .1037219
             3  |   .0978094   .0145844     6.71   0.000     .0692139    .1264048
             4  |   .1423371   .0155768     9.14   0.000     .1117958    .1728785
             5  |   .1960118   .0188138    10.42   0.000     .1591237    .2328999
             6  |   .2407531   .0222021    10.84   0.000     .1972216    .2842846
                |
          _cons |   .4320886   .0164021    26.34   0.000     .3999291    .4642481
----------------+----------------------------------------------------------------
        sigma_u |  .39559443
        sigma_e |  .31049908
            rho |  .61879039   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =     99,400
Group variable: id                              Number of groups  =      3,045

R-sq:                                           Obs per group:
     within  = 0.0389                                         min =          1
     between = 0.0009                                         avg =       32.6
     overall = 0.0244                                         max =      1,357

                                                F(32,3044)        =      47.94
corr(u_i, Xb)  = -0.1050                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,045 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0469737   .0491391     0.96   0.339    -.0493754    .1433229
during_domestic |  -.0149365   .0121927    -1.23   0.221    -.0388432    .0089702
 after_domestic |    .021519   .0142156     1.51   0.130    -.0063541    .0493921
   during_expat |   .0361571   .0342985     1.05   0.292    -.0310935    .1034077
    after_expat |   .0109482   .0232244     0.47   0.637    -.0345889    .0564853
                |
       ind_year |
            28  |  -.2223429    .041486    -5.36   0.000    -.3036863   -.1409995
            29  |  -.0274157   .0395467    -0.69   0.488    -.1049566    .0501251
            30  |  -.1823677   .0398096    -4.58   0.000    -.2604243   -.1043112
            31  |   .0133525   .0415113     0.32   0.748    -.0680406    .0947455
            32  |  -.0818309     .04004    -2.04   0.041    -.1603392   -.0033227
            33  |   .0345445   .0416135     0.83   0.407     -.047049    .1161379
            34  |  -.1036965   .0414534    -2.50   0.012    -.1849759   -.0224171
            35  |  -.0299238   .0424483    -0.70   0.481     -.113154    .0533064
            36  |   .0128424   .0429245     0.30   0.765    -.0713215    .0970063
            37  |  -.1022097   .0426889    -2.39   0.017    -.1859116   -.0185077
            38  |  -.0335692   .0445872    -0.75   0.452    -.1209932    .0538549
            39  |  -.1278849   .0449954    -2.84   0.005    -.2161093   -.0396605
            40  |  -.1305173   .0444626    -2.94   0.003    -.2176971   -.0433376
            41  |  -.1202007   .0456366    -2.63   0.008    -.2096824   -.0307189
            42  |  -.0839507   .0469991    -1.79   0.074     -.176104    .0082025
            43  |  -.0366597   .0458565    -0.80   0.424    -.1265726    .0532532
            44  |  -.1357218   .0456963    -2.97   0.003    -.2253206   -.0461231
            45  |  -.3411582   .0467598    -7.30   0.000    -.4328422   -.2494741
            46  |   -.192612   .0478579    -4.02   0.000     -.286449   -.0987749
            47  |  -.0082258   .0485858    -0.17   0.866    -.1034902    .0870386
            48  |  -.2926756   .0502199    -5.83   0.000    -.3911439   -.1942074
            49  |  -.8064216   .0489333   -16.48   0.000    -.9023673   -.7104759
            50  |   -.096357   .0636733    -1.51   0.130     -.221204    .0284899
                |
        age_cat |
             3  |  -.1314663   .0403952    -3.25   0.001     -.210671   -.0522616
             4  |  -.2942815   .0359898    -8.18   0.000    -.3648483   -.2237147
             5  |  -.4067734   .0391056   -10.40   0.000    -.4834495   -.3300972
             6  |  -.4635398   .0420219   -11.03   0.000     -.545934   -.3811456
                |
          _cons |   .3460395   .0425003     8.14   0.000     .2627073    .4293717
----------------+----------------------------------------------------------------
        sigma_u |  .43635523
        sigma_e |  .82968145
            rho |   .2166714   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .038921657364115

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =     99,400
Group variable: id                              Number of groups  =      3,045

R-sq:                                           Obs per group:
     within  = 0.0389                                         min =          1
     between = 0.0009                                         avg =       32.6
     overall = 0.0244                                         max =      1,357

                                                F(32,3044)        =      47.94
corr(u_i, Xb)  = -0.1050                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 3,045 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0469737   .0491391     0.96   0.339    -.0493754    .1433229
during_domestic |  -.0149365   .0121927    -1.23   0.221    -.0388432    .0089702
 after_domestic |    .021519   .0142156     1.51   0.130    -.0063541    .0493921
   during_expat |   .0361571   .0342985     1.05   0.292    -.0310935    .1034077
    after_expat |   .0109482   .0232244     0.47   0.637    -.0345889    .0564853
                |
       ind_year |
            28  |  -.2223429    .041486    -5.36   0.000    -.3036863   -.1409995
            29  |  -.0274157   .0395467    -0.69   0.488    -.1049566    .0501251
            30  |  -.1823677   .0398096    -4.58   0.000    -.2604243   -.1043112
            31  |   .0133525   .0415113     0.32   0.748    -.0680406    .0947455
            32  |  -.0818309     .04004    -2.04   0.041    -.1603392   -.0033227
            33  |   .0345445   .0416135     0.83   0.407     -.047049    .1161379
            34  |  -.1036965   .0414534    -2.50   0.012    -.1849759   -.0224171
            35  |  -.0299238   .0424483    -0.70   0.481     -.113154    .0533064
            36  |   .0128424   .0429245     0.30   0.765    -.0713215    .0970063
            37  |  -.1022097   .0426889    -2.39   0.017    -.1859116   -.0185077
            38  |  -.0335692   .0445872    -0.75   0.452    -.1209932    .0538549
            39  |  -.1278849   .0449954    -2.84   0.005    -.2161093   -.0396605
            40  |  -.1305173   .0444626    -2.94   0.003    -.2176971   -.0433376
            41  |  -.1202007   .0456366    -2.63   0.008    -.2096824   -.0307189
            42  |  -.0839507   .0469991    -1.79   0.074     -.176104    .0082025
            43  |  -.0366597   .0458565    -0.80   0.424    -.1265726    .0532532
            44  |  -.1357218   .0456963    -2.97   0.003    -.2253206   -.0461231
            45  |  -.3411582   .0467598    -7.30   0.000    -.4328422   -.2494741
            46  |   -.192612   .0478579    -4.02   0.000     -.286449   -.0987749
            47  |  -.0082258   .0485858    -0.17   0.866    -.1034902    .0870386
            48  |  -.2926756   .0502199    -5.83   0.000    -.3911439   -.1942074
            49  |  -.8064216   .0489333   -16.48   0.000    -.9023673   -.7104759
            50  |   -.096357   .0636733    -1.51   0.130     -.221204    .0284899
                |
        age_cat |
             3  |  -.1314663   .0403952    -3.25   0.001     -.210671   -.0522616
             4  |  -.2942815   .0359898    -8.18   0.000    -.3648483   -.2237147
             5  |  -.4067734   .0391056   -10.40   0.000    -.4834495   -.3300972
             6  |  -.4635398   .0420219   -11.03   0.000     -.545934   -.3811456
                |
          _cons |   .3460395   .0425003     8.14   0.000     .2627073    .4293717
----------------+----------------------------------------------------------------
        sigma_u |  .43635523
        sigma_e |  .82968145
            rho |   .2166714   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.0975                                         min =          2
     between = 0.1385                                         avg =       88.1
     overall = 0.0852                                         max =      4,150

                                                F(59,1368)        =       6.93
corr(u_i, Xb)  = 0.0314                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,369 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .010301   .0456197     0.23   0.821     -.079191    .0997931
during_domestic |  -.0635362   .0251474    -2.53   0.012    -.1128677   -.0142046
 after_domestic |  -.1972916   .0298063    -6.62   0.000    -.2557626   -.1388205
   during_expat |  -.0830251   .0355866    -2.33   0.020    -.1528353   -.0132149
    after_expat |  -.1101377   .0333265    -3.30   0.001    -.1755143   -.0447611
                |
       ind_year |
             2  |  -.0735599   .0549941    -1.34   0.181    -.1814417    .0343219
             3  |  -.2208856    .066567    -3.32   0.001    -.3514701   -.0903012
             4  |   -.284588   .0736013    -3.87   0.000    -.4289716   -.1402045
             5  |  -.3616199   .0827224    -4.37   0.000    -.5238964   -.1993434
             6  |  -.4777513   .0902202    -5.30   0.000    -.6547363   -.3007664
             7  |  -.5326573   .0953393    -5.59   0.000    -.7196843   -.3456302
             8  |  -.5759443   .1010715    -5.70   0.000    -.7742162   -.3776725
             9  |  -.6560249   .1076686    -6.09   0.000    -.8672384   -.4448114
            10  |  -.6969967   .1119594    -6.23   0.000    -.9166274   -.4773659
            11  |  -.7577761   .1149639    -6.59   0.000    -.9833007   -.5322515
            12  |  -.7919143    .118231    -6.70   0.000    -1.023848   -.5599805
            13  |  -.8252025   .1217125    -6.78   0.000    -1.063966   -.5864391
            14  |  -.8419928   .1255944    -6.70   0.000    -1.088371   -.5956143
            15  |  -.8196246   .1276011    -6.42   0.000     -1.06994   -.5693096
            16  |  -.8087307   .1304019    -6.20   0.000     -1.06454   -.5529212
            17  |  -.8332906   .1348226    -6.18   0.000    -1.097772   -.5688092
            18  |  -.8784075   .1363002    -6.44   0.000    -1.145788   -.6110274
            19  |  -.8583381    .138036    -6.22   0.000    -1.129123    -.587553
            20  |  -.8654588    .139741    -6.19   0.000    -1.139589   -.5913289
            21  |  -.9430449   .1424419    -6.62   0.000    -1.222473   -.6636167
            22  |  -.9847557   .1440097    -6.84   0.000    -1.267259    -.702252
            23  |  -1.002213   .1475821    -6.79   0.000    -1.291725   -.7127015
            24  |  -.9651818   .1489592    -6.48   0.000    -1.257395   -.6729687
            25  |  -.9715325   .1514979    -6.41   0.000    -1.268726    -.674339
            26  |   .9126754   .1827712     4.99   0.000     .5541332    1.271218
            27  |   .7988399   .1783266     4.48   0.000     .4490168    1.148663
            28  |   .7039465   .1734199     4.06   0.000     .3637488    1.044144
            29  |   .6043533    .172128     3.51   0.000     .2666898    .9420168
            30  |   .4883296   .1724407     2.83   0.005     .1500528    .8266065
            31  |   .4160209   .1720814     2.42   0.016      .078449    .7535929
            32  |   .3143974   .1715549     1.83   0.067    -.0221418    .6509365
            33  |   .2075955   .1705909     1.22   0.224    -.1270527    .5422437
            34  |   .1346862   .1722637     0.78   0.434    -.2032434    .4726158
            35  |   .0549545   .1730657     0.32   0.751    -.2845485    .3944575
            36  |   .0002707   .1741166     0.00   0.999    -.3412938    .3418352
            37  |  -.0952582   .1753587    -0.54   0.587    -.4392592    .2487428
            38  |  -.1331235   .1767387    -0.75   0.451    -.4798317    .2135846
            39  |  -.1571574   .1783864    -0.88   0.378     -.507098    .1927831
            40  |  -.1638298   .1785671    -0.92   0.359    -.5141249    .1864653
            41  |  -.2018841   .1810497    -1.12   0.265    -.5570491    .1532809
            42  |  -.2517222   .1854816    -1.36   0.175    -.6155815     .112137
            43  |  -.3291928   .1889817    -1.74   0.082    -.6999182    .0415326
            44  |  -.3522536   .1921474    -1.83   0.067    -.7291891     .024682
            45  |  -.3598732   .1935631    -1.86   0.063    -.7395859    .0198395
            46  |  -.3173246   .1953747    -1.62   0.105    -.7005911    .0659418
            47  |  -.2766358   .1973554    -1.40   0.161    -.6637878    .1105163
            48  |  -.2689875   .1984189    -1.36   0.175    -.6582257    .1202508
            49  |  -.2403529   .1986943    -1.21   0.227    -.6301313    .1494256
            50  |  -.2346286   .2007163    -1.17   0.243    -.6283737    .1591165
                |
        age_cat |
             2  |   .4423087   .0527397     8.39   0.000     .3388493    .5457682
             3  |   .6657898   .0618089    10.77   0.000     .5445393    .7870402
             4  |   1.038345   .0738426    14.06   0.000     .8934879    1.183202
             5  |   1.410913   .0902391    15.64   0.000     1.233891    1.587935
             6  |   1.673354    .107288    15.60   0.000     1.462887     1.88382
                |
          _cons |   3.179343   .1069619    29.72   0.000     2.969516     3.38917
----------------+----------------------------------------------------------------
        sigma_u |  1.0604032
        sigma_e |  .84022576
            rho |  .61431049   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0975102669241658

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.0975                                         min =          2
     between = 0.1385                                         avg =       88.1
     overall = 0.0852                                         max =      4,150

                                                F(59,1368)        =       6.93
corr(u_i, Xb)  = 0.0314                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,369 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .010301   .0456197     0.23   0.821     -.079191    .0997931
during_domestic |  -.0635362   .0251474    -2.53   0.012    -.1128677   -.0142046
 after_domestic |  -.1972916   .0298063    -6.62   0.000    -.2557626   -.1388205
   during_expat |  -.0830251   .0355866    -2.33   0.020    -.1528353   -.0132149
    after_expat |  -.1101377   .0333265    -3.30   0.001    -.1755143   -.0447611
                |
       ind_year |
             2  |  -.0735599   .0549941    -1.34   0.181    -.1814417    .0343219
             3  |  -.2208856    .066567    -3.32   0.001    -.3514701   -.0903012
             4  |   -.284588   .0736013    -3.87   0.000    -.4289716   -.1402045
             5  |  -.3616199   .0827224    -4.37   0.000    -.5238964   -.1993434
             6  |  -.4777513   .0902202    -5.30   0.000    -.6547363   -.3007664
             7  |  -.5326573   .0953393    -5.59   0.000    -.7196843   -.3456302
             8  |  -.5759443   .1010715    -5.70   0.000    -.7742162   -.3776725
             9  |  -.6560249   .1076686    -6.09   0.000    -.8672384   -.4448114
            10  |  -.6969967   .1119594    -6.23   0.000    -.9166274   -.4773659
            11  |  -.7577761   .1149639    -6.59   0.000    -.9833007   -.5322515
            12  |  -.7919143    .118231    -6.70   0.000    -1.023848   -.5599805
            13  |  -.8252025   .1217125    -6.78   0.000    -1.063966   -.5864391
            14  |  -.8419928   .1255944    -6.70   0.000    -1.088371   -.5956143
            15  |  -.8196246   .1276011    -6.42   0.000     -1.06994   -.5693096
            16  |  -.8087307   .1304019    -6.20   0.000     -1.06454   -.5529212
            17  |  -.8332906   .1348226    -6.18   0.000    -1.097772   -.5688092
            18  |  -.8784075   .1363002    -6.44   0.000    -1.145788   -.6110274
            19  |  -.8583381    .138036    -6.22   0.000    -1.129123    -.587553
            20  |  -.8654588    .139741    -6.19   0.000    -1.139589   -.5913289
            21  |  -.9430449   .1424419    -6.62   0.000    -1.222473   -.6636167
            22  |  -.9847557   .1440097    -6.84   0.000    -1.267259    -.702252
            23  |  -1.002213   .1475821    -6.79   0.000    -1.291725   -.7127015
            24  |  -.9651818   .1489592    -6.48   0.000    -1.257395   -.6729687
            25  |  -.9715325   .1514979    -6.41   0.000    -1.268726    -.674339
            26  |   .9126754   .1827712     4.99   0.000     .5541332    1.271218
            27  |   .7988399   .1783266     4.48   0.000     .4490168    1.148663
            28  |   .7039465   .1734199     4.06   0.000     .3637488    1.044144
            29  |   .6043533    .172128     3.51   0.000     .2666898    .9420168
            30  |   .4883296   .1724407     2.83   0.005     .1500528    .8266065
            31  |   .4160209   .1720814     2.42   0.016      .078449    .7535929
            32  |   .3143974   .1715549     1.83   0.067    -.0221418    .6509365
            33  |   .2075955   .1705909     1.22   0.224    -.1270527    .5422437
            34  |   .1346862   .1722637     0.78   0.434    -.2032434    .4726158
            35  |   .0549545   .1730657     0.32   0.751    -.2845485    .3944575
            36  |   .0002707   .1741166     0.00   0.999    -.3412938    .3418352
            37  |  -.0952582   .1753587    -0.54   0.587    -.4392592    .2487428
            38  |  -.1331235   .1767387    -0.75   0.451    -.4798317    .2135846
            39  |  -.1571574   .1783864    -0.88   0.378     -.507098    .1927831
            40  |  -.1638298   .1785671    -0.92   0.359    -.5141249    .1864653
            41  |  -.2018841   .1810497    -1.12   0.265    -.5570491    .1532809
            42  |  -.2517222   .1854816    -1.36   0.175    -.6155815     .112137
            43  |  -.3291928   .1889817    -1.74   0.082    -.6999182    .0415326
            44  |  -.3522536   .1921474    -1.83   0.067    -.7291891     .024682
            45  |  -.3598732   .1935631    -1.86   0.063    -.7395859    .0198395
            46  |  -.3173246   .1953747    -1.62   0.105    -.7005911    .0659418
            47  |  -.2766358   .1973554    -1.40   0.161    -.6637878    .1105163
            48  |  -.2689875   .1984189    -1.36   0.175    -.6582257    .1202508
            49  |  -.2403529   .1986943    -1.21   0.227    -.6301313    .1494256
            50  |  -.2346286   .2007163    -1.17   0.243    -.6283737    .1591165
                |
        age_cat |
             2  |   .4423087   .0527397     8.39   0.000     .3388493    .5457682
             3  |   .6657898   .0618089    10.77   0.000     .5445393    .7870402
             4  |   1.038345   .0738426    14.06   0.000     .8934879    1.183202
             5  |   1.410913   .0902391    15.64   0.000     1.233891    1.587935
             6  |   1.673354    .107288    15.60   0.000     1.462887     1.88382
                |
          _cons |   3.179343   .1069619    29.72   0.000     2.969516     3.38917
----------------+----------------------------------------------------------------
        sigma_u |  1.0604032
        sigma_e |  .84022576
            rho |  .61431049   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    112,938
Group variable: id                              Number of groups  =      1,357

R-sq:                                           Obs per group:
     within  = 0.1839                                         min =          1
     between = 0.1387                                         avg =       83.2
     overall = 0.0743                                         max =      3,984

                                                F(59,1356)        =      15.04
corr(u_i, Xb)  = 0.0743                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,357 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0757393   .0624337     1.21   0.225    -.0467379    .1982165
during_domestic |  -.1317011    .034035    -3.87   0.000    -.1984682   -.0649341
 after_domestic |  -.1992303   .0375862    -5.30   0.000    -.2729637    -.125497
   during_expat |  -.0656627   .0466161    -1.41   0.159    -.1571102    .0257847
    after_expat |  -.1385116   .0398056    -3.48   0.001    -.2165988   -.0604244
                |
       ind_year |
             2  |   .1314224   .0930605     1.41   0.158    -.0511357    .3139805
             3  |    .591839   .1047557     5.65   0.000     .3863381    .7973398
             4  |   .6867391    .114847     5.98   0.000     .4614419    .9120362
             5  |   .8368867   .1232606     6.79   0.000     .5950845    1.078689
             6  |   .8812081   .1332048     6.62   0.000     .6198983    1.142518
             7  |   1.084287   .1428898     7.59   0.000     .8039783    1.364596
             8  |   1.219438   .1492216     8.17   0.000     .9267075    1.512168
             9  |   1.333898   .1540211     8.66   0.000     1.031753    1.636044
            10  |   1.422389   .1569256     9.06   0.000     1.114546    1.730232
            11  |    1.46833   .1615649     9.09   0.000     1.151386    1.785274
            12  |   1.487159   .1671914     8.89   0.000     1.159177    1.815141
            13  |    1.52622   .1674366     9.12   0.000     1.197757    1.854683
            14  |   1.505193   .1723492     8.73   0.000     1.167093    1.843293
            15  |   1.509058   .1746404     8.64   0.000     1.166463    1.851652
            16  |   1.542526   .1788751     8.62   0.000     1.191624    1.893428
            17  |   1.605363   .1816456     8.84   0.000     1.249026      1.9617
            18  |   1.556141   .1867307     8.33   0.000     1.189829    1.922454
            19  |    1.51618    .189581     8.00   0.000     1.144276    1.888084
            20  |   1.441234   .1967303     7.33   0.000     1.055305    1.827162
            21  |   1.432406   .1950836     7.34   0.000     1.049708    1.815105
            22  |   1.352481   .2053182     6.59   0.000     .9497055    1.755257
            23  |   1.427277   .2085458     6.84   0.000      1.01817    1.836384
            24  |   .9797533   .2240913     4.37   0.000     .5401501    1.419357
            25  |   .9777535   .2425884     4.03   0.000     .5018641    1.453643
            26  |   1.489722   .2314836     6.44   0.000     1.035617    1.943827
            27  |   1.367571    .227325     6.02   0.000     .9216245    1.813518
            28  |   1.420935   .2150174     6.61   0.000      .999132    1.842738
            29  |   1.517825     .21287     7.13   0.000     1.100235    1.935415
            30  |   1.579246   .2129482     7.42   0.000     1.161503     1.99699
            31  |   1.600672   .2120542     7.55   0.000     1.184682    2.016662
            32  |   1.733578     .21137     8.20   0.000     1.318931    2.148226
            33  |    1.80096   .2117152     8.51   0.000     1.385635    2.216285
            34  |   1.871716   .2127405     8.80   0.000      1.45438    2.289053
            35  |   1.898457   .2150325     8.83   0.000     1.476624     2.32029
            36  |   1.927445   .2170006     8.88   0.000     1.501751    2.353138
            37  |   1.960291   .2183903     8.98   0.000     1.531871     2.38871
            38  |   1.947318   .2234855     8.71   0.000     1.508903    2.385733
            39  |   2.018985   .2261382     8.93   0.000     1.575366    2.462604
            40  |   2.034732   .2284423     8.91   0.000     1.586593     2.48287
            41  |   2.001972   .2355393     8.50   0.000     1.539911    2.464033
            42  |   2.117165   .2346865     9.02   0.000     1.656777    2.577553
            43  |   2.132896   .2318977     9.20   0.000     1.677979    2.587813
            44  |   2.033333   .2362396     8.61   0.000     1.569899    2.496768
            45  |   2.076274   .2349901     8.84   0.000      1.61529    2.537257
            46  |   2.095379   .2370509     8.84   0.000     1.630353    2.560405
            47  |    2.14635   .2409408     8.91   0.000     1.673693    2.619008
            48  |   2.207929   .2417387     9.13   0.000     1.733706    2.682151
            49  |   2.096659   .2511916     8.35   0.000     1.603892    2.589425
            50  |   2.205043   .2661834     8.28   0.000     1.682867    2.727219
                |
        age_cat |
             2  |   .3906099   .0855195     4.57   0.000      .222845    .5583747
             3  |   .6860055   .0966797     7.10   0.000     .4963475    .8756636
             4  |    .999494   .1105517     9.04   0.000      .782623    1.216365
             5  |   1.293092   .1292976    10.00   0.000     1.039447    1.546737
             6  |   1.479578   .1489576     9.93   0.000     1.187366    1.771791
                |
          _cons |   8.174418   .1570669    52.04   0.000     7.866297    8.482538
----------------+----------------------------------------------------------------
        sigma_u |  1.8857417
        sigma_e |  1.1252959
            rho |  .73741004   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .183949744221182

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    112,938
Group variable: id                              Number of groups  =      1,357

R-sq:                                           Obs per group:
     within  = 0.1839                                         min =          1
     between = 0.1387                                         avg =       83.2
     overall = 0.0743                                         max =      3,984

                                                F(59,1356)        =      15.04
corr(u_i, Xb)  = 0.0743                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,357 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0757393   .0624337     1.21   0.225    -.0467379    .1982165
during_domestic |  -.1317011    .034035    -3.87   0.000    -.1984682   -.0649341
 after_domestic |  -.1992303   .0375862    -5.30   0.000    -.2729637    -.125497
   during_expat |  -.0656627   .0466161    -1.41   0.159    -.1571102    .0257847
    after_expat |  -.1385116   .0398056    -3.48   0.001    -.2165988   -.0604244
                |
       ind_year |
             2  |   .1314224   .0930605     1.41   0.158    -.0511357    .3139805
             3  |    .591839   .1047557     5.65   0.000     .3863381    .7973398
             4  |   .6867391    .114847     5.98   0.000     .4614419    .9120362
             5  |   .8368867   .1232606     6.79   0.000     .5950845    1.078689
             6  |   .8812081   .1332048     6.62   0.000     .6198983    1.142518
             7  |   1.084287   .1428898     7.59   0.000     .8039783    1.364596
             8  |   1.219438   .1492216     8.17   0.000     .9267075    1.512168
             9  |   1.333898   .1540211     8.66   0.000     1.031753    1.636044
            10  |   1.422389   .1569256     9.06   0.000     1.114546    1.730232
            11  |    1.46833   .1615649     9.09   0.000     1.151386    1.785274
            12  |   1.487159   .1671914     8.89   0.000     1.159177    1.815141
            13  |    1.52622   .1674366     9.12   0.000     1.197757    1.854683
            14  |   1.505193   .1723492     8.73   0.000     1.167093    1.843293
            15  |   1.509058   .1746404     8.64   0.000     1.166463    1.851652
            16  |   1.542526   .1788751     8.62   0.000     1.191624    1.893428
            17  |   1.605363   .1816456     8.84   0.000     1.249026      1.9617
            18  |   1.556141   .1867307     8.33   0.000     1.189829    1.922454
            19  |    1.51618    .189581     8.00   0.000     1.144276    1.888084
            20  |   1.441234   .1967303     7.33   0.000     1.055305    1.827162
            21  |   1.432406   .1950836     7.34   0.000     1.049708    1.815105
            22  |   1.352481   .2053182     6.59   0.000     .9497055    1.755257
            23  |   1.427277   .2085458     6.84   0.000      1.01817    1.836384
            24  |   .9797533   .2240913     4.37   0.000     .5401501    1.419357
            25  |   .9777535   .2425884     4.03   0.000     .5018641    1.453643
            26  |   1.489722   .2314836     6.44   0.000     1.035617    1.943827
            27  |   1.367571    .227325     6.02   0.000     .9216245    1.813518
            28  |   1.420935   .2150174     6.61   0.000      .999132    1.842738
            29  |   1.517825     .21287     7.13   0.000     1.100235    1.935415
            30  |   1.579246   .2129482     7.42   0.000     1.161503     1.99699
            31  |   1.600672   .2120542     7.55   0.000     1.184682    2.016662
            32  |   1.733578     .21137     8.20   0.000     1.318931    2.148226
            33  |    1.80096   .2117152     8.51   0.000     1.385635    2.216285
            34  |   1.871716   .2127405     8.80   0.000      1.45438    2.289053
            35  |   1.898457   .2150325     8.83   0.000     1.476624     2.32029
            36  |   1.927445   .2170006     8.88   0.000     1.501751    2.353138
            37  |   1.960291   .2183903     8.98   0.000     1.531871     2.38871
            38  |   1.947318   .2234855     8.71   0.000     1.508903    2.385733
            39  |   2.018985   .2261382     8.93   0.000     1.575366    2.462604
            40  |   2.034732   .2284423     8.91   0.000     1.586593     2.48287
            41  |   2.001972   .2355393     8.50   0.000     1.539911    2.464033
            42  |   2.117165   .2346865     9.02   0.000     1.656777    2.577553
            43  |   2.132896   .2318977     9.20   0.000     1.677979    2.587813
            44  |   2.033333   .2362396     8.61   0.000     1.569899    2.496768
            45  |   2.076274   .2349901     8.84   0.000      1.61529    2.537257
            46  |   2.095379   .2370509     8.84   0.000     1.630353    2.560405
            47  |    2.14635   .2409408     8.91   0.000     1.673693    2.619008
            48  |   2.207929   .2417387     9.13   0.000     1.733706    2.682151
            49  |   2.096659   .2511916     8.35   0.000     1.603892    2.589425
            50  |   2.205043   .2661834     8.28   0.000     1.682867    2.727219
                |
        age_cat |
             2  |   .3906099   .0855195     4.57   0.000      .222845    .5583747
             3  |   .6860055   .0966797     7.10   0.000     .4963475    .8756636
             4  |    .999494   .1105517     9.04   0.000      .782623    1.216365
             5  |   1.293092   .1292976    10.00   0.000     1.039447    1.546737
             6  |   1.479578   .1489576     9.93   0.000     1.187366    1.771791
                |
          _cons |   8.174418   .1570669    52.04   0.000     7.866297    8.482538
----------------+----------------------------------------------------------------
        sigma_u |  1.8857417
        sigma_e |  1.1252959
            rho |  .73741004   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.2815                                         min =          2
     between = 0.0945                                         avg =       88.1
     overall = 0.0933                                         max =      4,150

                                                F(59,1368)        =      31.43
corr(u_i, Xb)  = 0.0438                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,369 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0569167   .0452163     1.26   0.208    -.0317842    .1456175
during_domestic |  -.0957889   .0285314    -3.36   0.001    -.1517589   -.0398188
 after_domestic |  -.1922236   .0309816    -6.20   0.000    -.2530002    -.131447
   during_expat |  -.0290882   .0413377    -0.70   0.482    -.1101805     .052004
    after_expat |  -.0399077   .0356519    -1.12   0.263     -.109846    .0300307
                |
       ind_year |
             2  |   .0577069   .0644945     0.89   0.371     -.068812    .1842257
             3  |    .149718    .073496     2.04   0.042      .005541     .293895
             4  |   .3073109    .082662     3.72   0.000     .1451528     .469469
             5  |   .4591662   .0891524     5.15   0.000      .284276    .6340564
             6  |   .5192488   .0971404     5.35   0.000     .3286884    .7098091
             7  |   .6122693   .1036974     5.90   0.000     .4088462    .8156925
             8  |   .6446919   .1114062     5.79   0.000     .4261464    .8632375
             9  |   .7545137   .1143547     6.60   0.000     .5301842    .9788432
            10  |   .8542879   .1173081     7.28   0.000     .6241646    1.084411
            11  |   .8919472   .1202757     7.42   0.000     .6560024    1.127892
            12  |   .9558866   .1226827     7.79   0.000     .7152199    1.196553
            13  |   .9856544   .1260981     7.82   0.000     .7382878    1.233021
            14  |   1.015632   .1302905     7.80   0.000      .760041    1.271223
            15  |   1.072002   .1329353     8.06   0.000     .8112233    1.332781
            16  |   1.100805    .136199     8.08   0.000     .8336234    1.367987
            17  |   1.124598   .1444219     7.79   0.000      .841286    1.407911
            18  |   .9651331    .149033     6.48   0.000      .672775    1.257491
            19  |    1.04149    .150437     6.92   0.000     .7463773    1.336602
            20  |   1.061857   .1509136     7.04   0.000       .76581    1.357904
            21  |    .974817   .1546336     6.30   0.000     .6714724    1.278162
            22  |   1.023899   .1584333     6.46   0.000     .7131001    1.334697
            23  |   1.052688   .1662236     6.33   0.000     .7266076    1.378769
            24  |   1.109038    .165605     6.70   0.000     .7841711    1.433906
            25  |   1.071589   .1704447     6.29   0.000     .7372272     1.40595
            26  |   .3090809   .1887063     1.64   0.102    -.0611041     .679266
            27  |    .414933   .1791931     2.32   0.021     .0634099    .7664561
            28  |   .5301121   .1782599     2.97   0.003     .1804197    .8798045
            29  |   .7402405   .1693146     4.37   0.000     .4080962    1.072385
            30  |   .8057153   .1684883     4.78   0.000     .4751919    1.136239
            31  |   .9414988   .1690856     5.57   0.000     .6098036    1.273194
            32  |   1.029778   .1706834     6.03   0.000     .6949483    1.364607
            33  |   1.062838   .1718107     6.19   0.000     .7257968    1.399879
            34  |   1.170668    .174282     6.72   0.000     .8287786    1.512557
            35  |   1.212349     .17675     6.86   0.000     .8656182    1.559079
            36  |   1.196847    .178751     6.70   0.000     .8461915    1.547503
            37  |   1.223353   .1805379     6.78   0.000     .8691917    1.577514
            38  |   1.236104    .186451     6.63   0.000     .8703432    1.601865
            39  |   1.295741   .1872907     6.92   0.000      .928333    1.663149
            40  |   1.476885   .1852915     7.97   0.000     1.113399    1.840371
            41  |   1.516751   .1861957     8.15   0.000     1.151491    1.882011
            42  |   1.528267   .1916666     7.97   0.000     1.152275    1.904259
            43  |    1.42758   .1934516     7.38   0.000     1.048086    1.807074
            44  |   1.446489   .2008339     7.20   0.000     1.052513    1.840464
            45  |   1.545284   .2013908     7.67   0.000     1.150216    1.940352
            46  |   1.581881   .2072446     7.63   0.000      1.17533    1.988433
            47  |   1.664186   .2070372     8.04   0.000     1.258041     2.07033
            48  |   1.673118   .2157201     7.76   0.000      1.24994    2.096296
            49  |   1.780215   .2097129     8.49   0.000     1.368821    2.191608
            50  |   1.762969   .2171969     8.12   0.000     1.336894    2.189043
                |
        age_cat |
             2  |    1.09043    .070036    15.57   0.000     .9530404     1.22782
             3  |    1.35357   .0767933    17.63   0.000     1.202925    1.504216
             4  |   1.714362   .0888721    19.29   0.000     1.540022    1.888702
             5  |   2.044946   .1046207    19.55   0.000     1.839712    2.250181
             6  |    2.27924     .12242    18.62   0.000     2.039088    2.519391
                |
          _cons |   10.64875   .1155459    92.16   0.000     10.42209    10.87542
----------------+----------------------------------------------------------------
        sigma_u |  1.5409862
        sigma_e |  .99019203
            rho |  .70776586   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2814796017926003

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.2815                                         min =          2
     between = 0.0945                                         avg =       88.1
     overall = 0.0933                                         max =      4,150

                                                F(59,1368)        =      31.43
corr(u_i, Xb)  = 0.0438                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,369 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0569167   .0452163     1.26   0.208    -.0317842    .1456175
during_domestic |  -.0957889   .0285314    -3.36   0.001    -.1517589   -.0398188
 after_domestic |  -.1922236   .0309816    -6.20   0.000    -.2530002    -.131447
   during_expat |  -.0290882   .0413377    -0.70   0.482    -.1101805     .052004
    after_expat |  -.0399077   .0356519    -1.12   0.263     -.109846    .0300307
                |
       ind_year |
             2  |   .0577069   .0644945     0.89   0.371     -.068812    .1842257
             3  |    .149718    .073496     2.04   0.042      .005541     .293895
             4  |   .3073109    .082662     3.72   0.000     .1451528     .469469
             5  |   .4591662   .0891524     5.15   0.000      .284276    .6340564
             6  |   .5192488   .0971404     5.35   0.000     .3286884    .7098091
             7  |   .6122693   .1036974     5.90   0.000     .4088462    .8156925
             8  |   .6446919   .1114062     5.79   0.000     .4261464    .8632375
             9  |   .7545137   .1143547     6.60   0.000     .5301842    .9788432
            10  |   .8542879   .1173081     7.28   0.000     .6241646    1.084411
            11  |   .8919472   .1202757     7.42   0.000     .6560024    1.127892
            12  |   .9558866   .1226827     7.79   0.000     .7152199    1.196553
            13  |   .9856544   .1260981     7.82   0.000     .7382878    1.233021
            14  |   1.015632   .1302905     7.80   0.000      .760041    1.271223
            15  |   1.072002   .1329353     8.06   0.000     .8112233    1.332781
            16  |   1.100805    .136199     8.08   0.000     .8336234    1.367987
            17  |   1.124598   .1444219     7.79   0.000      .841286    1.407911
            18  |   .9651331    .149033     6.48   0.000      .672775    1.257491
            19  |    1.04149    .150437     6.92   0.000     .7463773    1.336602
            20  |   1.061857   .1509136     7.04   0.000       .76581    1.357904
            21  |    .974817   .1546336     6.30   0.000     .6714724    1.278162
            22  |   1.023899   .1584333     6.46   0.000     .7131001    1.334697
            23  |   1.052688   .1662236     6.33   0.000     .7266076    1.378769
            24  |   1.109038    .165605     6.70   0.000     .7841711    1.433906
            25  |   1.071589   .1704447     6.29   0.000     .7372272     1.40595
            26  |   .3090809   .1887063     1.64   0.102    -.0611041     .679266
            27  |    .414933   .1791931     2.32   0.021     .0634099    .7664561
            28  |   .5301121   .1782599     2.97   0.003     .1804197    .8798045
            29  |   .7402405   .1693146     4.37   0.000     .4080962    1.072385
            30  |   .8057153   .1684883     4.78   0.000     .4751919    1.136239
            31  |   .9414988   .1690856     5.57   0.000     .6098036    1.273194
            32  |   1.029778   .1706834     6.03   0.000     .6949483    1.364607
            33  |   1.062838   .1718107     6.19   0.000     .7257968    1.399879
            34  |   1.170668    .174282     6.72   0.000     .8287786    1.512557
            35  |   1.212349     .17675     6.86   0.000     .8656182    1.559079
            36  |   1.196847    .178751     6.70   0.000     .8461915    1.547503
            37  |   1.223353   .1805379     6.78   0.000     .8691917    1.577514
            38  |   1.236104    .186451     6.63   0.000     .8703432    1.601865
            39  |   1.295741   .1872907     6.92   0.000      .928333    1.663149
            40  |   1.476885   .1852915     7.97   0.000     1.113399    1.840371
            41  |   1.516751   .1861957     8.15   0.000     1.151491    1.882011
            42  |   1.528267   .1916666     7.97   0.000     1.152275    1.904259
            43  |    1.42758   .1934516     7.38   0.000     1.048086    1.807074
            44  |   1.446489   .2008339     7.20   0.000     1.052513    1.840464
            45  |   1.545284   .2013908     7.67   0.000     1.150216    1.940352
            46  |   1.581881   .2072446     7.63   0.000      1.17533    1.988433
            47  |   1.664186   .2070372     8.04   0.000     1.258041     2.07033
            48  |   1.673118   .2157201     7.76   0.000      1.24994    2.096296
            49  |   1.780215   .2097129     8.49   0.000     1.368821    2.191608
            50  |   1.762969   .2171969     8.12   0.000     1.336894    2.189043
                |
        age_cat |
             2  |    1.09043    .070036    15.57   0.000     .9530404     1.22782
             3  |    1.35357   .0767933    17.63   0.000     1.202925    1.504216
             4  |   1.714362   .0888721    19.29   0.000     1.540022    1.888702
             5  |   2.044946   .1046207    19.55   0.000     1.839712    2.250181
             6  |    2.27924     .12242    18.62   0.000     2.039088    2.519391
                |
          _cons |   10.64875   .1155459    92.16   0.000     10.42209    10.87542
----------------+----------------------------------------------------------------
        sigma_u |  1.5409862
        sigma_e |  .99019203
            rho |  .70776586   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    112,938
Group variable: id                              Number of groups  =      1,357

R-sq:                                           Obs per group:
     within  = 0.2159                                         min =          1
     between = 0.0167                                         avg =       83.2
     overall = 0.1080                                         max =      3,984

                                                F(59,1356)        =      20.22
corr(u_i, Xb)  = -0.0051                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,357 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0590544    .050763     1.16   0.245    -.0405283     .158637
during_domestic |  -.0610283   .0270147    -2.26   0.024    -.1140236   -.0080331
 after_domestic |  -.0103139   .0288924    -0.36   0.721    -.0669926    .0463649
   during_expat |   .0259866    .037924     0.69   0.493    -.0484095    .1003828
    after_expat |  -.0460785   .0333545    -1.38   0.167    -.1115105    .0193536
                |
       ind_year |
             2  |   .2325286   .0744042     3.13   0.002     .0865687    .3784885
             3  |   .8291653    .088364     9.38   0.000     .6558202     1.00251
             4  |   .9879169   .0954651    10.35   0.000     .8006415    1.175192
             5  |   1.175284   .1016757    11.56   0.000     .9758257    1.374743
             6  |   1.328546   .1070557    12.41   0.000     1.118533    1.538558
             7  |   1.595761   .1161797    13.74   0.000      1.36785    1.823673
             8  |   1.777623   .1186423    14.98   0.000     1.544881    2.010366
             9  |   1.950757   .1213736    16.07   0.000     1.712657    2.188858
            10  |   2.088158   .1236508    16.89   0.000     1.845591    2.330726
            11  |   2.195612   .1269308    17.30   0.000      1.94661    2.444614
            12  |   2.241855   .1305026    17.18   0.000     1.985846    2.497864
            13  |   2.302712   .1330113    17.31   0.000     2.041782    2.563643
            14  |    2.30122   .1347628    17.08   0.000     2.036854    2.565587
            15  |   2.262124   .1365665    16.56   0.000     1.994219    2.530028
            16  |   2.271537   .1401182    16.21   0.000     1.996665    2.546409
            17  |   2.341432   .1423552    16.45   0.000     2.062172    2.620692
            18  |   2.337358    .144536    16.17   0.000     2.053819    2.620896
            19  |   2.307323   .1442794    15.99   0.000     2.024288    2.590358
            20  |   2.234553   .1493817    14.96   0.000     1.941509    2.527598
            21  |   2.265448   .1514376    14.96   0.000      1.96837    2.562525
            22  |   2.238072   .1573389    14.22   0.000     1.929418    2.546726
            23  |   2.286421   .1597502    14.31   0.000     1.973037    2.599805
            24  |   1.636179   .1785324     9.16   0.000     1.285949    1.986409
            25  |   1.621611   .2059814     7.87   0.000     1.217534    2.025688
            26  |   .6224409   .1685484     3.69   0.000     .2917971    .9530848
            27  |   .6521671   .1624034     4.02   0.000      .333578    .9707562
            28  |    .787885   .1568571     5.02   0.000     .4801762    1.095594
            29  |   .9717961   .1570732     6.19   0.000     .6636632    1.279929
            30  |     1.1345   .1601482     7.08   0.000     .8203344    1.448665
            31  |   1.225785   .1599649     7.66   0.000     .9119793     1.53959
            32  |   1.454668   .1612714     9.02   0.000     1.138299    1.771036
            33  |   1.601598   .1643879     9.74   0.000     1.279115     1.92408
            34  |   1.749277   .1660062    10.54   0.000     1.423621    2.074934
            35  |   1.849208   .1689414    10.95   0.000     1.517793    2.180623
            36  |   1.930229   .1703743    11.33   0.000     1.596004    2.264455
            37  |     2.0607    .172601    11.94   0.000     1.722106    2.399294
            38  |   2.056465   .1769632    11.62   0.000     1.709314    2.403617
            39  |   2.153928   .1758122    12.25   0.000     1.809034    2.498821
            40  |    2.19583   .1775843    12.37   0.000     1.847461      2.5442
            41  |   2.194797    .180289    12.17   0.000     1.841122    2.548473
            42  |    2.32654   .1765899    13.17   0.000     1.980121    2.672959
            43  |   2.423587   .1771325    13.68   0.000     2.076104    2.771071
            44  |   2.323738   .1793211    12.96   0.000     1.971961    2.675514
            45  |   2.406321   .1785535    13.48   0.000      2.05605    2.756592
            46  |   2.390759   .1789956    13.36   0.000     2.039621    2.741897
            47  |   2.393057   .1824375    13.12   0.000     2.035166    2.750947
            48  |   2.421671   .1830795    13.23   0.000     2.062521    2.780821
            49  |   2.212417   .1887217    11.72   0.000     1.842199    2.582635
            50  |   2.330622   .1973602    11.81   0.000     1.943458    2.717787
                |
        age_cat |
             2  |   .0055049   .0762122     0.07   0.942    -.1440016    .1550115
             3  |   .0714563   .0836309     0.85   0.393    -.0926036    .2355162
             4  |   .0841825    .091969     0.92   0.360    -.0962346    .2645995
             5  |   .0323426   .1062041     0.30   0.761    -.1759995    .2406847
             6  |  -.0196646   .1232504    -0.16   0.873    -.2614468    .2221176
                |
          _cons |   4.837296   .1228169    39.39   0.000     4.596364    5.078227
----------------+----------------------------------------------------------------
        sigma_u |  1.5603474
        sigma_e |  .95100397
            rho |   .7291454   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2159326265849241

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    112,938
Group variable: id                              Number of groups  =      1,357

R-sq:                                           Obs per group:
     within  = 0.2159                                         min =          1
     between = 0.0167                                         avg =       83.2
     overall = 0.1080                                         max =      3,984

                                                F(59,1356)        =      20.22
corr(u_i, Xb)  = -0.0051                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,357 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0590544    .050763     1.16   0.245    -.0405283     .158637
during_domestic |  -.0610283   .0270147    -2.26   0.024    -.1140236   -.0080331
 after_domestic |  -.0103139   .0288924    -0.36   0.721    -.0669926    .0463649
   during_expat |   .0259866    .037924     0.69   0.493    -.0484095    .1003828
    after_expat |  -.0460785   .0333545    -1.38   0.167    -.1115105    .0193536
                |
       ind_year |
             2  |   .2325286   .0744042     3.13   0.002     .0865687    .3784885
             3  |   .8291653    .088364     9.38   0.000     .6558202     1.00251
             4  |   .9879169   .0954651    10.35   0.000     .8006415    1.175192
             5  |   1.175284   .1016757    11.56   0.000     .9758257    1.374743
             6  |   1.328546   .1070557    12.41   0.000     1.118533    1.538558
             7  |   1.595761   .1161797    13.74   0.000      1.36785    1.823673
             8  |   1.777623   .1186423    14.98   0.000     1.544881    2.010366
             9  |   1.950757   .1213736    16.07   0.000     1.712657    2.188858
            10  |   2.088158   .1236508    16.89   0.000     1.845591    2.330726
            11  |   2.195612   .1269308    17.30   0.000      1.94661    2.444614
            12  |   2.241855   .1305026    17.18   0.000     1.985846    2.497864
            13  |   2.302712   .1330113    17.31   0.000     2.041782    2.563643
            14  |    2.30122   .1347628    17.08   0.000     2.036854    2.565587
            15  |   2.262124   .1365665    16.56   0.000     1.994219    2.530028
            16  |   2.271537   .1401182    16.21   0.000     1.996665    2.546409
            17  |   2.341432   .1423552    16.45   0.000     2.062172    2.620692
            18  |   2.337358    .144536    16.17   0.000     2.053819    2.620896
            19  |   2.307323   .1442794    15.99   0.000     2.024288    2.590358
            20  |   2.234553   .1493817    14.96   0.000     1.941509    2.527598
            21  |   2.265448   .1514376    14.96   0.000      1.96837    2.562525
            22  |   2.238072   .1573389    14.22   0.000     1.929418    2.546726
            23  |   2.286421   .1597502    14.31   0.000     1.973037    2.599805
            24  |   1.636179   .1785324     9.16   0.000     1.285949    1.986409
            25  |   1.621611   .2059814     7.87   0.000     1.217534    2.025688
            26  |   .6224409   .1685484     3.69   0.000     .2917971    .9530848
            27  |   .6521671   .1624034     4.02   0.000      .333578    .9707562
            28  |    .787885   .1568571     5.02   0.000     .4801762    1.095594
            29  |   .9717961   .1570732     6.19   0.000     .6636632    1.279929
            30  |     1.1345   .1601482     7.08   0.000     .8203344    1.448665
            31  |   1.225785   .1599649     7.66   0.000     .9119793     1.53959
            32  |   1.454668   .1612714     9.02   0.000     1.138299    1.771036
            33  |   1.601598   .1643879     9.74   0.000     1.279115     1.92408
            34  |   1.749277   .1660062    10.54   0.000     1.423621    2.074934
            35  |   1.849208   .1689414    10.95   0.000     1.517793    2.180623
            36  |   1.930229   .1703743    11.33   0.000     1.596004    2.264455
            37  |     2.0607    .172601    11.94   0.000     1.722106    2.399294
            38  |   2.056465   .1769632    11.62   0.000     1.709314    2.403617
            39  |   2.153928   .1758122    12.25   0.000     1.809034    2.498821
            40  |    2.19583   .1775843    12.37   0.000     1.847461      2.5442
            41  |   2.194797    .180289    12.17   0.000     1.841122    2.548473
            42  |    2.32654   .1765899    13.17   0.000     1.980121    2.672959
            43  |   2.423587   .1771325    13.68   0.000     2.076104    2.771071
            44  |   2.323738   .1793211    12.96   0.000     1.971961    2.675514
            45  |   2.406321   .1785535    13.48   0.000      2.05605    2.756592
            46  |   2.390759   .1789956    13.36   0.000     2.039621    2.741897
            47  |   2.393057   .1824375    13.12   0.000     2.035166    2.750947
            48  |   2.421671   .1830795    13.23   0.000     2.062521    2.780821
            49  |   2.212417   .1887217    11.72   0.000     1.842199    2.582635
            50  |   2.330622   .1973602    11.81   0.000     1.943458    2.717787
                |
        age_cat |
             2  |   .0055049   .0762122     0.07   0.942    -.1440016    .1550115
             3  |   .0714563   .0836309     0.85   0.393    -.0926036    .2355162
             4  |   .0841825    .091969     0.92   0.360    -.0962346    .2645995
             5  |   .0323426   .1062041     0.30   0.761    -.1759995    .2406847
             6  |  -.0196646   .1232504    -0.16   0.873    -.2614468    .2221176
                |
          _cons |   4.837296   .1228169    39.39   0.000     4.596364    5.078227
----------------+----------------------------------------------------------------
        sigma_u |  1.5603474
        sigma_e |  .95100397
            rho |   .7291454   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.4150                                         min =          2
     between = 0.1366                                         avg =       88.1
     overall = 0.2533                                         max =      4,150

                                                F(59,1368)        =      62.54
corr(u_i, Xb)  = -0.0026                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,369 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0466157   .0284874     1.64   0.102     -.009268    .1024994
during_domestic |  -.0322527    .016847    -1.91   0.056    -.0653015    .0007961
 after_domestic |    .005068   .0198576     0.26   0.799    -.0338867    .0440226
   during_expat |   .0539369    .025168     2.14   0.032     .0045647     .103309
    after_expat |     .07023   .0221288     3.17   0.002       .02682      .11364
                |
       ind_year |
             2  |   .1312668   .0480516     2.73   0.006     .0370039    .2255296
             3  |   .3706036   .0550182     6.74   0.000     .2626744    .4785327
             4  |   .5918989   .0597402     9.91   0.000     .4747066    .7090912
             5  |   .8207861   .0612249    13.41   0.000     .7006812    .9408909
             6  |   .9970001   .0655946    15.20   0.000     .8683232    1.125677
             7  |   1.144927   .0704938    16.24   0.000     1.006639    1.283214
             8  |   1.220636    .073812    16.54   0.000     1.075839    1.365433
             9  |   1.410539   .0758182    18.60   0.000     1.261806    1.559271
            10  |   1.551285    .078422    19.78   0.000     1.397444    1.705125
            11  |   1.649723   .0811669    20.33   0.000     1.490498    1.808948
            12  |   1.747801   .0842385    20.75   0.000      1.58255    1.913051
            13  |   1.810857   .0865262    20.93   0.000     1.641119    1.980595
            14  |   1.857625   .0879442    21.12   0.000     1.685105    2.030145
            15  |   1.891627   .0898175    21.06   0.000     1.715432    2.067822
            16  |   1.909536   .0927642    20.58   0.000      1.72756    2.091511
            17  |   1.957889   .0977084    20.04   0.000     1.766214    2.149563
            18  |   1.843541   .0981658    18.78   0.000     1.650969    2.036112
            19  |   1.899828    .099589    19.08   0.000     1.704464    2.095191
            20  |   1.927316    .100401    19.20   0.000     1.730359    2.124273
            21  |   1.917862   .1042277    18.40   0.000     1.713399    2.122325
            22  |   2.008654   .1045235    19.22   0.000      1.80361    2.213698
            23  |   2.054902   .1080035    19.03   0.000     1.843031    2.266772
            24  |    2.07422   .1087613    19.07   0.000     1.860863    2.287577
            25  |   2.043121    .108985    18.75   0.000     1.829325    2.256917
            26  |  -.6035945   .1049867    -5.75   0.000    -.8095468   -.3976421
            27  |  -.3839069   .1055386    -3.64   0.000    -.5909419    -.176872
            28  |  -.1738343   .1068632    -1.63   0.104    -.3834679    .0357992
            29  |   .1358872   .1025044     1.33   0.185    -.0651957    .3369701
            30  |   .3173857   .1037022     3.06   0.002     .1139531    .5208182
            31  |   .5254779   .1042458     5.04   0.000      .320979    .7299767
            32  |   .7153804   .1079934     6.62   0.000     .5035298     .927231
            33  |   .8552424    .107414     7.96   0.000     .6445284    1.065956
            34  |   1.035982   .1090745     9.50   0.000     .8220102    1.249953
            35  |   1.157394   .1096434    10.56   0.000     .9423067    1.372482
            36  |   1.196577   .1107598    10.80   0.000      .979299    1.413854
            37  |   1.318611   .1145814    11.51   0.000     1.093837    1.543385
            38  |   1.369228   .1148042    11.93   0.000     1.144016    1.594439
            39  |   1.452899   .1140125    12.74   0.000      1.22924    1.676557
            40  |   1.640715   .1122834    14.61   0.000     1.420448    1.860981
            41  |   1.718635   .1122984    15.30   0.000      1.49834    1.938931
            42  |   1.779989   .1173519    15.17   0.000      1.54978    2.010198
            43  |   1.756773   .1171498    15.00   0.000     1.526961    1.986586
            44  |   1.798742   .1197175    15.02   0.000     1.563892    2.033592
            45  |   1.905157    .119889    15.89   0.000     1.669971    2.140343
            46  |   1.899206   .1207926    15.72   0.000     1.662247    2.136165
            47  |   1.940821   .1181895    16.42   0.000     1.708969    2.172674
            48  |   1.942106   .1241353    15.65   0.000      1.69859    2.185622
            49  |   2.020567   .1236511    16.34   0.000     1.778001    2.263134
            50  |   1.997597   .1257088    15.89   0.000     1.750994      2.2442
                |
        age_cat |
             2  |   .6481212   .0563249    11.51   0.000     .5376287    .7586137
             3  |   .6877803   .0593813    11.58   0.000     .5712919    .8042686
             4  |   .6760172   .0656981    10.29   0.000     .5471372    .8048972
             5  |   .6340329   .0740251     8.57   0.000     .4888179     .779248
             6  |   .6058859   .0847541     7.15   0.000     .4396237    .7721481
                |
          _cons |   7.469408   .0824628    90.58   0.000     7.307641    7.631175
----------------+----------------------------------------------------------------
        sigma_u |  1.1027605
        sigma_e |  .69216401
            rho |  .71737906   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .4149540692267271

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.4150                                         min =          2
     between = 0.1366                                         avg =       88.1
     overall = 0.2533                                         max =      4,150

                                                F(59,1368)        =      62.54
corr(u_i, Xb)  = -0.0026                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,369 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0466157   .0284874     1.64   0.102     -.009268    .1024994
during_domestic |  -.0322527    .016847    -1.91   0.056    -.0653015    .0007961
 after_domestic |    .005068   .0198576     0.26   0.799    -.0338867    .0440226
   during_expat |   .0539369    .025168     2.14   0.032     .0045647     .103309
    after_expat |     .07023   .0221288     3.17   0.002       .02682      .11364
                |
       ind_year |
             2  |   .1312668   .0480516     2.73   0.006     .0370039    .2255296
             3  |   .3706036   .0550182     6.74   0.000     .2626744    .4785327
             4  |   .5918989   .0597402     9.91   0.000     .4747066    .7090912
             5  |   .8207861   .0612249    13.41   0.000     .7006812    .9408909
             6  |   .9970001   .0655946    15.20   0.000     .8683232    1.125677
             7  |   1.144927   .0704938    16.24   0.000     1.006639    1.283214
             8  |   1.220636    .073812    16.54   0.000     1.075839    1.365433
             9  |   1.410539   .0758182    18.60   0.000     1.261806    1.559271
            10  |   1.551285    .078422    19.78   0.000     1.397444    1.705125
            11  |   1.649723   .0811669    20.33   0.000     1.490498    1.808948
            12  |   1.747801   .0842385    20.75   0.000      1.58255    1.913051
            13  |   1.810857   .0865262    20.93   0.000     1.641119    1.980595
            14  |   1.857625   .0879442    21.12   0.000     1.685105    2.030145
            15  |   1.891627   .0898175    21.06   0.000     1.715432    2.067822
            16  |   1.909536   .0927642    20.58   0.000      1.72756    2.091511
            17  |   1.957889   .0977084    20.04   0.000     1.766214    2.149563
            18  |   1.843541   .0981658    18.78   0.000     1.650969    2.036112
            19  |   1.899828    .099589    19.08   0.000     1.704464    2.095191
            20  |   1.927316    .100401    19.20   0.000     1.730359    2.124273
            21  |   1.917862   .1042277    18.40   0.000     1.713399    2.122325
            22  |   2.008654   .1045235    19.22   0.000      1.80361    2.213698
            23  |   2.054902   .1080035    19.03   0.000     1.843031    2.266772
            24  |    2.07422   .1087613    19.07   0.000     1.860863    2.287577
            25  |   2.043121    .108985    18.75   0.000     1.829325    2.256917
            26  |  -.6035945   .1049867    -5.75   0.000    -.8095468   -.3976421
            27  |  -.3839069   .1055386    -3.64   0.000    -.5909419    -.176872
            28  |  -.1738343   .1068632    -1.63   0.104    -.3834679    .0357992
            29  |   .1358872   .1025044     1.33   0.185    -.0651957    .3369701
            30  |   .3173857   .1037022     3.06   0.002     .1139531    .5208182
            31  |   .5254779   .1042458     5.04   0.000      .320979    .7299767
            32  |   .7153804   .1079934     6.62   0.000     .5035298     .927231
            33  |   .8552424    .107414     7.96   0.000     .6445284    1.065956
            34  |   1.035982   .1090745     9.50   0.000     .8220102    1.249953
            35  |   1.157394   .1096434    10.56   0.000     .9423067    1.372482
            36  |   1.196577   .1107598    10.80   0.000      .979299    1.413854
            37  |   1.318611   .1145814    11.51   0.000     1.093837    1.543385
            38  |   1.369228   .1148042    11.93   0.000     1.144016    1.594439
            39  |   1.452899   .1140125    12.74   0.000      1.22924    1.676557
            40  |   1.640715   .1122834    14.61   0.000     1.420448    1.860981
            41  |   1.718635   .1122984    15.30   0.000      1.49834    1.938931
            42  |   1.779989   .1173519    15.17   0.000      1.54978    2.010198
            43  |   1.756773   .1171498    15.00   0.000     1.526961    1.986586
            44  |   1.798742   .1197175    15.02   0.000     1.563892    2.033592
            45  |   1.905157    .119889    15.89   0.000     1.669971    2.140343
            46  |   1.899206   .1207926    15.72   0.000     1.662247    2.136165
            47  |   1.940821   .1181895    16.42   0.000     1.708969    2.172674
            48  |   1.942106   .1241353    15.65   0.000      1.69859    2.185622
            49  |   2.020567   .1236511    16.34   0.000     1.778001    2.263134
            50  |   1.997597   .1257088    15.89   0.000     1.750994      2.2442
                |
        age_cat |
             2  |   .6481212   .0563249    11.51   0.000     .5376287    .7586137
             3  |   .6877803   .0593813    11.58   0.000     .5712919    .8042686
             4  |   .6760172   .0656981    10.29   0.000     .5471372    .8048972
             5  |   .6340329   .0740251     8.57   0.000     .4888179     .779248
             6  |   .6058859   .0847541     7.15   0.000     .4396237    .7721481
                |
          _cons |   7.469408   .0824628    90.58   0.000     7.307641    7.631175
----------------+----------------------------------------------------------------
        sigma_u |  1.1027605
        sigma_e |  .69216401
            rho |  .71737906   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.0438                                         min =          2
     between = 0.1882                                         avg =       88.1
     overall = 0.0796                                         max =      4,150

                                                F(59,1368)        =       5.95
corr(u_i, Xb)  = 0.1137                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,369 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0101195   .0137199     0.74   0.461    -.0167948    .0370338
during_domestic |  -.0030219   .0076867    -0.39   0.694    -.0181009    .0120571
 after_domestic |  -.0229913   .0089306    -2.57   0.010    -.0405105    -.005472
   during_expat |   .0135477   .0107969     1.25   0.210    -.0076326    .0347279
    after_expat |  -.0007578   .0095441    -0.08   0.937    -.0194805    .0179648
                |
       ind_year |
             2  |   .0165398   .0224456     0.74   0.461    -.0274918    .0605714
             3  |  -.0482865   .0254605    -1.90   0.058    -.0982323    .0016593
             4  |  -.0781473   .0268296    -2.91   0.004     -.130779   -.0255156
             5  |  -.0746549   .0274181    -2.72   0.007     -.128441   -.0208689
             6  |  -.0841922   .0303284    -2.78   0.006    -.1436875   -.0246968
             7  |  -.0919542   .0315831    -2.91   0.004    -.1539108   -.0299976
             8  |   -.096739   .0322098    -3.00   0.003     -.159925    -.033553
             9  |  -.1111934   .0329288    -3.38   0.001    -.1757898    -.046597
            10  |   -.127169   .0330857    -3.84   0.000    -.1920732   -.0622649
            11  |  -.1404707   .0345664    -4.06   0.000    -.2082796   -.0726619
            12  |  -.1247544   .0355756    -3.51   0.000     -.194543   -.0549657
            13  |   -.130166   .0361931    -3.60   0.000    -.2011659   -.0591661
            14  |  -.1048962   .0365276    -2.87   0.004    -.1765523   -.0332401
            15  |  -.0753564   .0364006    -2.07   0.039    -.1467634   -.0039494
            16  |  -.0713423   .0375415    -1.90   0.058    -.1449874    .0023028
            17  |  -.0519796   .0383743    -1.35   0.176    -.1272585    .0232992
            18  |  -.0410786   .0400021    -1.03   0.305    -.1195507    .0373934
            19  |  -.0371392   .0400577    -0.93   0.354    -.1157204     .041442
            20  |   .0041974   .0408891     0.10   0.918    -.0760148    .0844096
            21  |  -.0299236   .0409142    -0.73   0.465    -.1101849    .0503378
            22  |  -.0127207   .0419198    -0.30   0.762    -.0949547    .0695134
            23  |  -.0287602   .0419646    -0.69   0.493    -.1110821    .0535618
            24  |  -.0544233   .0416228    -1.31   0.191    -.1360748    .0272281
            25  |  -.0900911   .0424321    -2.12   0.034    -.1733302   -.0068521
            26  |   .1074899   .0462826     2.32   0.020     .0166974    .1982824
            27  |   .0951086   .0438531     2.17   0.030      .009082    .1811351
            28  |   .1254233   .0433195     2.90   0.004     .0404435    .2104032
            29  |   .1036501   .0435325     2.38   0.017     .0182524    .1890478
            30  |   .1170218   .0428145     2.73   0.006     .0330326    .2010109
            31  |   .1010014   .0430764     2.34   0.019     .0164985    .1855043
            32  |   .1043764   .0439608     2.37   0.018     .0181385    .1906144
            33  |   .0705065   .0438158     1.61   0.108    -.0154469      .15646
            34  |   .0550409   .0449437     1.22   0.221    -.0331252    .1432069
            35  |   .0794625   .0448541     1.77   0.077    -.0085277    .1674527
            36  |   .0513764   .0453257     1.13   0.257     -.037539    .1402919
            37  |   .0507244   .0452356     1.12   0.262    -.0380142     .139463
            38  |   .0491005   .0456205     1.08   0.282    -.0403931    .1385941
            39  |   .0787609   .0458974     1.72   0.086    -.0112761    .1687979
            40  |   .0904088   .0460237     1.96   0.050     .0001241    .1806935
            41  |   .0939241   .0467956     2.01   0.045     .0021252    .1857229
            42  |   .1030644   .0474219     2.17   0.030     .0100369    .1960919
            43  |    .121488   .0486631     2.50   0.013     .0260256    .2169505
            44  |   .0838606    .050423     1.66   0.097    -.0150542    .1827754
            45  |   .0813938   .0485453     1.68   0.094    -.0138376    .1766252
            46  |   .1016729   .0495299     2.05   0.040     .0045102    .1988356
            47  |   .1379764   .0503185     2.74   0.006     .0392666    .2366863
            48  |   .1216088   .0504637     2.41   0.016     .0226141    .2206035
            49  |   .0115723    .051848     0.22   0.823    -.0901379    .1132825
            50  |   -.023849   .0533745    -0.45   0.655    -.1285536    .0808557
                |
        age_cat |
             2  |    .098749   .0185195     5.33   0.000     .0624192    .1350787
             3  |   .1112626    .020276     5.49   0.000     .0714873     .151038
             4  |   .1891031    .021828     8.66   0.000     .1462833     .231923
             5  |   .2254088   .0251723     8.95   0.000     .1760283    .2747894
             6  |   .2663687   .0296205     8.99   0.000     .2082621    .3244753
                |
          _cons |   .3368336   .0315955    10.66   0.000     .2748527    .3988145
----------------+----------------------------------------------------------------
        sigma_u |  .36553198
        sigma_e |  .30827755
            rho |  .58436213   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .043754490374828

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.0438                                         min =          2
     between = 0.1882                                         avg =       88.1
     overall = 0.0796                                         max =      4,150

                                                F(59,1368)        =       5.95
corr(u_i, Xb)  = 0.1137                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,369 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0101195   .0137199     0.74   0.461    -.0167948    .0370338
during_domestic |  -.0030219   .0076867    -0.39   0.694    -.0181009    .0120571
 after_domestic |  -.0229913   .0089306    -2.57   0.010    -.0405105    -.005472
   during_expat |   .0135477   .0107969     1.25   0.210    -.0076326    .0347279
    after_expat |  -.0007578   .0095441    -0.08   0.937    -.0194805    .0179648
                |
       ind_year |
             2  |   .0165398   .0224456     0.74   0.461    -.0274918    .0605714
             3  |  -.0482865   .0254605    -1.90   0.058    -.0982323    .0016593
             4  |  -.0781473   .0268296    -2.91   0.004     -.130779   -.0255156
             5  |  -.0746549   .0274181    -2.72   0.007     -.128441   -.0208689
             6  |  -.0841922   .0303284    -2.78   0.006    -.1436875   -.0246968
             7  |  -.0919542   .0315831    -2.91   0.004    -.1539108   -.0299976
             8  |   -.096739   .0322098    -3.00   0.003     -.159925    -.033553
             9  |  -.1111934   .0329288    -3.38   0.001    -.1757898    -.046597
            10  |   -.127169   .0330857    -3.84   0.000    -.1920732   -.0622649
            11  |  -.1404707   .0345664    -4.06   0.000    -.2082796   -.0726619
            12  |  -.1247544   .0355756    -3.51   0.000     -.194543   -.0549657
            13  |   -.130166   .0361931    -3.60   0.000    -.2011659   -.0591661
            14  |  -.1048962   .0365276    -2.87   0.004    -.1765523   -.0332401
            15  |  -.0753564   .0364006    -2.07   0.039    -.1467634   -.0039494
            16  |  -.0713423   .0375415    -1.90   0.058    -.1449874    .0023028
            17  |  -.0519796   .0383743    -1.35   0.176    -.1272585    .0232992
            18  |  -.0410786   .0400021    -1.03   0.305    -.1195507    .0373934
            19  |  -.0371392   .0400577    -0.93   0.354    -.1157204     .041442
            20  |   .0041974   .0408891     0.10   0.918    -.0760148    .0844096
            21  |  -.0299236   .0409142    -0.73   0.465    -.1101849    .0503378
            22  |  -.0127207   .0419198    -0.30   0.762    -.0949547    .0695134
            23  |  -.0287602   .0419646    -0.69   0.493    -.1110821    .0535618
            24  |  -.0544233   .0416228    -1.31   0.191    -.1360748    .0272281
            25  |  -.0900911   .0424321    -2.12   0.034    -.1733302   -.0068521
            26  |   .1074899   .0462826     2.32   0.020     .0166974    .1982824
            27  |   .0951086   .0438531     2.17   0.030      .009082    .1811351
            28  |   .1254233   .0433195     2.90   0.004     .0404435    .2104032
            29  |   .1036501   .0435325     2.38   0.017     .0182524    .1890478
            30  |   .1170218   .0428145     2.73   0.006     .0330326    .2010109
            31  |   .1010014   .0430764     2.34   0.019     .0164985    .1855043
            32  |   .1043764   .0439608     2.37   0.018     .0181385    .1906144
            33  |   .0705065   .0438158     1.61   0.108    -.0154469      .15646
            34  |   .0550409   .0449437     1.22   0.221    -.0331252    .1432069
            35  |   .0794625   .0448541     1.77   0.077    -.0085277    .1674527
            36  |   .0513764   .0453257     1.13   0.257     -.037539    .1402919
            37  |   .0507244   .0452356     1.12   0.262    -.0380142     .139463
            38  |   .0491005   .0456205     1.08   0.282    -.0403931    .1385941
            39  |   .0787609   .0458974     1.72   0.086    -.0112761    .1687979
            40  |   .0904088   .0460237     1.96   0.050     .0001241    .1806935
            41  |   .0939241   .0467956     2.01   0.045     .0021252    .1857229
            42  |   .1030644   .0474219     2.17   0.030     .0100369    .1960919
            43  |    .121488   .0486631     2.50   0.013     .0260256    .2169505
            44  |   .0838606    .050423     1.66   0.097    -.0150542    .1827754
            45  |   .0813938   .0485453     1.68   0.094    -.0138376    .1766252
            46  |   .1016729   .0495299     2.05   0.040     .0045102    .1988356
            47  |   .1379764   .0503185     2.74   0.006     .0392666    .2366863
            48  |   .1216088   .0504637     2.41   0.016     .0226141    .2206035
            49  |   .0115723    .051848     0.22   0.823    -.0901379    .1132825
            50  |   -.023849   .0533745    -0.45   0.655    -.1285536    .0808557
                |
        age_cat |
             2  |    .098749   .0185195     5.33   0.000     .0624192    .1350787
             3  |   .1112626    .020276     5.49   0.000     .0714873     .151038
             4  |   .1891031    .021828     8.66   0.000     .1462833     .231923
             5  |   .2254088   .0251723     8.95   0.000     .1760283    .2747894
             6  |   .2663687   .0296205     8.99   0.000     .2082621    .3244753
                |
          _cons |   .3368336   .0315955    10.66   0.000     .2748527    .3988145
----------------+----------------------------------------------------------------
        sigma_u |  .36553198
        sigma_e |  .30827755
            rho |  .58436213   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    103,133
Group variable: id                              Number of groups  =      1,336

R-sq:                                           Obs per group:
     within  = 0.0384                                         min =          1
     between = 0.0054                                         avg =       77.2
     overall = 0.0316                                         max =      3,652

                                                F(56,1335)        =      15.34
corr(u_i, Xb)  = -0.1900                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,336 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0211675   .0262301    -0.81   0.420    -.0726242    .0302892
during_domestic |  -.0274304   .0137082    -2.00   0.046    -.0543224   -.0005383
 after_domestic |   -.044374   .0137613    -3.22   0.001      -.07137   -.0173779
   during_expat |  -.0455984   .0217323    -2.10   0.036    -.0882316   -.0029652
    after_expat |  -.0353974   .0138068    -2.56   0.010    -.0624828   -.0083121
                |
       ind_year |
             3  |  -.1413974   .0747609    -1.89   0.059     -.288059    .0052642
             4  |   -.071198    .075447    -0.94   0.346    -.2192055    .0768096
             5  |  -.0841642   .0728464    -1.16   0.248    -.2270701    .0587417
             6  |  -.1256618   .0773101    -1.63   0.104    -.2773244    .0260008
             7  |  -.0032231    .075069    -0.04   0.966    -.1504891    .1440429
             8  |  -.0449077   .0758805    -0.59   0.554    -.1937657    .1039504
             9  |  -.0467743   .0786776    -0.59   0.552    -.2011194    .1075709
            10  |  -.0771515   .0757702    -1.02   0.309     -.225793    .0714901
            11  |  -.0756277   .0769815    -0.98   0.326    -.2266455    .0753902
            12  |   -.073196   .0804991    -0.91   0.363    -.2311146    .0847226
            13  |  -.2428682   .0802061    -3.03   0.003    -.4002119   -.0855244
            14  |  -.2741532   .0768292    -3.57   0.000    -.4248723    -.123434
            15  |   -.126328   .0788928    -1.60   0.110    -.2810955    .0284394
            16  |  -.1453467   .0787152    -1.85   0.065    -.2997656    .0090723
            17  |  -.1959106   .0825473    -2.37   0.018    -.3578473    -.033974
            18  |  -.2216996   .0803666    -2.76   0.006    -.3793581   -.0640412
            19  |  -.1992902   .0836184    -2.38   0.017    -.3633279   -.0352525
            20  |  -.1493318   .0842085    -1.77   0.076    -.3145272    .0158635
            21  |  -.2559768   .0825039    -3.10   0.002    -.4178281   -.0941255
            22  |  -.0681453    .085931    -0.79   0.428    -.2367199    .1004293
            23  |  -.3087163   .0854921    -3.61   0.000    -.4764298   -.1410028
            24  |  -.6255296   .0879086    -7.12   0.000    -.7979837   -.4530755
            25  |  -.2965151    .101327    -2.93   0.003    -.4952927   -.0977376
            27  |  -.1461611   .0959195    -1.52   0.128    -.3343304    .0420082
            28  |  -.6386146   .0886129    -7.21   0.000    -.8124503   -.4647788
            29  |  -.2509043   .0890257    -2.82   0.005    -.4255498   -.0762587
            30  |  -.3868386   .0886464    -4.36   0.000      -.56074   -.2129372
            31  |  -.2764022   .0892525    -3.10   0.002    -.4514927   -.1013117
            32  |   -.328162   .0900832    -3.64   0.000     -.504882    -.151442
            33  |  -.1570715   .0896743    -1.75   0.080    -.3329893    .0188463
            34  |  -.2993531   .0894584    -3.35   0.001    -.4748474   -.1238587
            35  |  -.2554515   .0908591    -2.81   0.005    -.4336937   -.0772093
            36  |  -.3358376   .0911529    -3.68   0.000     -.514656   -.1570191
            37  |  -.3774661   .0920187    -4.10   0.000    -.5579832   -.1969491
            38  |  -.2723977   .0924747    -2.95   0.003    -.4538092   -.0909861
            39  |  -.4112982   .0920719    -4.47   0.000    -.5919196   -.2306768
            40  |  -.3413348   .0929839    -3.67   0.000    -.5237453   -.1589244
            41  |  -.2955601   .0953936    -3.10   0.002    -.4826977   -.1084225
            42  |  -.2497747   .0951664    -2.62   0.009    -.4364667   -.0630828
            43  |  -.1906434   .0986272    -1.93   0.053    -.3841246    .0028379
            44  |  -.2356285   .0970235    -2.43   0.015    -.4259637   -.0452933
            45  |  -.4825766   .0975969    -4.94   0.000    -.6740365   -.2911166
            46  |  -.2966819   .0956359    -3.10   0.002    -.4842948    -.109069
            47  |  -.0214115   .1001914    -0.21   0.831    -.2179613    .1751382
            48  |  -.5131388    .095513    -5.37   0.000    -.7005108   -.3257669
            49  |  -.9306862   .0947954    -9.82   0.000     -1.11665   -.7447221
            50  |  -.3428328   .1107997    -3.09   0.002    -.5601934   -.1254723
                |
        age_cat |
             3  |  -.0986567   .0562065    -1.76   0.079    -.2089194    .0116059
             4  |  -.2390415   .0519538    -4.60   0.000    -.3409615   -.1371215
             5  |  -.3245763    .054696    -5.93   0.000    -.4318757   -.2172769
             6  |  -.3714031   .0593942    -6.25   0.000    -.4879192   -.2548871
                |
          _cons |   .4400973   .0781753     5.63   0.000     .2867376     .593457
----------------+----------------------------------------------------------------
        sigma_u |  .35688881
        sigma_e |  .83546989
            rho |  .15431642   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0384204752184375

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    103,133
Group variable: id                              Number of groups  =      1,336

R-sq:                                           Obs per group:
     within  = 0.0384                                         min =          1
     between = 0.0054                                         avg =       77.2
     overall = 0.0316                                         max =      3,652

                                                F(56,1335)        =      15.34
corr(u_i, Xb)  = -0.1900                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 1,336 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0211675   .0262301    -0.81   0.420    -.0726242    .0302892
during_domestic |  -.0274304   .0137082    -2.00   0.046    -.0543224   -.0005383
 after_domestic |   -.044374   .0137613    -3.22   0.001      -.07137   -.0173779
   during_expat |  -.0455984   .0217323    -2.10   0.036    -.0882316   -.0029652
    after_expat |  -.0353974   .0138068    -2.56   0.010    -.0624828   -.0083121
                |
       ind_year |
             3  |  -.1413974   .0747609    -1.89   0.059     -.288059    .0052642
             4  |   -.071198    .075447    -0.94   0.346    -.2192055    .0768096
             5  |  -.0841642   .0728464    -1.16   0.248    -.2270701    .0587417
             6  |  -.1256618   .0773101    -1.63   0.104    -.2773244    .0260008
             7  |  -.0032231    .075069    -0.04   0.966    -.1504891    .1440429
             8  |  -.0449077   .0758805    -0.59   0.554    -.1937657    .1039504
             9  |  -.0467743   .0786776    -0.59   0.552    -.2011194    .1075709
            10  |  -.0771515   .0757702    -1.02   0.309     -.225793    .0714901
            11  |  -.0756277   .0769815    -0.98   0.326    -.2266455    .0753902
            12  |   -.073196   .0804991    -0.91   0.363    -.2311146    .0847226
            13  |  -.2428682   .0802061    -3.03   0.003    -.4002119   -.0855244
            14  |  -.2741532   .0768292    -3.57   0.000    -.4248723    -.123434
            15  |   -.126328   .0788928    -1.60   0.110    -.2810955    .0284394
            16  |  -.1453467   .0787152    -1.85   0.065    -.2997656    .0090723
            17  |  -.1959106   .0825473    -2.37   0.018    -.3578473    -.033974
            18  |  -.2216996   .0803666    -2.76   0.006    -.3793581   -.0640412
            19  |  -.1992902   .0836184    -2.38   0.017    -.3633279   -.0352525
            20  |  -.1493318   .0842085    -1.77   0.076    -.3145272    .0158635
            21  |  -.2559768   .0825039    -3.10   0.002    -.4178281   -.0941255
            22  |  -.0681453    .085931    -0.79   0.428    -.2367199    .1004293
            23  |  -.3087163   .0854921    -3.61   0.000    -.4764298   -.1410028
            24  |  -.6255296   .0879086    -7.12   0.000    -.7979837   -.4530755
            25  |  -.2965151    .101327    -2.93   0.003    -.4952927   -.0977376
            27  |  -.1461611   .0959195    -1.52   0.128    -.3343304    .0420082
            28  |  -.6386146   .0886129    -7.21   0.000    -.8124503   -.4647788
            29  |  -.2509043   .0890257    -2.82   0.005    -.4255498   -.0762587
            30  |  -.3868386   .0886464    -4.36   0.000      -.56074   -.2129372
            31  |  -.2764022   .0892525    -3.10   0.002    -.4514927   -.1013117
            32  |   -.328162   .0900832    -3.64   0.000     -.504882    -.151442
            33  |  -.1570715   .0896743    -1.75   0.080    -.3329893    .0188463
            34  |  -.2993531   .0894584    -3.35   0.001    -.4748474   -.1238587
            35  |  -.2554515   .0908591    -2.81   0.005    -.4336937   -.0772093
            36  |  -.3358376   .0911529    -3.68   0.000     -.514656   -.1570191
            37  |  -.3774661   .0920187    -4.10   0.000    -.5579832   -.1969491
            38  |  -.2723977   .0924747    -2.95   0.003    -.4538092   -.0909861
            39  |  -.4112982   .0920719    -4.47   0.000    -.5919196   -.2306768
            40  |  -.3413348   .0929839    -3.67   0.000    -.5237453   -.1589244
            41  |  -.2955601   .0953936    -3.10   0.002    -.4826977   -.1084225
            42  |  -.2497747   .0951664    -2.62   0.009    -.4364667   -.0630828
            43  |  -.1906434   .0986272    -1.93   0.053    -.3841246    .0028379
            44  |  -.2356285   .0970235    -2.43   0.015    -.4259637   -.0452933
            45  |  -.4825766   .0975969    -4.94   0.000    -.6740365   -.2911166
            46  |  -.2966819   .0956359    -3.10   0.002    -.4842948    -.109069
            47  |  -.0214115   .1001914    -0.21   0.831    -.2179613    .1751382
            48  |  -.5131388    .095513    -5.37   0.000    -.7005108   -.3257669
            49  |  -.9306862   .0947954    -9.82   0.000     -1.11665   -.7447221
            50  |  -.3428328   .1107997    -3.09   0.002    -.5601934   -.1254723
                |
        age_cat |
             3  |  -.0986567   .0562065    -1.76   0.079    -.2089194    .0116059
             4  |  -.2390415   .0519538    -4.60   0.000    -.3409615   -.1371215
             5  |  -.3245763    .054696    -5.93   0.000    -.4318757   -.2172769
             6  |  -.3714031   .0593942    -6.25   0.000    -.4879192   -.2548871
                |
          _cons |   .4400973   .0781753     5.63   0.000     .2867376     .593457
----------------+----------------------------------------------------------------
        sigma_u |  .35688881
        sigma_e |  .83546989
            rho |  .15431642   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. *Szelekció az akvicíziós mintában
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. areg f1.expat lnL lnQ lnK exporter if ever_foreign==1&greenfield!=1, a(industry_year) cluster
> (frame_id)

Linear regression, absorbing indicators         Number of obs     =    107,455
                                                F(   4,   1352)   =       4.68
                                                Prob > F          =     0.0009
                                                R-squared         =     0.0762
                                                Adj R-squared     =     0.0617
                                                Root MSE          =     0.4528

                           (Std. Err. adjusted for 1,353 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |  -.0238634   .0109652    -2.18   0.030    -.0453739   -.0023528
         lnQ |   .0230453   .0092428     2.49   0.013     .0049134    .0411771
         lnK |   .0023352   .0071066     0.33   0.743    -.0116059    .0162762
    exporter |   .0435343   .0187465     2.32   0.020      .006759    .0803095
       _cons |   .0464254   .0821814     0.56   0.572    -.1147916    .2076423
-------------+----------------------------------------------------------------
industry_y~r |   absorbed                                    (1653 categories)

. do regram output/regression/selection 1 1

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Linear regression, absorbing indicators         Number of obs     =    107,455
                                                F(   4,   1352)   =       4.68
                                                Prob > F          =     0.0009
                                                R-squared         =     0.0762
                                                Adj R-squared     =     0.0617
                                                Root MSE          =     0.4528

                           (Std. Err. adjusted for 1,353 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |  -.0238634   .0109652    -2.18   0.030    -.0453739   -.0023528
         lnQ |   .0230453   .0092428     2.49   0.013     .0049134    .0411771
         lnK |   .0023352   .0071066     0.33   0.743    -.0116059    .0162762
    exporter |   .0435343   .0187465     2.32   0.020      .006759    .0803095
       _cons |   .0464254   .0821814     0.56   0.572    -.1147916    .2076423
-------------+----------------------------------------------------------------
industry_y~r |   absorbed                                    (1653 categories)

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. *Akvizíciós minta (greenfield nélkül)
. keep if ever_foreign==1&greenfield!=1
(567,534 observations deleted)

. *Dinamika
. scalar Tbefore = 4

. scalar Tafter = 5

. 
. local N = Tbefore+Tafter+1

. 
. do event_study

. local T1 = Tbefore 

. local T2 = Tafter

. 
. foreach X in expat domestic {
  2.         gen byte `X'_p_0 = tenure==0 & (`X'==1)
  3.         forval t=1/`T1' {
  4.                 gen byte `X'_m_`t' = tenure== -`t' & (`X'==1)
  5.         }
  6.         forval t=1/`T2' {
  7.                 gen byte `X'_p_`t' = tenure== `t' & (`X'==1)
  8.         }
  9. }

. local X foreign

. gen byte `X'_p_0 = tenure_`X'==0

. forval t=1/`T1' {
  2.         gen byte `X'_m_`t' = tenure_`X'== -`t'
  3. }

. forval t=1/`T2' {
  2.         gen byte `X'_p_`t' = tenure_`X'== `t'
  3. }

. sort frame_id year

. 
. * illustrate window overlap and recoding
. l manager_id expat year tenure* if frame_id=="ft10072219"

        +--------------------------------------------------------------------------+
        |      manager_id   expat   year   tenure~n   tenure   tenure~c   tenure~t |
        |--------------------------------------------------------------------------|
  4237. |         PP18562       0   1992        -19      -21        -21          0 |
  4238. | PP177715_998327       0   1992        -19      -20        -20          0 |
  4239. |         PP45376       0   1992        -19      -21        -21          0 |
  4240. |         PP45376       0   1993        -18      -20        -20          0 |
  4241. | PP177715_998327       0   1993        -18      -19        -19          0 |
        |--------------------------------------------------------------------------|
  4242. |         PP18562       0   1993        -18      -20        -20          0 |
  4243. |         PP45376       0   1994        -17      -19        -19          0 |
  4244. | PP177715_998327       0   1994        -17      -18        -18          0 |
  4245. |         PP18562       0   1994        -17      -19        -19          0 |
  4246. |         PP45376       0   1995        -16      -18        -18          0 |
        |--------------------------------------------------------------------------|
  4247. | PP177715_998327       0   1995        -16      -17        -17          0 |
  4248. |         PP18562       0   1995        -16      -18        -18          0 |
  4249. |         PP45376       0   1996        -15      -17        -17          0 |
  4250. | PP177715_998327       0   1996        -15      -16        -16          0 |
  4251. |         PP18562       0   1996        -15      -17        -17          0 |
        |--------------------------------------------------------------------------|
  4252. |         PP45376       0   1997        -14      -16        -16          0 |
  4253. | PP177715_998327       0   1997        -14      -15        -15          0 |
  4254. |         PP18562       0   1997        -14      -16        -16          0 |
  4255. |         PP45376       0   1998        -13      -15        -15          0 |
  4256. | PP177715_998327       0   1998        -13      -14        -14          0 |
        |--------------------------------------------------------------------------|
  4257. |         PP18562       0   1998        -13      -15        -15          0 |
  4258. | PP177715_998327       0   1999        -12      -13        -13          0 |
  4259. |         PP45376       0   1999        -12      -14        -14          0 |
  4260. |         PP18562       0   1999        -12      -14        -14          0 |
  4261. |         PP45376       0   2000        -11      -13        -13          0 |
        |--------------------------------------------------------------------------|
  4262. | PP177715_998327       0   2000        -11      -12        -12          0 |
  4263. |         PP18562       0   2000        -11      -13        -13          0 |
  4264. |         PP18562       0   2001        -10      -12        -12          0 |
  4265. | PP177715_998327       0   2001        -10      -11        -11          0 |
  4266. |         PP45376       0   2001        -10      -12        -12          0 |
        |--------------------------------------------------------------------------|
  4267. |         PP18562       0   2002         -9      -11        -11          0 |
  4268. |         PP45376       0   2002         -9      -11        -11          0 |
  4269. | PP177715_998327       0   2002         -9      -10        -10          0 |
  4270. | PP177715_998327       0   2003         -8       -9         -9          0 |
  4271. |         PP45376       0   2003         -8      -10        -10          0 |
        |--------------------------------------------------------------------------|
  4272. |         PP18562       0   2003         -8      -10        -10          0 |
  4273. |         PP18562       0   2004         -7       -9         -9          0 |
  4274. |         PP45376       0   2004         -7       -9         -9          0 |
  4275. | PP177715_998327       0   2004         -7       -8         -8          0 |
  4276. |         PP18562       0   2005         -6       -8         -8          0 |
        |--------------------------------------------------------------------------|
  4277. |         PP45376       0   2005         -6       -8         -8          0 |
  4278. | PP177715_998327       0   2005         -6       -7         -7          0 |
  4279. |         PP45376       0   2006         -5       -7         -7          0 |
  4280. | PP177715_998327       0   2006         -5       -6         -6          0 |
  4281. |         PP18562       0   2006         -5       -7         -7          0 |
        |--------------------------------------------------------------------------|
  4282. |         PP45376       0   2007         -4       -6         -6          0 |
  4283. |         PP18562       0   2007         -4       -6         -6          0 |
  4284. | PP177715_998327       0   2007         -4       -5         -5          0 |
  4285. |         PP18562       0   2008         -3       -5         -5          0 |
  4286. | PP177715_998327       0   2008         -3       -4         -4          0 |
        |--------------------------------------------------------------------------|
  4287. |         PP45376       0   2008         -3       -5         -5          0 |
  4288. |         PP18562       0   2009         -2       -4         -4          0 |
  4289. |         PP45376       0   2009         -2       -4         -4          0 |
  4290. | PP177715_998327       0   2009         -2       -3         -3          0 |
  4291. | PP177715_998327       0   2010         -1       -2         -2          0 |
        |--------------------------------------------------------------------------|
  4292. |         PP45376       0   2010         -1       -3         -3          0 |
  4293. |         PP18562       0   2010         -1       -3         -3          0 |
  4294. |         PP45376       0   2011          0       -2         -2          0 |
  4295. |         PP18562       0   2011          0       -2         -2          0 |
  4296. | PP177715_998327       0   2011          0       -1         -1          0 |
        |--------------------------------------------------------------------------|
  4297. | PP177715_998327       0   2012          1        0          0          0 |
  4298. |         PP45376       0   2012          1       -1         -1          0 |
  4299. |         PP18562       0   2012          1       -1         -1          0 |
  4300. | PP177715_998327       0   2013          2        1          1          0 |
  4301. |         PP45376       0   2013          2        0          0          0 |
        |--------------------------------------------------------------------------|
  4302. |         PP18562       0   2013          2        0          0          0 |
  4303. | PP177715_998327       0   2014          3        2          2          0 |
  4304. |         PP18562       0   2014          3        1          1          0 |
  4305. |         PP45376       0   2014          3        1          1          0 |
  4306. |         PP18562       0   2015          4        2          2          0 |
        |--------------------------------------------------------------------------|
  4307. |         PP45376       0   2015          4        2          2          0 |
  4308. | PP177715_998327       0   2015          4        3          3          0 |
  4309. |         PP45376       0   2016          5        3          3          0 |
  4310. | PP177715_998327       0   2016          5        4          4          0 |
  4311. |         PP18562       0   2016          5        3          3          0 |
        +--------------------------------------------------------------------------+

. 
end of do-file

. 
. local Tbefore = Tbefore

. local Tafter = Tafter

. 
. foreach Y of var `scale' `intensity' {
  2.         * with firm FE, controls are years more than Tbefore before any event happens
.         xtreg `Y' *_m_? *_p_? i.ind_year i.age_cat if expat!=.&greenfield!=1 & ever_foreign==
> 1, i(id) fe vce(cluster id)
  3.         preserve
  4.         clear
  5.         set obs `N'
  6.         gen t = _n-1-`Tbefore'
  7.         label var t "Time since event (year)"
  8. 
.         foreach X in foreign expat domestic {
  9.                 gen `X'_beta=.
 10.                 gen `X'_lower=.
 11.                 gen `X'_upper=.
 12.                 forval t=-`Tbefore'/`Tafter' {
 13.                         local tag "`t'"
 14.                         if (`t'<0) {
 15.                                 local tag = -`t'
 16.                                 local tag  _m_`tag'
 17.                         }
 18.                         else {
 19.                                 local tag  _p_`t'
 20.                         }
 21.                         replace `X'_beta = _b[`X'`tag'] if t==`t'
 22.                         replace `X'_lower = `X'_beta-1.69*_se[`X'`tag'] if t==`t'
 23.                         replace `X'_upper = `X'_beta+1.69*_se[`X'`tag'] if t==`t'
 24.                 }
 25.                 label var `X'_beta "`Y'"
 26.                 label var `X'_upper "90% CI"
 27.                 label var `X'_lower "90% CI"
 28. 
.         }
 29.         label var foreign_beta "Foreign owner"
 30.         label var expat_beta "New expat manager"
 31.         label var domestic_beta "New domestic manager"
 32.         * omit last event year from graph, which is winsorized
.         tw (line expat_beta domestic_beta t if t>=-Tbefore & t<Tafter, sort), scheme(538w) ti
> tle(`Y') aspect(0.67)
 33.         graph export output/figure/`Y'_event_study.png, replace width(800)
 34.         
.         restore
 35. 
. }
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.1130                                         min =          2
     between = 0.1367                                         avg =       88.1
     overall = 0.0912                                         max =      4,150

                                                F(84,1368)        =       4.18
corr(u_i, Xb)  = 0.0339                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,369 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0993868   .0353409     2.81   0.005     .0300585    .1687151
   expat_m_2 |   .0978233   .0333407     2.93   0.003     .0324189    .1632277
   expat_m_3 |   .0909317   .0346687     2.62   0.009     .0229221    .1589413
   expat_m_4 |   .0669738   .0349885     1.91   0.056     -.001663    .1356106
domestic_m_1 |   .1075754   .0325506     3.30   0.001     .0437209    .1714299
domestic_m_2 |    .120683   .0297134     4.06   0.000     .0623942    .1789717
domestic_m_3 |   .1272344   .0276457     4.60   0.000      .073002    .1814669
domestic_m_4 |   .1365837   .0257858     5.30   0.000     .0859997    .1871677
 foreign_m_1 |  -.1212443   .0649982    -1.87   0.062    -.2487513    .0062627
 foreign_m_2 |  -.1109771   .0741657    -1.50   0.135    -.2564679    .0345137
 foreign_m_3 |  -.1171921   .0904837    -1.30   0.195     -.294694    .0603099
 foreign_m_4 |  -.1636584   .0835931    -1.96   0.050    -.3276428    .0003261
   expat_p_0 |   .0519702   .0366676     1.42   0.157    -.0199606     .123901
   expat_p_1 |   .0589829   .0368656     1.60   0.110    -.0133363    .1313021
   expat_p_2 |   .0580565   .0345961     1.68   0.094    -.0098107    .1259236
   expat_p_3 |   .0398358   .0334324     1.19   0.234    -.0257484    .1054201
   expat_p_4 |   .0227771   .0341555     0.67   0.505    -.0442258      .08978
   expat_p_5 |   .0017862   .0355714     0.05   0.960    -.0679942    .0715665
domestic_p_0 |   .0935159   .0334801     2.79   0.005      .027838    .1591938
domestic_p_1 |   .0717999   .0329544     2.18   0.030     .0071534    .1364464
domestic_p_2 |   .0480758   .0334114     1.44   0.150    -.0174673    .1136188
domestic_p_3 |   .0082013   .0345125     0.24   0.812    -.0595018    .0759044
domestic_p_4 |  -.0164811     .03568    -0.46   0.644    -.0864745    .0535123
domestic_p_5 |   -.028676      .0321    -0.89   0.372    -.0916466    .0342947
 foreign_p_0 |  -.1655394   .0746864    -2.22   0.027    -.3120516   -.0190272
 foreign_p_1 |  -.1265819   .0667389    -1.90   0.058    -.2575036    .0043398
 foreign_p_2 |  -.1064232   .0621042    -1.71   0.087    -.2282529    .0154066
 foreign_p_3 |  -.0804821   .0578014    -1.39   0.164    -.1938711    .0329069
 foreign_p_4 |  -.0609486   .0521971    -1.17   0.243    -.1633438    .0414465
 foreign_p_5 |  -.0684342   .0457101    -1.50   0.135    -.1581037    .0212353
             |
    ind_year |
          2  |  -.0765852   .0752191    -1.02   0.309    -.2241425    .0709721
          3  |  -.2731844   .0902495    -3.03   0.003    -.4502268    -.096142
          4  |  -.3654766   .1021021    -3.58   0.000    -.5657702    -.165183
          5  |  -.4928128   .1171785    -4.21   0.000    -.7226818   -.2629438
          6  |  -.6001259   .1301785    -4.61   0.000    -.8554971   -.3447547
          7  |  -.6531182   .1392662    -4.69   0.000    -.9263167   -.3799197
          8  |  -.7416208    .153452    -4.83   0.000    -1.042648    -.440594
          9  |  -.8738854   .1654693    -5.28   0.000    -1.198486   -.5492845
         10  |  -.9241312   .1715911    -5.39   0.000    -1.260741    -.587521
         11  |   -.986813   .1768896    -5.58   0.000    -1.333817   -.6398088
         12  |  -1.019639   .1820537    -5.60   0.000    -1.376773   -.6625039
         13  |  -1.084507   .1828488    -5.93   0.000    -1.443202   -.7258125
         14  |  -1.125663   .1901868    -5.92   0.000    -1.498753    -.752574
         15  |  -1.132362   .1887963    -6.00   0.000    -1.502723   -.7620002
         16  |  -1.140835   .1905737    -5.99   0.000    -1.514684   -.7669871
         17  |  -1.228307   .1998091    -6.15   0.000    -1.620273    -.836342
         18  |  -1.298334   .2034861    -6.38   0.000    -1.697513   -.8991557
         19  |   -1.35846   .2080477    -6.53   0.000    -1.766587   -.9503325
         20  |   -1.40999   .2113106    -6.67   0.000    -1.824518   -.9954619
         21  |  -1.472314   .2049684    -7.18   0.000    -1.874401   -1.070228
         22  |  -1.578668    .206279    -7.65   0.000    -1.983326   -1.174011
         23  |  -1.647655   .2140774    -7.70   0.000     -2.06761   -1.227699
         24  |  -1.563439   .2110392    -7.41   0.000    -1.977434   -1.149443
         25  |  -1.632256   .2175535    -7.50   0.000    -2.059031   -1.205482
         26  |   .8226184   .2625473     3.13   0.002     .3075794    1.337657
         27  |   .6617994   .2587012     2.56   0.011     .1543053    1.169294
         28  |   .5151718   .2531402     2.04   0.042     .0185867    1.011757
         29  |   .4319305   .2534078     1.70   0.089    -.0651795    .9290405
         30  |   .2997005   .2530289     1.18   0.236    -.1966662    .7960673
         31  |   .2032748   .2530445     0.80   0.422    -.2931224    .6996721
         32  |   .0578083   .2483955     0.23   0.816     -.429469    .5450857
         33  |  -.0441558   .2477696    -0.18   0.859    -.5302052    .4418937
         34  |  -.1595703   .2507542    -0.64   0.525    -.6514747    .3323342
         35  |  -.2358885   .2510569    -0.94   0.348    -.7283869    .2566098
         36  |  -.3283249   .2512967    -1.31   0.192    -.8212935    .1646437
         37  |  -.4222832   .2535376    -1.67   0.096    -.9196479    .0750815
         38  |  -.4638148   .2538327    -1.83   0.068    -.9617584    .0341287
         39  |  -.5456241   .2582745    -2.11   0.035    -1.052281   -.0389671
         40  |  -.5847242    .258019    -2.27   0.024     -1.09088   -.0785684
         41  |  -.6766356   .2621621    -2.58   0.010    -1.190919   -.1623523
         42  |  -.7256985   .2662331    -2.73   0.006    -1.247968   -.2034292
         43  |   -.791224   .2676282    -2.96   0.003     -1.31623   -.2662179
         44  |  -.8567882   .2721279    -3.15   0.002    -1.390621    -.322955
         45  |  -.8332555   .2731922    -3.05   0.002    -1.369177   -.2973344
         46  |  -.8481702   .2727535    -3.11   0.002    -1.383231   -.3131098
         47  |  -.8450478   .2740762    -3.08   0.002    -1.382703   -.3073926
         48  |   -.871749   .2743988    -3.18   0.002    -1.410037    -.333461
         49  |  -.8269001   .2736171    -3.02   0.003    -1.363655   -.2901456
         50  |  -.8541524   .2751421    -3.10   0.002    -1.393899   -.3144062
             |
     age_cat |
          2  |   .4132107   .0868658     4.76   0.000     .2428061    .5836153
          3  |   .5787134   .0969359     5.97   0.000     .3885543    .7688725
          4  |   .9621211   .1136393     8.47   0.000      .739195    1.185047
          5  |   1.348626    .138024     9.77   0.000     1.077864    1.619387
          6  |   1.592007   .1690943     9.41   0.000     1.260294    1.923719
             |
       _cons |   4.183983    .161275    25.94   0.000      3.86761    4.500356
-------------+----------------------------------------------------------------
     sigma_u |  1.0668707
     sigma_e |  .86027957
         rho |  .60598237   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    112,938
Group variable: id                              Number of groups  =      1,357

R-sq:                                           Obs per group:
     within  = 0.1589                                         min =          1
     between = 0.1495                                         avg =       83.2
     overall = 0.0701                                         max =      3,984

                                                F(84,1356)        =       8.90
corr(u_i, Xb)  = 0.0708                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,357 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0647838   .0453951     1.43   0.154    -.0242684     .153836
   expat_m_2 |   .0961429   .0450492     2.13   0.033     .0077692    .1845166
   expat_m_3 |    .078474   .0452105     1.74   0.083    -.0102161     .167164
   expat_m_4 |   .1123583   .0430039     2.61   0.009      .027997    .1967197
domestic_m_1 |   .0756677   .0387676     1.95   0.051    -.0003832    .1517187
domestic_m_2 |   .1258979   .0342386     3.68   0.000     .0587315    .1930643
domestic_m_3 |    .143002   .0314816     4.54   0.000     .0812441    .2047598
domestic_m_4 |   .1566848   .0295355     5.30   0.000     .0987446    .2146249
 foreign_m_1 |  -.0513402   .0775923    -0.66   0.508    -.2035542    .1008739
 foreign_m_2 |  -.0721954   .0822954    -0.88   0.380    -.2336355    .0892447
 foreign_m_3 |  -.1194675   .1209649    -0.99   0.324    -.3567662    .1178312
 foreign_m_4 |  -.1117537   .1241303    -0.90   0.368    -.3552621    .1317546
   expat_p_0 |   .0433126   .0497293     0.87   0.384    -.0542421    .1408673
   expat_p_1 |   .0355658   .0510953     0.70   0.487    -.0646685    .1358002
   expat_p_2 |   .0634302   .0465501     1.36   0.173    -.0278879    .1547483
   expat_p_3 |   .0552059   .0437285     1.26   0.207    -.0305771    .1409888
   expat_p_4 |   .0261993   .0446783     0.59   0.558    -.0614468    .1138454
   expat_p_5 |   .0012589     .04906     0.03   0.980    -.0949828    .0975006
domestic_p_0 |   .0648823   .0378391     1.71   0.087    -.0093472    .1391118
domestic_p_1 |   .0264392   .0379595     0.70   0.486    -.0480266    .1009049
domestic_p_2 |  -.0137238   .0395142    -0.35   0.728    -.0912394    .0637918
domestic_p_3 |  -.0119014   .0379318    -0.31   0.754    -.0863127    .0625099
domestic_p_4 |  -.0543154   .0429237    -1.27   0.206    -.1385194    .0298886
domestic_p_5 |  -.0309776   .0396293    -0.78   0.435     -.108719    .0467637
 foreign_p_0 |  -.0130582    .076792    -0.17   0.865    -.1637023    .1375858
 foreign_p_1 |   .0768431   .0739121     1.04   0.299    -.0681513    .2218376
 foreign_p_2 |   .0964598   .0792322     1.22   0.224    -.0589712    .2518908
 foreign_p_3 |   .1433889   .0675342     2.12   0.034     .0109062    .2758717
 foreign_p_4 |   .1058257   .0655238     1.62   0.107    -.0227133    .2343646
 foreign_p_5 |    .039921     .06551     0.61   0.542    -.0885909    .1684329
             |
    ind_year |
          2  |   .0784639   .1044942     0.75   0.453    -.1265239    .2834516
          3  |   .4008752   .1312479     3.05   0.002     .1434041    .6583462
          4  |   .4590778   .1466418     3.13   0.002     .1714084    .7467472
          5  |   .5530949   .1596959     3.46   0.001     .2398172    .8663727
          6  |   .6522696   .1687381     3.87   0.000     .3212536    .9832856
          7  |   .8161504   .1845051     4.42   0.000      .454204    1.178097
          8  |   .9025982   .1962731     4.60   0.000     .5175663     1.28763
          9  |   1.018696   .2045098     4.98   0.000     .6175064    1.419887
         10  |   1.121351   .2097627     5.35   0.000     .7098567    1.532846
         11  |   1.179594   .2185508     5.40   0.000     .7508601    1.608329
         12  |   1.139176   .2382226     4.78   0.000     .6718513    1.606501
         13  |   1.176608   .2201872     5.34   0.000     .7446632    1.608552
         14  |   1.139301   .2381717     4.78   0.000     .6720764    1.606526
         15  |   1.169482   .2317047     5.05   0.000     .7149433     1.62402
         16  |   1.179872   .2347228     5.03   0.000     .7194128    1.640331
         17  |   1.207002   .2495502     4.84   0.000     .7174557    1.696549
         18  |   1.051221   .2633472     3.99   0.000     .5346091    1.567833
         19  |   .8562883   .2825639     3.03   0.002     .3019784    1.410598
         20  |   .7085176   .2935878     2.41   0.016     .1325821    1.284453
         21  |   .7606118   .2722582     2.79   0.005     .2265188    1.294705
         22  |   .4855926   .3060322     1.59   0.113    -.1147553     1.08594
         23  |    .637446   .3027435     2.11   0.035     .0435495    1.231342
         24  |    .387316   .2882533     1.34   0.179    -.1781548    .9527867
         25  |    .362566   .2914755     1.24   0.214    -.2092258    .9343577
         26  |    1.13466   .3181197     3.57   0.000     .5106001     1.75872
         27  |   1.029757   .3206821     3.21   0.001     .4006703    1.658844
         28  |   1.069681   .3066751     3.49   0.001     .4680717     1.67129
         29  |   1.100311   .3160614     3.48   0.001     .4802888    1.720334
         30  |   1.117015   .3104344     3.60   0.000     .5080309    1.725998
         31  |   1.127392   .3093615     3.64   0.000     .5205128    1.734271
         32  |    1.23201   .3065825     4.02   0.000     .6305821    1.833437
         33  |   1.358827   .3047426     4.46   0.000     .7610086    1.956645
         34  |   1.421318   .3081783     4.61   0.000     .8167598    2.025876
         35  |   1.457893   .3103416     4.70   0.000     .8490914    2.066695
         36  |   1.503053   .3130628     4.80   0.000     .8889131    2.117193
         37  |   1.579627   .3156824     5.00   0.000     .9603482    2.198906
         38  |   1.554545    .320865     4.84   0.000     .9250989     2.18399
         39  |   1.629014   .3224401     5.05   0.000     .9964785     2.26155
         40  |   1.639186   .3207667     5.11   0.000     1.009933    2.268438
         41  |   1.422599   .3339876     4.26   0.000     .7674101    2.077787
         42  |   1.550834   .3363716     4.61   0.000     .8909686    2.210699
         43  |   1.557957   .3297761     4.72   0.000     .9110304    2.204884
         44  |   1.455596   .3339901     4.36   0.000     .8004028     2.11079
         45  |   1.465424   .3347627     4.38   0.000     .8087151    2.122133
         46  |   1.496371   .3372315     4.44   0.000     .8348187    2.157923
         47  |   1.441758   .3431105     4.20   0.000     .7686735    2.114843
         48  |   1.513938   .3431902     4.41   0.000     .8406962    2.187179
         49  |     1.3848   .3673801     3.77   0.000     .6641049    2.105495
         50  |   1.467528   .3531533     4.16   0.000     .7747424    2.160315
             |
     age_cat |
          2  |   .2713085   .1119794     2.42   0.016     .0516369    .4909801
          3  |   .5025601    .117054     4.29   0.000     .2729336    .7321867
          4  |    .832536    .134493     6.19   0.000     .5686991    1.096373
          5  |    1.14282    .161567     7.07   0.000     .8258713    1.459768
          6  |   1.325596    .196122     6.76   0.000     .9408605    1.710331
             |
       _cons |   9.778719   .2085139    46.90   0.000     9.369674    10.18776
-------------+----------------------------------------------------------------
     sigma_u |  1.8887221
     sigma_e |  1.1519299
         rho |  .72887525   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnK_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.2595                                         min =          2
     between = 0.0980                                         avg =       88.1
     overall = 0.0955                                         max =      4,150

                                                F(84,1368)        =      20.48
corr(u_i, Xb)  = 0.0446                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,369 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .1100534   .0412352     2.67   0.008     .0291624    .1909444
   expat_m_2 |   .0893362   .0384177     2.33   0.020     .0139723    .1647002
   expat_m_3 |   .0972072   .0390453     2.49   0.013     .0206121    .1738024
   expat_m_4 |   .0626126   .0380885     1.64   0.100    -.0121056    .1373308
domestic_m_1 |   .0301664   .0433122     0.70   0.486    -.0547992     .115132
domestic_m_2 |   .0818644   .0398865     2.05   0.040     .0036191    .1601097
domestic_m_3 |   .1082728   .0321327     3.37   0.001     .0452381    .1713076
domestic_m_4 |   .1257443   .0289547     4.34   0.000     .0689438    .1825448
 foreign_m_1 |  -.2468182    .076203    -3.24   0.001    -.3963057   -.0973308
 foreign_m_2 |  -.2904284   .0828766    -3.50   0.000    -.4530073   -.1278494
 foreign_m_3 |  -.2978353   .1193213    -2.50   0.013    -.5319078   -.0637628
 foreign_m_4 |  -.2694563   .1254754    -2.15   0.032    -.5156014   -.0233111
   expat_p_0 |   .0802599    .041621     1.93   0.054     -.001388    .1619078
   expat_p_1 |   .1077012   .0431244     2.50   0.013     .0231041    .1922984
   expat_p_2 |   .0793264   .0403397     1.97   0.049     .0001921    .1584608
   expat_p_3 |   .0796585   .0412015     1.93   0.053    -.0011665    .1604835
   expat_p_4 |   .0453953   .0416105     1.09   0.275     -.036232    .1270225
   expat_p_5 |   .0775668   .0436069     1.78   0.075    -.0079769    .1631105
domestic_p_0 |   .0404843   .0431539     0.94   0.348    -.0441707    .1251393
domestic_p_1 |     .04896   .0426706     1.15   0.251     -.034747     .132667
domestic_p_2 |   .0255914   .0467826     0.55   0.584    -.0661819    .1173648
domestic_p_3 |   .0089508   .0442579     0.20   0.840      -.07787    .0957716
domestic_p_4 |  -.0318083   .0470694    -0.68   0.499    -.1241443    .0605276
domestic_p_5 |  -.0344856   .0464638    -0.74   0.458    -.1256337    .0566625
 foreign_p_0 |  -.3244534   .1132247    -2.87   0.004    -.5465662   -.1023407
 foreign_p_1 |  -.2094606    .076042    -2.75   0.006    -.3586321   -.0602891
 foreign_p_2 |  -.1814494   .0811462    -2.24   0.026     -.340634   -.0222649
 foreign_p_3 |  -.1036487   .0610218    -1.70   0.090    -.2233551    .0160577
 foreign_p_4 |  -.0736859    .056974    -1.29   0.196    -.1854518    .0380799
 foreign_p_5 |  -.0563689   .0488837    -1.15   0.249    -.1522641    .0395263
             |
    ind_year |
          2  |   .1516393   .0897131     1.69   0.091    -.0243509    .3276295
          3  |   .1761024   .0921097     1.91   0.056    -.0045892     .356794
          4  |   .3088988   .0996792     3.10   0.002      .113358    .5044395
          5  |   .4431236   .1147872     3.86   0.000     .2179456    .6683016
          6  |   .5570916    .121609     4.58   0.000     .3185312    .7956519
          7  |   .6638587   .1308069     5.08   0.000     .4072549    .9204625
          8  |   .7248981   .1393329     5.20   0.000     .4515688    .9982275
          9  |   .7850521   .1479208     5.31   0.000     .4948759    1.075228
         10  |   .9201624   .1537651     5.98   0.000     .6185216    1.221803
         11  |   .9554054   .1572354     6.08   0.000     .6469568    1.263854
         12  |   1.004102   .1570714     6.39   0.000     .6959747    1.312228
         13  |    1.00922   .1606969     6.28   0.000     .6939812    1.324459
         14  |   1.035144   .1667765     6.21   0.000     .7079787     1.36231
         15  |   1.096905   .1645743     6.67   0.000     .7740598    1.419751
         16  |   1.125277   .1665812     6.76   0.000      .798495     1.45206
         17  |   1.084708   .1910124     5.68   0.000     .7099993    1.459417
         18  |   .8951686   .1983268     4.51   0.000      .506111    1.284226
         19  |   .8323133    .214158     3.89   0.000     .4121997    1.252427
         20  |   .8220044   .2187753     3.76   0.000      .392833    1.251176
         21  |   .7693051   .2032994     3.78   0.000     .3704927    1.168118
         22  |   .6951655   .2166814     3.21   0.001     .2701016    1.120229
         23  |   .5879764   .2708297     2.17   0.030       .05669    1.119263
         24  |   .7507718   .2189284     3.43   0.001        .3213    1.180244
         25  |    .602113   .2619837     2.30   0.022     .0881796    1.116046
         26  |   .3560116   .2433811     1.46   0.144    -.1214291    .8334523
         27  |   .3635528   .2389029     1.52   0.128    -.1051029    .8322086
         28  |   .4536644   .2389437     1.90   0.058    -.0150714    .9224001
         29  |   .7040092   .2319799     3.03   0.002     .2489344    1.159084
         30  |   .7768144   .2319384     3.35   0.001      .321821    1.231808
         31  |   .9098953   .2355857     3.86   0.000      .447747    1.372044
         32  |   .9530883   .2371648     4.02   0.000     .4878423    1.418334
         33  |    1.00621   .2393958     4.20   0.000      .536587    1.475832
         34  |   1.085517    .242883     4.47   0.000     .6090534     1.56198
         35  |   1.141634    .245259     4.65   0.000     .6605098    1.622759
         36  |   1.114529   .2472531     4.51   0.000     .6294922    1.599565
         37  |   1.169305   .2487825     4.70   0.000     .6812681    1.657341
         38  |   1.211579   .2534121     4.78   0.000     .7144611    1.708698
         39  |   1.220728   .2573785     4.74   0.000     .7158285    1.725627
         40  |   1.389833   .2563579     5.42   0.000     .8869361    1.892731
         41  |   1.394255   .2591718     5.38   0.000     .8858376    1.902672
         42  |   1.433926   .2640758     5.43   0.000     .9158889    1.951964
         43  |    1.34465   .2653975     5.07   0.000     .8240193     1.86528
         44  |   1.336705   .2736612     4.88   0.000     .7998636    1.873546
         45  |   1.372208    .275149     4.99   0.000     .8324484    1.911968
         46  |    1.40299   .2791672     5.03   0.000     .8553477    1.950632
         47  |   1.412294    .282233     5.00   0.000      .858638    1.965951
         48  |   1.409307     .29126     4.84   0.000     .8379423    1.980672
         49  |   1.472797   .2773563     5.31   0.000     .9287077    2.016887
         50  |   1.446331   .2791972     5.18   0.000     .8986298    1.994032
             |
     age_cat |
          2  |   1.027728   .0893614    11.50   0.000     .8524277    1.203028
          3  |   1.243972   .1014264    12.26   0.000     1.045004     1.44294
          4  |   1.610135   .1211698    13.29   0.000     1.372437    1.847834
          5  |   1.950824   .1446404    13.49   0.000     1.667082    2.234565
          6  |   2.149248   .1710262    12.57   0.000     1.813746     2.48475
             |
       _cons |   11.75498   .1630973    72.07   0.000     11.43503    12.07493
-------------+----------------------------------------------------------------
     sigma_u |   1.538162
     sigma_e |  1.0389307
         rho |  .68671206   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnQ_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    112,938
Group variable: id                              Number of groups  =      1,357

R-sq:                                           Obs per group:
     within  = 0.2705                                         min =          1
     between = 0.0185                                         avg =       83.2
     overall = 0.1084                                         max =      3,984

                                                F(84,1356)        =      18.28
corr(u_i, Xb)  = -0.0104                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,357 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |  -.0150935   .0340346    -0.44   0.657    -.0818596    .0516727
   expat_m_2 |   .0181145   .0350235     0.52   0.605    -.0505916    .0868207
   expat_m_3 |   .0048066   .0334261     0.14   0.886    -.0607659    .0703791
   expat_m_4 |   .0524139   .0338509     1.55   0.122    -.0139919    .1188196
domestic_m_1 |  -.0293924   .0273123    -1.08   0.282    -.0829714    .0241867
domestic_m_2 |   .0017684   .0257082     0.07   0.945    -.0486638    .0522005
domestic_m_3 |   .0101998   .0243674     0.42   0.676    -.0376021    .0580016
domestic_m_4 |   .0267351    .023011     1.16   0.246    -.0184059     .071876
 foreign_m_1 |   .0421272   .0543717     0.77   0.439    -.0645347     .148789
 foreign_m_2 |  -.0044404   .0492552    -0.09   0.928     -.101065    .0921842
 foreign_m_3 |  -.0299923   .0689705    -0.43   0.664    -.1652928    .1053082
 foreign_m_4 |      .0319   .0689619     0.46   0.644    -.1033836    .1671836
   expat_p_0 |   .0015677   .0365053     0.04   0.966    -.0700452    .0731807
   expat_p_1 |  -.0038716   .0366509    -0.11   0.916    -.0757701    .0680269
   expat_p_2 |    .011592   .0347882     0.33   0.739    -.0566526    .0798366
   expat_p_3 |   .0101063   .0336298     0.30   0.764    -.0558657    .0760784
   expat_p_4 |    .007517   .0348881     0.22   0.829    -.0609235    .0759575
   expat_p_5 |   .0057683   .0405388     0.14   0.887    -.0737572    .0852939
domestic_p_0 |   -.026138   .0267546    -0.98   0.329    -.0786228    .0263468
domestic_p_1 |  -.0281456   .0283886    -0.99   0.322     -.083836    .0275448
domestic_p_2 |  -.0472735    .031768    -1.49   0.137    -.1095932    .0150462
domestic_p_3 |  -.0218322   .0312196    -0.70   0.484    -.0830762    .0394117
domestic_p_4 |  -.0405517   .0389292    -1.04   0.298    -.1169198    .0358164
domestic_p_5 |  -.0138405    .030439    -0.45   0.649    -.0735532    .0458721
 foreign_p_0 |    .107178      .0555     1.93   0.054    -.0016972    .2160531
 foreign_p_1 |   .1751249   .0536829     3.26   0.001     .0698143    .2804355
 foreign_p_2 |   .1774353   .0546335     3.25   0.001     .0702599    .2846107
 foreign_p_3 |     .21227   .0515926     4.11   0.000     .1110601    .3134799
 foreign_p_4 |   .1416263   .0496351     2.85   0.004     .0442564    .2389961
 foreign_p_5 |   .0746294   .0516921     1.44   0.149    -.0267757    .1760345
             |
    ind_year |
          2  |   .2012497   .0764994     2.63   0.009     .0511797    .3513196
          3  |   .6788162   .0926941     7.32   0.000     .4969769    .8606556
          4  |    .829658   .0992666     8.36   0.000     .6349253    1.024391
          5  |   1.016438   .1091496     9.31   0.000     .8023173    1.230558
          6  |   1.210009   .1114545    10.86   0.000     .9913673    1.428651
          7  |   1.445972   .1225713    11.80   0.000     1.205522    1.686422
          8  |   1.621306   .1286198    12.61   0.000     1.368991    1.873621
          9  |   1.831308    .128419    14.26   0.000     1.579386    2.083229
         10  |   2.002134   .1306793    15.32   0.000     1.745778    2.258489
         11  |   2.112884   .1292879    16.34   0.000     1.859258     2.36651
         12  |   2.105837   .1407768    14.96   0.000     1.829674    2.382001
         13  |   2.184566   .1337988    16.33   0.000     1.922091    2.447041
         14  |   2.189817    .136759    16.01   0.000     1.921535    2.458099
         15  |   2.206976   .1390835    15.87   0.000     1.934133    2.479818
         16  |   2.208998    .143065    15.44   0.000     1.928346    2.489651
         17  |    2.27958   .1489055    15.31   0.000     1.987469     2.57169
         18  |      2.227   .1518185    14.67   0.000     1.929175    2.524824
         19  |   2.105795   .1656518    12.71   0.000     1.780833    2.430756
         20  |   2.012972   .1723858    11.68   0.000       1.6748    2.351144
         21  |   2.080882   .1604615    12.97   0.000     1.766103    2.395662
         22  |   1.918003   .1885788    10.17   0.000     1.548065    2.287941
         23  |   2.031715   .1810175    11.22   0.000      1.67661     2.38682
         24  |   1.580658   .1922293     8.22   0.000     1.203559    1.957757
         25  |   1.544106   .2124789     7.27   0.000     1.127283    1.960929
         26  |   .3962748   .1884732     2.10   0.036     .0265441    .7660056
         27  |   .4887241   .1865966     2.62   0.009     .1226747    .8547735
         28  |   .6715202    .184858     3.63   0.000     .3088814    1.034159
         29  |    .769103   .1851895     4.15   0.000     .4058141    1.132392
         30  |   .9029181   .1849358     4.88   0.000     .5401267    1.265709
         31  |   1.006943   .1849846     5.44   0.000     .6440556     1.36983
         32  |   1.238164   .1861862     6.65   0.000     .8729194    1.603408
         33  |   1.446666   .1878329     7.70   0.000     1.078191    1.815141
         34  |   1.618992   .1925103     8.41   0.000     1.241341    1.996642
         35  |    1.72297   .1964468     8.77   0.000     1.337598    2.108343
         36  |   1.847997   .1970213     9.38   0.000     1.461497    2.234496
         37  |   2.023986   .1974164    10.25   0.000     1.636712    2.411261
         38  |   2.026128   .2026247    10.00   0.000     1.628636     2.42362
         39  |   2.170488   .1978952    10.97   0.000     1.782274    2.558702
         40  |   2.219792   .1984326    11.19   0.000     1.830524     2.60906
         41  |   2.109611   .2043161    10.33   0.000     1.708801    2.510421
         42  |   2.265817   .2021002    11.21   0.000     1.869354     2.66228
         43  |   2.332175   .2011051    11.60   0.000     1.937665    2.726686
         44  |   2.248641   .2040594    11.02   0.000     1.848334    2.648947
         45  |   2.286498   .2042558    11.19   0.000     1.885806     2.68719
         46  |   2.321642   .2039507    11.38   0.000     1.921549    2.721735
         47  |   2.257955   .2120656    10.65   0.000     1.841943    2.673967
         48  |   2.319521   .2076128    11.17   0.000     1.912244    2.726799
         49  |   2.077882   .2352732     8.83   0.000     1.616343    2.539421
         50  |   2.203096   .2156807    10.21   0.000     1.779992      2.6262
             |
     age_cat |
          2  |  -.0658172   .0862065    -0.76   0.445    -.2349297    .1032954
          3  |  -.0162329   .0934651    -0.17   0.862    -.1995847    .1671189
          4  |   .0101919    .106226     0.10   0.924    -.1981931     .218577
          5  |  -.0331818   .1234694    -0.27   0.788    -.2753936    .2090299
          6  |  -.0507864    .147363    -0.34   0.730    -.3398706    .2382978
             |
       _cons |   5.400582   .1320521    40.90   0.000     5.141533     5.65963
-------------+----------------------------------------------------------------
     sigma_u |  1.5585414
     sigma_e |  .91443392
         rho |  .74391186   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnKL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.4912                                         min =          2
     between = 0.1427                                         avg =       88.1
     overall = 0.2539                                         max =      4,150

                                                F(84,1368)        =      43.65
corr(u_i, Xb)  = -0.0141                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,369 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0106666   .0247863     0.43   0.667    -.0379568    .0592899
   expat_m_2 |   -.008487   .0247134    -0.34   0.731    -.0569673    .0399932
   expat_m_3 |   .0062756   .0234292     0.27   0.789    -.0396855    .0522366
   expat_m_4 |  -.0043612   .0236821    -0.18   0.854    -.0508184     .042096
domestic_m_1 |   -.077409   .0240412    -3.22   0.001    -.1245707   -.0302473
domestic_m_2 |  -.0388186   .0239669    -1.62   0.106    -.0858344    .0081972
domestic_m_3 |  -.0189616   .0214951    -0.88   0.378    -.0611286    .0232054
domestic_m_4 |  -.0108394   .0214074    -0.51   0.613    -.0528342    .0311554
 foreign_m_1 |   -.125574   .0510647    -2.46   0.014    -.2257476   -.0254003
 foreign_m_2 |  -.1794512   .0536923    -3.34   0.001    -.2847794   -.0741231
 foreign_m_3 |  -.1806433    .068947    -2.62   0.009    -.3158966     -.04539
 foreign_m_4 |  -.1057979   .0671165    -1.58   0.115    -.2374604    .0258646
   expat_p_0 |   .0282897    .026439     1.07   0.285    -.0235757     .080155
   expat_p_1 |   .0487184   .0277918     1.75   0.080    -.0058008    .1032376
   expat_p_2 |     .02127   .0272084     0.78   0.435    -.0321047    .0746446
   expat_p_3 |   .0398227   .0305619     1.30   0.193    -.0201306    .0997761
   expat_p_4 |   .0226182   .0299852     0.75   0.451    -.0362037      .08144
   expat_p_5 |   .0757806   .0292003     2.60   0.010     .0184984    .1330628
domestic_p_0 |  -.0530316   .0244988    -2.16   0.031    -.1010909   -.0049722
domestic_p_1 |  -.0228399   .0241319    -0.95   0.344    -.0701794    .0244996
domestic_p_2 |  -.0224843   .0268328    -0.84   0.402    -.0751222    .0301536
domestic_p_3 |   .0007495   .0242044     0.03   0.975    -.0467322    .0482313
domestic_p_4 |  -.0153273   .0248048    -0.62   0.537    -.0639868    .0333323
domestic_p_5 |  -.0058096   .0248271    -0.23   0.815     -.054513    .0428938
 foreign_p_0 |   -.158914   .0682171    -2.33   0.020    -.2927355   -.0250925
 foreign_p_1 |  -.0828787   .0501271    -1.65   0.098    -.1812129    .0154555
 foreign_p_2 |  -.0750262   .0557537    -1.35   0.179    -.1843983    .0343458
 foreign_p_3 |  -.0231666   .0421129    -0.55   0.582    -.1057796    .0594463
 foreign_p_4 |  -.0127373   .0403693    -0.32   0.752    -.0919298    .0664552
 foreign_p_5 |   .0120653   .0360882     0.33   0.738    -.0587289    .0828595
             |
    ind_year |
          2  |   .2282244   .0551588     4.14   0.000     .1200194    .3364294
          3  |   .4492867   .0639246     7.03   0.000     .3238858    .5746876
          4  |   .6743754   .0732132     9.21   0.000      .530753    .8179977
          5  |   .9359363    .078693    11.89   0.000     .7815643    1.090308
          6  |   1.157217   .0899222    12.87   0.000      .980817    1.333618
          7  |   1.316977   .1056706    12.46   0.000     1.109683    1.524271
          8  |   1.466519   .1139867    12.87   0.000     1.242911    1.690126
          9  |   1.658938   .1158216    14.32   0.000      1.43173    1.886145
         10  |   1.844294   .1240746    14.86   0.000     1.600897    2.087691
         11  |   1.942218   .1291584    15.04   0.000     1.688848    2.195588
         12  |    2.02374   .1297317    15.60   0.000     1.769245    2.278235
         13  |   2.093727   .1313916    15.94   0.000     1.835976    2.351478
         14  |   2.160808   .1359363    15.90   0.000     1.894141    2.427474
         15  |   2.229267   .1507875    14.78   0.000     1.933467    2.525067
         16  |   2.266113   .1538336    14.73   0.000     1.964337    2.567888
         17  |   2.313016   .1639009    14.11   0.000     1.991491     2.63454
         18  |   2.193503   .1672608    13.11   0.000     1.865388    2.521618
         19  |   2.190773   .1769088    12.38   0.000     1.843731    2.537815
         20  |   2.231994   .1764717    12.65   0.000      1.88581    2.578179
         21  |   2.241619   .1667053    13.45   0.000     1.914594    2.568645
         22  |   2.273834    .169791    13.39   0.000     1.940755    2.606913
         23  |   2.235631   .1988464    11.24   0.000     1.845554    2.625708
         24  |   2.314211   .1700768    13.61   0.000     1.980571     2.64785
         25  |   2.234369   .1868073    11.96   0.000      1.86791    2.600829
         26  |  -.4666067   .1488269    -3.14   0.002    -.7585604   -.1746531
         27  |  -.2982466   .1519038    -1.96   0.050    -.5962363   -.0002569
         28  |  -.0615074   .1518823    -0.40   0.686    -.3594548      .23644
         29  |   .2720787   .1501313     1.81   0.070    -.0224339    .5665913
         30  |   .4771139   .1512015     3.16   0.002     .1805019    .7737258
         31  |   .7066205   .1517372     4.66   0.000     .4089578    1.004283
         32  |     .89528   .1587596     5.64   0.000     .5838413    1.206719
         33  |   1.050365    .158996     6.61   0.000     .7384629    1.362268
         34  |   1.245087   .1619608     7.69   0.000     .9273687    1.562806
         35  |   1.377523   .1620509     8.50   0.000     1.059628    1.695418
         36  |   1.442853   .1638445     8.81   0.000      1.12144    1.764267
         37  |   1.591588   .1644676     9.68   0.000     1.268952    1.914224
         38  |   1.675394   .1659373    10.10   0.000     1.349875    2.000913
         39  |   1.766352   .1667088    10.60   0.000     1.439319    2.093385
         40  |   1.974558   .1664617    11.86   0.000      1.64801    2.301105
         41  |   2.070891   .1678418    12.34   0.000     1.741635    2.400146
         42  |   2.159625   .1746525    12.37   0.000     1.817009    2.502241
         43  |   2.135874   .1740011    12.28   0.000     1.794536    2.477212
         44  |   2.193493   .1780908    12.32   0.000     1.844132    2.542854
         45  |   2.205464   .1833881    12.03   0.000     1.845711    2.565216
         46  |    2.25116   .1788657    12.59   0.000     1.900279    2.602041
         47  |   2.257342   .1787019    12.63   0.000     1.906783    2.607902
         48  |   2.281056   .1822232    12.52   0.000     1.923589    2.638523
         49  |   2.299698   .1804489    12.74   0.000     1.945711    2.653684
         50  |   2.300483   .1820441    12.64   0.000     1.943367    2.657599
             |
     age_cat |
          2  |   .6145172   .0710372     8.65   0.000     .4751634    .7538709
          3  |   .6652583   .0734758     9.05   0.000     .5211208    .8093958
          4  |   .6480142   .0827519     7.83   0.000     .4856798    .8103486
          5  |   .6021977   .0963671     6.25   0.000     .4131544    .7912411
          6  |    .557241    .116035     4.80   0.000     .3296151    .7848668
             |
       _cons |   7.570997   .1086524    69.68   0.000     7.357854     7.78414
-------------+----------------------------------------------------------------
     sigma_u |   1.100537
     sigma_e |  .71052739
         rho |  .70580413   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnQL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.0410                                         min =          2
     between = 0.1925                                         avg =       88.1
     overall = 0.0860                                         max =      4,150

                                                F(84,1368)        =       3.38
corr(u_i, Xb)  = 0.0876                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,369 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0326682    .010886     3.00   0.003     .0113133    .0540232
   expat_m_2 |   .0205343   .0102061     2.01   0.044     .0005131    .0405556
   expat_m_3 |   .0082134   .0098952     0.83   0.407    -.0111981    .0276248
   expat_m_4 |   .0065209    .010255     0.64   0.525    -.0135963    .0266381
domestic_m_1 |   .0255435    .009761     2.62   0.009     .0063954    .0446916
domestic_m_2 |   .0257042   .0089303     2.88   0.004     .0081856    .0432228
domestic_m_3 |    .019886   .0080719     2.46   0.014     .0040514    .0357206
domestic_m_4 |   .0235414   .0082672     2.85   0.004     .0073237    .0397591
 foreign_m_1 |  -.0384061   .0178532    -2.15   0.032    -.0734286   -.0033835
 foreign_m_2 |  -.0486678   .0204993    -2.37   0.018    -.0888812   -.0084543
 foreign_m_3 |  -.0362564    .022218    -1.63   0.103    -.0798414    .0073286
 foreign_m_4 |  -.0510506   .0236513    -2.16   0.031    -.0974473   -.0046539
   expat_p_0 |   .0371983   .0112689     3.30   0.001     .0150921    .0593046
   expat_p_1 |   .0351475   .0109721     3.20   0.001     .0136236    .0566714
   expat_p_2 |   .0332362   .0102083     3.26   0.001     .0132105    .0532619
   expat_p_3 |   .0344178   .0106837     3.22   0.001     .0134596     .055376
   expat_p_4 |   .0301856   .0106007     2.85   0.004     .0093902     .050981
   expat_p_5 |   .0236291   .0100868     2.34   0.019     .0038418    .0434163
domestic_p_0 |   .0208894   .0102058     2.05   0.041     .0008686    .0409102
domestic_p_1 |   .0302611   .0106933     2.83   0.005     .0092841    .0512381
domestic_p_2 |   .0207188   .0102911     2.01   0.044     .0005307    .0409069
domestic_p_3 |   .0034918   .0100957     0.35   0.729     -.016313    .0232966
domestic_p_4 |  -.0009486   .0103092    -0.09   0.927    -.0211722     .019275
domestic_p_5 |   .0003553   .0098573     0.04   0.971    -.0189818    .0196924
 foreign_p_0 |   -.024867   .0180715    -1.38   0.169    -.0603179    .0105839
 foreign_p_1 |  -.0026746   .0156234    -0.17   0.864    -.0333231    .0279738
 foreign_p_2 |  -.0099127   .0164671    -0.60   0.547    -.0422162    .0223909
 foreign_p_3 |   .0017762   .0153948     0.12   0.908    -.0284238    .0319763
 foreign_p_4 |   .0180308   .0159818     1.13   0.259    -.0133206    .0493822
 foreign_p_5 |   .0104795    .012911     0.81   0.417     -.014848     .035807
             |
    ind_year |
          2  |   .0427461   .0238643     1.79   0.073    -.0040685    .0895608
          3  |  -.0442607   .0307188    -1.44   0.150    -.1045218    .0160004
          4  |  -.0911482    .030899    -2.95   0.003    -.1517627   -.0305338
          5  |  -.0952174   .0283001    -3.36   0.001    -.1507337    -.039701
          6  |  -.1144131   .0333977    -3.43   0.001    -.1799293   -.0488968
          7  |  -.1223233   .0361839    -3.38   0.001    -.1933051   -.0513414
          8  |  -.1348599    .035471    -3.80   0.000    -.2044433   -.0652765
          9  |  -.1577263   .0367708    -4.29   0.000    -.2298596   -.0855929
         10  |  -.1779342   .0383412    -4.64   0.000    -.2531481   -.1027203
         11  |  -.1853219   .0413115    -4.49   0.000    -.2663626   -.1042812
         12  |  -.1871589   .0444424    -4.21   0.000    -.2743415   -.0999763
         13  |  -.1717638   .0437873    -3.92   0.000    -.2576613   -.0858663
         14  |  -.1477883   .0434956    -3.40   0.001    -.2331137   -.0624629
         15  |  -.1157656   .0413275    -2.80   0.005    -.1968378   -.0346934
         16  |  -.1112088   .0412549    -2.70   0.007    -.1921386   -.0302791
         17  |  -.1171459   .0437564    -2.68   0.008    -.2029829    -.031309
         18  |  -.1004619   .0458247    -2.19   0.029    -.1903561   -.0105676
         19  |  -.1134183   .0465489    -2.44   0.015    -.2047332   -.0221034
         20  |    -.08006   .0478234    -1.67   0.094    -.1738752    .0137551
         21  |  -.1076637   .0461541    -2.33   0.020    -.1982041   -.0171233
         22  |  -.1016587   .0469845    -2.16   0.031    -.1938282   -.0094892
         23  |  -.1217199    .046552    -2.61   0.009     -.213041   -.0303988
         24  |  -.1099245   .0471649    -2.33   0.020    -.2024478   -.0174012
         25  |  -.1319344   .0484422    -2.72   0.007    -.2269634   -.0369054
         26  |   .0912812   .0563965     1.62   0.106    -.0193517    .2019141
         27  |   .1174751   .0520245     2.26   0.024     .0154187    .2195315
         28  |   .1052314   .0512929     2.05   0.040       .00461    .2058527
         29  |   .0978545   .0505282     1.94   0.053    -.0012666    .1969756
         30  |   .0997166   .0502486     1.98   0.047      .001144    .1982893
         31  |   .0807458   .0510144     1.58   0.114    -.0193291    .1808207
         32  |   .0837898   .0526323     1.59   0.112     -.019459    .1870386
         33  |   .0722647   .0514041     1.41   0.160    -.0285747     .173104
         34  |   .0488311   .0528434     0.92   0.356    -.0548317     .152494
         35  |   .0795812    .051362     1.55   0.122    -.0211756     .180338
         36  |   .0620662   .0512997     1.21   0.227    -.0385685    .1627009
         37  |   .0339704   .0522804     0.65   0.516    -.0685879    .1365288
         38  |   .0378443   .0521858     0.73   0.468    -.0645287    .1402172
         39  |    .035083   .0540407     0.65   0.516    -.0709286    .1410945
         40  |   .0547763   .0540162     1.01   0.311    -.0511872    .1607398
         41  |   .0556628   .0547532     1.02   0.310    -.0517465    .1630722
         42  |   .0679446   .0552523     1.23   0.219    -.0404438     .176333
         43  |    .092317   .0581227     1.59   0.112    -.0217022    .2063362
         44  |   .0710474    .060588     1.17   0.241    -.0478081    .1899029
         45  |   .0422203   .0572685     0.74   0.461    -.0701233     .154564
         46  |   .0819015   .0604638     1.35   0.176    -.0367104    .2005133
         47  |   .1152927   .0607247     1.90   0.058     -.003831    .2344163
         48  |   .0904441   .0611442     1.48   0.139    -.0295025    .2103908
         49  |    .043948   .0606245     0.72   0.469    -.0749791    .1628752
         50  |   -.000585    .071315    -0.01   0.993    -.1404836    .1393137
             |
     age_cat |
          2  |   .0819401   .0239307     3.42   0.001     .0349953     .128885
          3  |   .0804344   .0296371     2.71   0.007     .0222954    .1385734
          4  |   .1531808   .0302607     5.06   0.000     .0938183    .2125433
          5  |   .1974416   .0336878     5.86   0.000     .1313562     .263527
          6  |   .2337172   .0386568     6.05   0.000     .1578841    .3095503
             |
       _cons |   .4647103   .0376082    12.36   0.000     .3909343    .5384862
-------------+----------------------------------------------------------------
     sigma_u |  .36190829
     sigma_e |  .29635345
         rho |  .59860981   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/exporter_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    103,133
Group variable: id                              Number of groups  =      1,336

R-sq:                                           Obs per group:
     within  = 0.0552                                         min =          1
     between = 0.0009                                         avg =       77.2
     overall = 0.0354                                         max =      3,652

                                                F(81,1335)        =       9.27
corr(u_i, Xb)  = -0.2473                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,336 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   -.048963   .0266061    -1.84   0.066    -.1011574    .0032314
   expat_m_2 |   .0119057   .0268201     0.44   0.657    -.0407084    .0645198
   expat_m_3 |  -.0153889   .0267622    -0.58   0.565    -.0678894    .0371116
   expat_m_4 |    -.03668   .0271189    -1.35   0.176    -.0898803    .0165204
domestic_m_1 |  -.0563102   .0199617    -2.82   0.005      -.09547   -.0171504
domestic_m_2 |  -.0038252   .0194832    -0.20   0.844    -.0420462    .0343958
domestic_m_3 |   .0032618   .0223071     0.15   0.884     -.040499    .0470226
domestic_m_4 |  -.0027711   .0204827    -0.14   0.892     -.042953    .0374107
 foreign_m_1 |   .0215301   .0529044     0.41   0.684    -.0822547    .1253148
 foreign_m_2 |   .0024903   .0461873     0.05   0.957    -.0881172    .0930979
 foreign_m_3 |  -.1100832   .0475041    -2.32   0.021     -.203274   -.0168925
 foreign_m_4 |  -.0026493   .0523879    -0.05   0.960     -.105421    .1001224
   expat_p_0 |  -.0589958   .0261788    -2.25   0.024    -.1103519   -.0076398
   expat_p_1 |  -.0562806   .0280535    -2.01   0.045    -.1113143   -.0012468
   expat_p_2 |  -.0614086   .0272294    -2.26   0.024    -.1148256   -.0079915
   expat_p_3 |  -.0271947    .028457    -0.96   0.339      -.08302    .0286307
   expat_p_4 |  -.0568874   .0291677    -1.95   0.051    -.1141069    .0003321
   expat_p_5 |  -.0199783   .0337902    -0.59   0.554    -.0862659    .0463093
domestic_p_0 |  -.0301485   .0174757    -1.73   0.085    -.0644313    .0041343
domestic_p_1 |   -.041504   .0199757    -2.08   0.038    -.0806912   -.0023168
domestic_p_2 |   -.053591   .0310615    -1.73   0.085    -.1145257    .0073437
domestic_p_3 |  -.0673502   .0210605    -3.20   0.001    -.1086655   -.0260349
domestic_p_4 |   -.041004   .0265271    -1.55   0.122    -.0930434    .0110354
domestic_p_5 |  -.0436344   .0272917    -1.60   0.110    -.0971737     .009905
 foreign_p_0 |   .0792028   .0389175     2.04   0.042     .0028567    .1555489
 foreign_p_1 |   .0610914   .0497021     1.23   0.219    -.0364114    .1585942
 foreign_p_2 |   .1070897    .054834     1.95   0.051    -.0004804    .2146598
 foreign_p_3 |   .0755329   .0524578     1.44   0.150    -.0273759    .1784417
 foreign_p_4 |   .0440933   .0569405     0.77   0.439    -.0676094     .155796
 foreign_p_5 |  -.0112373   .0413475    -0.27   0.786    -.0923506    .0698759
             |
    ind_year |
          3  |  -.1335713   .0888813    -1.50   0.133    -.3079335    .0407908
          4  |  -.2221786   .1290773    -1.72   0.085    -.4753951    .0310378
          5  |  -.1656435   .0959395    -1.73   0.084    -.3538521    .0225651
          6  |  -.1350672   .1063994    -1.27   0.205    -.3437954     .073661
          7  |   .0162728   .1037257     0.16   0.875    -.1872103    .2197559
          8  |  -.1296382   .1066931    -1.22   0.225    -.3389425    .0796662
          9  |  -.1201939   .1262917    -0.95   0.341    -.3679458     .127558
         10  |  -.1870245   .1550237    -1.21   0.228     -.491141     .117092
         11  |  -.2369718   .1535939    -1.54   0.123    -.5382834    .0643398
         12  |  -.2303071    .119517    -1.93   0.054    -.4647687    .0041546
         13  |  -.3993392   .1513143    -2.64   0.008    -.6961788   -.1024995
         14  |  -.2745835   .1040727    -2.64   0.008    -.4787473   -.0704197
         15  |  -.1721372   .1029365    -1.67   0.095    -.3740721    .0297976
         16  |  -.2349171   .1274192    -1.84   0.065    -.4848807    .0150466
         17  |  -.2871511   .1303474    -2.20   0.028    -.5428591   -.0314432
         18  |  -.3874627   .1162698    -3.33   0.001    -.6155541   -.1593712
         19  |  -.4018281   .1181134    -3.40   0.001    -.6335361     -.17012
         20  |  -.2591133   .1205404    -2.15   0.032    -.4955824   -.0226441
         21  |   -.387978   .1158635    -3.35   0.001    -.6152724   -.1606837
         22  |  -.3132551   .1572332    -1.99   0.047    -.6217061   -.0048041
         23  |  -.5119894   .1492066    -3.43   0.001    -.8046944   -.2192845
         24  |   -.833237   .1430038    -5.83   0.000    -1.113774   -.5527004
         25  |  -.5956931   .1968508    -3.03   0.003    -.9818637   -.2095225
         27  |  -.1601885   .1478261    -1.08   0.279    -.4501853    .1298083
         28  |  -.7989522   .1395205    -5.73   0.000    -1.072655   -.5252488
         29  |  -.5239907   .1403239    -3.73   0.000    -.7992701   -.2487113
         30  |  -.4764041    .138023    -3.45   0.001    -.7471697   -.2056384
         31  |  -.4958823   .1417244    -3.50   0.000     -.773909   -.2178556
         32  |  -.3260048    .141486    -2.30   0.021    -.6035639   -.0484457
         33  |  -.3051346   .1376678    -2.22   0.027    -.5752034   -.0350658
         34  |  -.4127109   .1397656    -2.95   0.003    -.6868949   -.1385268
         35  |  -.4058563    .133731    -3.03   0.002    -.6682021   -.1435104
         36  |  -.4652183   .1342911    -3.46   0.001    -.7286627   -.2017738
         37  |  -.5700722   .1361949    -4.19   0.000    -.8372515   -.3028928
         38  |  -.3678777   .1368555    -2.69   0.007     -.636353   -.0994024
         39  |   -.583722   .1304375    -4.48   0.000    -.8396068   -.3278371
         40  |  -.5438056   .1327609    -4.10   0.000    -.8042482    -.283363
         41  |  -.5894666   .1355501    -4.35   0.000    -.8553809   -.3235523
         42  |  -.4444556   .1411175    -3.15   0.002    -.7212919   -.1676193
         43  |  -.3743634   .1423779    -2.63   0.009    -.6536722   -.0950546
         44  |   -.395361   .1401021    -2.82   0.005    -.6702053   -.1205166
         45  |  -.6616825   .1352977    -4.89   0.000    -.9271017   -.3962634
         46  |  -.4795544   .1327782    -3.61   0.000     -.740031   -.2190778
         47  |  -.2114861   .1401107    -1.51   0.131    -.4863472     .063375
         48  |  -.8302321   .1334466    -6.22   0.000     -1.09202   -.5684443
         49  |  -1.096084   .1357202    -8.08   0.000    -1.362332   -.8298355
         50  |    -.67649   .1416844    -4.77   0.000    -.9544383   -.3985417
             |
     age_cat |
          3  |  -.1343635   .0776484    -1.73   0.084    -.2866896    .0179626
          4  |  -.2476398   .0721574    -3.43   0.001    -.3891939   -.1060856
          5  |  -.3336248   .0768988    -4.34   0.000    -.4844804   -.1827692
          6  |  -.3494243   .0815179    -4.29   0.000    -.5093414   -.1895071
             |
       _cons |    .547171   .1162007     4.71   0.000     .3192152    .7751268
-------------+----------------------------------------------------------------
     sigma_u |  .36924357
     sigma_e |  .81922635
         rho |  .16884884   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/inv_event_study.png written in PNG format)

. 
. 
. 
. log close
      name:  <unnamed>
       log:  /Users/koren/Tresors/Data3/projects/expat-analysis/output/estimate.log
  log type:  text
 closed on:  20 Nov 2018, 19:43:01
-----------------------------------------------------------------------------------------------
