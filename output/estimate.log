--------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Google Drive/Research/expat/research_design/talk/output/estimate.log
  log type:  text
 opened on:   4 Dec 2018, 14:50:12

. 
. use temp/analysis_sample

. 
. *Dinamika
. scalar Tbefore = 4

. scalar Tduring = 6

. scalar Tafter = 4

. 
. gen byte analysis_window = (tenure>=-Tbefore-1)&(year-first_exit_year<=Tafter)

. 
. local sample_baseline (analysis_window==1)

. local sample_manufacturing `sample_baseline' & (manufacturing==1)

. local sample_acquisitions `sample_baseline' & (greenfield==0)

. 
. local samples baseline manufacturing acquisitions

. 
. local outcomes lnL lnKL lnQL exporter

. label var lnL "Employment (log)"

. label var lnKL "Capital per worker (log)"

. label var lnQL "Revenue per worker (log)"

. label var exporter "Firm is an exporter (dummy)"

. 
. egen person_tag = tag(frame_id manager_id)

. egen N = sum(person_tag), by(frame_id)

. gen inverse_weight = 1/N

. 
. * verify founders are not in analysis sample
. foreach X of var during* after* {
  2.         replace `X'=0 if founder==1
  3. }
(0 real changes made)
(134,027 real changes made)
(56,067 real changes made)
(74,167 real changes made)
(82,549 real changes made)
(47,525 real changes made)
(76,939 real changes made)
(97,441 real changes made)
(95,731 real changes made)
(20,842 real changes made)
(10,409 real changes made)
(13,922 real changes made)
(13,645 real changes made)
(15,827 real changes made)
(9,922 real changes made)
(14,580 real changes made)
(17,606 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(72,254 real changes made)
(36,996 real changes made)
(39,018 real changes made)
(40,130 real changes made)
(32,497 real changes made)
(39,529 real changes made)
(54,488 real changes made)
(33,198 real changes made)
(34,590 real changes made)
(20,082 real changes made)
(23,445 real changes made)
(21,022 real changes made)
(26,314 real changes made)
(16,637 real changes made)
(29,337 real changes made)
(15,713 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. local i = 1

. foreach X of var `outcomes' {
  2.         foreach sample in `samples' {
  3.                 * simple, descriptive regressions first, including founders, but not before/after years
.                 reg `X' foreign expat i.ind_year i.age_cat if `sample_`sample'' & year>=enter_year & year<=first_exit_year [aw
> =inverse_weight], vce(cluster id)
  4.                 do regram output/regression/`sample'_OLS `i' `X'
  5. 
.                 xtreg `X' foreign expat i.ind_year i.age_cat if `sample_`sample'' & year>=enter_year & year<=first_exit_year [
> aw=inverse_weight], i(id) fe vce(cluster id)
  6.                 local r2_w = `e(r2_w)'
  7.                 do regram output/regression/`sample'_FE `i' `X' R2_within "`r2_w'"
  8. 
.                 xtreg `X' foreign during after during_expat after_expat i.ind_year i.age_cat if `sample_`sample'' [aw=inverse_
> weight], i(firm_person ) fe vce(cluster id)
  9.                 local r2_w = `e(r2_w)'
 10.                 do regram output/regression/`sample' `i' `X' R2_within "`r2_w'"
 11. 
.                 local fname = e(depvar)
 12.                 local title : variable label `fname'
 13. 
.                 slopegraph, ///
>                         from(0 0 1 _b[during] 0 0 1 _b[during]+_b[during_expat]) ///
>                         to(1 _b[during] 2 _b[after] 1 _b[during]+_b[during_expat] 2 _b[after]+_b[after_expat]) ///
>                         style(p1 p1 p2 p2) ///
>                         label("Local-during" "Local-after" "Expat-during" "Expat-after" ) ///
>                         width_test(during after==during during_expat after_expat==during_expat) ///
>                         star_test(1==1 1==1 during_expat after_expat) ///
>                         connect(stepstair) ///
>                         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(.5) plotregio
> n(style(none)) xsize(16) ysize(10))
 14. 
.                 graph export output/figure/`sample'_`fname'_slope.png, width(1600) replace
 15.         }
 16.         xtreg `X' foreign during_?? after_?? i.ind_year i.age_cat if `sample_acquisitions' [aw=inverse_weight], i(firm_pers
> on ) fe vce(cluster id)
 17.         local r2_w = `e(r2_w)'
 18.         do regram output/regression/acquisitions_change `i' `X' R2_within "`r2_w'"
 19.         do tree_graph
 20. 
.         local i = `i' + 1
 21. }
(sum of wgt is 117,753.451417632)

Linear regression                               Number of obs     =    318,157
                                                F(75, 18788)      =      40.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0713
                                                Root MSE          =     1.0137

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3793281   .0200983    18.87   0.000     .3399337    .4187225
       expat |  -.0002543   .0238352    -0.01   0.991    -.0469733    .0464648
             |
    ind_year |
          2  |  -.1136981   .0277815    -4.09   0.000    -.1681523   -.0592439
          3  |  -.2207651   .0321469    -6.87   0.000     -.283776   -.1577542
          4  |  -.2970508    .033804    -8.79   0.000    -.3633097   -.2307918
          5  |  -.3327315   .0347481    -9.58   0.000    -.4008409   -.2646221
          6  |  -.3992987   .0353004   -11.31   0.000    -.4684906   -.3301068
          7  |  -.4028128   .0358732   -11.23   0.000    -.4731276    -.332498
          8  |  -.3734321   .0361135   -10.34   0.000    -.4442177   -.3026464
          9  |  -.3535006   .0361771    -9.77   0.000    -.4244111   -.2825902
         10  |  -.3559951   .0364546    -9.77   0.000    -.4274494   -.2845408
         11  |  -.3583698   .0366957    -9.77   0.000    -.4302967   -.2864428
         12  |  -.3581267    .036634    -9.78   0.000    -.4299326   -.2863208
         13  |  -.3102137   .0364738    -8.51   0.000    -.3817056   -.2387218
         14  |  -.2983302   .0364339    -8.19   0.000    -.3697439   -.2269165
         15  |  -.2700444   .0363487    -7.43   0.000    -.3412912   -.1987977
         16  |  -.2552632   .0362636    -7.04   0.000    -.3263431   -.1841834
         17  |   -.230925   .0364812    -6.33   0.000    -.3024315   -.1594185
         18  |  -.2644026   .0365265    -7.24   0.000    -.3359977   -.1928074
         19  |  -.2586535   .0367273    -7.04   0.000    -.3306423   -.1866648
         20  |  -.2434959   .0367702    -6.62   0.000    -.3155689    -.171423
         21  |  -.2477999   .0369411    -6.71   0.000    -.3202079   -.1753919
         22  |  -.2446631   .0370251    -6.61   0.000    -.3172356   -.1720906
         23  |  -.2249694   .0371494    -6.06   0.000    -.2977856   -.1521531
         24  |  -.1704292    .038037    -4.48   0.000    -.2449851   -.0958733
         25  |  -.1260453   .0385191    -3.27   0.001    -.2015461   -.0505444
         26  |   .4100117   .0544385     7.53   0.000     .3033073    .5167161
         27  |   .1801777   .0457947     3.93   0.000      .090416    .2699394
         28  |   .1148198   .0432613     2.65   0.008     .0300237    .1996158
         29  |   .0392954   .0419504     0.94   0.349    -.0429312    .1215219
         30  |  -.0032862   .0408261    -0.08   0.936    -.0833091    .0767367
         31  |   .0073254   .0399733     0.18   0.855    -.0710258    .0856766
         32  |  -.0097383   .0394381    -0.25   0.805    -.0870405     .067564
         33  |  -.0293512   .0388062    -0.76   0.449    -.1054148    .0467124
         34  |  -.0439892   .0385111    -1.14   0.253    -.1194744     .031496
         35  |  -.0459993    .038122    -1.21   0.228     -.120722    .0287233
         36  |  -.0827791   .0380602    -2.17   0.030    -.1573806   -.0081776
         37  |   -.078696    .038177    -2.06   0.039    -.1535263   -.0038658
         38  |  -.0800426    .038433    -2.08   0.037    -.1553747   -.0047105
         39  |  -.0789777   .0382039    -2.07   0.039    -.1538608   -.0040947
         40  |  -.0757807   .0386874    -1.96   0.050    -.1516115    .0000501
         41  |  -.0436299     .03836    -1.14   0.255    -.1188189    .0315591
         42  |  -.0350661   .0385572    -0.91   0.363    -.1106416    .0405094
         43  |  -.1181667   .0389345    -3.04   0.002    -.1944819   -.0418515
         44  |  -.1050542   .0393863    -2.67   0.008    -.1822548   -.0278536
         45  |  -.0634218   .0394729    -1.61   0.108    -.1407923    .0139486
         46  |  -.0204634     .03943    -0.52   0.604    -.0977497    .0568229
         47  |   .0045966   .0399601     0.12   0.908    -.0737288     .082922
         48  |   .0442208   .0402128     1.10   0.271    -.0345999    .1230415
         49  |   .1205051   .0411635     2.93   0.003     .0398208    .2011894
         50  |   .1641662   .0419112     3.92   0.000     .0820166    .2463158
             |
     age_cat |
          1  |   .2892728   .0214441    13.49   0.000     .2472405    .3313051
          2  |   .4683703   .0222936    21.01   0.000     .4246728    .5120679
          3  |   .5625522   .0229526    24.51   0.000     .5175631    .6075413
          4  |   .6412535   .0235163    27.27   0.000     .5951594    .6873477
          5  |   .7078972   .0240767    29.40   0.000     .6607047    .7550896
          6  |   .7580512    .024394    31.08   0.000     .7102368    .8058656
          7  |   .7912127   .0248073    31.89   0.000     .7425882    .8398372
          8  |   .8115731   .0251964    32.21   0.000      .762186    .8609603
          9  |   .8129725   .0255448    31.83   0.000     .7629024    .8630426
         10  |   .8136221   .0257763    31.56   0.000     .7630983    .8641459
         11  |   .8155112   .0261794    31.15   0.000     .7641972    .8668251
         12  |    .820578    .026461    31.01   0.000      .768712     .872444
         13  |   .8160886   .0267565    30.50   0.000     .7636434    .8685339
         14  |   .7928458   .0272199    29.13   0.000     .7394923    .8461993
         15  |   .7809998     .02774    28.15   0.000     .7266268    .8353728
         16  |   .7538157     .02842    26.52   0.000     .6981099    .8095214
         17  |   .7240142   .0292705    24.74   0.000     .6666414     .781387
         18  |   .7052418   .0299329    23.56   0.000     .6465706     .763913
         19  |   .6799001   .0310433    21.90   0.000     .6190524    .7407478
         20  |   .6212581   .0328799    18.89   0.000     .5568106    .6857056
         25  |   .5397148   .0468855    11.51   0.000     .4478151    .6316146
         30  |   .6387308   .0768324     8.31   0.000     .4881323    .7893293
         40  |   .8120805    .069863    11.62   0.000     .6751427    .9490183
         50  |   .4549981   .0928093     4.90   0.000     .2730834    .6369128
             |
       _cons |    3.08122   .0376343    81.87   0.000     3.007454    3.154987
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    318,157
                                                F(75, 18788)      =      40.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0713
                                                Root MSE          =     1.0137

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3793281   .0200983    18.87   0.000     .3399337    .4187225
       expat |  -.0002543   .0238352    -0.01   0.991    -.0469733    .0464648
             |
    ind_year |
          2  |  -.1136981   .0277815    -4.09   0.000    -.1681523   -.0592439
          3  |  -.2207651   .0321469    -6.87   0.000     -.283776   -.1577542
          4  |  -.2970508    .033804    -8.79   0.000    -.3633097   -.2307918
          5  |  -.3327315   .0347481    -9.58   0.000    -.4008409   -.2646221
          6  |  -.3992987   .0353004   -11.31   0.000    -.4684906   -.3301068
          7  |  -.4028128   .0358732   -11.23   0.000    -.4731276    -.332498
          8  |  -.3734321   .0361135   -10.34   0.000    -.4442177   -.3026464
          9  |  -.3535006   .0361771    -9.77   0.000    -.4244111   -.2825902
         10  |  -.3559951   .0364546    -9.77   0.000    -.4274494   -.2845408
         11  |  -.3583698   .0366957    -9.77   0.000    -.4302967   -.2864428
         12  |  -.3581267    .036634    -9.78   0.000    -.4299326   -.2863208
         13  |  -.3102137   .0364738    -8.51   0.000    -.3817056   -.2387218
         14  |  -.2983302   .0364339    -8.19   0.000    -.3697439   -.2269165
         15  |  -.2700444   .0363487    -7.43   0.000    -.3412912   -.1987977
         16  |  -.2552632   .0362636    -7.04   0.000    -.3263431   -.1841834
         17  |   -.230925   .0364812    -6.33   0.000    -.3024315   -.1594185
         18  |  -.2644026   .0365265    -7.24   0.000    -.3359977   -.1928074
         19  |  -.2586535   .0367273    -7.04   0.000    -.3306423   -.1866648
         20  |  -.2434959   .0367702    -6.62   0.000    -.3155689    -.171423
         21  |  -.2477999   .0369411    -6.71   0.000    -.3202079   -.1753919
         22  |  -.2446631   .0370251    -6.61   0.000    -.3172356   -.1720906
         23  |  -.2249694   .0371494    -6.06   0.000    -.2977856   -.1521531
         24  |  -.1704292    .038037    -4.48   0.000    -.2449851   -.0958733
         25  |  -.1260453   .0385191    -3.27   0.001    -.2015461   -.0505444
         26  |   .4100117   .0544385     7.53   0.000     .3033073    .5167161
         27  |   .1801777   .0457947     3.93   0.000      .090416    .2699394
         28  |   .1148198   .0432613     2.65   0.008     .0300237    .1996158
         29  |   .0392954   .0419504     0.94   0.349    -.0429312    .1215219
         30  |  -.0032862   .0408261    -0.08   0.936    -.0833091    .0767367
         31  |   .0073254   .0399733     0.18   0.855    -.0710258    .0856766
         32  |  -.0097383   .0394381    -0.25   0.805    -.0870405     .067564
         33  |  -.0293512   .0388062    -0.76   0.449    -.1054148    .0467124
         34  |  -.0439892   .0385111    -1.14   0.253    -.1194744     .031496
         35  |  -.0459993    .038122    -1.21   0.228     -.120722    .0287233
         36  |  -.0827791   .0380602    -2.17   0.030    -.1573806   -.0081776
         37  |   -.078696    .038177    -2.06   0.039    -.1535263   -.0038658
         38  |  -.0800426    .038433    -2.08   0.037    -.1553747   -.0047105
         39  |  -.0789777   .0382039    -2.07   0.039    -.1538608   -.0040947
         40  |  -.0757807   .0386874    -1.96   0.050    -.1516115    .0000501
         41  |  -.0436299     .03836    -1.14   0.255    -.1188189    .0315591
         42  |  -.0350661   .0385572    -0.91   0.363    -.1106416    .0405094
         43  |  -.1181667   .0389345    -3.04   0.002    -.1944819   -.0418515
         44  |  -.1050542   .0393863    -2.67   0.008    -.1822548   -.0278536
         45  |  -.0634218   .0394729    -1.61   0.108    -.1407923    .0139486
         46  |  -.0204634     .03943    -0.52   0.604    -.0977497    .0568229
         47  |   .0045966   .0399601     0.12   0.908    -.0737288     .082922
         48  |   .0442208   .0402128     1.10   0.271    -.0345999    .1230415
         49  |   .1205051   .0411635     2.93   0.003     .0398208    .2011894
         50  |   .1641662   .0419112     3.92   0.000     .0820166    .2463158
             |
     age_cat |
          1  |   .2892728   .0214441    13.49   0.000     .2472405    .3313051
          2  |   .4683703   .0222936    21.01   0.000     .4246728    .5120679
          3  |   .5625522   .0229526    24.51   0.000     .5175631    .6075413
          4  |   .6412535   .0235163    27.27   0.000     .5951594    .6873477
          5  |   .7078972   .0240767    29.40   0.000     .6607047    .7550896
          6  |   .7580512    .024394    31.08   0.000     .7102368    .8058656
          7  |   .7912127   .0248073    31.89   0.000     .7425882    .8398372
          8  |   .8115731   .0251964    32.21   0.000      .762186    .8609603
          9  |   .8129725   .0255448    31.83   0.000     .7629024    .8630426
         10  |   .8136221   .0257763    31.56   0.000     .7630983    .8641459
         11  |   .8155112   .0261794    31.15   0.000     .7641972    .8668251
         12  |    .820578    .026461    31.01   0.000      .768712     .872444
         13  |   .8160886   .0267565    30.50   0.000     .7636434    .8685339
         14  |   .7928458   .0272199    29.13   0.000     .7394923    .8461993
         15  |   .7809998     .02774    28.15   0.000     .7266268    .8353728
         16  |   .7538157     .02842    26.52   0.000     .6981099    .8095214
         17  |   .7240142   .0292705    24.74   0.000     .6666414     .781387
         18  |   .7052418   .0299329    23.56   0.000     .6465706     .763913
         19  |   .6799001   .0310433    21.90   0.000     .6190524    .7407478
         20  |   .6212581   .0328799    18.89   0.000     .5568106    .6857056
         25  |   .5397148   .0468855    11.51   0.000     .4478151    .6316146
         30  |   .6387308   .0768324     8.31   0.000     .4881323    .7893293
         40  |   .8120805    .069863    11.62   0.000     .6751427    .9490183
         50  |   .4549981   .0928093     4.90   0.000     .2730834    .6369128
             |
       _cons |    3.08122   .0376343    81.87   0.000     3.007454    3.154987
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    318,157
Group variable: id                              Number of groups  =     18,789

R-sq:                                           Obs per group:
     within  = 0.1135                                         min =          1
     between = 0.0123                                         avg =       16.9
     overall = 0.0269                                         max =        148

                                                F(75,18788)       =      56.04
corr(u_i, Xb)  = -0.3435                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0132135   .0296841    -0.45   0.656     -.071397      .04497
       expat |  -.0415555   .0125601    -3.31   0.001    -.0661744   -.0169367
             |
    ind_year |
          2  |  -.1148821   .0240906    -4.77   0.000    -.1621019   -.0676623
          3  |  -.2419902   .0305966    -7.91   0.000    -.3019623    -.182018
          4  |  -.3759541   .0344934   -10.90   0.000    -.4435643   -.3083439
          5  |  -.4629472   .0387127   -11.96   0.000    -.5388276   -.3870669
          6  |  -.5547262    .042307   -13.11   0.000    -.6376518   -.4718006
          7  |  -.6100967   .0459312   -13.28   0.000     -.700126   -.5200674
          8  |  -.6458371   .0494182   -13.07   0.000    -.7427013   -.5489729
          9  |  -.6914694   .0530881   -13.02   0.000    -.7955269    -.587412
         10  |  -.7603487   .0568253   -13.38   0.000    -.8717313   -.6489661
         11  |  -.8295262   .0603135   -13.75   0.000    -.9477461   -.7113064
         12  |  -.8815248   .0639379   -13.79   0.000    -1.006849   -.7562008
         13  |  -.9128438   .0676378   -13.50   0.000     -1.04542   -.7802677
         14  |  -.9603397   .0713856   -13.45   0.000    -1.100262   -.8204174
         15  |  -.9904881   .0750537   -13.20   0.000      -1.1376   -.8433761
         16  |  -1.038615   .0787775   -13.18   0.000    -1.193026   -.8842043
         17  |  -1.088602   .0827952   -13.15   0.000    -1.250888   -.9263163
         18  |  -1.189629   .0866044   -13.74   0.000    -1.359381   -1.019876
         19  |  -1.265916   .0902117   -14.03   0.000    -1.442739   -1.089093
         20  |   -1.32177   .0937094   -14.10   0.000    -1.505449   -1.138091
         21  |  -1.394755    .097085   -14.37   0.000    -1.585051    -1.20446
         22  |  -1.447204   .1003302   -14.42   0.000     -1.64386   -1.250547
         23  |  -1.493116   .1036254   -14.41   0.000    -1.696231   -1.290001
         24  |  -1.536408   .1073369   -14.31   0.000    -1.746798   -1.326018
         25  |  -1.573968   .1111337   -14.16   0.000      -1.7918   -1.356136
         26  |   .5086962   .0648089     7.85   0.000     .3816648    .6357276
         27  |   .3478456   .0614665     5.66   0.000     .2273658    .4683254
         28  |   .2291473   .0595163     3.85   0.000       .11249    .3458046
         29  |    .113162   .0589338     1.92   0.055    -.0023536    .2286777
         30  |   .0169637   .0584225     0.29   0.772    -.0975497    .1314771
         31  |  -.0453122    .059253    -0.76   0.444    -.1614533     .070829
         32  |  -.1116584   .0601077    -1.86   0.063    -.2294749    .0061581
         33  |  -.1937674   .0617952    -3.14   0.002    -.3148915   -.0726432
         34  |  -.2571734   .0638408    -4.03   0.000    -.3823072   -.1320396
         35  |  -.3233444   .0661094    -4.89   0.000    -.4529248   -.1937639
         36  |  -.4228291    .068583    -6.17   0.000    -.5572579   -.2884002
         37  |  -.4967643   .0710618    -6.99   0.000    -.6360519   -.3574768
         38  |  -.5869527   .0740902    -7.92   0.000    -.7321761   -.4417292
         39  |  -.6516914   .0774305    -8.42   0.000    -.8034621   -.4999206
         40  |  -.6984643    .081169    -8.61   0.000     -.857563   -.5393657
         41  |  -.7276888   .0843571    -8.63   0.000    -.8930363   -.5623412
         42  |  -.7840689   .0877541    -8.93   0.000    -.9560748    -.612063
         43  |  -.9298559   .0915309   -10.16   0.000    -1.109265   -.7504471
         44  |  -.9899653   .0955846   -10.36   0.000     -1.17732   -.8026109
         45  |  -1.003865   .0992087   -10.12   0.000    -1.198323   -.8094072
         46  |  -1.036564   .1026992   -10.09   0.000    -1.237863    -.835264
         47  |  -1.068121   .1058403   -10.09   0.000    -1.275578   -.8606644
         48  |  -1.088918   .1092549    -9.97   0.000    -1.303068   -.8747689
         49  |  -1.114024   .1126626    -9.89   0.000    -1.334853   -.8931956
         50  |  -1.143882     .11553    -9.90   0.000    -1.370331   -.9174325
             |
     age_cat |
          1  |   .4228882   .0178073    23.75   0.000     .3879842    .4577921
          2  |   .7297733   .0205914    35.44   0.000     .6894124    .7701342
          3  |   .9476738   .0238912    39.67   0.000     .9008448    .9945028
          4  |   1.125953   .0273413    41.18   0.000     1.072362    1.179545
          5  |   1.276212    .031152    40.97   0.000     1.215152    1.337273
          6  |   1.407314     .03501    40.20   0.000     1.338691    1.475937
          7  |   1.510607    .039073    38.66   0.000      1.43402    1.587194
          8  |   1.609859     .04317    37.29   0.000     1.525242    1.694476
          9  |   1.688989   .0472742    35.73   0.000     1.596327     1.78165
         10  |   1.763717   .0513667    34.34   0.000     1.663033      1.8644
         11  |   1.834645    .055552    33.03   0.000     1.725758    1.943532
         12  |   1.909056   .0597339    31.96   0.000     1.791973     2.02614
         13  |   1.973446   .0638915    30.89   0.000     1.848213    2.098679
         14  |   2.022152   .0682296    29.64   0.000     1.888416    2.155889
         15  |   2.073781   .0725354    28.59   0.000     1.931605    2.215957
         16  |   2.109995   .0768754    27.45   0.000     1.959312    2.260678
         17  |   2.149117    .081324    26.43   0.000     1.989714    2.308519
         18  |   2.200264   .0856245    25.70   0.000     2.032432    2.368096
         19  |   2.239324   .0900836    24.86   0.000     2.062752    2.415896
         20  |   2.325249   .0985203    23.60   0.000      2.13214    2.518358
         25  |   2.462312   .1122587    21.93   0.000     2.242275    2.682349
         30  |   2.168931   .1527381    14.20   0.000      1.86955    2.468311
         40  |   2.004925    .173593    11.55   0.000     1.664668    2.345183
         50  |   1.872042   .1824767    10.26   0.000     1.514371    2.229713
             |
       _cons |   2.970258   .0426448    69.65   0.000      2.88667    3.053846
-------------+----------------------------------------------------------------
     sigma_u |  1.0762381
     sigma_e |  .64711293
         rho |  .73446826   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1135242002819034

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    318,157
Group variable: id                              Number of groups  =     18,789

R-sq:                                           Obs per group:
     within  = 0.1135                                         min =          1
     between = 0.0123                                         avg =       16.9
     overall = 0.0269                                         max =        148

                                                F(75,18788)       =      56.04
corr(u_i, Xb)  = -0.3435                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0132135   .0296841    -0.45   0.656     -.071397      .04497
       expat |  -.0415555   .0125601    -3.31   0.001    -.0661744   -.0169367
             |
    ind_year |
          2  |  -.1148821   .0240906    -4.77   0.000    -.1621019   -.0676623
          3  |  -.2419902   .0305966    -7.91   0.000    -.3019623    -.182018
          4  |  -.3759541   .0344934   -10.90   0.000    -.4435643   -.3083439
          5  |  -.4629472   .0387127   -11.96   0.000    -.5388276   -.3870669
          6  |  -.5547262    .042307   -13.11   0.000    -.6376518   -.4718006
          7  |  -.6100967   .0459312   -13.28   0.000     -.700126   -.5200674
          8  |  -.6458371   .0494182   -13.07   0.000    -.7427013   -.5489729
          9  |  -.6914694   .0530881   -13.02   0.000    -.7955269    -.587412
         10  |  -.7603487   .0568253   -13.38   0.000    -.8717313   -.6489661
         11  |  -.8295262   .0603135   -13.75   0.000    -.9477461   -.7113064
         12  |  -.8815248   .0639379   -13.79   0.000    -1.006849   -.7562008
         13  |  -.9128438   .0676378   -13.50   0.000     -1.04542   -.7802677
         14  |  -.9603397   .0713856   -13.45   0.000    -1.100262   -.8204174
         15  |  -.9904881   .0750537   -13.20   0.000      -1.1376   -.8433761
         16  |  -1.038615   .0787775   -13.18   0.000    -1.193026   -.8842043
         17  |  -1.088602   .0827952   -13.15   0.000    -1.250888   -.9263163
         18  |  -1.189629   .0866044   -13.74   0.000    -1.359381   -1.019876
         19  |  -1.265916   .0902117   -14.03   0.000    -1.442739   -1.089093
         20  |   -1.32177   .0937094   -14.10   0.000    -1.505449   -1.138091
         21  |  -1.394755    .097085   -14.37   0.000    -1.585051    -1.20446
         22  |  -1.447204   .1003302   -14.42   0.000     -1.64386   -1.250547
         23  |  -1.493116   .1036254   -14.41   0.000    -1.696231   -1.290001
         24  |  -1.536408   .1073369   -14.31   0.000    -1.746798   -1.326018
         25  |  -1.573968   .1111337   -14.16   0.000      -1.7918   -1.356136
         26  |   .5086962   .0648089     7.85   0.000     .3816648    .6357276
         27  |   .3478456   .0614665     5.66   0.000     .2273658    .4683254
         28  |   .2291473   .0595163     3.85   0.000       .11249    .3458046
         29  |    .113162   .0589338     1.92   0.055    -.0023536    .2286777
         30  |   .0169637   .0584225     0.29   0.772    -.0975497    .1314771
         31  |  -.0453122    .059253    -0.76   0.444    -.1614533     .070829
         32  |  -.1116584   .0601077    -1.86   0.063    -.2294749    .0061581
         33  |  -.1937674   .0617952    -3.14   0.002    -.3148915   -.0726432
         34  |  -.2571734   .0638408    -4.03   0.000    -.3823072   -.1320396
         35  |  -.3233444   .0661094    -4.89   0.000    -.4529248   -.1937639
         36  |  -.4228291    .068583    -6.17   0.000    -.5572579   -.2884002
         37  |  -.4967643   .0710618    -6.99   0.000    -.6360519   -.3574768
         38  |  -.5869527   .0740902    -7.92   0.000    -.7321761   -.4417292
         39  |  -.6516914   .0774305    -8.42   0.000    -.8034621   -.4999206
         40  |  -.6984643    .081169    -8.61   0.000     -.857563   -.5393657
         41  |  -.7276888   .0843571    -8.63   0.000    -.8930363   -.5623412
         42  |  -.7840689   .0877541    -8.93   0.000    -.9560748    -.612063
         43  |  -.9298559   .0915309   -10.16   0.000    -1.109265   -.7504471
         44  |  -.9899653   .0955846   -10.36   0.000     -1.17732   -.8026109
         45  |  -1.003865   .0992087   -10.12   0.000    -1.198323   -.8094072
         46  |  -1.036564   .1026992   -10.09   0.000    -1.237863    -.835264
         47  |  -1.068121   .1058403   -10.09   0.000    -1.275578   -.8606644
         48  |  -1.088918   .1092549    -9.97   0.000    -1.303068   -.8747689
         49  |  -1.114024   .1126626    -9.89   0.000    -1.334853   -.8931956
         50  |  -1.143882     .11553    -9.90   0.000    -1.370331   -.9174325
             |
     age_cat |
          1  |   .4228882   .0178073    23.75   0.000     .3879842    .4577921
          2  |   .7297733   .0205914    35.44   0.000     .6894124    .7701342
          3  |   .9476738   .0238912    39.67   0.000     .9008448    .9945028
          4  |   1.125953   .0273413    41.18   0.000     1.072362    1.179545
          5  |   1.276212    .031152    40.97   0.000     1.215152    1.337273
          6  |   1.407314     .03501    40.20   0.000     1.338691    1.475937
          7  |   1.510607    .039073    38.66   0.000      1.43402    1.587194
          8  |   1.609859     .04317    37.29   0.000     1.525242    1.694476
          9  |   1.688989   .0472742    35.73   0.000     1.596327     1.78165
         10  |   1.763717   .0513667    34.34   0.000     1.663033      1.8644
         11  |   1.834645    .055552    33.03   0.000     1.725758    1.943532
         12  |   1.909056   .0597339    31.96   0.000     1.791973     2.02614
         13  |   1.973446   .0638915    30.89   0.000     1.848213    2.098679
         14  |   2.022152   .0682296    29.64   0.000     1.888416    2.155889
         15  |   2.073781   .0725354    28.59   0.000     1.931605    2.215957
         16  |   2.109995   .0768754    27.45   0.000     1.959312    2.260678
         17  |   2.149117    .081324    26.43   0.000     1.989714    2.308519
         18  |   2.200264   .0856245    25.70   0.000     2.032432    2.368096
         19  |   2.239324   .0900836    24.86   0.000     2.062752    2.415896
         20  |   2.325249   .0985203    23.60   0.000      2.13214    2.518358
         25  |   2.462312   .1122587    21.93   0.000     2.242275    2.682349
         30  |   2.168931   .1527381    14.20   0.000      1.86955    2.468311
         40  |   2.004925    .173593    11.55   0.000     1.664668    2.345183
         50  |   1.872042   .1824767    10.26   0.000     1.514371    2.229713
             |
       _cons |   2.970258   .0426448    69.65   0.000      2.88667    3.053846
-------------+----------------------------------------------------------------
     sigma_u |  1.0762381
     sigma_e |  .64711293
         rho |  .73446826   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    529632
Group variable: firm_person                     Number of groups   =     59467

R-sq:  within  = 0.1103                         Obs per group: min =         1
       between = 0.0269                                        avg =       8.9
       overall = 0.0401                                        max =        25

                                                F(78,18788)        =     59.53
corr(u_i, Xb)  = -0.2567                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0131297   .0273547     0.48   0.631     -.040488    .0667474
      during |  -.0432094    .009519    -4.54   0.000    -.0618676   -.0245512
       after |  -.1842606   .0172523   -10.68   0.000    -.2180766   -.1504447
during_expat |   .0872187   .0179863     4.85   0.000     .0519639    .1224735
 after_expat |   .1958718   .0266136     7.36   0.000     .1437068    .2480369
             |
    ind_year |
          2  |  -.1046734    .022714    -4.61   0.000    -.1491948    -.060152
          3  |  -.2182557   .0291526    -7.49   0.000    -.2753975   -.1611139
          4  |  -.3403377   .0334019   -10.19   0.000    -.4058083    -.274867
          5  |  -.4204365   .0378125   -11.12   0.000    -.4945525   -.3463205
          6  |   -.502652    .041667   -12.06   0.000    -.5843231    -.420981
          7  |  -.5548187   .0455115   -12.19   0.000    -.6440254    -.465612
          8  |  -.5755123   .0491607   -11.71   0.000    -.6718717    -.479153
          9  |  -.6195184   .0529882   -11.69   0.000    -.7233801   -.5156567
         10  |  -.6794652    .056804   -11.96   0.000    -.7908062   -.5681243
         11  |  -.7447738   .0604197   -12.33   0.000    -.8632019   -.6263456
         12  |  -.7920974   .0642008   -12.34   0.000    -.9179368    -.666258
         13  |  -.8259889   .0680738   -12.13   0.000    -.9594197   -.6925581
         14  |  -.8680035    .071911   -12.07   0.000    -1.008955   -.7270515
         15  |  -.8932671   .0756589   -11.81   0.000    -1.041565    -.744969
         16  |  -.9395849   .0793422   -11.84   0.000    -1.095103    -.784067
         17  |  -.9835087   .0832154   -11.82   0.000    -1.146618    -.820399
         18  |  -1.076391   .0869493   -12.38   0.000     -1.24682   -.9059627
         19  |  -1.144699    .090556   -12.64   0.000    -1.322197   -.9672008
         20  |  -1.196043   .0939266   -12.73   0.000    -1.380147   -1.011938
         21  |  -1.261866   .0972251   -12.98   0.000    -1.452436   -1.071296
         22  |   -1.31516   .1003804   -13.10   0.000    -1.511915   -1.118405
         23  |  -1.354674   .1035594   -13.08   0.000     -1.55766   -1.151688
         24  |  -1.397353   .1071545   -13.04   0.000    -1.607386   -1.187321
         25  |  -1.424517   .1107772   -12.86   0.000    -1.641651   -1.207384
         26  |   .5750737   .0615738     9.34   0.000     .4543834    .6957639
         27  |   .4129639   .0586486     7.04   0.000     .2980074    .5279204
         28  |   .3016288   .0568676     5.30   0.000     .1901632    .4130945
         29  |   .1789602   .0563099     3.18   0.001     .0685877    .2893328
         30  |   .0964702   .0559374     1.72   0.085    -.0131722    .2061125
         31  |   .0396198   .0572139     0.69   0.489    -.0725247    .1517643
         32  |  -.0280239   .0582609    -0.48   0.631    -.1422205    .0861727
         33  |  -.0995917   .0602197    -1.65   0.098    -.2176277    .0184443
         34  |  -.1530836   .0624281    -2.45   0.014    -.2754484   -.0307188
         35  |  -.2163516   .0650275    -3.33   0.001    -.3438114   -.0888917
         36  |  -.3102565   .0676325    -4.59   0.000    -.4428223   -.1776907
         37  |   -.381869   .0704256    -5.42   0.000    -.5199094   -.2438285
         38  |  -.4664549   .0735759    -6.34   0.000    -.6106703   -.3222396
         39  |  -.5283185   .0770361    -6.86   0.000    -.6793161   -.3773209
         40  |  -.5626175   .0806662    -6.97   0.000    -.7207306   -.4045044
         41  |  -.5903009   .0838937    -7.04   0.000      -.75474   -.4258617
         42  |  -.6471803   .0873866    -7.41   0.000    -.8184659   -.4758946
         43  |  -.7857358   .0910425    -8.63   0.000    -.9641873   -.6072842
         44  |   -.839026   .0949761    -8.83   0.000    -1.025188   -.6528642
         45  |  -.8514325   .0984191    -8.65   0.000    -1.044343   -.6585221
         46  |  -.8814898   .1018939    -8.65   0.000    -1.081211   -.6817686
         47  |  -.9141558    .105053    -8.70   0.000    -1.120069   -.7082425
         48  |  -.9325664   .1083598    -8.61   0.000    -1.144961   -.7201714
         49  |  -.9556451   .1116977    -8.56   0.000    -1.174583   -.7367075
         50  |  -.9792818   .1145757    -8.55   0.000    -1.203861    -.754703
             |
     age_cat |
          1  |   .4171443   .0169458    24.62   0.000     .3839289    .4503597
          2  |   .7310332    .019779    36.96   0.000     .6922647    .7698018
          3  |   .9509044   .0230787    41.20   0.000      .905668    .9961408
          4  |   1.128039   .0265991    42.41   0.000     1.075902    1.180175
          5  |   1.276447   .0304188    41.96   0.000     1.216823     1.33607
          6  |   1.401573   .0342956    40.87   0.000     1.334351    1.468795
          7  |   1.499611   .0383219    39.13   0.000     1.424496    1.574725
          8  |   1.596093   .0424404    37.61   0.000     1.512906     1.67928
          9  |   1.672481   .0464834    35.98   0.000      1.58137    1.763593
         10  |   1.740554   .0505498    34.43   0.000     1.641472    1.839636
         11  |   1.807817     .05467    33.07   0.000     1.700659    1.914975
         12  |   1.872103   .0587645    31.86   0.000      1.75692    1.987287
         13  |   1.936477   .0628254    30.82   0.000     1.813334    2.059621
         14  |   1.979543   .0669894    29.55   0.000     1.848238    2.110849
         15  |    2.02552   .0712022    28.45   0.000     1.885958    2.165083
         16  |   2.060693   .0753795    27.34   0.000     1.912942    2.208444
         17  |   2.094861   .0796583    26.30   0.000     1.938724    2.250999
         18  |   2.141265   .0836876    25.59   0.000      1.97723      2.3053
         19  |   2.178171   .0879839    24.76   0.000     2.005714    2.350627
         20  |   2.251634   .0957949    23.50   0.000     2.063867      2.4394
         25  |   2.357899   .1080631    21.82   0.000     2.146086    2.569713
         30  |   2.124484   .1413688    15.03   0.000     1.847389     2.40158
         40  |   2.027001   .1592475    12.73   0.000     1.714862     2.33914
         50  |   1.976354   .1599808    12.35   0.000     1.662778    2.289931
             |
       _cons |   2.944849   .0425519    69.21   0.000     2.861444    3.028255
-------------+----------------------------------------------------------------
     sigma_u |  1.1612585
     sigma_e |  .64165005
         rho |  .76610251   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1103424616467722

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    529,632
Group variable: firm_person                     Number of groups  =     59,467

R-sq:                                           Obs per group:
     within  = 0.1103                                         min =          1
     between = 0.0269                                         avg =        8.9
     overall = 0.0401                                         max =         25

                                                F(78,18788)       =      59.53
corr(u_i, Xb)  = -0.2567                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0131297   .0273547     0.48   0.631     -.040488    .0667474
      during |  -.0432094    .009519    -4.54   0.000    -.0618676   -.0245512
       after |  -.1842606   .0172523   -10.68   0.000    -.2180766   -.1504447
during_expat |   .0872187   .0179863     4.85   0.000     .0519639    .1224735
 after_expat |   .1958718   .0266136     7.36   0.000     .1437068    .2480369
             |
    ind_year |
          2  |  -.1046734    .022714    -4.61   0.000    -.1491948    -.060152
          3  |  -.2182557   .0291526    -7.49   0.000    -.2753975   -.1611139
          4  |  -.3403377   .0334019   -10.19   0.000    -.4058083    -.274867
          5  |  -.4204365   .0378125   -11.12   0.000    -.4945525   -.3463205
          6  |   -.502652    .041667   -12.06   0.000    -.5843231    -.420981
          7  |  -.5548187   .0455115   -12.19   0.000    -.6440254    -.465612
          8  |  -.5755123   .0491607   -11.71   0.000    -.6718717    -.479153
          9  |  -.6195184   .0529882   -11.69   0.000    -.7233801   -.5156567
         10  |  -.6794652    .056804   -11.96   0.000    -.7908062   -.5681243
         11  |  -.7447738   .0604197   -12.33   0.000    -.8632019   -.6263456
         12  |  -.7920974   .0642008   -12.34   0.000    -.9179368    -.666258
         13  |  -.8259889   .0680738   -12.13   0.000    -.9594197   -.6925581
         14  |  -.8680035    .071911   -12.07   0.000    -1.008955   -.7270515
         15  |  -.8932671   .0756589   -11.81   0.000    -1.041565    -.744969
         16  |  -.9395849   .0793422   -11.84   0.000    -1.095103    -.784067
         17  |  -.9835087   .0832154   -11.82   0.000    -1.146618    -.820399
         18  |  -1.076391   .0869493   -12.38   0.000     -1.24682   -.9059627
         19  |  -1.144699    .090556   -12.64   0.000    -1.322197   -.9672008
         20  |  -1.196043   .0939266   -12.73   0.000    -1.380147   -1.011938
         21  |  -1.261866   .0972251   -12.98   0.000    -1.452436   -1.071296
         22  |   -1.31516   .1003804   -13.10   0.000    -1.511915   -1.118405
         23  |  -1.354674   .1035594   -13.08   0.000     -1.55766   -1.151688
         24  |  -1.397353   .1071545   -13.04   0.000    -1.607386   -1.187321
         25  |  -1.424517   .1107772   -12.86   0.000    -1.641651   -1.207384
         26  |   .5750737   .0615738     9.34   0.000     .4543834    .6957639
         27  |   .4129639   .0586486     7.04   0.000     .2980074    .5279204
         28  |   .3016288   .0568676     5.30   0.000     .1901632    .4130945
         29  |   .1789602   .0563099     3.18   0.001     .0685877    .2893328
         30  |   .0964702   .0559374     1.72   0.085    -.0131722    .2061125
         31  |   .0396198   .0572139     0.69   0.489    -.0725247    .1517643
         32  |  -.0280239   .0582609    -0.48   0.631    -.1422205    .0861727
         33  |  -.0995917   .0602197    -1.65   0.098    -.2176277    .0184443
         34  |  -.1530836   .0624281    -2.45   0.014    -.2754484   -.0307188
         35  |  -.2163516   .0650275    -3.33   0.001    -.3438114   -.0888917
         36  |  -.3102565   .0676325    -4.59   0.000    -.4428223   -.1776907
         37  |   -.381869   .0704256    -5.42   0.000    -.5199094   -.2438285
         38  |  -.4664549   .0735759    -6.34   0.000    -.6106703   -.3222396
         39  |  -.5283185   .0770361    -6.86   0.000    -.6793161   -.3773209
         40  |  -.5626175   .0806662    -6.97   0.000    -.7207306   -.4045044
         41  |  -.5903009   .0838937    -7.04   0.000      -.75474   -.4258617
         42  |  -.6471803   .0873866    -7.41   0.000    -.8184659   -.4758946
         43  |  -.7857358   .0910425    -8.63   0.000    -.9641873   -.6072842
         44  |   -.839026   .0949761    -8.83   0.000    -1.025188   -.6528642
         45  |  -.8514325   .0984191    -8.65   0.000    -1.044343   -.6585221
         46  |  -.8814898   .1018939    -8.65   0.000    -1.081211   -.6817686
         47  |  -.9141558    .105053    -8.70   0.000    -1.120069   -.7082425
         48  |  -.9325664   .1083598    -8.61   0.000    -1.144961   -.7201714
         49  |  -.9556451   .1116977    -8.56   0.000    -1.174583   -.7367075
         50  |  -.9792818   .1145757    -8.55   0.000    -1.203861    -.754703
             |
     age_cat |
          1  |   .4171443   .0169458    24.62   0.000     .3839289    .4503597
          2  |   .7310332    .019779    36.96   0.000     .6922647    .7698018
          3  |   .9509044   .0230787    41.20   0.000      .905668    .9961408
          4  |   1.128039   .0265991    42.41   0.000     1.075902    1.180175
          5  |   1.276447   .0304188    41.96   0.000     1.216823     1.33607
          6  |   1.401573   .0342956    40.87   0.000     1.334351    1.468795
          7  |   1.499611   .0383219    39.13   0.000     1.424496    1.574725
          8  |   1.596093   .0424404    37.61   0.000     1.512906     1.67928
          9  |   1.672481   .0464834    35.98   0.000      1.58137    1.763593
         10  |   1.740554   .0505498    34.43   0.000     1.641472    1.839636
         11  |   1.807817     .05467    33.07   0.000     1.700659    1.914975
         12  |   1.872103   .0587645    31.86   0.000      1.75692    1.987287
         13  |   1.936477   .0628254    30.82   0.000     1.813334    2.059621
         14  |   1.979543   .0669894    29.55   0.000     1.848238    2.110849
         15  |    2.02552   .0712022    28.45   0.000     1.885958    2.165083
         16  |   2.060693   .0753795    27.34   0.000     1.912942    2.208444
         17  |   2.094861   .0796583    26.30   0.000     1.938724    2.250999
         18  |   2.141265   .0836876    25.59   0.000      1.97723      2.3053
         19  |   2.178171   .0879839    24.76   0.000     2.005714    2.350627
         20  |   2.251634   .0957949    23.50   0.000     2.063867      2.4394
         25  |   2.357899   .1080631    21.82   0.000     2.146086    2.569713
         30  |   2.124484   .1413688    15.03   0.000     1.847389     2.40158
         40  |   2.027001   .1592475    12.73   0.000     1.714862     2.33914
         50  |   1.976354   .1599808    12.35   0.000     1.662778    2.289931
             |
       _cons |   2.944849   .0425519    69.21   0.000     2.861444    3.028255
-------------+----------------------------------------------------------------
     sigma_u |  1.1612585
     sigma_e |  .64165005
         rho |  .76610251   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 18788) =   20.60
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18788) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 18788) =  141.63
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18788) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 18788) =   23.51
            Prob > F =    0.0000

 ( 1)  during_expat = 0

       F(  1, 18788) =   23.51
            Prob > F =    0.0000
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 18788) =   35.03
            Prob > F =    0.0000

 ( 1)  after_expat = 0

       F(  1, 18788) =   54.17
            Prob > F =    0.0000
(1 real change made)
(file output/figure/baseline_lnL_slope.png written in PNG format)
(sum of wgt is 39,871.272767067)

Linear regression                               Number of obs     =    108,694
                                                F(50, 6854)       =      22.90
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0855
                                                Root MSE          =     1.0081

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5492659   .0326883    16.80   0.000     .4851866    .6133452
       expat |   .0081767   .0356861     0.23   0.819    -.0617791    .0781325
             |
    ind_year |
         27  |  -.2268207   .0395912    -5.73   0.000    -.3044316   -.1492097
         28  |  -.2856368   .0440053    -6.49   0.000    -.3719009   -.1993726
         29  |  -.3471719   .0463046    -7.50   0.000    -.4379433   -.2564006
         30  |  -.3825028   .0473498    -8.08   0.000    -.4753231   -.2896826
         31  |  -.3695302   .0481531    -7.67   0.000    -.4639253   -.2751351
         32  |   -.380672   .0492513    -7.73   0.000    -.4772197   -.2841243
         33  |  -.3978043   .0496754    -8.01   0.000    -.4951834   -.3004252
         34  |  -.4079907   .0503132    -8.11   0.000    -.5066202   -.3093612
         35  |   -.413019   .0505432    -8.17   0.000    -.5120994   -.3139386
         36  |  -.4500083   .0508323    -8.85   0.000    -.5496553   -.3503612
         37  |  -.4472195   .0513402    -8.71   0.000    -.5478622   -.3465768
         38  |  -.4567236   .0518369    -8.81   0.000      -.55834   -.3551073
         39  |  -.4633142   .0518613    -8.93   0.000    -.5649784     -.36165
         40  |  -.4633242   .0527424    -8.78   0.000    -.5667157   -.3599328
         41  |  -.4364062   .0527514    -8.27   0.000    -.5398153   -.3329971
         42  |  -.4363784   .0530305    -8.23   0.000    -.5403346   -.3324222
         43  |  -.5346782   .0535478    -9.99   0.000    -.6396485    -.429708
         44  |  -.5355181   .0541936    -9.88   0.000    -.6417543   -.4292818
         45  |  -.4963186   .0544613    -9.11   0.000    -.6030797   -.3895575
         46  |  -.4558702   .0547094    -8.33   0.000    -.5631176   -.3486229
         47  |  -.4366666   .0554165    -7.88   0.000    -.5453002   -.3280331
         48  |  -.4077859    .055816    -7.31   0.000    -.5172025   -.2983693
         49  |  -.3360982   .0571783    -5.88   0.000    -.4481854    -.224011
         50  |   -.294482   .0584563    -5.04   0.000    -.4090746   -.1798894
             |
     age_cat |
          1  |   .2889946   .0377546     7.65   0.000     .2149839    .3630054
          2  |   .4620242   .0388595    11.89   0.000     .3858475     .538201
          3  |   .5414177   .0400605    13.52   0.000     .4628868    .6199487
          4  |    .636759   .0411836    15.46   0.000     .5560264    .7174916
          5  |   .6967328   .0421273    16.54   0.000     .6141502    .7793154
          6  |   .7457743    .042783    17.43   0.000     .6619063    .8296423
          7  |   .7790523    .043674    17.84   0.000     .6934378    .8646669
          8  |   .8049511   .0444971    18.09   0.000      .717723    .8921792
          9  |   .8236845   .0452432    18.21   0.000     .7349937    .9123752
         10  |   .8351754   .0456829    18.28   0.000     .7456228     .924728
         11  |   .8538729   .0462509    18.46   0.000     .7632069     .944539
         12  |   .8550548   .0468377    18.26   0.000     .7632385    .9468712
         13  |   .8529701   .0475943    17.92   0.000     .7596704    .9462698
         14  |   .8364408    .048206    17.35   0.000      .741942    .9309396
         15  |   .8486045   .0490506    17.30   0.000     .7524501    .9447588
         16  |   .8365811   .0502692    16.64   0.000     .7380378    .9351244
         17  |   .8189524   .0511554    16.01   0.000      .718672    .9192328
         18  |   .8223203   .0520875    15.79   0.000     .7202127    .9244279
         19  |   .8071104   .0543703    14.84   0.000     .7005278     .913693
         20  |   .7939282   .0570927    13.91   0.000     .6820088    .9058477
         25  |   .7434287   .0745834     9.97   0.000      .597222    .8896353
         30  |   .8143734   .1920374     4.24   0.000     .4379206    1.190826
         40  |   1.174374   .1204024     9.75   0.000     .9383484      1.4104
         50  |   .7846178    .157542     4.98   0.000     .4757867    1.093449
             |
       _cons |   3.381636   .0555163    60.91   0.000     3.272807    3.490466
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    108,694
                                                F(50, 6854)       =      22.90
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0855
                                                Root MSE          =     1.0081

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5492659   .0326883    16.80   0.000     .4851866    .6133452
       expat |   .0081767   .0356861     0.23   0.819    -.0617791    .0781325
             |
    ind_year |
         27  |  -.2268207   .0395912    -5.73   0.000    -.3044316   -.1492097
         28  |  -.2856368   .0440053    -6.49   0.000    -.3719009   -.1993726
         29  |  -.3471719   .0463046    -7.50   0.000    -.4379433   -.2564006
         30  |  -.3825028   .0473498    -8.08   0.000    -.4753231   -.2896826
         31  |  -.3695302   .0481531    -7.67   0.000    -.4639253   -.2751351
         32  |   -.380672   .0492513    -7.73   0.000    -.4772197   -.2841243
         33  |  -.3978043   .0496754    -8.01   0.000    -.4951834   -.3004252
         34  |  -.4079907   .0503132    -8.11   0.000    -.5066202   -.3093612
         35  |   -.413019   .0505432    -8.17   0.000    -.5120994   -.3139386
         36  |  -.4500083   .0508323    -8.85   0.000    -.5496553   -.3503612
         37  |  -.4472195   .0513402    -8.71   0.000    -.5478622   -.3465768
         38  |  -.4567236   .0518369    -8.81   0.000      -.55834   -.3551073
         39  |  -.4633142   .0518613    -8.93   0.000    -.5649784     -.36165
         40  |  -.4633242   .0527424    -8.78   0.000    -.5667157   -.3599328
         41  |  -.4364062   .0527514    -8.27   0.000    -.5398153   -.3329971
         42  |  -.4363784   .0530305    -8.23   0.000    -.5403346   -.3324222
         43  |  -.5346782   .0535478    -9.99   0.000    -.6396485    -.429708
         44  |  -.5355181   .0541936    -9.88   0.000    -.6417543   -.4292818
         45  |  -.4963186   .0544613    -9.11   0.000    -.6030797   -.3895575
         46  |  -.4558702   .0547094    -8.33   0.000    -.5631176   -.3486229
         47  |  -.4366666   .0554165    -7.88   0.000    -.5453002   -.3280331
         48  |  -.4077859    .055816    -7.31   0.000    -.5172025   -.2983693
         49  |  -.3360982   .0571783    -5.88   0.000    -.4481854    -.224011
         50  |   -.294482   .0584563    -5.04   0.000    -.4090746   -.1798894
             |
     age_cat |
          1  |   .2889946   .0377546     7.65   0.000     .2149839    .3630054
          2  |   .4620242   .0388595    11.89   0.000     .3858475     .538201
          3  |   .5414177   .0400605    13.52   0.000     .4628868    .6199487
          4  |    .636759   .0411836    15.46   0.000     .5560264    .7174916
          5  |   .6967328   .0421273    16.54   0.000     .6141502    .7793154
          6  |   .7457743    .042783    17.43   0.000     .6619063    .8296423
          7  |   .7790523    .043674    17.84   0.000     .6934378    .8646669
          8  |   .8049511   .0444971    18.09   0.000      .717723    .8921792
          9  |   .8236845   .0452432    18.21   0.000     .7349937    .9123752
         10  |   .8351754   .0456829    18.28   0.000     .7456228     .924728
         11  |   .8538729   .0462509    18.46   0.000     .7632069     .944539
         12  |   .8550548   .0468377    18.26   0.000     .7632385    .9468712
         13  |   .8529701   .0475943    17.92   0.000     .7596704    .9462698
         14  |   .8364408    .048206    17.35   0.000      .741942    .9309396
         15  |   .8486045   .0490506    17.30   0.000     .7524501    .9447588
         16  |   .8365811   .0502692    16.64   0.000     .7380378    .9351244
         17  |   .8189524   .0511554    16.01   0.000      .718672    .9192328
         18  |   .8223203   .0520875    15.79   0.000     .7202127    .9244279
         19  |   .8071104   .0543703    14.84   0.000     .7005278     .913693
         20  |   .7939282   .0570927    13.91   0.000     .6820088    .9058477
         25  |   .7434287   .0745834     9.97   0.000      .597222    .8896353
         30  |   .8143734   .1920374     4.24   0.000     .4379206    1.190826
         40  |   1.174374   .1204024     9.75   0.000     .9383484      1.4104
         50  |   .7846178    .157542     4.98   0.000     .4757867    1.093449
             |
       _cons |   3.381636   .0555163    60.91   0.000     3.272807    3.490466
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    108,694
Group variable: id                              Number of groups  =      6,855

R-sq:                                           Obs per group:
     within  = 0.0966                                         min =          1
     between = 0.0125                                         avg =       15.9
     overall = 0.0155                                         max =        125

                                                F(50,6854)        =      26.96
corr(u_i, Xb)  = -0.2565                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0197071   .0433867    -0.45   0.650    -.1047585    .0653443
       expat |  -.0376197   .0132477    -2.84   0.005    -.0635892   -.0116501
             |
    ind_year |
         27  |   -.147356   .0273379    -5.39   0.000    -.2009467   -.0937652
         28  |  -.2407502   .0358788    -6.71   0.000    -.3110837   -.1704166
         29  |   -.340422   .0438292    -7.77   0.000    -.4263408   -.2545031
         30  |  -.4067657   .0503908    -8.07   0.000    -.5055474    -.307984
         31  |   -.449242   .0580234    -7.74   0.000     -.562986   -.3354981
         32  |  -.5026699   .0653165    -7.70   0.000    -.6307104   -.3746293
         33  |  -.5690038   .0725001    -7.85   0.000    -.7111264   -.4268812
         34  |   -.623055    .080215    -7.77   0.000    -.7803013   -.4658086
         35  |   -.684262   .0872138    -7.85   0.000    -.8552281    -.513296
         36  |  -.7704671   .0944218    -8.16   0.000    -.9555632   -.5853711
         37  |  -.8360117   .1017148    -8.22   0.000    -1.035404   -.6366192
         38  |  -.9193386   .1094309    -8.40   0.000    -1.133857     -.70482
         39  |  -.9807723   .1169146    -8.39   0.000    -1.209961   -.7515833
         40  |  -1.016199   .1251572    -8.12   0.000    -1.261546   -.7708522
         41  |  -1.030834   .1323744    -7.79   0.000    -1.290329   -.7713388
         42  |  -1.073451   .1395128    -7.69   0.000    -1.346939   -.7999622
         43  |  -1.219047   .1470097    -8.29   0.000    -1.507232   -.9308622
         44  |  -1.273784   .1548827    -8.22   0.000    -1.577402   -.9701658
         45  |  -1.282213   .1619812    -7.92   0.000    -1.599746   -.9646796
         46  |  -1.308393   .1692975    -7.73   0.000    -1.640269   -.9765178
         47  |  -1.336649   .1755072    -7.62   0.000    -1.680698   -.9926009
         48  |  -1.352491   .1823397    -7.42   0.000    -1.709933   -.9950483
         49  |  -1.373699   .1887648    -7.28   0.000    -1.743736   -1.003661
         50  |  -1.389819   .1944674    -7.15   0.000    -1.771036   -1.008603
             |
     age_cat |
          1  |   .3984533   .0288543    13.81   0.000     .3418899    .4550167
          2  |   .6915075   .0338726    20.41   0.000     .6251068    .7579082
          3  |   .8770498   .0402079    21.81   0.000     .7982299    .9558697
          4  |   1.035011   .0468958    22.07   0.000     .9430802    1.126941
          5  |   1.167218   .0541012    21.57   0.000     1.061163    1.273273
          6  |   1.270407   .0612431    20.74   0.000     1.150352    1.390463
          7  |   1.356158   .0686763    19.75   0.000     1.221531    1.490784
          8  |   1.445843   .0760423    19.01   0.000     1.296776    1.594909
          9  |   1.513118   .0835744    18.11   0.000     1.349287     1.67695
         10  |    1.58984   .0909991    17.47   0.000     1.411454    1.768227
         11  |   1.653431   .0985284    16.78   0.000     1.460285    1.846577
         12  |   1.705813   .1061794    16.07   0.000     1.497668    1.913957
         13  |   1.762376   .1137271    15.50   0.000     1.539436    1.985316
         14  |   1.808373   .1215028    14.88   0.000      1.57019    2.046556
         15  |   1.873236   .1294649    14.47   0.000     1.619444    2.127027
         16  |   1.900219   .1375572    13.81   0.000     1.630564    2.169874
         17  |   1.936802   .1454199    13.32   0.000     1.651734     2.22187
         18  |   1.989182   .1529986    13.00   0.000     1.689257    2.289107
         19  |   2.023141   .1607638    12.58   0.000     1.707994    2.338288
         20  |    2.11622   .1769795    11.96   0.000     1.769285    2.463154
         25  |   2.264802   .2019496    11.21   0.000     1.868918    2.660686
         30  |   2.013759   .2683813     7.50   0.000     1.487648    2.539869
         40  |   1.883811   .3143857     5.99   0.000     1.267517    2.500104
         50  |   1.646598   .3472677     4.74   0.000      .965846    2.327351
             |
       _cons |   3.360034   .0497876    67.49   0.000     3.262435    3.457633
-------------+----------------------------------------------------------------
     sigma_u |  1.0852306
     sigma_e |   .5689955
         rho |   .7843757   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0965927276732297

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    108,694
Group variable: id                              Number of groups  =      6,855

R-sq:                                           Obs per group:
     within  = 0.0966                                         min =          1
     between = 0.0125                                         avg =       15.9
     overall = 0.0155                                         max =        125

                                                F(50,6854)        =      26.96
corr(u_i, Xb)  = -0.2565                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0197071   .0433867    -0.45   0.650    -.1047585    .0653443
       expat |  -.0376197   .0132477    -2.84   0.005    -.0635892   -.0116501
             |
    ind_year |
         27  |   -.147356   .0273379    -5.39   0.000    -.2009467   -.0937652
         28  |  -.2407502   .0358788    -6.71   0.000    -.3110837   -.1704166
         29  |   -.340422   .0438292    -7.77   0.000    -.4263408   -.2545031
         30  |  -.4067657   .0503908    -8.07   0.000    -.5055474    -.307984
         31  |   -.449242   .0580234    -7.74   0.000     -.562986   -.3354981
         32  |  -.5026699   .0653165    -7.70   0.000    -.6307104   -.3746293
         33  |  -.5690038   .0725001    -7.85   0.000    -.7111264   -.4268812
         34  |   -.623055    .080215    -7.77   0.000    -.7803013   -.4658086
         35  |   -.684262   .0872138    -7.85   0.000    -.8552281    -.513296
         36  |  -.7704671   .0944218    -8.16   0.000    -.9555632   -.5853711
         37  |  -.8360117   .1017148    -8.22   0.000    -1.035404   -.6366192
         38  |  -.9193386   .1094309    -8.40   0.000    -1.133857     -.70482
         39  |  -.9807723   .1169146    -8.39   0.000    -1.209961   -.7515833
         40  |  -1.016199   .1251572    -8.12   0.000    -1.261546   -.7708522
         41  |  -1.030834   .1323744    -7.79   0.000    -1.290329   -.7713388
         42  |  -1.073451   .1395128    -7.69   0.000    -1.346939   -.7999622
         43  |  -1.219047   .1470097    -8.29   0.000    -1.507232   -.9308622
         44  |  -1.273784   .1548827    -8.22   0.000    -1.577402   -.9701658
         45  |  -1.282213   .1619812    -7.92   0.000    -1.599746   -.9646796
         46  |  -1.308393   .1692975    -7.73   0.000    -1.640269   -.9765178
         47  |  -1.336649   .1755072    -7.62   0.000    -1.680698   -.9926009
         48  |  -1.352491   .1823397    -7.42   0.000    -1.709933   -.9950483
         49  |  -1.373699   .1887648    -7.28   0.000    -1.743736   -1.003661
         50  |  -1.389819   .1944674    -7.15   0.000    -1.771036   -1.008603
             |
     age_cat |
          1  |   .3984533   .0288543    13.81   0.000     .3418899    .4550167
          2  |   .6915075   .0338726    20.41   0.000     .6251068    .7579082
          3  |   .8770498   .0402079    21.81   0.000     .7982299    .9558697
          4  |   1.035011   .0468958    22.07   0.000     .9430802    1.126941
          5  |   1.167218   .0541012    21.57   0.000     1.061163    1.273273
          6  |   1.270407   .0612431    20.74   0.000     1.150352    1.390463
          7  |   1.356158   .0686763    19.75   0.000     1.221531    1.490784
          8  |   1.445843   .0760423    19.01   0.000     1.296776    1.594909
          9  |   1.513118   .0835744    18.11   0.000     1.349287     1.67695
         10  |    1.58984   .0909991    17.47   0.000     1.411454    1.768227
         11  |   1.653431   .0985284    16.78   0.000     1.460285    1.846577
         12  |   1.705813   .1061794    16.07   0.000     1.497668    1.913957
         13  |   1.762376   .1137271    15.50   0.000     1.539436    1.985316
         14  |   1.808373   .1215028    14.88   0.000      1.57019    2.046556
         15  |   1.873236   .1294649    14.47   0.000     1.619444    2.127027
         16  |   1.900219   .1375572    13.81   0.000     1.630564    2.169874
         17  |   1.936802   .1454199    13.32   0.000     1.651734     2.22187
         18  |   1.989182   .1529986    13.00   0.000     1.689257    2.289107
         19  |   2.023141   .1607638    12.58   0.000     1.707994    2.338288
         20  |    2.11622   .1769795    11.96   0.000     1.769285    2.463154
         25  |   2.264802   .2019496    11.21   0.000     1.868918    2.660686
         30  |   2.013759   .2683813     7.50   0.000     1.487648    2.539869
         40  |   1.883811   .3143857     5.99   0.000     1.267517    2.500104
         50  |   1.646598   .3472677     4.74   0.000      .965846    2.327351
             |
       _cons |   3.360034   .0497876    67.49   0.000     3.262435    3.457633
-------------+----------------------------------------------------------------
     sigma_u |  1.0852306
     sigma_e |   .5689955
         rho |   .7843757   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    182199
Group variable: firm_person                     Number of groups   =     21832

R-sq:  within  = 0.0952                         Obs per group: min =         1
       between = 0.0184                                        avg =       8.3
       overall = 0.0209                                        max =        25

                                                F(53,6854)         =     28.90
corr(u_i, Xb)  = -0.2066                        Prob > F           =    0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0067732   .0370252    -0.18   0.855     -.079354    .0658077
      during |  -.0722872   .0147537    -4.90   0.000    -.1012091   -.0433653
       after |  -.2234467    .026558    -8.41   0.000    -.2755085   -.1713849
during_expat |   .0683616   .0229642     2.98   0.003     .0233446    .1133785
 after_expat |   .1672757   .0367388     4.55   0.000     .0952563     .239295
             |
    ind_year |
         27  |  -.1514588    .024806    -6.11   0.000    -.2000863   -.1028313
         28  |  -.2390257   .0331269    -7.22   0.000    -.3039646   -.1740867
         29  |  -.3451833   .0413145    -8.36   0.000    -.4261726   -.2641941
         30  |  -.3988154   .0483316    -8.25   0.000    -.4935604   -.3040705
         31  |  -.4406162   .0563144    -7.82   0.000    -.5510098   -.3302226
         32  |  -.4977381   .0638176    -7.80   0.000    -.6228403   -.3726359
         33  |  -.5594863   .0715694    -7.82   0.000    -.6997845   -.4191881
         34  |  -.6082273   .0793287    -7.67   0.000    -.7637362   -.4527184
         35  |  -.6736467   .0867518    -7.77   0.000    -.8437071   -.5035863
         36  |  -.7594012   .0939269    -8.09   0.000    -.9435272   -.5752753
         37  |  -.8248079   .1014182    -8.13   0.000    -1.023619   -.6259969
         38  |  -.9071739   .1092993    -8.30   0.000    -1.121434   -.6929133
         39  |  -.9707688   .1170287    -8.30   0.000    -1.200181   -.7413563
         40  |  -.9996109    .125085    -7.99   0.000    -1.244816   -.7544054
         41  |  -1.017793   .1323313    -7.69   0.000    -1.277204   -.7583829
         42  |   -1.06475   .1396986    -7.62   0.000    -1.338602   -.7908971
         43  |  -1.209732   .1470484    -8.23   0.000    -1.497992   -.9214712
         44  |  -1.259921   .1547458    -8.14   0.000     -1.56327   -.9565708
         45  |  -1.268315   .1616137    -7.85   0.000    -1.585128    -.951502
         46  |  -1.291271    .168714    -7.65   0.000    -1.622003   -.9605395
         47  |  -1.320932   .1749871    -7.55   0.000    -1.663961    -.977903
         48  |  -1.335774   .1815445    -7.36   0.000    -1.691658   -.9798907
         49  |  -1.352426   .1879448    -7.20   0.000    -1.720856   -.9839955
         50  |  -1.363344   .1938312    -7.03   0.000    -1.743313   -.9833742
             |
     age_cat |
          1  |   .4039502   .0277241    14.57   0.000     .3496023    .4582981
          2  |   .7084766   .0328778    21.55   0.000      .644026    .7729273
          3  |   .9027086   .0390773    23.10   0.000      .826105    .9793122
          4  |   1.057278   .0457045    23.13   0.000     .9676827    1.146873
          5  |   1.182681   .0528691    22.37   0.000     1.079041    1.286321
          6  |   1.288767   .0601013    21.44   0.000      1.17095    1.406584
          7  |    1.37736   .0674564    20.42   0.000     1.245124    1.509595
          8  |   1.466144   .0749067    19.57   0.000     1.319304    1.612984
          9  |   1.538207   .0822889    18.69   0.000     1.376895    1.699518
         10  |   1.610072   .0897198    17.95   0.000     1.434193     1.78595
         11  |   1.679175   .0971461    17.29   0.000     1.488738    1.869611
         12  |   1.725033   .1046895    16.48   0.000     1.519809    1.930256
         13  |   1.787771   .1120868    15.95   0.000     1.568046    2.007495
         14  |   1.829532   .1197019    15.28   0.000     1.594879    2.064185
         15  |   1.901509   .1275219    14.91   0.000     1.651527    2.151491
         16  |   1.932984   .1353131    14.29   0.000     1.667728    2.198239
         17  |   1.968756   .1430124    13.77   0.000     1.688407    2.249105
         18  |   2.011947   .1504244    13.38   0.000     1.717069    2.306826
         19  |   2.047012   .1579148    12.96   0.000      1.73745    2.356574
         20  |   2.132948   .1727467    12.35   0.000     1.794311    2.471585
         25  |   2.252882   .1966253    11.46   0.000     1.867435    2.638328
         30  |   2.096157   .2532488     8.28   0.000     1.599711    2.592603
         40  |   1.990664   .2859276     6.96   0.000     1.430157     2.55117
         50  |    1.85173   .2968332     6.24   0.000     1.269845    2.433615
             |
       _cons |   3.436068   .0491218    69.95   0.000     3.339774    3.532362
-------------+----------------------------------------------------------------
     sigma_u |  1.1840294
     sigma_e |  .56029445
         rho |  .81704177   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0951945423335527

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    182,199
Group variable: firm_person                     Number of groups  =     21,832

R-sq:                                           Obs per group:
     within  = 0.0952                                         min =          1
     between = 0.0184                                         avg =        8.3
     overall = 0.0209                                         max =         25

                                                F(53,6854)        =      28.90
corr(u_i, Xb)  = -0.2066                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0067732   .0370252    -0.18   0.855     -.079354    .0658077
      during |  -.0722872   .0147537    -4.90   0.000    -.1012091   -.0433653
       after |  -.2234467    .026558    -8.41   0.000    -.2755085   -.1713849
during_expat |   .0683616   .0229642     2.98   0.003     .0233446    .1133785
 after_expat |   .1672757   .0367388     4.55   0.000     .0952563     .239295
             |
    ind_year |
         27  |  -.1514588    .024806    -6.11   0.000    -.2000863   -.1028313
         28  |  -.2390257   .0331269    -7.22   0.000    -.3039646   -.1740867
         29  |  -.3451833   .0413145    -8.36   0.000    -.4261726   -.2641941
         30  |  -.3988154   .0483316    -8.25   0.000    -.4935604   -.3040705
         31  |  -.4406162   .0563144    -7.82   0.000    -.5510098   -.3302226
         32  |  -.4977381   .0638176    -7.80   0.000    -.6228403   -.3726359
         33  |  -.5594863   .0715694    -7.82   0.000    -.6997845   -.4191881
         34  |  -.6082273   .0793287    -7.67   0.000    -.7637362   -.4527184
         35  |  -.6736467   .0867518    -7.77   0.000    -.8437071   -.5035863
         36  |  -.7594012   .0939269    -8.09   0.000    -.9435272   -.5752753
         37  |  -.8248079   .1014182    -8.13   0.000    -1.023619   -.6259969
         38  |  -.9071739   .1092993    -8.30   0.000    -1.121434   -.6929133
         39  |  -.9707688   .1170287    -8.30   0.000    -1.200181   -.7413563
         40  |  -.9996109    .125085    -7.99   0.000    -1.244816   -.7544054
         41  |  -1.017793   .1323313    -7.69   0.000    -1.277204   -.7583829
         42  |   -1.06475   .1396986    -7.62   0.000    -1.338602   -.7908971
         43  |  -1.209732   .1470484    -8.23   0.000    -1.497992   -.9214712
         44  |  -1.259921   .1547458    -8.14   0.000     -1.56327   -.9565708
         45  |  -1.268315   .1616137    -7.85   0.000    -1.585128    -.951502
         46  |  -1.291271    .168714    -7.65   0.000    -1.622003   -.9605395
         47  |  -1.320932   .1749871    -7.55   0.000    -1.663961    -.977903
         48  |  -1.335774   .1815445    -7.36   0.000    -1.691658   -.9798907
         49  |  -1.352426   .1879448    -7.20   0.000    -1.720856   -.9839955
         50  |  -1.363344   .1938312    -7.03   0.000    -1.743313   -.9833742
             |
     age_cat |
          1  |   .4039502   .0277241    14.57   0.000     .3496023    .4582981
          2  |   .7084766   .0328778    21.55   0.000      .644026    .7729273
          3  |   .9027086   .0390773    23.10   0.000      .826105    .9793122
          4  |   1.057278   .0457045    23.13   0.000     .9676827    1.146873
          5  |   1.182681   .0528691    22.37   0.000     1.079041    1.286321
          6  |   1.288767   .0601013    21.44   0.000      1.17095    1.406584
          7  |    1.37736   .0674564    20.42   0.000     1.245124    1.509595
          8  |   1.466144   .0749067    19.57   0.000     1.319304    1.612984
          9  |   1.538207   .0822889    18.69   0.000     1.376895    1.699518
         10  |   1.610072   .0897198    17.95   0.000     1.434193     1.78595
         11  |   1.679175   .0971461    17.29   0.000     1.488738    1.869611
         12  |   1.725033   .1046895    16.48   0.000     1.519809    1.930256
         13  |   1.787771   .1120868    15.95   0.000     1.568046    2.007495
         14  |   1.829532   .1197019    15.28   0.000     1.594879    2.064185
         15  |   1.901509   .1275219    14.91   0.000     1.651527    2.151491
         16  |   1.932984   .1353131    14.29   0.000     1.667728    2.198239
         17  |   1.968756   .1430124    13.77   0.000     1.688407    2.249105
         18  |   2.011947   .1504244    13.38   0.000     1.717069    2.306826
         19  |   2.047012   .1579148    12.96   0.000      1.73745    2.356574
         20  |   2.132948   .1727467    12.35   0.000     1.794311    2.471585
         25  |   2.252882   .1966253    11.46   0.000     1.867435    2.638328
         30  |   2.096157   .2532488     8.28   0.000     1.599711    2.592603
         40  |   1.990664   .2859276     6.96   0.000     1.430157     2.55117
         50  |    1.85173   .2968332     6.24   0.000     1.269845    2.433615
             |
       _cons |   3.436068   .0491218    69.95   0.000     3.339774    3.532362
-------------+----------------------------------------------------------------
     sigma_u |  1.1840294
     sigma_e |  .56029445
         rho |  .81704177   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1,  6854) =   24.01
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6854) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1,  6854) =   69.55
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6854) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1,  6854) =    8.86
            Prob > F =    0.0029

 ( 1)  during_expat = 0

       F(  1,  6854) =    8.86
            Prob > F =    0.0029
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1,  6854) =   13.85
            Prob > F =    0.0002

 ( 1)  after_expat = 0

       F(  1,  6854) =   20.73
            Prob > F =    0.0000
(1 real change made)
(file output/figure/manufacturing_lnL_slope.png written in PNG format)
(sum of wgt is 97,100.1176971942)

Linear regression                               Number of obs     =    233,110
                                                F(75, 14660)      =      25.36
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0493
                                                Root MSE          =     .98677

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3942006   .0360343    10.94   0.000     .3235689    .4648323
       expat |  -.0118559   .0537287    -0.22   0.825     -.117171    .0934591
             |
    ind_year |
          2  |  -.1221423   .0291657    -4.19   0.000    -.1793107   -.0649739
          3  |  -.2468586   .0341547    -7.23   0.000    -.3138062    -.179911
          4  |   -.321787    .035888    -8.97   0.000    -.3921321   -.2514419
          5  |  -.3703747   .0368803   -10.04   0.000    -.4426647   -.2980847
          6  |  -.4543917   .0376549   -12.07   0.000    -.5282001   -.3805833
          7  |  -.4666121   .0384402   -12.14   0.000    -.5419598   -.3912645
          8  |  -.4425807   .0386543   -11.45   0.000     -.518348   -.3668133
          9  |    -.42375   .0387435   -10.94   0.000    -.4996921   -.3478079
         10  |  -.4372367   .0389299   -11.23   0.000    -.5135442   -.3609292
         11  |  -.4340353   .0391975   -11.07   0.000    -.5108674   -.3572032
         12  |  -.4312236    .039072   -11.04   0.000    -.5078097   -.3546376
         13  |  -.3885975   .0389276    -9.98   0.000    -.4649005   -.3122944
         14  |  -.3793479   .0388668    -9.76   0.000    -.4555318   -.3031641
         15  |  -.3519178   .0387204    -9.09   0.000    -.4278147    -.276021
         16  |  -.3443236   .0386668    -8.90   0.000    -.4201154   -.2685318
         17  |  -.3341539   .0388491    -8.60   0.000    -.4103029   -.2580048
         18  |  -.3569299   .0388739    -9.18   0.000    -.4331277   -.2807322
         19  |  -.3525037   .0390476    -9.03   0.000    -.4290419   -.2759654
         20  |  -.3341108    .039099    -8.55   0.000    -.4107497   -.2574719
         21  |  -.3339121   .0393422    -8.49   0.000    -.4110277   -.2567965
         22  |   -.323697   .0394041    -8.21   0.000     -.400934   -.2464601
         23  |  -.3114293    .039515    -7.88   0.000    -.3888837   -.2339749
         24  |   -.270734   .0405385    -6.68   0.000    -.3501946   -.1912733
         25  |  -.2240438    .040997    -5.46   0.000    -.3044031   -.1436844
         26  |   .3840106   .0609808     6.30   0.000     .2644805    .5035408
         27  |   .1489318   .0506994     2.94   0.003     .0495546    .2483089
         28  |   .0893795   .0479068     1.87   0.062    -.0045239    .1832829
         29  |   -.001369   .0468242    -0.03   0.977    -.0931504    .0904123
         30  |  -.0523199   .0453019    -1.15   0.248    -.1411173    .0364776
         31  |    -.06207   .0440294    -1.41   0.159    -.1483733    .0242332
         32  |  -.0966756   .0430373    -2.25   0.025    -.1810342   -.0123171
         33  |  -.1312217   .0422112    -3.11   0.002     -.213961   -.0484824
         34  |  -.1576146    .042036    -3.75   0.000    -.2400104   -.0752188
         35  |  -.1683162   .0414981    -4.06   0.000    -.2496577   -.0869746
         36  |  -.1977562   .0411485    -4.81   0.000    -.2784125      -.1171
         37  |  -.1953145   .0413211    -4.73   0.000    -.2763089     -.11432
         38  |  -.1923395   .0415655    -4.63   0.000     -.273813   -.1108659
         39  |  -.1880301   .0412833    -4.55   0.000    -.2689505   -.1071098
         40  |  -.1875568   .0418669    -4.48   0.000    -.2696211   -.1054925
         41  |  -.1671696   .0413724    -4.04   0.000    -.2482647   -.0860744
         42  |  -.1639803   .0415686    -3.94   0.000    -.2454599   -.0825007
         43  |  -.2452107   .0421423    -5.82   0.000    -.3278148   -.1626065
         44  |  -.2268148   .0424877    -5.34   0.000    -.3100961   -.1435335
         45  |  -.2002555   .0426682    -4.69   0.000    -.2838905   -.1166204
         46  |  -.1636813   .0425186    -3.85   0.000    -.2470231   -.0803394
         47  |  -.1328286   .0433335    -3.07   0.002    -.2177678   -.0478895
         48  |  -.0895927   .0435096    -2.06   0.039    -.1748771   -.0043083
         49  |  -.0546087   .0450275    -1.21   0.225    -.1428682    .0336508
         50  |  -.0145242   .0458265    -0.32   0.751    -.1043499    .0753016
             |
     age_cat |
          1  |   .2708717   .0233231    11.61   0.000     .2251556    .3165878
          2  |    .430673   .0243086    17.72   0.000     .3830252    .4783209
          3  |   .5166561   .0251719    20.53   0.000      .467316    .5659962
          4  |   .5909518   .0258312    22.88   0.000     .5403194    .6415842
          5  |   .6591003   .0264703    24.90   0.000     .6072152    .7109854
          6  |   .7042404   .0268459    26.23   0.000     .6516191    .7568617
          7  |   .7394297   .0272983    27.09   0.000     .6859217    .7929378
          8  |   .7560099   .0277185    27.27   0.000     .7016782    .8103416
          9  |   .7543122   .0281359    26.81   0.000     .6991622    .8094621
         10  |   .7562725   .0282827    26.74   0.000     .7008348    .8117102
         11  |   .7622945   .0287059    26.56   0.000     .7060274    .8185616
         12  |   .7677848   .0289861    26.49   0.000     .7109685    .8246012
         13  |   .7615559   .0293335    25.96   0.000     .7040586    .8190533
         14  |   .7370836   .0299027    24.65   0.000     .6784706    .7956967
         15  |   .7256578   .0304328    23.84   0.000     .6660057      .78531
         16  |   .6952587   .0311412    22.33   0.000     .6342181    .7562994
         17  |   .6677776   .0320389    20.84   0.000     .6049774    .7305779
         18  |   .6443033   .0328017    19.64   0.000     .5800079    .7085988
         19  |   .6187647   .0340867    18.15   0.000     .5519504    .6855789
         20  |   .5536958    .035973    15.39   0.000     .4831843    .6242073
         25  |   .4646484   .0510588     9.10   0.000     .3645667    .5647301
         30  |   .5609434   .0773072     7.26   0.000     .4094115    .7124753
         40  |   .7370477   .0704481    10.46   0.000     .5989606    .8751347
         50  |   .4146824   .0946784     4.38   0.000     .2291008    .6002639
             |
       _cons |    3.21847   .0399632    80.54   0.000     3.140137    3.296803
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    233,110
                                                F(75, 14660)      =      25.36
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0493
                                                Root MSE          =     .98677

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3942006   .0360343    10.94   0.000     .3235689    .4648323
       expat |  -.0118559   .0537287    -0.22   0.825     -.117171    .0934591
             |
    ind_year |
          2  |  -.1221423   .0291657    -4.19   0.000    -.1793107   -.0649739
          3  |  -.2468586   .0341547    -7.23   0.000    -.3138062    -.179911
          4  |   -.321787    .035888    -8.97   0.000    -.3921321   -.2514419
          5  |  -.3703747   .0368803   -10.04   0.000    -.4426647   -.2980847
          6  |  -.4543917   .0376549   -12.07   0.000    -.5282001   -.3805833
          7  |  -.4666121   .0384402   -12.14   0.000    -.5419598   -.3912645
          8  |  -.4425807   .0386543   -11.45   0.000     -.518348   -.3668133
          9  |    -.42375   .0387435   -10.94   0.000    -.4996921   -.3478079
         10  |  -.4372367   .0389299   -11.23   0.000    -.5135442   -.3609292
         11  |  -.4340353   .0391975   -11.07   0.000    -.5108674   -.3572032
         12  |  -.4312236    .039072   -11.04   0.000    -.5078097   -.3546376
         13  |  -.3885975   .0389276    -9.98   0.000    -.4649005   -.3122944
         14  |  -.3793479   .0388668    -9.76   0.000    -.4555318   -.3031641
         15  |  -.3519178   .0387204    -9.09   0.000    -.4278147    -.276021
         16  |  -.3443236   .0386668    -8.90   0.000    -.4201154   -.2685318
         17  |  -.3341539   .0388491    -8.60   0.000    -.4103029   -.2580048
         18  |  -.3569299   .0388739    -9.18   0.000    -.4331277   -.2807322
         19  |  -.3525037   .0390476    -9.03   0.000    -.4290419   -.2759654
         20  |  -.3341108    .039099    -8.55   0.000    -.4107497   -.2574719
         21  |  -.3339121   .0393422    -8.49   0.000    -.4110277   -.2567965
         22  |   -.323697   .0394041    -8.21   0.000     -.400934   -.2464601
         23  |  -.3114293    .039515    -7.88   0.000    -.3888837   -.2339749
         24  |   -.270734   .0405385    -6.68   0.000    -.3501946   -.1912733
         25  |  -.2240438    .040997    -5.46   0.000    -.3044031   -.1436844
         26  |   .3840106   .0609808     6.30   0.000     .2644805    .5035408
         27  |   .1489318   .0506994     2.94   0.003     .0495546    .2483089
         28  |   .0893795   .0479068     1.87   0.062    -.0045239    .1832829
         29  |   -.001369   .0468242    -0.03   0.977    -.0931504    .0904123
         30  |  -.0523199   .0453019    -1.15   0.248    -.1411173    .0364776
         31  |    -.06207   .0440294    -1.41   0.159    -.1483733    .0242332
         32  |  -.0966756   .0430373    -2.25   0.025    -.1810342   -.0123171
         33  |  -.1312217   .0422112    -3.11   0.002     -.213961   -.0484824
         34  |  -.1576146    .042036    -3.75   0.000    -.2400104   -.0752188
         35  |  -.1683162   .0414981    -4.06   0.000    -.2496577   -.0869746
         36  |  -.1977562   .0411485    -4.81   0.000    -.2784125      -.1171
         37  |  -.1953145   .0413211    -4.73   0.000    -.2763089     -.11432
         38  |  -.1923395   .0415655    -4.63   0.000     -.273813   -.1108659
         39  |  -.1880301   .0412833    -4.55   0.000    -.2689505   -.1071098
         40  |  -.1875568   .0418669    -4.48   0.000    -.2696211   -.1054925
         41  |  -.1671696   .0413724    -4.04   0.000    -.2482647   -.0860744
         42  |  -.1639803   .0415686    -3.94   0.000    -.2454599   -.0825007
         43  |  -.2452107   .0421423    -5.82   0.000    -.3278148   -.1626065
         44  |  -.2268148   .0424877    -5.34   0.000    -.3100961   -.1435335
         45  |  -.2002555   .0426682    -4.69   0.000    -.2838905   -.1166204
         46  |  -.1636813   .0425186    -3.85   0.000    -.2470231   -.0803394
         47  |  -.1328286   .0433335    -3.07   0.002    -.2177678   -.0478895
         48  |  -.0895927   .0435096    -2.06   0.039    -.1748771   -.0043083
         49  |  -.0546087   .0450275    -1.21   0.225    -.1428682    .0336508
         50  |  -.0145242   .0458265    -0.32   0.751    -.1043499    .0753016
             |
     age_cat |
          1  |   .2708717   .0233231    11.61   0.000     .2251556    .3165878
          2  |    .430673   .0243086    17.72   0.000     .3830252    .4783209
          3  |   .5166561   .0251719    20.53   0.000      .467316    .5659962
          4  |   .5909518   .0258312    22.88   0.000     .5403194    .6415842
          5  |   .6591003   .0264703    24.90   0.000     .6072152    .7109854
          6  |   .7042404   .0268459    26.23   0.000     .6516191    .7568617
          7  |   .7394297   .0272983    27.09   0.000     .6859217    .7929378
          8  |   .7560099   .0277185    27.27   0.000     .7016782    .8103416
          9  |   .7543122   .0281359    26.81   0.000     .6991622    .8094621
         10  |   .7562725   .0282827    26.74   0.000     .7008348    .8117102
         11  |   .7622945   .0287059    26.56   0.000     .7060274    .8185616
         12  |   .7677848   .0289861    26.49   0.000     .7109685    .8246012
         13  |   .7615559   .0293335    25.96   0.000     .7040586    .8190533
         14  |   .7370836   .0299027    24.65   0.000     .6784706    .7956967
         15  |   .7256578   .0304328    23.84   0.000     .6660057      .78531
         16  |   .6952587   .0311412    22.33   0.000     .6342181    .7562994
         17  |   .6677776   .0320389    20.84   0.000     .6049774    .7305779
         18  |   .6443033   .0328017    19.64   0.000     .5800079    .7085988
         19  |   .6187647   .0340867    18.15   0.000     .5519504    .6855789
         20  |   .5536958    .035973    15.39   0.000     .4831843    .6242073
         25  |   .4646484   .0510588     9.10   0.000     .3645667    .5647301
         30  |   .5609434   .0773072     7.26   0.000     .4094115    .7124753
         40  |   .7370477   .0704481    10.46   0.000     .5989606    .8751347
         50  |   .4146824   .0946784     4.38   0.000     .2291008    .6002639
             |
       _cons |    3.21847   .0399632    80.54   0.000     3.140137    3.296803
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    233,110
Group variable: id                              Number of groups  =     14,661

R-sq:                                           Obs per group:
     within  = 0.1061                                         min =          1
     between = 0.0108                                         avg =       15.9
     overall = 0.0248                                         max =        140

                                                F(75,14660)       =      40.37
corr(u_i, Xb)  = -0.3771                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0214986   .0390255     0.55   0.582    -.0549963    .0979935
       expat |   .0476697   .0303231     1.57   0.116    -.0117674    .1071068
             |
    ind_year |
          2  |  -.1219421   .0258931    -4.71   0.000    -.1726959   -.0711884
          3  |  -.2699477   .0333282    -8.10   0.000    -.3352753   -.2046202
          4  |  -.4145496   .0375228   -11.05   0.000     -.488099   -.3410002
          5  |  -.5175207   .0420218   -12.32   0.000    -.5998887   -.4351528
          6  |  -.6283085   .0460549   -13.64   0.000    -.7185819   -.5380351
          7  |  -.6906714   .0500862   -13.79   0.000    -.7888467    -.592496
          8  |  -.7361498   .0537623   -13.69   0.000    -.8415306    -.630769
          9  |  -.7887291   .0576983   -13.67   0.000     -.901825   -.6756332
         10  |  -.8632478   .0616081   -14.01   0.000    -.9840075   -.7424881
         11  |  -.9300195   .0652149   -14.26   0.000    -1.057849   -.8021902
         12  |  -.9819859   .0690163   -14.23   0.000    -1.117267   -.8467053
         13  |  -1.017637   .0728937   -13.96   0.000    -1.160517   -.8747557
         14  |  -1.070803   .0768186   -13.94   0.000    -1.221377   -.9202288
         15  |  -1.102104   .0806491   -13.67   0.000    -1.260186   -.9440216
         16  |  -1.160902   .0845617   -13.73   0.000    -1.326654   -.9951509
         17  |  -1.217479   .0887857   -13.71   0.000     -1.39151   -1.043448
         18  |  -1.312113   .0927663   -14.14   0.000    -1.493947    -1.13028
         19  |  -1.384951   .0964925   -14.35   0.000    -1.574089   -1.195814
         20  |  -1.439422   .1001343   -14.37   0.000    -1.635698   -1.243147
         21  |  -1.510149   .1036616   -14.57   0.000    -1.713339   -1.306959
         22  |  -1.560074   .1070569   -14.57   0.000    -1.769919   -1.350229
         23  |  -1.608345   .1104948   -14.56   0.000    -1.824928   -1.391761
         24  |  -1.658238   .1143956   -14.50   0.000    -1.882468   -1.434008
         25  |   -1.69386   .1183904   -14.31   0.000     -1.92592     -1.4618
         26  |   .4581665   .0738667     6.20   0.000     .3133786    .6029544
         27  |   .2940889   .0696552     4.22   0.000     .1575559    .4306218
         28  |   .1706581   .0672282     2.54   0.011     .0388824    .3024339
         29  |   .0393261   .0666752     0.59   0.555    -.0913657    .1700179
         30  |  -.0778339   .0658693    -1.18   0.237    -.2069459    .0512782
         31  |  -.1491658   .0663897    -2.25   0.025    -.2792979   -.0190337
         32  |  -.2329554   .0669177    -3.48   0.001    -.3641225   -.1017883
         33  |   -.322744   .0685561    -4.71   0.000    -.4571226   -.1883655
         34  |  -.4005125   .0706028    -5.67   0.000    -.5389029   -.2621222
         35  |  -.4691606   .0728295    -6.44   0.000    -.6119156   -.3264055
         36  |  -.5563587   .0751306    -7.41   0.000     -.703624   -.4090933
         37  |  -.6333469   .0775614    -8.17   0.000     -.785377   -.4813167
         38  |  -.7180782   .0806133    -8.91   0.000    -.8760905   -.5600659
         39  |  -.7821621   .0840768    -9.30   0.000    -.9469632   -.6173611
         40  |   -.831939   .0880061    -9.45   0.000    -1.004442   -.6594359
         41  |  -.8679283   .0912379    -9.51   0.000    -1.046766   -.6890906
         42  |  -.9281097    .094556    -9.82   0.000    -1.113451    -.742768
         43  |  -1.069221   .0984365   -10.86   0.000    -1.262169   -.8762735
         44  |  -1.123022   .1025681   -10.95   0.000    -1.324068   -.9219755
         45  |  -1.146854   .1064425   -10.77   0.000    -1.355495   -.9382134
         46  |  -1.176606   .1100917   -10.69   0.000      -1.3924   -.9608124
         47  |  -1.211946   .1133492   -10.69   0.000    -1.434125   -.9897675
         48  |  -1.232741   .1169399   -10.54   0.000    -1.461958   -1.003524
         49  |  -1.276455   .1205669   -10.59   0.000    -1.512782   -1.040129
         50  |  -1.312129   .1234863   -10.63   0.000    -1.554177    -1.07008
             |
     age_cat |
          1  |   .4233016   .0196783    21.51   0.000     .3847296    .4618736
          2  |   .7157384   .0227076    31.52   0.000     .6712288    .7602481
          3  |   .9306542   .0263173    35.36   0.000     .8790689    .9822395
          4  |    1.11186   .0299447    37.13   0.000     1.053165    1.170556
          5  |   1.266547   .0339854    37.27   0.000     1.199932    1.333163
          6  |   1.399481   .0380859    36.75   0.000     1.324828    1.474134
          7  |   1.507226   .0424214    35.53   0.000     1.424074    1.590377
          8  |   1.605441   .0467622    34.33   0.000     1.513781    1.697101
          9  |   1.683391   .0510748    32.96   0.000     1.583278    1.783504
         10  |   1.756541   .0553386    31.74   0.000      1.64807    1.865012
         11  |   1.829171   .0597177    30.63   0.000     1.712117    1.946225
         12  |   1.905117   .0641081    29.72   0.000     1.779457    2.030777
         13  |   1.967067    .068475    28.73   0.000     1.832847    2.101286
         14  |   2.015935   .0731004    27.58   0.000     1.872649    2.159221
         15  |   2.065529   .0776221    26.61   0.000      1.91338    2.217678
         16  |   2.101279   .0822111    25.56   0.000     1.940135    2.262423
         17  |   2.139572      .0869    24.62   0.000     1.969237    2.309907
         18  |   2.189776   .0914304    23.95   0.000     2.010561    2.368991
         19  |   2.226435   .0962326    23.14   0.000     2.037807    2.415063
         20  |   2.310008   .1050819    21.98   0.000     2.104034    2.515981
         25  |   2.448067   .1196593    20.46   0.000      2.21352    2.682614
         30  |   2.180401   .1607058    13.57   0.000     1.865397    2.495404
         40  |   2.034697   .1825978    11.14   0.000     1.676782    2.392611
         50  |   1.921125   .1921987    10.00   0.000     1.544391    2.297858
             |
       _cons |   3.015382   .0455838    66.15   0.000     2.926032    3.104732
-------------+----------------------------------------------------------------
     sigma_u |  1.0605879
     sigma_e |  .64688441
         rho |   .7288552   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1060661005588942

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    233,110
Group variable: id                              Number of groups  =     14,661

R-sq:                                           Obs per group:
     within  = 0.1061                                         min =          1
     between = 0.0108                                         avg =       15.9
     overall = 0.0248                                         max =        140

                                                F(75,14660)       =      40.37
corr(u_i, Xb)  = -0.3771                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0214986   .0390255     0.55   0.582    -.0549963    .0979935
       expat |   .0476697   .0303231     1.57   0.116    -.0117674    .1071068
             |
    ind_year |
          2  |  -.1219421   .0258931    -4.71   0.000    -.1726959   -.0711884
          3  |  -.2699477   .0333282    -8.10   0.000    -.3352753   -.2046202
          4  |  -.4145496   .0375228   -11.05   0.000     -.488099   -.3410002
          5  |  -.5175207   .0420218   -12.32   0.000    -.5998887   -.4351528
          6  |  -.6283085   .0460549   -13.64   0.000    -.7185819   -.5380351
          7  |  -.6906714   .0500862   -13.79   0.000    -.7888467    -.592496
          8  |  -.7361498   .0537623   -13.69   0.000    -.8415306    -.630769
          9  |  -.7887291   .0576983   -13.67   0.000     -.901825   -.6756332
         10  |  -.8632478   .0616081   -14.01   0.000    -.9840075   -.7424881
         11  |  -.9300195   .0652149   -14.26   0.000    -1.057849   -.8021902
         12  |  -.9819859   .0690163   -14.23   0.000    -1.117267   -.8467053
         13  |  -1.017637   .0728937   -13.96   0.000    -1.160517   -.8747557
         14  |  -1.070803   .0768186   -13.94   0.000    -1.221377   -.9202288
         15  |  -1.102104   .0806491   -13.67   0.000    -1.260186   -.9440216
         16  |  -1.160902   .0845617   -13.73   0.000    -1.326654   -.9951509
         17  |  -1.217479   .0887857   -13.71   0.000     -1.39151   -1.043448
         18  |  -1.312113   .0927663   -14.14   0.000    -1.493947    -1.13028
         19  |  -1.384951   .0964925   -14.35   0.000    -1.574089   -1.195814
         20  |  -1.439422   .1001343   -14.37   0.000    -1.635698   -1.243147
         21  |  -1.510149   .1036616   -14.57   0.000    -1.713339   -1.306959
         22  |  -1.560074   .1070569   -14.57   0.000    -1.769919   -1.350229
         23  |  -1.608345   .1104948   -14.56   0.000    -1.824928   -1.391761
         24  |  -1.658238   .1143956   -14.50   0.000    -1.882468   -1.434008
         25  |   -1.69386   .1183904   -14.31   0.000     -1.92592     -1.4618
         26  |   .4581665   .0738667     6.20   0.000     .3133786    .6029544
         27  |   .2940889   .0696552     4.22   0.000     .1575559    .4306218
         28  |   .1706581   .0672282     2.54   0.011     .0388824    .3024339
         29  |   .0393261   .0666752     0.59   0.555    -.0913657    .1700179
         30  |  -.0778339   .0658693    -1.18   0.237    -.2069459    .0512782
         31  |  -.1491658   .0663897    -2.25   0.025    -.2792979   -.0190337
         32  |  -.2329554   .0669177    -3.48   0.001    -.3641225   -.1017883
         33  |   -.322744   .0685561    -4.71   0.000    -.4571226   -.1883655
         34  |  -.4005125   .0706028    -5.67   0.000    -.5389029   -.2621222
         35  |  -.4691606   .0728295    -6.44   0.000    -.6119156   -.3264055
         36  |  -.5563587   .0751306    -7.41   0.000     -.703624   -.4090933
         37  |  -.6333469   .0775614    -8.17   0.000     -.785377   -.4813167
         38  |  -.7180782   .0806133    -8.91   0.000    -.8760905   -.5600659
         39  |  -.7821621   .0840768    -9.30   0.000    -.9469632   -.6173611
         40  |   -.831939   .0880061    -9.45   0.000    -1.004442   -.6594359
         41  |  -.8679283   .0912379    -9.51   0.000    -1.046766   -.6890906
         42  |  -.9281097    .094556    -9.82   0.000    -1.113451    -.742768
         43  |  -1.069221   .0984365   -10.86   0.000    -1.262169   -.8762735
         44  |  -1.123022   .1025681   -10.95   0.000    -1.324068   -.9219755
         45  |  -1.146854   .1064425   -10.77   0.000    -1.355495   -.9382134
         46  |  -1.176606   .1100917   -10.69   0.000      -1.3924   -.9608124
         47  |  -1.211946   .1133492   -10.69   0.000    -1.434125   -.9897675
         48  |  -1.232741   .1169399   -10.54   0.000    -1.461958   -1.003524
         49  |  -1.276455   .1205669   -10.59   0.000    -1.512782   -1.040129
         50  |  -1.312129   .1234863   -10.63   0.000    -1.554177    -1.07008
             |
     age_cat |
          1  |   .4233016   .0196783    21.51   0.000     .3847296    .4618736
          2  |   .7157384   .0227076    31.52   0.000     .6712288    .7602481
          3  |   .9306542   .0263173    35.36   0.000     .8790689    .9822395
          4  |    1.11186   .0299447    37.13   0.000     1.053165    1.170556
          5  |   1.266547   .0339854    37.27   0.000     1.199932    1.333163
          6  |   1.399481   .0380859    36.75   0.000     1.324828    1.474134
          7  |   1.507226   .0424214    35.53   0.000     1.424074    1.590377
          8  |   1.605441   .0467622    34.33   0.000     1.513781    1.697101
          9  |   1.683391   .0510748    32.96   0.000     1.583278    1.783504
         10  |   1.756541   .0553386    31.74   0.000      1.64807    1.865012
         11  |   1.829171   .0597177    30.63   0.000     1.712117    1.946225
         12  |   1.905117   .0641081    29.72   0.000     1.779457    2.030777
         13  |   1.967067    .068475    28.73   0.000     1.832847    2.101286
         14  |   2.015935   .0731004    27.58   0.000     1.872649    2.159221
         15  |   2.065529   .0776221    26.61   0.000      1.91338    2.217678
         16  |   2.101279   .0822111    25.56   0.000     1.940135    2.262423
         17  |   2.139572      .0869    24.62   0.000     1.969237    2.309907
         18  |   2.189776   .0914304    23.95   0.000     2.010561    2.368991
         19  |   2.226435   .0962326    23.14   0.000     2.037807    2.415063
         20  |   2.310008   .1050819    21.98   0.000     2.104034    2.515981
         25  |   2.448067   .1196593    20.46   0.000      2.21352    2.682614
         30  |   2.180401   .1607058    13.57   0.000     1.865397    2.495404
         40  |   2.034697   .1825978    11.14   0.000     1.676782    2.392611
         50  |   1.921125   .1921987    10.00   0.000     1.544391    2.297858
             |
       _cons |   3.015382   .0455838    66.15   0.000     2.926032    3.104732
-------------+----------------------------------------------------------------
     sigma_u |  1.0605879
     sigma_e |  .64688441
         rho |   .7288552   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.1023                         Obs per group: min =         1
       between = 0.0187                                        avg =       9.0
       overall = 0.0307                                        max =        25

                                                F(78,14660)        =     41.79
corr(u_i, Xb)  = -0.2996                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0365524    .035626     1.03   0.305    -.0332791    .1063838
      during |  -.0499093   .0107305    -4.65   0.000    -.0709424   -.0288762
       after |  -.2121374   .0197648   -10.73   0.000    -.2508788    -.173396
during_expat |  -.0136037   .0415355    -0.33   0.743    -.0950186    .0678112
 after_expat |   .0492783    .054638     0.90   0.367     -.057819    .1563757
             |
    ind_year |
          2  |  -.1185065   .0246315    -4.81   0.000    -.1667872   -.0702257
          3  |  -.2611785   .0320557    -8.15   0.000    -.3240117   -.1983454
          4  |  -.3952073   .0365166   -10.82   0.000    -.4667843   -.3236302
          5  |  -.4939304   .0412571   -11.97   0.000    -.5747994   -.4130614
          6  |  -.5957795   .0457696   -13.02   0.000    -.6854937   -.5060653
          7  |  -.6551009    .050124   -13.07   0.000    -.7533503   -.5568514
          8  |  -.6855798   .0540268   -12.69   0.000    -.7914791   -.5796804
          9  |  -.7357617   .0582252   -12.64   0.000    -.8498904   -.6216329
         10  |  -.7979117   .0622976   -12.81   0.000    -.9200228   -.6758005
         11  |  -.8576728   .0661209   -12.97   0.000    -.9872781   -.7280675
         12  |  -.9022541   .0701776   -12.86   0.000    -1.039811   -.7646971
         13  |  -.9368252   .0743439   -12.60   0.000    -1.082549   -.7911017
         14  |  -.9887389   .0784687   -12.60   0.000    -1.142547   -.8349304
         15  |   -1.01781   .0824702   -12.34   0.000    -1.179462   -.8561584
         16  |  -1.076139   .0864219   -12.45   0.000    -1.245536    -.906741
         17  |  -1.124042   .0905728   -12.41   0.000    -1.301576   -.9465078
         18  |  -1.209383   .0945504   -12.79   0.000    -1.394714   -1.024053
         19  |  -1.271528   .0983685   -12.93   0.000    -1.464343   -1.078713
         20  |  -1.320108    .101936   -12.95   0.000    -1.519915   -1.120301
         21  |  -1.379371   .1054597   -13.08   0.000    -1.586085   -1.172657
         22  |  -1.430085   .1088459   -13.14   0.000    -1.643437   -1.216733
         23  |  -1.471322   .1122364   -13.11   0.000    -1.691319   -1.251324
         24  |  -1.521084   .1160681   -13.11   0.000    -1.748592   -1.293576
         25  |  -1.545981   .1199556   -12.89   0.000    -1.781109   -1.310853
         26  |   .5097284   .0712451     7.15   0.000     .3700791    .6493778
         27  |   .3489128   .0669896     5.21   0.000     .2176047    .4802209
         28  |    .225023   .0648561     3.47   0.001     .0978968    .3521491
         29  |   .0888647   .0641771     1.38   0.166    -.0369305    .2146599
         30  |  -.0209046   .0636333    -0.33   0.743    -.1456339    .1038247
         31  |  -.0883397   .0647061    -1.37   0.172    -.2151719    .0384925
         32  |  -.1648589   .0655307    -2.52   0.012    -.2933072   -.0364105
         33  |  -.2480647   .0676322    -3.67   0.000    -.3806324   -.1154971
         34  |  -.3175548   .0698354    -4.55   0.000    -.4544411   -.1806686
         35  |  -.3828798   .0724575    -5.28   0.000    -.5249057   -.2408539
         36  |  -.4607637   .0749084    -6.15   0.000    -.6075935   -.3139338
         37  |  -.5358168   .0777706    -6.89   0.000     -.688257   -.3833766
         38  |  -.6156061   .0810274    -7.60   0.000      -.77443   -.4567823
         39  |  -.6800256     .08473    -8.03   0.000    -.8461071    -.513944
         40  |  -.7127511   .0885988    -8.04   0.000    -.8864159   -.5390862
         41  |  -.7482937   .0919605    -8.14   0.000    -.9285479   -.5680395
         42  |  -.8079623   .0954478    -8.46   0.000    -.9950521   -.6208726
         43  |  -.9336953   .0992857    -9.40   0.000    -1.128308   -.7390829
         44  |  -.9806716   .1034268    -9.48   0.000    -1.183401   -.7779421
         45  |  -1.002084   .1071721    -9.35   0.000    -1.212154   -.7920127
         46  |  -1.027144   .1108972    -9.26   0.000    -1.244517   -.8097717
         47  |  -1.060389    .114175    -9.29   0.000    -1.284186   -.8365915
         48  |  -1.078397   .1177175    -9.16   0.000    -1.309138   -.8476556
         49  |  -1.124675   .1213168    -9.27   0.000    -1.362471   -.8868786
         50  |  -1.155464   .1243446    -9.29   0.000    -1.399195   -.9117325
             |
     age_cat |
          1  |   .4097044    .018828    21.76   0.000      .372799    .4466097
          2  |   .7045564   .0219544    32.09   0.000      .661523    .7475899
          3  |   .9205635   .0256351    35.91   0.000     .8703154    .9708115
          4  |   1.100427   .0294297    37.39   0.000     1.042741    1.158113
          5  |   1.255628    .033559    37.42   0.000     1.189848    1.321407
          6  |   1.381564    .037745    36.60   0.000     1.307579    1.455549
          7  |   1.483339   .0420915    35.24   0.000     1.400834    1.565843
          8  |   1.579421   .0465356    33.94   0.000     1.488205    1.670636
          9  |   1.651832   .0508823    32.46   0.000     1.552096    1.751568
         10  |   1.720001   .0551984    31.16   0.000     1.611806    1.828197
         11  |   1.789372   .0595723    30.04   0.000     1.672603    1.906141
         12  |   1.856118   .0639498    29.02   0.000     1.730769    1.981468
         13  |    1.91637    .068305    28.06   0.000     1.782484    2.050256
         14  |   1.959561   .0728245    26.91   0.000     1.816816    2.102306
         15  |   2.005169   .0773125    25.94   0.000     1.853627    2.156712
         16  |   2.038322   .0818101    24.92   0.000     1.877964     2.19868
         17  |   2.071167   .0863941    23.97   0.000     1.901824     2.24051
         18  |   2.119136   .0906844    23.37   0.000     1.941384    2.296889
         19  |   2.152574   .0954153    22.56   0.000     1.965548      2.3396
         20  |   2.225844   .1038036    21.44   0.000     2.022376    2.429312
         25  |   2.334794   .1172079    19.92   0.000     2.105052    2.564536
         30  |   2.115178   .1510838    14.00   0.000     1.819035    2.411321
         40  |   2.029528   .1696776    11.96   0.000     1.696939    2.362117
         50  |     1.9924   .1706303    11.68   0.000     1.657943    2.326857
             |
       _cons |    3.01199   .0455408    66.14   0.000     2.922724    3.101255
-------------+----------------------------------------------------------------
     sigma_u |  1.1351996
     sigma_e |  .64596658
         rho |  .75540162   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1022941065888624

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.1023                                         min =          1
     between = 0.0187                                         avg =        9.0
     overall = 0.0307                                         max =         25

                                                F(78,14660)       =      41.79
corr(u_i, Xb)  = -0.2996                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0365524    .035626     1.03   0.305    -.0332791    .1063838
      during |  -.0499093   .0107305    -4.65   0.000    -.0709424   -.0288762
       after |  -.2121374   .0197648   -10.73   0.000    -.2508788    -.173396
during_expat |  -.0136037   .0415355    -0.33   0.743    -.0950186    .0678112
 after_expat |   .0492783    .054638     0.90   0.367     -.057819    .1563757
             |
    ind_year |
          2  |  -.1185065   .0246315    -4.81   0.000    -.1667872   -.0702257
          3  |  -.2611785   .0320557    -8.15   0.000    -.3240117   -.1983454
          4  |  -.3952073   .0365166   -10.82   0.000    -.4667843   -.3236302
          5  |  -.4939304   .0412571   -11.97   0.000    -.5747994   -.4130614
          6  |  -.5957795   .0457696   -13.02   0.000    -.6854937   -.5060653
          7  |  -.6551009    .050124   -13.07   0.000    -.7533503   -.5568514
          8  |  -.6855798   .0540268   -12.69   0.000    -.7914791   -.5796804
          9  |  -.7357617   .0582252   -12.64   0.000    -.8498904   -.6216329
         10  |  -.7979117   .0622976   -12.81   0.000    -.9200228   -.6758005
         11  |  -.8576728   .0661209   -12.97   0.000    -.9872781   -.7280675
         12  |  -.9022541   .0701776   -12.86   0.000    -1.039811   -.7646971
         13  |  -.9368252   .0743439   -12.60   0.000    -1.082549   -.7911017
         14  |  -.9887389   .0784687   -12.60   0.000    -1.142547   -.8349304
         15  |   -1.01781   .0824702   -12.34   0.000    -1.179462   -.8561584
         16  |  -1.076139   .0864219   -12.45   0.000    -1.245536    -.906741
         17  |  -1.124042   .0905728   -12.41   0.000    -1.301576   -.9465078
         18  |  -1.209383   .0945504   -12.79   0.000    -1.394714   -1.024053
         19  |  -1.271528   .0983685   -12.93   0.000    -1.464343   -1.078713
         20  |  -1.320108    .101936   -12.95   0.000    -1.519915   -1.120301
         21  |  -1.379371   .1054597   -13.08   0.000    -1.586085   -1.172657
         22  |  -1.430085   .1088459   -13.14   0.000    -1.643437   -1.216733
         23  |  -1.471322   .1122364   -13.11   0.000    -1.691319   -1.251324
         24  |  -1.521084   .1160681   -13.11   0.000    -1.748592   -1.293576
         25  |  -1.545981   .1199556   -12.89   0.000    -1.781109   -1.310853
         26  |   .5097284   .0712451     7.15   0.000     .3700791    .6493778
         27  |   .3489128   .0669896     5.21   0.000     .2176047    .4802209
         28  |    .225023   .0648561     3.47   0.001     .0978968    .3521491
         29  |   .0888647   .0641771     1.38   0.166    -.0369305    .2146599
         30  |  -.0209046   .0636333    -0.33   0.743    -.1456339    .1038247
         31  |  -.0883397   .0647061    -1.37   0.172    -.2151719    .0384925
         32  |  -.1648589   .0655307    -2.52   0.012    -.2933072   -.0364105
         33  |  -.2480647   .0676322    -3.67   0.000    -.3806324   -.1154971
         34  |  -.3175548   .0698354    -4.55   0.000    -.4544411   -.1806686
         35  |  -.3828798   .0724575    -5.28   0.000    -.5249057   -.2408539
         36  |  -.4607637   .0749084    -6.15   0.000    -.6075935   -.3139338
         37  |  -.5358168   .0777706    -6.89   0.000     -.688257   -.3833766
         38  |  -.6156061   .0810274    -7.60   0.000      -.77443   -.4567823
         39  |  -.6800256     .08473    -8.03   0.000    -.8461071    -.513944
         40  |  -.7127511   .0885988    -8.04   0.000    -.8864159   -.5390862
         41  |  -.7482937   .0919605    -8.14   0.000    -.9285479   -.5680395
         42  |  -.8079623   .0954478    -8.46   0.000    -.9950521   -.6208726
         43  |  -.9336953   .0992857    -9.40   0.000    -1.128308   -.7390829
         44  |  -.9806716   .1034268    -9.48   0.000    -1.183401   -.7779421
         45  |  -1.002084   .1071721    -9.35   0.000    -1.212154   -.7920127
         46  |  -1.027144   .1108972    -9.26   0.000    -1.244517   -.8097717
         47  |  -1.060389    .114175    -9.29   0.000    -1.284186   -.8365915
         48  |  -1.078397   .1177175    -9.16   0.000    -1.309138   -.8476556
         49  |  -1.124675   .1213168    -9.27   0.000    -1.362471   -.8868786
         50  |  -1.155464   .1243446    -9.29   0.000    -1.399195   -.9117325
             |
     age_cat |
          1  |   .4097044    .018828    21.76   0.000      .372799    .4466097
          2  |   .7045564   .0219544    32.09   0.000      .661523    .7475899
          3  |   .9205635   .0256351    35.91   0.000     .8703154    .9708115
          4  |   1.100427   .0294297    37.39   0.000     1.042741    1.158113
          5  |   1.255628    .033559    37.42   0.000     1.189848    1.321407
          6  |   1.381564    .037745    36.60   0.000     1.307579    1.455549
          7  |   1.483339   .0420915    35.24   0.000     1.400834    1.565843
          8  |   1.579421   .0465356    33.94   0.000     1.488205    1.670636
          9  |   1.651832   .0508823    32.46   0.000     1.552096    1.751568
         10  |   1.720001   .0551984    31.16   0.000     1.611806    1.828197
         11  |   1.789372   .0595723    30.04   0.000     1.672603    1.906141
         12  |   1.856118   .0639498    29.02   0.000     1.730769    1.981468
         13  |    1.91637    .068305    28.06   0.000     1.782484    2.050256
         14  |   1.959561   .0728245    26.91   0.000     1.816816    2.102306
         15  |   2.005169   .0773125    25.94   0.000     1.853627    2.156712
         16  |   2.038322   .0818101    24.92   0.000     1.877964     2.19868
         17  |   2.071167   .0863941    23.97   0.000     1.901824     2.24051
         18  |   2.119136   .0906844    23.37   0.000     1.941384    2.296889
         19  |   2.152574   .0954153    22.56   0.000     1.965548      2.3396
         20  |   2.225844   .1038036    21.44   0.000     2.022376    2.429312
         25  |   2.334794   .1172079    19.92   0.000     2.105052    2.564536
         30  |   2.115178   .1510838    14.00   0.000     1.819035    2.411321
         40  |   2.029528   .1696776    11.96   0.000     1.696939    2.362117
         50  |     1.9924   .1706303    11.68   0.000     1.657943    2.326857
             |
       _cons |    3.01199   .0455408    66.14   0.000     2.922724    3.101255
-------------+----------------------------------------------------------------
     sigma_u |  1.1351996
     sigma_e |  .64596658
         rho |  .75540162   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 14660) =   21.63
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 14660) =  137.79
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 14660) =    0.11
            Prob > F =    0.7433

 ( 1)  during_expat = 0

       F(  1, 14660) =    0.11
            Prob > F =    0.7433
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 14660) =    3.01
            Prob > F =    0.0829

 ( 1)  after_expat = 0

       F(  1, 14660) =    0.81
            Prob > F =    0.3671
(file output/figure/acquisitions_lnL_slope.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.1014                         Obs per group: min =         1
       between = 0.0189                                        avg =       9.0
       overall = 0.0305                                        max =        25

                                                F(82,14660)        =     39.26
corr(u_i, Xb)  = -0.3148                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0355573   .0356593     1.00   0.319    -.0343395    .1054541
   during_DD |  -.0406948   .0111269    -3.66   0.000     -.062505   -.0188847
   during_DE |  -.0275027   .0560219    -0.49   0.623    -.1373127    .0823073
   during_ED |  -.0303662   .0455952    -0.67   0.505    -.1197386    .0590062
   during_EE |  -.0772923   .0540277    -1.43   0.153    -.1831935    .0286088
    after_DD |  -.1867032    .020685    -9.03   0.000    -.2272484    -.146158
    after_DE |  -.0986452   .0654578    -1.51   0.132    -.2269507    .0296603
    after_ED |  -.2149562   .0631487    -3.40   0.001    -.3387356   -.0911768
    after_EE |  -.1811901   .0716389    -2.53   0.011    -.3216115   -.0407688
             |
    ind_year |
          2  |   -.121171   .0246292    -4.92   0.000    -.1694475   -.0728946
          3  |  -.2664812    .032041    -8.32   0.000    -.3292856   -.2036769
          4  |  -.4032446   .0364805   -11.05   0.000    -.4747509   -.3317382
          5  |  -.5046324   .0411912   -12.25   0.000    -.5853724   -.4238925
          6  |  -.6092449    .045671   -13.34   0.000    -.6987659   -.5197239
          7  |  -.6711503   .0499855   -13.43   0.000    -.7691282   -.5731724
          8  |  -.7039531   .0538472   -13.07   0.000    -.8095005   -.5984057
          9  |  -.7567459   .0580004   -13.05   0.000     -.870434   -.6430578
         10  |  -.8216772   .0620113   -13.25   0.000    -.9432271   -.7001272
         11  |  -.8844549   .0657755   -13.45   0.000    -1.013383   -.7555267
         12  |  -.9319112    .069767   -13.36   0.000    -1.068663   -.7951591
         13  |  -.9692718   .0738477   -13.13   0.000    -1.114023    -.824521
         14  |  -1.024307   .0778938   -13.15   0.000    -1.176989   -.8716253
         15  |  -1.057175   .0818209   -12.92   0.000    -1.217554   -.8967956
         16  |  -1.119071   .0856985   -13.06   0.000    -1.287051   -.9510908
         17  |  -1.171511   .0897478   -13.05   0.000    -1.347428   -.9955944
         18  |  -1.260421   .0936549   -13.46   0.000    -1.443996   -1.076845
         19  |  -1.326198   .0973894   -13.62   0.000    -1.517093   -1.135302
         20  |  -1.378603   .1008753   -13.67   0.000    -1.576332   -1.180875
         21  |  -1.441148   .1043085   -13.82   0.000    -1.645606   -1.236691
         22  |  -1.495349   .1076115   -13.90   0.000    -1.706281   -1.284417
         23  |   -1.53979   .1109108   -13.88   0.000    -1.757189   -1.322391
         24  |  -1.592885   .1146574   -13.89   0.000    -1.817628   -1.368142
         25  |  -1.621386   .1184465   -13.69   0.000    -1.853556   -1.389216
         26  |   .5120048   .0712701     7.18   0.000     .3723065    .6517032
         27  |    .347924   .0670235     5.19   0.000     .2165495    .4792985
         28  |   .2210023   .0648973     3.41   0.001     .0937956    .3482091
         29  |   .0820701   .0642097     1.28   0.201    -.0437889    .2079291
         30  |  -.0304056    .063658    -0.48   0.633    -.1551833     .094372
         31  |  -.1007648   .0647037    -1.56   0.119    -.2275921    .0260626
         32  |  -.1801803   .0655051    -2.75   0.006    -.3085785   -.0517822
         33  |  -.2657476   .0675725    -3.93   0.000    -.3981982    -.133297
         34  |  -.3380885   .0697269    -4.85   0.000     -.474762    -.201415
         35  |  -.4061056   .0722986    -5.62   0.000      -.54782   -.2643912
         36  |  -.4872799   .0746959    -6.52   0.000    -.6336934   -.3408665
         37  |  -.5651254   .0774956    -7.29   0.000    -.7170266   -.4132242
         38  |  -.6477398   .0806681    -8.03   0.000    -.8058594   -.4896201
         39  |  -.7159464   .0842743    -8.50   0.000    -.8811347   -.5507581
         40  |  -.7524151   .0880561    -8.54   0.000    -.9250161   -.5798142
         41  |   -.791422   .0913377    -8.66   0.000    -.9704555   -.6123886
         42  |  -.8546481   .0947753    -9.02   0.000     -1.04042   -.6688765
         43  |   -.983829   .0985611    -9.98   0.000    -1.177021   -.7906369
         44  |  -1.033744   .1026315   -10.07   0.000    -1.234915   -.8325738
         45  |  -1.058551   .1062894    -9.96   0.000    -1.266892   -.8502108
         46  |  -1.086851   .1099144    -9.89   0.000    -1.302297    -.871405
         47  |   -1.12284   .1131256    -9.93   0.000    -1.344581   -.9010998
         48  |  -1.144263   .1165919    -9.81   0.000    -1.372798   -.9157287
         49  |  -1.194151   .1201375    -9.94   0.000    -1.429636   -.9586665
         50  |  -1.227978   .1231141    -9.97   0.000    -1.469297    -.986659
             |
     age_cat |
          1  |   .4121194   .0188225    21.90   0.000     .3752249    .4490139
          2  |    .709411   .0219304    32.35   0.000     .6664247    .7523972
          3  |   .9276967   .0255851    36.26   0.000     .8775467    .9778467
          4  |    1.10987   .0293486    37.82   0.000     1.052343    1.167397
          5  |   1.267589   .0334415    37.90   0.000     1.202039    1.333138
          6  |   1.395948   .0375949    37.13   0.000     1.322257    1.469638
          7  |   1.500285   .0419104    35.80   0.000     1.418135    1.582435
          8  |   1.598851   .0463172    34.52   0.000     1.508063    1.689638
          9  |   1.673747   .0506289    33.06   0.000     1.574508    1.772986
         10  |   1.744297   .0549049    31.77   0.000     1.636677    1.851918
         11  |    1.81625   .0592442    30.66   0.000     1.700124    1.932376
         12  |   1.885515   .0635878    29.65   0.000     1.760875    2.010155
         13  |   1.948123      .0679    28.69   0.000      1.81503    2.081215
         14  |   1.994025    .072383    27.55   0.000     1.852145    2.135905
         15  |     2.0423   .0768335    26.58   0.000     1.891697    2.192904
         16  |   2.077778   .0813024    25.56   0.000     1.918415    2.237141
         17  |   2.113423   .0858641    24.61   0.000     1.945118    2.281727
         18  |   2.164098   .0901398    24.01   0.000     1.987412    2.340783
         19  |   2.200331   .0948344    23.20   0.000     2.014443    2.386218
         20  |   2.279237   .1031125    22.10   0.000     2.077123     2.48135
         25  |   2.396036    .116393    20.59   0.000     2.167891    2.624181
         30  |     2.1766   .1504653    14.47   0.000      1.88167    2.471531
         40  |   2.083129   .1692632    12.31   0.000     1.751352    2.414906
         50  |   2.042678    .170954    11.95   0.000     1.707586    2.377769
             |
       _cons |   3.017531   .0455362    66.27   0.000     2.928274    3.106787
-------------+----------------------------------------------------------------
     sigma_u |  1.1446934
     sigma_e |  .64630505
         rho |  .75827419   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1013642890956012

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.1014                                         min =          1
     between = 0.0189                                         avg =        9.0
     overall = 0.0305                                         max =         25

                                                F(82,14660)       =      39.26
corr(u_i, Xb)  = -0.3148                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0355573   .0356593     1.00   0.319    -.0343395    .1054541
   during_DD |  -.0406948   .0111269    -3.66   0.000     -.062505   -.0188847
   during_DE |  -.0275027   .0560219    -0.49   0.623    -.1373127    .0823073
   during_ED |  -.0303662   .0455952    -0.67   0.505    -.1197386    .0590062
   during_EE |  -.0772923   .0540277    -1.43   0.153    -.1831935    .0286088
    after_DD |  -.1867032    .020685    -9.03   0.000    -.2272484    -.146158
    after_DE |  -.0986452   .0654578    -1.51   0.132    -.2269507    .0296603
    after_ED |  -.2149562   .0631487    -3.40   0.001    -.3387356   -.0911768
    after_EE |  -.1811901   .0716389    -2.53   0.011    -.3216115   -.0407688
             |
    ind_year |
          2  |   -.121171   .0246292    -4.92   0.000    -.1694475   -.0728946
          3  |  -.2664812    .032041    -8.32   0.000    -.3292856   -.2036769
          4  |  -.4032446   .0364805   -11.05   0.000    -.4747509   -.3317382
          5  |  -.5046324   .0411912   -12.25   0.000    -.5853724   -.4238925
          6  |  -.6092449    .045671   -13.34   0.000    -.6987659   -.5197239
          7  |  -.6711503   .0499855   -13.43   0.000    -.7691282   -.5731724
          8  |  -.7039531   .0538472   -13.07   0.000    -.8095005   -.5984057
          9  |  -.7567459   .0580004   -13.05   0.000     -.870434   -.6430578
         10  |  -.8216772   .0620113   -13.25   0.000    -.9432271   -.7001272
         11  |  -.8844549   .0657755   -13.45   0.000    -1.013383   -.7555267
         12  |  -.9319112    .069767   -13.36   0.000    -1.068663   -.7951591
         13  |  -.9692718   .0738477   -13.13   0.000    -1.114023    -.824521
         14  |  -1.024307   .0778938   -13.15   0.000    -1.176989   -.8716253
         15  |  -1.057175   .0818209   -12.92   0.000    -1.217554   -.8967956
         16  |  -1.119071   .0856985   -13.06   0.000    -1.287051   -.9510908
         17  |  -1.171511   .0897478   -13.05   0.000    -1.347428   -.9955944
         18  |  -1.260421   .0936549   -13.46   0.000    -1.443996   -1.076845
         19  |  -1.326198   .0973894   -13.62   0.000    -1.517093   -1.135302
         20  |  -1.378603   .1008753   -13.67   0.000    -1.576332   -1.180875
         21  |  -1.441148   .1043085   -13.82   0.000    -1.645606   -1.236691
         22  |  -1.495349   .1076115   -13.90   0.000    -1.706281   -1.284417
         23  |   -1.53979   .1109108   -13.88   0.000    -1.757189   -1.322391
         24  |  -1.592885   .1146574   -13.89   0.000    -1.817628   -1.368142
         25  |  -1.621386   .1184465   -13.69   0.000    -1.853556   -1.389216
         26  |   .5120048   .0712701     7.18   0.000     .3723065    .6517032
         27  |    .347924   .0670235     5.19   0.000     .2165495    .4792985
         28  |   .2210023   .0648973     3.41   0.001     .0937956    .3482091
         29  |   .0820701   .0642097     1.28   0.201    -.0437889    .2079291
         30  |  -.0304056    .063658    -0.48   0.633    -.1551833     .094372
         31  |  -.1007648   .0647037    -1.56   0.119    -.2275921    .0260626
         32  |  -.1801803   .0655051    -2.75   0.006    -.3085785   -.0517822
         33  |  -.2657476   .0675725    -3.93   0.000    -.3981982    -.133297
         34  |  -.3380885   .0697269    -4.85   0.000     -.474762    -.201415
         35  |  -.4061056   .0722986    -5.62   0.000      -.54782   -.2643912
         36  |  -.4872799   .0746959    -6.52   0.000    -.6336934   -.3408665
         37  |  -.5651254   .0774956    -7.29   0.000    -.7170266   -.4132242
         38  |  -.6477398   .0806681    -8.03   0.000    -.8058594   -.4896201
         39  |  -.7159464   .0842743    -8.50   0.000    -.8811347   -.5507581
         40  |  -.7524151   .0880561    -8.54   0.000    -.9250161   -.5798142
         41  |   -.791422   .0913377    -8.66   0.000    -.9704555   -.6123886
         42  |  -.8546481   .0947753    -9.02   0.000     -1.04042   -.6688765
         43  |   -.983829   .0985611    -9.98   0.000    -1.177021   -.7906369
         44  |  -1.033744   .1026315   -10.07   0.000    -1.234915   -.8325738
         45  |  -1.058551   .1062894    -9.96   0.000    -1.266892   -.8502108
         46  |  -1.086851   .1099144    -9.89   0.000    -1.302297    -.871405
         47  |   -1.12284   .1131256    -9.93   0.000    -1.344581   -.9010998
         48  |  -1.144263   .1165919    -9.81   0.000    -1.372798   -.9157287
         49  |  -1.194151   .1201375    -9.94   0.000    -1.429636   -.9586665
         50  |  -1.227978   .1231141    -9.97   0.000    -1.469297    -.986659
             |
     age_cat |
          1  |   .4121194   .0188225    21.90   0.000     .3752249    .4490139
          2  |    .709411   .0219304    32.35   0.000     .6664247    .7523972
          3  |   .9276967   .0255851    36.26   0.000     .8775467    .9778467
          4  |    1.10987   .0293486    37.82   0.000     1.052343    1.167397
          5  |   1.267589   .0334415    37.90   0.000     1.202039    1.333138
          6  |   1.395948   .0375949    37.13   0.000     1.322257    1.469638
          7  |   1.500285   .0419104    35.80   0.000     1.418135    1.582435
          8  |   1.598851   .0463172    34.52   0.000     1.508063    1.689638
          9  |   1.673747   .0506289    33.06   0.000     1.574508    1.772986
         10  |   1.744297   .0549049    31.77   0.000     1.636677    1.851918
         11  |    1.81625   .0592442    30.66   0.000     1.700124    1.932376
         12  |   1.885515   .0635878    29.65   0.000     1.760875    2.010155
         13  |   1.948123      .0679    28.69   0.000      1.81503    2.081215
         14  |   1.994025    .072383    27.55   0.000     1.852145    2.135905
         15  |     2.0423   .0768335    26.58   0.000     1.891697    2.192904
         16  |   2.077778   .0813024    25.56   0.000     1.918415    2.237141
         17  |   2.113423   .0858641    24.61   0.000     1.945118    2.281727
         18  |   2.164098   .0901398    24.01   0.000     1.987412    2.340783
         19  |   2.200331   .0948344    23.20   0.000     2.014443    2.386218
         20  |   2.279237   .1031125    22.10   0.000     2.077123     2.48135
         25  |   2.396036    .116393    20.59   0.000     2.167891    2.624181
         30  |     2.1766   .1504653    14.47   0.000      1.88167    2.471531
         40  |   2.083129   .1692632    12.31   0.000     1.751352    2.414906
         50  |   2.042678    .170954    11.95   0.000     1.707586    2.377769
             |
       _cons |   3.017531   .0455362    66.27   0.000     2.928274    3.106787
-------------+----------------------------------------------------------------
     sigma_u |  1.1446934
     sigma_e |  .64630505
         rho |  .75827419   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. local fname = e(depvar)

. local title : variable label `fname'

. 
. slopegraph, ///
>         from(0 0 0 0 1 _b[during_DE] 1 _b[during_DE]) ///
>         to(1 _b[during_DD] 1 _b[during_DE] 2 _b[during_ED]+_b[during_DE] 2 _b[during_EE]+_b[during_DE]) ///
>         style(p1 p2 p1 p2) ///
>         label(Local-Local Local-Expat Expat-Local Expat-Expat) ///
>         width_test(during_DD during_DE during_ED during_EE) ///
>         star_test(1==1 during_DE==during_DD 1==1 during_EE==during_ED) ///
>         connect(stepstair) ///
>         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(.5) plotregion(style(none)) x
> size(16) ysize(10))
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str11
(1 real change made)

 ( 1)  during_DD = 0

       F(  1, 14660) =   13.38
            Prob > F =    0.0003

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_DE = 0

       F(  1, 14660) =    0.24
            Prob > F =    0.6235

 ( 1)  - during_DD + during_DE = 0

       F(  1, 14660) =    0.05
            Prob > F =    0.8171
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_ED = 0

       F(  1, 14660) =    0.44
            Prob > F =    0.5054

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_EE = 0

       F(  1, 14660) =    2.05
            Prob > F =    0.1526

 ( 1)  - during_ED + during_EE = 0

       F(  1, 14660) =    0.46
            Prob > F =    0.4963

. 
. graph export output/figure/`fname'_tree.png, width(1600) replace
(file output/figure/lnL_tree.png written in PNG format)

. 
end of do-file
(sum of wgt is 117,753.451417632)

Linear regression                               Number of obs     =    318,157
                                                F(75, 18788)      =     134.63
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1401
                                                Root MSE          =     1.6892

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5468318   .0318713    17.16   0.000     .4843612    .6093025
       expat |   .1070302   .0384726     2.78   0.005     .0316205      .18244
             |
    ind_year |
          2  |   .1770871   .0369545     4.79   0.000      .104653    .2495213
          3  |   .8118954   .0410836    19.76   0.000      .731368    .8924229
          4  |   .9986359   .0441272    22.63   0.000     .9121427    1.085129
          5  |   1.132856   .0446108    25.39   0.000     1.045415    1.220297
          6  |   1.381704    .045557    30.33   0.000     1.292409       1.471
          7  |   1.575102   .0459665    34.27   0.000     1.485004    1.665201
          8  |   1.737857   .0464018    37.45   0.000     1.646906    1.828809
          9  |   1.855019   .0462123    40.14   0.000     1.764438    1.945599
         10  |   1.989279   .0463418    42.93   0.000     1.898445    2.080113
         11  |   2.066274   .0465662    44.37   0.000        1.975    2.157548
         12  |   2.075237   .0470417    44.11   0.000     1.983031    2.167443
         13  |    2.06954   .0472151    43.83   0.000     1.976994    2.162085
         14  |   2.045469   .0476944    42.89   0.000     1.951984    2.138955
         15  |   1.964745   .0483532    40.63   0.000     1.869969    2.059522
         16  |   1.960314   .0487654    40.20   0.000     1.864729    2.055898
         17  |   1.943279   .0494548    39.29   0.000     1.846344    2.040215
         18  |   1.926303   .0501795    38.39   0.000     1.827947     2.02466
         19  |    1.85871   .0506895    36.67   0.000     1.759354    1.958066
         20  |   1.785198   .0515507    34.63   0.000     1.684153    1.886242
         21  |   1.769814   .0526263    33.63   0.000     1.666662    1.872966
         22  |    1.75885   .0534567    32.90   0.000      1.65407     1.86363
         23  |   1.779146   .0539401    32.98   0.000     1.673419    1.884874
         24  |   1.582769   .0560725    28.23   0.000     1.472861    1.692676
         25  |   1.589634   .0574518    27.67   0.000     1.477023    1.702244
         26  |   .6460464   .0672536     9.61   0.000     .5142234    .7778694
         27  |   .7215844   .0594344    12.14   0.000     .6050876    .8380813
         28  |   1.002006    .055819    17.95   0.000     .8925955    1.111416
         29  |   1.099713   .0530479    20.73   0.000     .9957343    1.203692
         30  |   1.180885    .052496    22.49   0.000     1.077988    1.283781
         31  |   1.287858   .0521149    24.71   0.000     1.185708    1.390008
         32  |   1.461958   .0516067    28.33   0.000     1.360804    1.563112
         33  |    1.59254   .0507824    31.36   0.000     1.493002    1.692078
         34  |   1.699192   .0509056    33.38   0.000     1.599412    1.798972
         35  |   1.779638   .0517005    34.42   0.000     1.678301    1.880976
         36  |   1.883286   .0519208    36.27   0.000     1.781517    1.985056
         37  |    1.97265   .0525861    37.51   0.000     1.869576    2.075723
         38  |   2.057644   .0523712    39.29   0.000     1.954992    2.160296
         39  |   2.076537   .0530664    39.13   0.000     1.972522    2.180552
         40  |   2.074553   .0541305    38.33   0.000     1.968453    2.180654
         41  |   2.090842   .0545919    38.30   0.000     1.983837    2.197847
         42  |   2.104816   .0553258    38.04   0.000     1.996372    2.213259
         43  |   2.152801   .0564994    38.10   0.000     2.042057    2.263545
         44  |    2.12113   .0571719    37.10   0.000     2.009068    2.233192
         45  |   2.087764     .05786    36.08   0.000     1.974353    2.201175
         46  |   2.074372   .0589333    35.20   0.000     1.958857    2.189886
         47  |   2.084312   .0616653    33.80   0.000     1.963442    2.205181
         48  |   2.154802   .0619566    34.78   0.000     2.033362    2.276243
         49  |   2.088241   .0622772    33.53   0.000     1.966172     2.21031
         50  |   2.107125     .06311    33.39   0.000     1.983424    2.230826
             |
     age_cat |
          1  |   .1727163   .0366229     4.72   0.000     .1009321    .2445005
          2  |   .2896705   .0381834     7.59   0.000     .2148277    .3645133
          3  |   .4100189   .0392869    10.44   0.000      .333013    .4870248
          4  |   .5612863   .0401759    13.97   0.000     .4825379    .6400347
          5  |    .644063   .0409429    15.73   0.000     .5638112    .7243148
          6  |   .7035105   .0417539    16.85   0.000     .6216692    .7853518
          7  |   .7611545   .0424916    17.91   0.000     .6778672    .8444418
          8  |   .8258804   .0431622    19.13   0.000     .7412786    .9104822
          9  |   .8843629   .0436999    20.24   0.000     .7987072    .9700186
         10  |   .9188749   .0443954    20.70   0.000      .831856    1.005894
         11  |   .9638907   .0451758    21.34   0.000     .8753421    1.052439
         12  |    1.02439    .045888    22.32   0.000     .9344457    1.114335
         13  |   1.051026   .0469605    22.38   0.000      .958979    1.143073
         14  |   1.099552   .0479172    22.95   0.000      1.00563    1.193474
         15  |   1.158989    .048746    23.78   0.000     1.063442    1.254535
         16  |   1.189182   .0500961    23.74   0.000     1.090989    1.287375
         17  |   1.201848   .0513203    23.42   0.000     1.101256    1.302441
         18  |   1.238155   .0525549    23.56   0.000     1.135142    1.341167
         19  |   1.263342   .0541264    23.34   0.000      1.15725    1.369435
         20  |   1.336397   .0574713    23.25   0.000     1.223748    1.449046
         25  |   1.239781   .0722702    17.15   0.000     1.098125    1.381437
         30  |   1.122048   .0931609    12.04   0.000     .9394441    1.304652
         40  |   .9864933   .0991893     9.95   0.000     .7920734    1.180913
         50  |   .7812828   .1291134     6.05   0.000     .5282088    1.034357
             |
       _cons |   3.518794   .0510283    68.96   0.000     3.418774    3.618814
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    318,157
                                                F(75, 18788)      =     134.63
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1401
                                                Root MSE          =     1.6892

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5468318   .0318713    17.16   0.000     .4843612    .6093025
       expat |   .1070302   .0384726     2.78   0.005     .0316205      .18244
             |
    ind_year |
          2  |   .1770871   .0369545     4.79   0.000      .104653    .2495213
          3  |   .8118954   .0410836    19.76   0.000      .731368    .8924229
          4  |   .9986359   .0441272    22.63   0.000     .9121427    1.085129
          5  |   1.132856   .0446108    25.39   0.000     1.045415    1.220297
          6  |   1.381704    .045557    30.33   0.000     1.292409       1.471
          7  |   1.575102   .0459665    34.27   0.000     1.485004    1.665201
          8  |   1.737857   .0464018    37.45   0.000     1.646906    1.828809
          9  |   1.855019   .0462123    40.14   0.000     1.764438    1.945599
         10  |   1.989279   .0463418    42.93   0.000     1.898445    2.080113
         11  |   2.066274   .0465662    44.37   0.000        1.975    2.157548
         12  |   2.075237   .0470417    44.11   0.000     1.983031    2.167443
         13  |    2.06954   .0472151    43.83   0.000     1.976994    2.162085
         14  |   2.045469   .0476944    42.89   0.000     1.951984    2.138955
         15  |   1.964745   .0483532    40.63   0.000     1.869969    2.059522
         16  |   1.960314   .0487654    40.20   0.000     1.864729    2.055898
         17  |   1.943279   .0494548    39.29   0.000     1.846344    2.040215
         18  |   1.926303   .0501795    38.39   0.000     1.827947     2.02466
         19  |    1.85871   .0506895    36.67   0.000     1.759354    1.958066
         20  |   1.785198   .0515507    34.63   0.000     1.684153    1.886242
         21  |   1.769814   .0526263    33.63   0.000     1.666662    1.872966
         22  |    1.75885   .0534567    32.90   0.000      1.65407     1.86363
         23  |   1.779146   .0539401    32.98   0.000     1.673419    1.884874
         24  |   1.582769   .0560725    28.23   0.000     1.472861    1.692676
         25  |   1.589634   .0574518    27.67   0.000     1.477023    1.702244
         26  |   .6460464   .0672536     9.61   0.000     .5142234    .7778694
         27  |   .7215844   .0594344    12.14   0.000     .6050876    .8380813
         28  |   1.002006    .055819    17.95   0.000     .8925955    1.111416
         29  |   1.099713   .0530479    20.73   0.000     .9957343    1.203692
         30  |   1.180885    .052496    22.49   0.000     1.077988    1.283781
         31  |   1.287858   .0521149    24.71   0.000     1.185708    1.390008
         32  |   1.461958   .0516067    28.33   0.000     1.360804    1.563112
         33  |    1.59254   .0507824    31.36   0.000     1.493002    1.692078
         34  |   1.699192   .0509056    33.38   0.000     1.599412    1.798972
         35  |   1.779638   .0517005    34.42   0.000     1.678301    1.880976
         36  |   1.883286   .0519208    36.27   0.000     1.781517    1.985056
         37  |    1.97265   .0525861    37.51   0.000     1.869576    2.075723
         38  |   2.057644   .0523712    39.29   0.000     1.954992    2.160296
         39  |   2.076537   .0530664    39.13   0.000     1.972522    2.180552
         40  |   2.074553   .0541305    38.33   0.000     1.968453    2.180654
         41  |   2.090842   .0545919    38.30   0.000     1.983837    2.197847
         42  |   2.104816   .0553258    38.04   0.000     1.996372    2.213259
         43  |   2.152801   .0564994    38.10   0.000     2.042057    2.263545
         44  |    2.12113   .0571719    37.10   0.000     2.009068    2.233192
         45  |   2.087764     .05786    36.08   0.000     1.974353    2.201175
         46  |   2.074372   .0589333    35.20   0.000     1.958857    2.189886
         47  |   2.084312   .0616653    33.80   0.000     1.963442    2.205181
         48  |   2.154802   .0619566    34.78   0.000     2.033362    2.276243
         49  |   2.088241   .0622772    33.53   0.000     1.966172     2.21031
         50  |   2.107125     .06311    33.39   0.000     1.983424    2.230826
             |
     age_cat |
          1  |   .1727163   .0366229     4.72   0.000     .1009321    .2445005
          2  |   .2896705   .0381834     7.59   0.000     .2148277    .3645133
          3  |   .4100189   .0392869    10.44   0.000      .333013    .4870248
          4  |   .5612863   .0401759    13.97   0.000     .4825379    .6400347
          5  |    .644063   .0409429    15.73   0.000     .5638112    .7243148
          6  |   .7035105   .0417539    16.85   0.000     .6216692    .7853518
          7  |   .7611545   .0424916    17.91   0.000     .6778672    .8444418
          8  |   .8258804   .0431622    19.13   0.000     .7412786    .9104822
          9  |   .8843629   .0436999    20.24   0.000     .7987072    .9700186
         10  |   .9188749   .0443954    20.70   0.000      .831856    1.005894
         11  |   .9638907   .0451758    21.34   0.000     .8753421    1.052439
         12  |    1.02439    .045888    22.32   0.000     .9344457    1.114335
         13  |   1.051026   .0469605    22.38   0.000      .958979    1.143073
         14  |   1.099552   .0479172    22.95   0.000      1.00563    1.193474
         15  |   1.158989    .048746    23.78   0.000     1.063442    1.254535
         16  |   1.189182   .0500961    23.74   0.000     1.090989    1.287375
         17  |   1.201848   .0513203    23.42   0.000     1.101256    1.302441
         18  |   1.238155   .0525549    23.56   0.000     1.135142    1.341167
         19  |   1.263342   .0541264    23.34   0.000      1.15725    1.369435
         20  |   1.336397   .0574713    23.25   0.000     1.223748    1.449046
         25  |   1.239781   .0722702    17.15   0.000     1.098125    1.381437
         30  |   1.122048   .0931609    12.04   0.000     .9394441    1.304652
         40  |   .9864933   .0991893     9.95   0.000     .7920734    1.180913
         50  |   .7812828   .1291134     6.05   0.000     .5282088    1.034357
             |
       _cons |   3.518794   .0510283    68.96   0.000     3.418774    3.618814
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    318,157
Group variable: id                              Number of groups  =     18,789

R-sq:                                           Obs per group:
     within  = 0.1756                                         min =          1
     between = 0.0724                                         avg =       16.9
     overall = 0.0850                                         max =        148

                                                F(75,18788)       =      89.61
corr(u_i, Xb)  = 0.0196                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1371887   .0406537     3.37   0.001     .0575038    .2168735
       expat |   .0413611   .0135247     3.06   0.002     .0148513    .0678708
             |
    ind_year |
          2  |   .1594664   .0337894     4.72   0.000     .0932361    .2256967
          3  |   .7945036   .0414518    19.17   0.000     .7132544    .8757528
          4  |   .9473709   .0465878    20.34   0.000     .8560546    1.038687
          5  |   1.109125   .0510346    21.73   0.000     1.009093    1.209158
          6  |   1.356079   .0553421    24.50   0.000     1.247603    1.464555
          7  |   1.625642   .0600444    27.07   0.000      1.50795    1.743335
          8  |   1.826396   .0650469    28.08   0.000     1.698898    1.953893
          9  |   1.962218   .0702173    27.94   0.000     1.824586    2.099851
         10  |   2.106733   .0757585    27.81   0.000      1.95824    2.255227
         11  |   2.259928   .0810523    27.88   0.000     2.101058    2.418798
         12  |   2.314518    .086761    26.68   0.000     2.144458    2.484577
         13  |   2.365235   .0926613    25.53   0.000     2.183611     2.54686
         14  |   2.377728   .0985524    24.13   0.000     2.184557      2.5709
         15  |   2.343607    .104771    22.37   0.000     2.138247    2.548968
         16  |   2.374296   .1107569    21.44   0.000     2.157203     2.59139
         17  |   2.392798   .1171968    20.42   0.000     2.163081    2.622514
         18  |   2.398803   .1234732    19.43   0.000     2.156784    2.640821
         19  |   2.354737   .1296456    18.16   0.000      2.10062    2.608854
         20  |   2.351951    .135538    17.35   0.000     2.086285    2.617618
         21  |   2.371403   .1407563    16.85   0.000     2.095508    2.647298
         22  |   2.399927   .1459403    16.44   0.000     2.113871    2.685983
         23  |    2.50736   .1511929    16.58   0.000     2.211008    2.803712
         24  |   2.283324   .1571781    14.53   0.000     1.975241    2.591408
         25  |   2.273676   .1632075    13.93   0.000     1.953775    2.593578
         26  |   .5081319   .0759417     6.69   0.000     .3592793    .6569846
         27  |    .645524   .0684542     9.43   0.000     .5113475    .7797004
         28  |   .9586897   .0643939    14.89   0.000     .8324719    1.084908
         29  |   1.087888   .0637585    17.06   0.000     .9629155     1.21286
         30  |   1.202263   .0652401    18.43   0.000     1.074387     1.33014
         31  |   1.359415   .0672878    20.20   0.000     1.227524    1.491305
         32  |   1.564669   .0699535    22.37   0.000     1.427554    1.701784
         33  |   1.737678   .0736286    23.60   0.000     1.593359    1.881997
         34  |   1.852137   .0779042    23.77   0.000     1.699438    2.004837
         35  |   1.954316   .0824846    23.69   0.000     1.792639    2.115994
         36  |   2.057669   .0874889    23.52   0.000     1.886183    2.229155
         37  |   2.145873     .09263    23.17   0.000      1.96431    2.327436
         38  |   2.238516    .097549    22.95   0.000     2.047311    2.429721
         39  |    2.24874   .1031493    21.80   0.000     2.046558    2.450922
         40  |   2.257755   .1087158    20.77   0.000     2.044662    2.470848
         41  |   2.281921   .1146792    19.90   0.000     2.057139    2.506702
         42  |   2.342338   .1209289    19.37   0.000     2.105307     2.57937
         43  |   2.394581   .1273299    18.81   0.000     2.145003    2.644159
         44  |   2.377042   .1337749    17.77   0.000     2.114831    2.639253
         45  |    2.39508   .1395715    17.16   0.000     2.121508    2.668653
         46  |   2.405625   .1455631    16.53   0.000     2.120308    2.690941
         47  |   2.445276   .1507877    16.22   0.000     2.149719    2.740834
         48  |   2.527371   .1556757    16.23   0.000     2.222233     2.83251
         49  |   2.417743   .1615707    14.96   0.000      2.10105    2.734437
         50  |   2.430887   .1666321    14.59   0.000     2.104273    2.757501
             |
     age_cat |
          1  |    .090221   .0283996     3.18   0.001     .0345552    .1458868
          2  |   .1213945   .0321338     3.78   0.000     .0584093    .1843798
          3  |   .1270727    .036266     3.50   0.000     .0559881    .1981573
          4  |   .1543926     .04099     3.77   0.000     .0740485    .2347367
          5  |   .1441057   .0461851     3.12   0.002     .0535787    .2346327
          6  |   .1234086   .0517275     2.39   0.017      .022018    .2247993
          7  |   .1161087   .0574592     2.02   0.043     .0034835     .228734
          8  |   .1128686   .0634658     1.78   0.075    -.0115302    .2372673
          9  |   .1115952   .0695294     1.61   0.109    -.0246886    .2478791
         10  |   .0992132   .0757373     1.31   0.190    -.0492386    .2476651
         11  |   .0962237    .081984     1.17   0.241    -.0644724    .2569198
         12  |   .0968993   .0881914     1.10   0.272    -.0759638    .2697624
         13  |   .0893524   .0945254     0.95   0.345    -.0959259    .2746308
         14  |   .0994379   .1009209     0.99   0.324    -.0983761    .2972519
         15  |   .1124633   .1073309     1.05   0.295     -.097915    .3228416
         16  |   .1144483   .1141293     1.00   0.316    -.1092555    .3381521
         17  |   .1149737   .1208804     0.95   0.342    -.1219628    .3519101
         18  |   .1213559    .127537     0.95   0.341    -.1286281    .3713399
         19  |   .1109351   .1345479     0.82   0.410    -.1527909    .3746611
         20  |    .086291   .1481728     0.58   0.560    -.2041412    .3767231
         25  |   .0263255   .1708992     0.15   0.878    -.3086523    .3613032
         30  |   .1455103   .2134944     0.68   0.496    -.2729579    .5639786
         40  |   .3313135   .2541564     1.30   0.192    -.1668559     .829483
         50  |   .3553298   .2914909     1.22   0.223    -.2160186    .9266783
             |
       _cons |    3.99367   .0545501    73.21   0.000     3.886747    4.100593
-------------+----------------------------------------------------------------
     sigma_u |   1.766587
     sigma_e |  .88101487
         rho |  .80082529   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1755861098592788

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    318,157
Group variable: id                              Number of groups  =     18,789

R-sq:                                           Obs per group:
     within  = 0.1756                                         min =          1
     between = 0.0724                                         avg =       16.9
     overall = 0.0850                                         max =        148

                                                F(75,18788)       =      89.61
corr(u_i, Xb)  = 0.0196                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1371887   .0406537     3.37   0.001     .0575038    .2168735
       expat |   .0413611   .0135247     3.06   0.002     .0148513    .0678708
             |
    ind_year |
          2  |   .1594664   .0337894     4.72   0.000     .0932361    .2256967
          3  |   .7945036   .0414518    19.17   0.000     .7132544    .8757528
          4  |   .9473709   .0465878    20.34   0.000     .8560546    1.038687
          5  |   1.109125   .0510346    21.73   0.000     1.009093    1.209158
          6  |   1.356079   .0553421    24.50   0.000     1.247603    1.464555
          7  |   1.625642   .0600444    27.07   0.000      1.50795    1.743335
          8  |   1.826396   .0650469    28.08   0.000     1.698898    1.953893
          9  |   1.962218   .0702173    27.94   0.000     1.824586    2.099851
         10  |   2.106733   .0757585    27.81   0.000      1.95824    2.255227
         11  |   2.259928   .0810523    27.88   0.000     2.101058    2.418798
         12  |   2.314518    .086761    26.68   0.000     2.144458    2.484577
         13  |   2.365235   .0926613    25.53   0.000     2.183611     2.54686
         14  |   2.377728   .0985524    24.13   0.000     2.184557      2.5709
         15  |   2.343607    .104771    22.37   0.000     2.138247    2.548968
         16  |   2.374296   .1107569    21.44   0.000     2.157203     2.59139
         17  |   2.392798   .1171968    20.42   0.000     2.163081    2.622514
         18  |   2.398803   .1234732    19.43   0.000     2.156784    2.640821
         19  |   2.354737   .1296456    18.16   0.000      2.10062    2.608854
         20  |   2.351951    .135538    17.35   0.000     2.086285    2.617618
         21  |   2.371403   .1407563    16.85   0.000     2.095508    2.647298
         22  |   2.399927   .1459403    16.44   0.000     2.113871    2.685983
         23  |    2.50736   .1511929    16.58   0.000     2.211008    2.803712
         24  |   2.283324   .1571781    14.53   0.000     1.975241    2.591408
         25  |   2.273676   .1632075    13.93   0.000     1.953775    2.593578
         26  |   .5081319   .0759417     6.69   0.000     .3592793    .6569846
         27  |    .645524   .0684542     9.43   0.000     .5113475    .7797004
         28  |   .9586897   .0643939    14.89   0.000     .8324719    1.084908
         29  |   1.087888   .0637585    17.06   0.000     .9629155     1.21286
         30  |   1.202263   .0652401    18.43   0.000     1.074387     1.33014
         31  |   1.359415   .0672878    20.20   0.000     1.227524    1.491305
         32  |   1.564669   .0699535    22.37   0.000     1.427554    1.701784
         33  |   1.737678   .0736286    23.60   0.000     1.593359    1.881997
         34  |   1.852137   .0779042    23.77   0.000     1.699438    2.004837
         35  |   1.954316   .0824846    23.69   0.000     1.792639    2.115994
         36  |   2.057669   .0874889    23.52   0.000     1.886183    2.229155
         37  |   2.145873     .09263    23.17   0.000      1.96431    2.327436
         38  |   2.238516    .097549    22.95   0.000     2.047311    2.429721
         39  |    2.24874   .1031493    21.80   0.000     2.046558    2.450922
         40  |   2.257755   .1087158    20.77   0.000     2.044662    2.470848
         41  |   2.281921   .1146792    19.90   0.000     2.057139    2.506702
         42  |   2.342338   .1209289    19.37   0.000     2.105307     2.57937
         43  |   2.394581   .1273299    18.81   0.000     2.145003    2.644159
         44  |   2.377042   .1337749    17.77   0.000     2.114831    2.639253
         45  |    2.39508   .1395715    17.16   0.000     2.121508    2.668653
         46  |   2.405625   .1455631    16.53   0.000     2.120308    2.690941
         47  |   2.445276   .1507877    16.22   0.000     2.149719    2.740834
         48  |   2.527371   .1556757    16.23   0.000     2.222233     2.83251
         49  |   2.417743   .1615707    14.96   0.000      2.10105    2.734437
         50  |   2.430887   .1666321    14.59   0.000     2.104273    2.757501
             |
     age_cat |
          1  |    .090221   .0283996     3.18   0.001     .0345552    .1458868
          2  |   .1213945   .0321338     3.78   0.000     .0584093    .1843798
          3  |   .1270727    .036266     3.50   0.000     .0559881    .1981573
          4  |   .1543926     .04099     3.77   0.000     .0740485    .2347367
          5  |   .1441057   .0461851     3.12   0.002     .0535787    .2346327
          6  |   .1234086   .0517275     2.39   0.017      .022018    .2247993
          7  |   .1161087   .0574592     2.02   0.043     .0034835     .228734
          8  |   .1128686   .0634658     1.78   0.075    -.0115302    .2372673
          9  |   .1115952   .0695294     1.61   0.109    -.0246886    .2478791
         10  |   .0992132   .0757373     1.31   0.190    -.0492386    .2476651
         11  |   .0962237    .081984     1.17   0.241    -.0644724    .2569198
         12  |   .0968993   .0881914     1.10   0.272    -.0759638    .2697624
         13  |   .0893524   .0945254     0.95   0.345    -.0959259    .2746308
         14  |   .0994379   .1009209     0.99   0.324    -.0983761    .2972519
         15  |   .1124633   .1073309     1.05   0.295     -.097915    .3228416
         16  |   .1144483   .1141293     1.00   0.316    -.1092555    .3381521
         17  |   .1149737   .1208804     0.95   0.342    -.1219628    .3519101
         18  |   .1213559    .127537     0.95   0.341    -.1286281    .3713399
         19  |   .1109351   .1345479     0.82   0.410    -.1527909    .3746611
         20  |    .086291   .1481728     0.58   0.560    -.2041412    .3767231
         25  |   .0263255   .1708992     0.15   0.878    -.3086523    .3613032
         30  |   .1455103   .2134944     0.68   0.496    -.2729579    .5639786
         40  |   .3313135   .2541564     1.30   0.192    -.1668559     .829483
         50  |   .3553298   .2914909     1.22   0.223    -.2160186    .9266783
             |
       _cons |    3.99367   .0545501    73.21   0.000     3.886747    4.100593
-------------+----------------------------------------------------------------
     sigma_u |   1.766587
     sigma_e |  .88101487
         rho |  .80082529   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    529632
Group variable: firm_person                     Number of groups   =     59467

R-sq:  within  = 0.1457                         Obs per group: min =         1
       between = 0.0411                                        avg =       8.9
       overall = 0.0521                                        max =        25

                                                F(78,18788)        =     86.69
corr(u_i, Xb)  = -0.0698                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1118472   .0368641     3.03   0.002     .0395902    .1841042
      during |  -.0099658   .0110383    -0.90   0.367    -.0316018    .0116702
       after |  -.0555554   .0200341    -2.77   0.006     -.094824   -.0162867
during_expat |   -.231151   .0212207   -10.89   0.000    -.2727455   -.1895566
 after_expat |  -.3834563   .0307345   -12.48   0.000    -.4436986    -.323214
             |
    ind_year |
          2  |   .1632459   .0312008     5.23   0.000     .1020894    .2244023
          3  |   .7998299    .038748    20.64   0.000     .7238803    .8757795
          4  |   .9724807   .0442402    21.98   0.000     .8857659    1.059195
          5  |    1.15758   .0488676    23.69   0.000     1.061796    1.253365
          6  |   1.404678   .0537536    26.13   0.000     1.299316     1.51004
          7  |    1.68204   .0587155    28.65   0.000     1.566953    1.797128
          8  |   1.884623    .063813    29.53   0.000     1.759544    2.009702
          9  |   2.034869   .0689357    29.52   0.000     1.899749     2.16999
         10  |    2.17987   .0746981    29.18   0.000     2.033455    2.326285
         11  |    2.33467   .0801364    29.13   0.000     2.177596    2.491745
         12  |   2.396233   .0859311    27.89   0.000       2.2278    2.564666
         13  |   2.458218   .0918529    26.76   0.000     2.278178    2.638258
         14  |   2.482891   .0977618    25.40   0.000     2.291269    2.674513
         15  |   2.459177   .1038135    23.69   0.000     2.255693     2.66266
         16  |   2.508747   .1095882    22.89   0.000     2.293944    2.723549
         17  |   2.536175   .1157254    21.92   0.000     2.309343    2.763007
         18  |   2.556097   .1217513    20.99   0.000     2.317454    2.794741
         19  |   2.522517    .127855    19.73   0.000      2.27191    2.773124
         20  |   2.531368   .1336271    18.94   0.000     2.269447    2.793289
         21  |   2.562063   .1387458    18.47   0.000     2.290108    2.834017
         22  |    2.59462   .1437204    18.05   0.000     2.312915    2.876325
         23  |   2.699835   .1487094    18.16   0.000     2.408351    2.991319
         24  |   2.468201    .154521    15.97   0.000     2.165326    2.771076
         25  |   2.470153   .1602349    15.42   0.000     2.156078    2.784228
         26  |   .4759848   .0720622     6.61   0.000     .3347363    .6172333
         27  |   .6202379   .0654512     9.48   0.000     .4919477    .7485281
         28  |   .9476323   .0618003    15.33   0.000     .8264981    1.068766
         29  |   1.100924   .0615318    17.89   0.000     .9803158    1.221532
         30  |   1.219959   .0629426    19.38   0.000     1.096586    1.343332
         31  |   1.382826   .0652571    21.19   0.000     1.254916    1.510736
         32  |    1.59896   .0680681    23.49   0.000      1.46554     1.73238
         33  |   1.781108   .0716292    24.87   0.000     1.640708    1.921507
         34  |   1.903125   .0760472    25.03   0.000     1.754065    2.052184
         35  |   2.011342   .0807352    24.91   0.000     1.853094    2.169591
         36  |   2.122509   .0858574    24.72   0.000     1.954221    2.290798
         37  |   2.227399   .0909586    24.49   0.000     2.049112    2.405686
         38  |   2.319875   .0962189    24.11   0.000     2.131277    2.508472
         39  |    2.34858   .1018188    23.07   0.000     2.149006    2.548154
         40  |   2.371756   .1073255    22.10   0.000     2.161388    2.582123
         41  |   2.400277   .1129922    21.24   0.000     2.178802    2.621752
         42  |   2.481305   .1190942    20.83   0.000     2.247869     2.71474
         43  |   2.551315    .125295    20.36   0.000     2.305726    2.796905
         44  |   2.542493    .131582    19.32   0.000     2.284581    2.800406
         45  |    2.57733   .1371718    18.79   0.000     2.308461    2.846199
         46  |   2.591093   .1429574    18.12   0.000     2.310884    2.871303
         47  |   2.643134   .1480806    17.85   0.000     2.352883    2.933385
         48  |   2.725155   .1528735    17.83   0.000     2.425509    3.024801
         49  |   2.617768   .1584376    16.52   0.000     2.307216     2.92832
         50  |   2.638821   .1633813    16.15   0.000     2.318579    2.959063
             |
     age_cat |
          1  |   .0779715   .0263842     2.96   0.003      .026256     .129687
          2  |   .0978054   .0301964     3.24   0.001     .0386177    .1569931
          3  |   .0924878   .0343379     2.69   0.007     .0251824    .1597931
          4  |   .1067442   .0391059     2.73   0.006     .0300931    .1833953
          5  |   .0873818   .0443072     1.97   0.049     .0005357    .1742279
          6  |   .0598097   .0498243     1.20   0.230    -.0378504    .1574698
          7  |   .0421017   .0555381     0.76   0.448     -.066758    .1509614
          8  |   .0309367   .0614681     0.50   0.615    -.0895464    .1514197
          9  |   .0206078   .0674437     0.31   0.760    -.1115879    .1528035
         10  |   .0035156   .0734965     0.05   0.962    -.1405442    .1475753
         11  |  -.0042599   .0796303    -0.05   0.957    -.1603426    .1518227
         12  |  -.0113963    .085645    -0.13   0.894    -.1792682    .1564756
         13  |  -.0279743   .0918099    -0.30   0.761    -.2079299    .1519813
         14  |  -.0299495    .098036    -0.31   0.760    -.2221089    .1622099
         15  |  -.0274277   .1042467    -0.26   0.792    -.2317606    .1769052
         16  |  -.0382462   .1107421    -0.35   0.730    -.2553107    .1788182
         17  |  -.0477457   .1172114    -0.41   0.684    -.2774907    .1819993
         18  |  -.0476112    .123545    -0.39   0.700    -.2897706    .1945483
         19  |  -.0668917   .1302394    -0.51   0.608    -.3221727    .1883893
         20  |  -.1035731   .1429622    -0.72   0.469    -.3837918    .1766456
         25  |  -.1887349   .1638025    -1.15   0.249    -.5098026    .1323328
         30  |   -.129676   .2014543    -0.64   0.520    -.5245446    .2651927
         40  |   .0426094   .2338807     0.18   0.855    -.4158179    .5010367
         50  |   .1374625   .2565441     0.54   0.592     -.365387     .640312
             |
       _cons |   4.056053     .05324    76.18   0.000     3.951698    4.160408
-------------+----------------------------------------------------------------
     sigma_u |  1.7442944
     sigma_e |  .88397395
         rho |  .79565495   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1457009813208466

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    529,632
Group variable: firm_person                     Number of groups  =     59,467

R-sq:                                           Obs per group:
     within  = 0.1457                                         min =          1
     between = 0.0411                                         avg =        8.9
     overall = 0.0521                                         max =         25

                                                F(78,18788)       =      86.69
corr(u_i, Xb)  = -0.0698                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1118472   .0368641     3.03   0.002     .0395902    .1841042
      during |  -.0099658   .0110383    -0.90   0.367    -.0316018    .0116702
       after |  -.0555554   .0200341    -2.77   0.006     -.094824   -.0162867
during_expat |   -.231151   .0212207   -10.89   0.000    -.2727455   -.1895566
 after_expat |  -.3834563   .0307345   -12.48   0.000    -.4436986    -.323214
             |
    ind_year |
          2  |   .1632459   .0312008     5.23   0.000     .1020894    .2244023
          3  |   .7998299    .038748    20.64   0.000     .7238803    .8757795
          4  |   .9724807   .0442402    21.98   0.000     .8857659    1.059195
          5  |    1.15758   .0488676    23.69   0.000     1.061796    1.253365
          6  |   1.404678   .0537536    26.13   0.000     1.299316     1.51004
          7  |    1.68204   .0587155    28.65   0.000     1.566953    1.797128
          8  |   1.884623    .063813    29.53   0.000     1.759544    2.009702
          9  |   2.034869   .0689357    29.52   0.000     1.899749     2.16999
         10  |    2.17987   .0746981    29.18   0.000     2.033455    2.326285
         11  |    2.33467   .0801364    29.13   0.000     2.177596    2.491745
         12  |   2.396233   .0859311    27.89   0.000       2.2278    2.564666
         13  |   2.458218   .0918529    26.76   0.000     2.278178    2.638258
         14  |   2.482891   .0977618    25.40   0.000     2.291269    2.674513
         15  |   2.459177   .1038135    23.69   0.000     2.255693     2.66266
         16  |   2.508747   .1095882    22.89   0.000     2.293944    2.723549
         17  |   2.536175   .1157254    21.92   0.000     2.309343    2.763007
         18  |   2.556097   .1217513    20.99   0.000     2.317454    2.794741
         19  |   2.522517    .127855    19.73   0.000      2.27191    2.773124
         20  |   2.531368   .1336271    18.94   0.000     2.269447    2.793289
         21  |   2.562063   .1387458    18.47   0.000     2.290108    2.834017
         22  |    2.59462   .1437204    18.05   0.000     2.312915    2.876325
         23  |   2.699835   .1487094    18.16   0.000     2.408351    2.991319
         24  |   2.468201    .154521    15.97   0.000     2.165326    2.771076
         25  |   2.470153   .1602349    15.42   0.000     2.156078    2.784228
         26  |   .4759848   .0720622     6.61   0.000     .3347363    .6172333
         27  |   .6202379   .0654512     9.48   0.000     .4919477    .7485281
         28  |   .9476323   .0618003    15.33   0.000     .8264981    1.068766
         29  |   1.100924   .0615318    17.89   0.000     .9803158    1.221532
         30  |   1.219959   .0629426    19.38   0.000     1.096586    1.343332
         31  |   1.382826   .0652571    21.19   0.000     1.254916    1.510736
         32  |    1.59896   .0680681    23.49   0.000      1.46554     1.73238
         33  |   1.781108   .0716292    24.87   0.000     1.640708    1.921507
         34  |   1.903125   .0760472    25.03   0.000     1.754065    2.052184
         35  |   2.011342   .0807352    24.91   0.000     1.853094    2.169591
         36  |   2.122509   .0858574    24.72   0.000     1.954221    2.290798
         37  |   2.227399   .0909586    24.49   0.000     2.049112    2.405686
         38  |   2.319875   .0962189    24.11   0.000     2.131277    2.508472
         39  |    2.34858   .1018188    23.07   0.000     2.149006    2.548154
         40  |   2.371756   .1073255    22.10   0.000     2.161388    2.582123
         41  |   2.400277   .1129922    21.24   0.000     2.178802    2.621752
         42  |   2.481305   .1190942    20.83   0.000     2.247869     2.71474
         43  |   2.551315    .125295    20.36   0.000     2.305726    2.796905
         44  |   2.542493    .131582    19.32   0.000     2.284581    2.800406
         45  |    2.57733   .1371718    18.79   0.000     2.308461    2.846199
         46  |   2.591093   .1429574    18.12   0.000     2.310884    2.871303
         47  |   2.643134   .1480806    17.85   0.000     2.352883    2.933385
         48  |   2.725155   .1528735    17.83   0.000     2.425509    3.024801
         49  |   2.617768   .1584376    16.52   0.000     2.307216     2.92832
         50  |   2.638821   .1633813    16.15   0.000     2.318579    2.959063
             |
     age_cat |
          1  |   .0779715   .0263842     2.96   0.003      .026256     .129687
          2  |   .0978054   .0301964     3.24   0.001     .0386177    .1569931
          3  |   .0924878   .0343379     2.69   0.007     .0251824    .1597931
          4  |   .1067442   .0391059     2.73   0.006     .0300931    .1833953
          5  |   .0873818   .0443072     1.97   0.049     .0005357    .1742279
          6  |   .0598097   .0498243     1.20   0.230    -.0378504    .1574698
          7  |   .0421017   .0555381     0.76   0.448     -.066758    .1509614
          8  |   .0309367   .0614681     0.50   0.615    -.0895464    .1514197
          9  |   .0206078   .0674437     0.31   0.760    -.1115879    .1528035
         10  |   .0035156   .0734965     0.05   0.962    -.1405442    .1475753
         11  |  -.0042599   .0796303    -0.05   0.957    -.1603426    .1518227
         12  |  -.0113963    .085645    -0.13   0.894    -.1792682    .1564756
         13  |  -.0279743   .0918099    -0.30   0.761    -.2079299    .1519813
         14  |  -.0299495    .098036    -0.31   0.760    -.2221089    .1622099
         15  |  -.0274277   .1042467    -0.26   0.792    -.2317606    .1769052
         16  |  -.0382462   .1107421    -0.35   0.730    -.2553107    .1788182
         17  |  -.0477457   .1172114    -0.41   0.684    -.2774907    .1819993
         18  |  -.0476112    .123545    -0.39   0.700    -.2897706    .1945483
         19  |  -.0668917   .1302394    -0.51   0.608    -.3221727    .1883893
         20  |  -.1035731   .1429622    -0.72   0.469    -.3837918    .1766456
         25  |  -.1887349   .1638025    -1.15   0.249    -.5098026    .1323328
         30  |   -.129676   .2014543    -0.64   0.520    -.5245446    .2651927
         40  |   .0426094   .2338807     0.18   0.855    -.4158179    .5010367
         50  |   .1374625   .2565441     0.54   0.592     -.365387     .640312
             |
       _cons |   4.056053     .05324    76.18   0.000     3.951698    4.160408
-------------+----------------------------------------------------------------
     sigma_u |  1.7442944
     sigma_e |  .88397395
         rho |  .79565495   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 18788) =    0.82
            Prob > F =    0.3666

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18788) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 18788) =   10.26
            Prob > F =    0.0014

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18788) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 18788) =  118.65
            Prob > F =    0.0000

 ( 1)  during_expat = 0

       F(  1, 18788) =  118.65
            Prob > F =    0.0000
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 18788) =   48.46
            Prob > F =    0.0000

 ( 1)  after_expat = 0

       F(  1, 18788) =  155.66
            Prob > F =    0.0000
(1 real change made)
(file output/figure/baseline_lnKL_slope.png written in PNG format)
(sum of wgt is 39,871.272767067)

Linear regression                               Number of obs     =    108,694
                                                F(50, 6854)       =      57.84
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1497
                                                Root MSE          =     1.6458

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .6151203   .0518412    11.87   0.000     .5134955    .7167451
       expat |   .0676604   .0582742     1.16   0.246    -.0465751    .1818959
             |
    ind_year |
         27  |   .0673348   .0529604     1.27   0.204     -.036484    .1711536
         28  |   .3447412   .0596073     5.78   0.000     .2278924      .46159
         29  |   .4382867   .0617317     7.10   0.000     .3172735    .5592999
         30  |    .526481   .0638983     8.24   0.000     .4012206    .6517415
         31  |   .6445346   .0656584     9.82   0.000     .5158237    .7732455
         32  |   .8410053   .0673192    12.49   0.000     .7090389    .9729718
         33  |   .9866802   .0677412    14.57   0.000     .8538865    1.119474
         34  |   1.105022   .0690927    15.99   0.000     .9695786    1.240465
         35  |   1.199937   .0699527    17.15   0.000     1.062808    1.337066
         36  |   1.315983   .0713611    18.44   0.000     1.176093    1.455872
         37  |   1.422251   .0723741    19.65   0.000     1.280375    1.564126
         38  |   1.527353   .0731823    20.87   0.000     1.383892    1.670813
         39  |   1.563496    .074798    20.90   0.000     1.416869    1.710124
         40  |   1.574013   .0767391    20.51   0.000      1.42358    1.724445
         41  |   1.598805    .077356    20.67   0.000     1.447163    1.750447
         42  |   1.625777   .0789855    20.58   0.000     1.470941    1.780613
         43  |   1.688645   .0807091    20.92   0.000      1.53043    1.846859
         44  |   1.676025   .0822399    20.38   0.000     1.514809     1.83724
         45  |   1.654675   .0841769    19.66   0.000     1.489662    1.819688
         46  |   1.639098   .0860787    19.04   0.000     1.470357    1.807839
         47  |   1.664503   .0901585    18.46   0.000     1.487764    1.841242
         48  |   1.731233   .0914186    18.94   0.000     1.552024    1.910441
         49  |   1.673508   .0929543    18.00   0.000     1.491289    1.855727
         50  |   1.709109    .095268    17.94   0.000     1.522354    1.895864
             |
     age_cat |
          1  |   .3473524   .0638977     5.44   0.000      .222093    .4726117
          2  |   .4746108   .0665441     7.13   0.000     .3441637    .6050579
          3  |   .5671772   .0683198     8.30   0.000     .4332492    .7011052
          4  |   .6794614    .070531     9.63   0.000     .5411987     .817724
          5  |   .7289423   .0721657    10.10   0.000      .587475    .8704095
          6  |   .7504822   .0734452    10.22   0.000     .6065068    .8944577
          7  |   .7933007   .0749943    10.58   0.000     .6462885    .9403129
          8  |   .8223939   .0765154    10.75   0.000        .6724    .9723877
          9  |    .865149   .0771186    11.22   0.000     .7139727    1.016325
         10  |    .874952   .0784179    11.16   0.000     .7212286    1.028675
         11  |   .8955875   .0799368    11.20   0.000     .7388865    1.052288
         12  |   .9271102   .0815207    11.37   0.000     .7673043    1.086916
         13  |   .9383685   .0834436    11.25   0.000     .7747931    1.101944
         14  |   .9457164   .0849354    11.13   0.000     .7792167    1.112216
         15  |   .9825927   .0868081    11.32   0.000      .812422    1.152763
         16  |   .9785959   .0891935    10.97   0.000     .8037488    1.153443
         17  |   .9568837   .0921663    10.38   0.000     .7762091    1.137558
         18  |   .9801099   .0950198    10.31   0.000     .7938415    1.166378
         19  |   .9867475   .0977529    10.09   0.000     .7951216    1.178373
         20  |   1.041776   .1043577     9.98   0.000     .8372023    1.246349
         25  |   1.019914   .1241451     8.22   0.000     .7765513    1.263277
         30  |   .4366575   .1855961     2.35   0.019     .0728315    .8004834
         40  |   .1078113   .1454936     0.74   0.459    -.1774013    .3930239
         50  |  -.1942758     .23109    -0.84   0.401    -.6472838    .2587322
             |
       _cons |   4.039985    .079619    50.74   0.000     3.883907    4.196063
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    108,694
                                                F(50, 6854)       =      57.84
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1497
                                                Root MSE          =     1.6458

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .6151203   .0518412    11.87   0.000     .5134955    .7167451
       expat |   .0676604   .0582742     1.16   0.246    -.0465751    .1818959
             |
    ind_year |
         27  |   .0673348   .0529604     1.27   0.204     -.036484    .1711536
         28  |   .3447412   .0596073     5.78   0.000     .2278924      .46159
         29  |   .4382867   .0617317     7.10   0.000     .3172735    .5592999
         30  |    .526481   .0638983     8.24   0.000     .4012206    .6517415
         31  |   .6445346   .0656584     9.82   0.000     .5158237    .7732455
         32  |   .8410053   .0673192    12.49   0.000     .7090389    .9729718
         33  |   .9866802   .0677412    14.57   0.000     .8538865    1.119474
         34  |   1.105022   .0690927    15.99   0.000     .9695786    1.240465
         35  |   1.199937   .0699527    17.15   0.000     1.062808    1.337066
         36  |   1.315983   .0713611    18.44   0.000     1.176093    1.455872
         37  |   1.422251   .0723741    19.65   0.000     1.280375    1.564126
         38  |   1.527353   .0731823    20.87   0.000     1.383892    1.670813
         39  |   1.563496    .074798    20.90   0.000     1.416869    1.710124
         40  |   1.574013   .0767391    20.51   0.000      1.42358    1.724445
         41  |   1.598805    .077356    20.67   0.000     1.447163    1.750447
         42  |   1.625777   .0789855    20.58   0.000     1.470941    1.780613
         43  |   1.688645   .0807091    20.92   0.000      1.53043    1.846859
         44  |   1.676025   .0822399    20.38   0.000     1.514809     1.83724
         45  |   1.654675   .0841769    19.66   0.000     1.489662    1.819688
         46  |   1.639098   .0860787    19.04   0.000     1.470357    1.807839
         47  |   1.664503   .0901585    18.46   0.000     1.487764    1.841242
         48  |   1.731233   .0914186    18.94   0.000     1.552024    1.910441
         49  |   1.673508   .0929543    18.00   0.000     1.491289    1.855727
         50  |   1.709109    .095268    17.94   0.000     1.522354    1.895864
             |
     age_cat |
          1  |   .3473524   .0638977     5.44   0.000      .222093    .4726117
          2  |   .4746108   .0665441     7.13   0.000     .3441637    .6050579
          3  |   .5671772   .0683198     8.30   0.000     .4332492    .7011052
          4  |   .6794614    .070531     9.63   0.000     .5411987     .817724
          5  |   .7289423   .0721657    10.10   0.000      .587475    .8704095
          6  |   .7504822   .0734452    10.22   0.000     .6065068    .8944577
          7  |   .7933007   .0749943    10.58   0.000     .6462885    .9403129
          8  |   .8223939   .0765154    10.75   0.000        .6724    .9723877
          9  |    .865149   .0771186    11.22   0.000     .7139727    1.016325
         10  |    .874952   .0784179    11.16   0.000     .7212286    1.028675
         11  |   .8955875   .0799368    11.20   0.000     .7388865    1.052288
         12  |   .9271102   .0815207    11.37   0.000     .7673043    1.086916
         13  |   .9383685   .0834436    11.25   0.000     .7747931    1.101944
         14  |   .9457164   .0849354    11.13   0.000     .7792167    1.112216
         15  |   .9825927   .0868081    11.32   0.000      .812422    1.152763
         16  |   .9785959   .0891935    10.97   0.000     .8037488    1.153443
         17  |   .9568837   .0921663    10.38   0.000     .7762091    1.137558
         18  |   .9801099   .0950198    10.31   0.000     .7938415    1.166378
         19  |   .9867475   .0977529    10.09   0.000     .7951216    1.178373
         20  |   1.041776   .1043577     9.98   0.000     .8372023    1.246349
         25  |   1.019914   .1241451     8.22   0.000     .7765513    1.263277
         30  |   .4366575   .1855961     2.35   0.019     .0728315    .8004834
         40  |   .1078113   .1454936     0.74   0.459    -.1774013    .3930239
         50  |  -.1942758     .23109    -0.84   0.401    -.6472838    .2587322
             |
       _cons |   4.039985    .079619    50.74   0.000     3.883907    4.196063
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    108,694
Group variable: id                              Number of groups  =      6,855

R-sq:                                           Obs per group:
     within  = 0.1514                                         min =          1
     between = 0.1242                                         avg =       15.9
     overall = 0.0917                                         max =        125

                                                F(50,6854)        =      33.75
corr(u_i, Xb)  = 0.0804                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1082308    .070428     1.54   0.124      -.02983    .2462916
       expat |   .0229142   .0171949     1.33   0.183     -.010793    .0566215
             |
    ind_year |
         27  |   .1157347   .0453526     2.55   0.011     .0268295      .20464
         28  |   .3824352   .0552983     6.92   0.000     .2740333    .4908372
         29  |   .4659441   .0652262     7.14   0.000     .3380806    .5938076
         30  |   .5432179   .0763279     7.12   0.000     .3935916    .6928442
         31  |   .6645441   .0873566     7.61   0.000     .4932981    .8357901
         32  |   .8437005   .0990222     8.52   0.000     .6495862    1.037815
         33  |   .9825101   .1103018     8.91   0.000     .7662843    1.198736
         34  |   1.057363   .1222932     8.65   0.000     .8176303    1.297095
         35  |    1.13287   .1335876     8.48   0.000     .8709965    1.394743
         36  |   1.193108   .1459802     8.17   0.000     .9069419    1.479275
         37  |    1.24409   .1578265     7.88   0.000     .9347015    1.553479
         38  |   1.302045   .1694306     7.68   0.000     .9699088    1.634182
         39  |   1.285072   .1817664     7.07   0.000     .9287531     1.64139
         40  |     1.2604   .1941519     6.49   0.000     .8798018    1.640998
         41  |   1.254031   .2066178     6.07   0.000     .8489962    1.659066
         42  |    1.28538    .219848     5.85   0.000     .8544102    1.716351
         43  |   1.305885   .2329749     5.61   0.000     .8491824    1.762588
         44  |   1.262839   .2460981     5.13   0.000       .78041    1.745267
         45  |   1.246644   .2581771     4.83   0.000     .7405371    1.752751
         46  |   1.225258   .2701289     4.54   0.000      .695722    1.754795
         47  |   1.251952   .2802843     4.47   0.000     .7025078    1.801396
         48  |    1.30389   .2907218     4.49   0.000     .7339853    1.873795
         49  |   1.161306   .3026822     3.84   0.000     .5679554    1.754657
         50  |    1.13349   .3135704     3.61   0.000     .5187943    1.748185
             |
     age_cat |
          1  |    .184153   .0495886     3.71   0.000      .086944     .281362
          2  |   .2615515   .0573192     4.56   0.000     .1491882    .3739149
          3  |   .2986685   .0656394     4.55   0.000     .1699949    .4273421
          4  |   .3501222   .0757711     4.62   0.000     .2015873     .498657
          5  |    .360353   .0862554     4.18   0.000     .1912658    .5294403
          6  |   .3803069    .097408     3.90   0.000     .1893571    .5712567
          7  |   .3967298   .1091189     3.64   0.000     .1828229    .6106367
          8  |   .4231682   .1207342     3.50   0.000     .1864918    .6598446
          9  |   .4661284   .1325303     3.52   0.000     .2063278    .7259289
         10  |   .4681248   .1445168     3.24   0.001     .1848271    .7514225
         11  |   .5049298   .1565079     3.23   0.001     .1981259    .8117338
         12  |   .5399446   .1689428     3.20   0.001     .2087643    .8711249
         13  |   .5682108   .1812229     3.14   0.002     .2129578    .9234638
         14  |   .5987433   .1937172     3.09   0.002     .2189974    .9784892
         15  |   .6358055    .206412     3.08   0.002     .2311739    1.040437
         16  |   .6587474   .2193773     3.00   0.003     .2286998    1.088795
         17  |   .6764675   .2324266     2.91   0.004     .2208392    1.132096
         18  |   .7253344   .2455332     2.95   0.003     .2440132    1.206656
         19  |   .7562909   .2586785     2.92   0.003     .2492009    1.263381
         20  |   .8103386   .2867637     2.83   0.005     .2481928    1.372484
         25  |    .910177   .3316173     2.74   0.006     .2601042     1.56025
         30  |   .9956207   .4023293     2.47   0.013     .2069305    1.784311
         40  |   1.135236   .5087554     2.23   0.026     .1379177    2.132555
         50  |   1.015802   .5754986     1.77   0.078    -.1123539    2.143958
             |
       _cons |   4.713434   .0784889    60.05   0.000     4.559571    4.867297
-------------+----------------------------------------------------------------
     sigma_u |  1.7105501
     sigma_e |  .81906826
         rho |  .81348348   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1514361150202314

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    108,694
Group variable: id                              Number of groups  =      6,855

R-sq:                                           Obs per group:
     within  = 0.1514                                         min =          1
     between = 0.1242                                         avg =       15.9
     overall = 0.0917                                         max =        125

                                                F(50,6854)        =      33.75
corr(u_i, Xb)  = 0.0804                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1082308    .070428     1.54   0.124      -.02983    .2462916
       expat |   .0229142   .0171949     1.33   0.183     -.010793    .0566215
             |
    ind_year |
         27  |   .1157347   .0453526     2.55   0.011     .0268295      .20464
         28  |   .3824352   .0552983     6.92   0.000     .2740333    .4908372
         29  |   .4659441   .0652262     7.14   0.000     .3380806    .5938076
         30  |   .5432179   .0763279     7.12   0.000     .3935916    .6928442
         31  |   .6645441   .0873566     7.61   0.000     .4932981    .8357901
         32  |   .8437005   .0990222     8.52   0.000     .6495862    1.037815
         33  |   .9825101   .1103018     8.91   0.000     .7662843    1.198736
         34  |   1.057363   .1222932     8.65   0.000     .8176303    1.297095
         35  |    1.13287   .1335876     8.48   0.000     .8709965    1.394743
         36  |   1.193108   .1459802     8.17   0.000     .9069419    1.479275
         37  |    1.24409   .1578265     7.88   0.000     .9347015    1.553479
         38  |   1.302045   .1694306     7.68   0.000     .9699088    1.634182
         39  |   1.285072   .1817664     7.07   0.000     .9287531     1.64139
         40  |     1.2604   .1941519     6.49   0.000     .8798018    1.640998
         41  |   1.254031   .2066178     6.07   0.000     .8489962    1.659066
         42  |    1.28538    .219848     5.85   0.000     .8544102    1.716351
         43  |   1.305885   .2329749     5.61   0.000     .8491824    1.762588
         44  |   1.262839   .2460981     5.13   0.000       .78041    1.745267
         45  |   1.246644   .2581771     4.83   0.000     .7405371    1.752751
         46  |   1.225258   .2701289     4.54   0.000      .695722    1.754795
         47  |   1.251952   .2802843     4.47   0.000     .7025078    1.801396
         48  |    1.30389   .2907218     4.49   0.000     .7339853    1.873795
         49  |   1.161306   .3026822     3.84   0.000     .5679554    1.754657
         50  |    1.13349   .3135704     3.61   0.000     .5187943    1.748185
             |
     age_cat |
          1  |    .184153   .0495886     3.71   0.000      .086944     .281362
          2  |   .2615515   .0573192     4.56   0.000     .1491882    .3739149
          3  |   .2986685   .0656394     4.55   0.000     .1699949    .4273421
          4  |   .3501222   .0757711     4.62   0.000     .2015873     .498657
          5  |    .360353   .0862554     4.18   0.000     .1912658    .5294403
          6  |   .3803069    .097408     3.90   0.000     .1893571    .5712567
          7  |   .3967298   .1091189     3.64   0.000     .1828229    .6106367
          8  |   .4231682   .1207342     3.50   0.000     .1864918    .6598446
          9  |   .4661284   .1325303     3.52   0.000     .2063278    .7259289
         10  |   .4681248   .1445168     3.24   0.001     .1848271    .7514225
         11  |   .5049298   .1565079     3.23   0.001     .1981259    .8117338
         12  |   .5399446   .1689428     3.20   0.001     .2087643    .8711249
         13  |   .5682108   .1812229     3.14   0.002     .2129578    .9234638
         14  |   .5987433   .1937172     3.09   0.002     .2189974    .9784892
         15  |   .6358055    .206412     3.08   0.002     .2311739    1.040437
         16  |   .6587474   .2193773     3.00   0.003     .2286998    1.088795
         17  |   .6764675   .2324266     2.91   0.004     .2208392    1.132096
         18  |   .7253344   .2455332     2.95   0.003     .2440132    1.206656
         19  |   .7562909   .2586785     2.92   0.003     .2492009    1.263381
         20  |   .8103386   .2867637     2.83   0.005     .2481928    1.372484
         25  |    .910177   .3316173     2.74   0.006     .2601042     1.56025
         30  |   .9956207   .4023293     2.47   0.013     .2069305    1.784311
         40  |   1.135236   .5087554     2.23   0.026     .1379177    2.132555
         50  |   1.015802   .5754986     1.77   0.078    -.1123539    2.143958
             |
       _cons |   4.713434   .0784889    60.05   0.000     4.559571    4.867297
-------------+----------------------------------------------------------------
     sigma_u |  1.7105501
     sigma_e |  .81906826
         rho |  .81348348   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    182199
Group variable: firm_person                     Number of groups   =     21832

R-sq:  within  = 0.1256                         Obs per group: min =         1
       between = 0.0825                                        avg =       8.3
       overall = 0.0713                                        max =        25

                                                F(53,6854)         =     31.69
corr(u_i, Xb)  = 0.0323                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0935778   .0653111     1.43   0.152    -.0344523    .2216079
      during |   .0029101   .0192492     0.15   0.880    -.0348242    .0406444
       after |  -.0215193   .0339838    -0.63   0.527    -.0881381    .0450995
during_expat |  -.1444204   .0296191    -4.88   0.000    -.2024831   -.0863577
 after_expat |  -.2278354   .0440878    -5.17   0.000    -.3142612   -.1414095
             |
    ind_year |
         27  |   .1152322   .0419415     2.75   0.006     .0330139    .1974506
         28  |   .3913343   .0510787     7.66   0.000     .2912042    .4914644
         29  |   .4934943   .0609633     8.09   0.000     .3739873    .6130013
         30  |   .5684484   .0713503     7.97   0.000     .4285797    .7083171
         31  |   .6909753   .0816198     8.47   0.000     .5309751    .8509755
         32  |   .8745851    .092665     9.44   0.000     .6929329    1.056237
         33  |    1.01886   .1032856     9.86   0.000      .816388    1.221332
         34  |    1.10007   .1143983     9.62   0.000     .8758142    1.324327
         35  |   1.174748   .1250228     9.40   0.000      .929664    1.419831
         36  |   1.238952   .1364217     9.08   0.000     .9715227    1.506381
         37  |   1.301578    .147376     8.83   0.000     1.012675     1.59048
         38  |   1.354853   .1583471     8.56   0.000     1.044444    1.665263
         39  |   1.348276   .1697141     7.94   0.000     1.015583    1.680968
         40  |   1.334393   .1810312     7.37   0.000      .979516    1.689271
         41  |   1.330309   .1921687     6.92   0.000     .9535987    1.707019
         42  |   1.378325   .2042623     6.75   0.000     .9779074    1.778742
         43  |   1.411831   .2162442     6.53   0.000     .9879254    1.835737
         44  |   1.369925   .2281097     6.01   0.000     .9227597    1.817091
         45  |   1.365365   .2389021     5.72   0.000     .8970428    1.833687
         46  |   1.339779   .2497165     5.37   0.000     .8502573    1.829301
         47  |   1.377684   .2590117     5.32   0.000     .8699406    1.885427
         48  |   1.423508   .2683938     5.30   0.000     .8973725    1.949643
         49  |   1.278216    .279076     4.58   0.000     .7311405    1.825292
         50  |   1.252577   .2888637     4.34   0.000     .6863144    1.818839
             |
     age_cat |
          1  |    .157726    .046322     3.40   0.001     .0669206    .2485315
          2  |   .2315956    .053822     4.30   0.000     .1260878    .3371033
          3  |   .2639809   .0613287     4.30   0.000     .1437576    .3842042
          4  |   .3170185   .0705043     4.50   0.000     .1788083    .4552287
          5  |     .31972   .0801635     3.99   0.000     .1625746    .4768654
          6  |   .3358581   .0903396     3.72   0.000     .1587645    .5129518
          7  |   .3422475   .1010547     3.39   0.001      .144149    .5403461
          8  |    .368846   .1116813     3.30   0.001     .1499161     .587776
          9  |   .3990225   .1224165     3.26   0.001     .1590483    .6389967
         10  |    .400966   .1332869     3.01   0.003     .1396824    .6622495
         11  |   .4262628   .1443141     2.95   0.003     .1433624    .7091631
         12  |   .4624806   .1556254     2.97   0.003     .1574066    .7675545
         13  |   .4823459   .1668501     2.89   0.004      .155268    .8094238
         14  |   .5178187    .178253     2.90   0.004     .1683876    .8672498
         15  |   .5424396   .1897204     2.86   0.004     .1705288    .9143505
         16  |   .5524998   .2014041     2.74   0.006     .1576853    .9473143
         17  |   .5592982   .2132599     2.62   0.009     .1412427    .9773537
         18  |   .6056765   .2251069     2.69   0.007     .1643972    1.046956
         19  |   .6482835    .236891     2.74   0.006     .1839036    1.112663
         20  |   .7013791   .2612781     2.68   0.007     .1891929    1.213565
         25  |   .7801979   .3000818     2.60   0.009     .1919444    1.368451
         30  |   .8760522   .3642597     2.41   0.016     .1619903    1.590114
         40  |   .9852431   .4561409     2.16   0.031     .0910655    1.879421
         50  |   .8924377   .4913202     1.82   0.069    -.0707022    1.855578
             |
       _cons |   4.803846   .0750174    64.04   0.000     4.656788    4.950903
-------------+----------------------------------------------------------------
     sigma_u |  1.6848168
     sigma_e |  .81956292
         rho |  .80865308   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1256015178319881

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    182,199
Group variable: firm_person                     Number of groups  =     21,832

R-sq:                                           Obs per group:
     within  = 0.1256                                         min =          1
     between = 0.0825                                         avg =        8.3
     overall = 0.0713                                         max =         25

                                                F(53,6854)        =      31.69
corr(u_i, Xb)  = 0.0323                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0935778   .0653111     1.43   0.152    -.0344523    .2216079
      during |   .0029101   .0192492     0.15   0.880    -.0348242    .0406444
       after |  -.0215193   .0339838    -0.63   0.527    -.0881381    .0450995
during_expat |  -.1444204   .0296191    -4.88   0.000    -.2024831   -.0863577
 after_expat |  -.2278354   .0440878    -5.17   0.000    -.3142612   -.1414095
             |
    ind_year |
         27  |   .1152322   .0419415     2.75   0.006     .0330139    .1974506
         28  |   .3913343   .0510787     7.66   0.000     .2912042    .4914644
         29  |   .4934943   .0609633     8.09   0.000     .3739873    .6130013
         30  |   .5684484   .0713503     7.97   0.000     .4285797    .7083171
         31  |   .6909753   .0816198     8.47   0.000     .5309751    .8509755
         32  |   .8745851    .092665     9.44   0.000     .6929329    1.056237
         33  |    1.01886   .1032856     9.86   0.000      .816388    1.221332
         34  |    1.10007   .1143983     9.62   0.000     .8758142    1.324327
         35  |   1.174748   .1250228     9.40   0.000      .929664    1.419831
         36  |   1.238952   .1364217     9.08   0.000     .9715227    1.506381
         37  |   1.301578    .147376     8.83   0.000     1.012675     1.59048
         38  |   1.354853   .1583471     8.56   0.000     1.044444    1.665263
         39  |   1.348276   .1697141     7.94   0.000     1.015583    1.680968
         40  |   1.334393   .1810312     7.37   0.000      .979516    1.689271
         41  |   1.330309   .1921687     6.92   0.000     .9535987    1.707019
         42  |   1.378325   .2042623     6.75   0.000     .9779074    1.778742
         43  |   1.411831   .2162442     6.53   0.000     .9879254    1.835737
         44  |   1.369925   .2281097     6.01   0.000     .9227597    1.817091
         45  |   1.365365   .2389021     5.72   0.000     .8970428    1.833687
         46  |   1.339779   .2497165     5.37   0.000     .8502573    1.829301
         47  |   1.377684   .2590117     5.32   0.000     .8699406    1.885427
         48  |   1.423508   .2683938     5.30   0.000     .8973725    1.949643
         49  |   1.278216    .279076     4.58   0.000     .7311405    1.825292
         50  |   1.252577   .2888637     4.34   0.000     .6863144    1.818839
             |
     age_cat |
          1  |    .157726    .046322     3.40   0.001     .0669206    .2485315
          2  |   .2315956    .053822     4.30   0.000     .1260878    .3371033
          3  |   .2639809   .0613287     4.30   0.000     .1437576    .3842042
          4  |   .3170185   .0705043     4.50   0.000     .1788083    .4552287
          5  |     .31972   .0801635     3.99   0.000     .1625746    .4768654
          6  |   .3358581   .0903396     3.72   0.000     .1587645    .5129518
          7  |   .3422475   .1010547     3.39   0.001      .144149    .5403461
          8  |    .368846   .1116813     3.30   0.001     .1499161     .587776
          9  |   .3990225   .1224165     3.26   0.001     .1590483    .6389967
         10  |    .400966   .1332869     3.01   0.003     .1396824    .6622495
         11  |   .4262628   .1443141     2.95   0.003     .1433624    .7091631
         12  |   .4624806   .1556254     2.97   0.003     .1574066    .7675545
         13  |   .4823459   .1668501     2.89   0.004      .155268    .8094238
         14  |   .5178187    .178253     2.90   0.004     .1683876    .8672498
         15  |   .5424396   .1897204     2.86   0.004     .1705288    .9143505
         16  |   .5524998   .2014041     2.74   0.006     .1576853    .9473143
         17  |   .5592982   .2132599     2.62   0.009     .1412427    .9773537
         18  |   .6056765   .2251069     2.69   0.007     .1643972    1.046956
         19  |   .6482835    .236891     2.74   0.006     .1839036    1.112663
         20  |   .7013791   .2612781     2.68   0.007     .1891929    1.213565
         25  |   .7801979   .3000818     2.60   0.009     .1919444    1.368451
         30  |   .8760522   .3642597     2.41   0.016     .1619903    1.590114
         40  |   .9852431   .4561409     2.16   0.031     .0910655    1.879421
         50  |   .8924377   .4913202     1.82   0.069    -.0707022    1.855578
             |
       _cons |   4.803846   .0750174    64.04   0.000     4.656788    4.950903
-------------+----------------------------------------------------------------
     sigma_u |  1.6848168
     sigma_e |  .81956292
         rho |  .80865308   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1,  6854) =    0.02
            Prob > F =    0.8798

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6854) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1,  6854) =    1.02
            Prob > F =    0.3124

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6854) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1,  6854) =   23.77
            Prob > F =    0.0000

 ( 1)  during_expat = 0

       F(  1,  6854) =   23.77
            Prob > F =    0.0000
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1,  6854) =    6.60
            Prob > F =    0.0102

 ( 1)  after_expat = 0

       F(  1,  6854) =   26.71
            Prob > F =    0.0000
(1 real change made)
(file output/figure/manufacturing_lnKL_slope.png written in PNG format)
(sum of wgt is 97,100.1176971942)

Linear regression                               Number of obs     =    233,110
                                                F(75, 14660)      =     121.54
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1478
                                                Root MSE          =     1.6652

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .4966276   .0475623    10.44   0.000     .4033994    .5898557
       expat |   .1499565   .0674532     2.22   0.026     .0177398    .2821732
             |
    ind_year |
          2  |   .1594788    .039719     4.02   0.000     .0816245     .237333
          3  |   .8106136   .0436672    18.56   0.000     .7250204    .8962068
          4  |   1.011916   .0473588    21.37   0.000     .9190869    1.104745
          5  |   1.138231   .0477344    23.85   0.000     1.044666    1.231797
          6  |   1.401083   .0487195    28.76   0.000     1.305587     1.49658
          7  |   1.602435   .0491622    32.59   0.000     1.506071    1.698799
          8  |    1.76838   .0494416    35.77   0.000     1.671468    1.865292
          9  |   1.890484   .0492093    38.42   0.000     1.794027     1.98694
         10  |   2.018835   .0494966    40.79   0.000     1.921815    2.115854
         11  |    2.09933   .0497588    42.19   0.000     2.001797    2.196864
         12  |   2.119143   .0501793    42.23   0.000     2.020785      2.2175
         13  |   2.110391   .0504419    41.84   0.000     2.011519    2.209264
         14  |   2.082929   .0510329    40.82   0.000     1.982899     2.18296
         15  |   2.009233   .0516903    38.87   0.000     1.907913    2.110552
         16  |   2.009453   .0521282    38.55   0.000     1.907275    2.111631
         17  |   1.998153    .052881    37.79   0.000       1.8945    2.101807
         18  |   1.973116   .0537906    36.68   0.000      1.86768    2.078552
         19  |   1.913386   .0542767    35.25   0.000     1.806997    2.019775
         20  |   1.835526   .0551603    33.28   0.000     1.727405    1.943647
         21  |   1.831539   .0566326    32.34   0.000     1.720531    1.942546
         22  |   1.825969    .057452    31.78   0.000     1.713356    1.938583
         23  |    1.86697   .0580158    32.18   0.000     1.753251    1.980688
         24  |   1.678998   .0604687    27.77   0.000     1.560472    1.797524
         25  |   1.682929   .0620682    27.11   0.000     1.561267     1.80459
         26  |   .6124572   .0729488     8.40   0.000     .4694684    .7554461
         27  |   .7080731   .0640543    11.05   0.000     .5825187    .8336275
         28  |   .9946097   .0610243    16.30   0.000     .8749945    1.114225
         29  |   1.104509   .0582648    18.96   0.000     .9903025    1.218715
         30  |   1.200079   .0577062    20.80   0.000     1.086968     1.31319
         31  |   1.326388   .0568086    23.35   0.000     1.215035     1.43774
         32  |   1.514849   .0559286    27.09   0.000     1.405222    1.624476
         33  |   1.607652   .0556037    28.91   0.000     1.498662    1.716642
         34  |   1.728383   .0555413    31.12   0.000     1.619515    1.837251
         35  |   1.826233   .0568068    32.15   0.000     1.714885    1.937582
         36  |   1.948422    .056934    34.22   0.000     1.836824    2.060019
         37  |   2.041244   .0575457    35.47   0.000     1.928447    2.154041
         38  |   2.103481    .057115    36.83   0.000     1.991528    2.215433
         39  |   2.102722   .0581349    36.17   0.000      1.98877    2.216673
         40  |   2.084795   .0598696    34.82   0.000     1.967443    2.202147
         41  |   2.094646   .0604402    34.66   0.000     1.976176    2.213117
         42  |   2.103126   .0608581    34.56   0.000     1.983836    2.222415
         43  |   2.136942   .0624369    34.23   0.000     2.014558    2.259326
         44  |   2.109979   .0634466    33.26   0.000     1.985615    2.234342
         45  |   2.085201   .0642184    32.47   0.000     1.959325    2.211078
         46  |   2.056883   .0656599    31.33   0.000     1.928182    2.185585
         47  |    2.08853   .0681579    30.64   0.000     1.954932    2.222128
         48  |   2.163405   .0683012    31.67   0.000     2.029526    2.297284
         49  |   2.108949   .0690604    30.54   0.000     1.973582    2.244317
         50  |   2.138671   .0704476    30.36   0.000     2.000585    2.276757
             |
     age_cat |
          1  |    .124737   .0397722     3.14   0.002     .0467785    .2026955
          2  |   .2682463   .0415864     6.45   0.000     .1867317    .3497609
          3  |   .4002779   .0428687     9.34   0.000     .3162499     .484306
          4  |   .5480475   .0439213    12.48   0.000     .4619563    .6341388
          5  |    .640116   .0447758    14.30   0.000     .5523498    .7278823
          6  |   .7080726   .0456642    15.51   0.000     .6185651    .7975801
          7  |   .7867038   .0464969    16.92   0.000      .695564    .8778436
          8  |   .8659556   .0472118    18.34   0.000     .7734145    .9584967
          9  |   .9406405   .0477486    19.70   0.000     .8470473    1.034234
         10  |   .9848223   .0485241    20.30   0.000     .8897089    1.079936
         11  |   1.038403   .0494895    20.98   0.000     .9413979    1.135409
         12  |   1.103346   .0501999    21.98   0.000     1.004947    1.201744
         13  |   1.136803   .0514627    22.09   0.000     1.035929    1.237676
         14  |   1.186499   .0526052    22.55   0.000     1.083387    1.289612
         15  |   1.242543   .0536736    23.15   0.000     1.137336     1.34775
         16  |   1.265136   .0553281    22.87   0.000     1.156686    1.373586
         17  |   1.279866   .0566537    22.59   0.000     1.168818    1.390914
         18  |   1.321887   .0579777    22.80   0.000     1.208243     1.43553
         19  |   1.342323   .0597698    22.46   0.000     1.225167    1.459479
         20  |   1.403766   .0635329    22.10   0.000     1.279233    1.528298
         25  |   1.284125   .0797274    16.11   0.000      1.12785    1.440401
         30  |   1.165927   .0957222    12.18   0.000     .9782994    1.353554
         40  |   1.025759   .1009373    10.16   0.000     .8279095    1.223609
         50  |    .802878   .1314748     6.11   0.000     .5451707    1.060585
             |
       _cons |   3.447802   .0545255    63.23   0.000     3.340925    3.554679
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    233,110
                                                F(75, 14660)      =     121.54
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1478
                                                Root MSE          =     1.6652

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .4966276   .0475623    10.44   0.000     .4033994    .5898557
       expat |   .1499565   .0674532     2.22   0.026     .0177398    .2821732
             |
    ind_year |
          2  |   .1594788    .039719     4.02   0.000     .0816245     .237333
          3  |   .8106136   .0436672    18.56   0.000     .7250204    .8962068
          4  |   1.011916   .0473588    21.37   0.000     .9190869    1.104745
          5  |   1.138231   .0477344    23.85   0.000     1.044666    1.231797
          6  |   1.401083   .0487195    28.76   0.000     1.305587     1.49658
          7  |   1.602435   .0491622    32.59   0.000     1.506071    1.698799
          8  |    1.76838   .0494416    35.77   0.000     1.671468    1.865292
          9  |   1.890484   .0492093    38.42   0.000     1.794027     1.98694
         10  |   2.018835   .0494966    40.79   0.000     1.921815    2.115854
         11  |    2.09933   .0497588    42.19   0.000     2.001797    2.196864
         12  |   2.119143   .0501793    42.23   0.000     2.020785      2.2175
         13  |   2.110391   .0504419    41.84   0.000     2.011519    2.209264
         14  |   2.082929   .0510329    40.82   0.000     1.982899     2.18296
         15  |   2.009233   .0516903    38.87   0.000     1.907913    2.110552
         16  |   2.009453   .0521282    38.55   0.000     1.907275    2.111631
         17  |   1.998153    .052881    37.79   0.000       1.8945    2.101807
         18  |   1.973116   .0537906    36.68   0.000      1.86768    2.078552
         19  |   1.913386   .0542767    35.25   0.000     1.806997    2.019775
         20  |   1.835526   .0551603    33.28   0.000     1.727405    1.943647
         21  |   1.831539   .0566326    32.34   0.000     1.720531    1.942546
         22  |   1.825969    .057452    31.78   0.000     1.713356    1.938583
         23  |    1.86697   .0580158    32.18   0.000     1.753251    1.980688
         24  |   1.678998   .0604687    27.77   0.000     1.560472    1.797524
         25  |   1.682929   .0620682    27.11   0.000     1.561267     1.80459
         26  |   .6124572   .0729488     8.40   0.000     .4694684    .7554461
         27  |   .7080731   .0640543    11.05   0.000     .5825187    .8336275
         28  |   .9946097   .0610243    16.30   0.000     .8749945    1.114225
         29  |   1.104509   .0582648    18.96   0.000     .9903025    1.218715
         30  |   1.200079   .0577062    20.80   0.000     1.086968     1.31319
         31  |   1.326388   .0568086    23.35   0.000     1.215035     1.43774
         32  |   1.514849   .0559286    27.09   0.000     1.405222    1.624476
         33  |   1.607652   .0556037    28.91   0.000     1.498662    1.716642
         34  |   1.728383   .0555413    31.12   0.000     1.619515    1.837251
         35  |   1.826233   .0568068    32.15   0.000     1.714885    1.937582
         36  |   1.948422    .056934    34.22   0.000     1.836824    2.060019
         37  |   2.041244   .0575457    35.47   0.000     1.928447    2.154041
         38  |   2.103481    .057115    36.83   0.000     1.991528    2.215433
         39  |   2.102722   .0581349    36.17   0.000      1.98877    2.216673
         40  |   2.084795   .0598696    34.82   0.000     1.967443    2.202147
         41  |   2.094646   .0604402    34.66   0.000     1.976176    2.213117
         42  |   2.103126   .0608581    34.56   0.000     1.983836    2.222415
         43  |   2.136942   .0624369    34.23   0.000     2.014558    2.259326
         44  |   2.109979   .0634466    33.26   0.000     1.985615    2.234342
         45  |   2.085201   .0642184    32.47   0.000     1.959325    2.211078
         46  |   2.056883   .0656599    31.33   0.000     1.928182    2.185585
         47  |    2.08853   .0681579    30.64   0.000     1.954932    2.222128
         48  |   2.163405   .0683012    31.67   0.000     2.029526    2.297284
         49  |   2.108949   .0690604    30.54   0.000     1.973582    2.244317
         50  |   2.138671   .0704476    30.36   0.000     2.000585    2.276757
             |
     age_cat |
          1  |    .124737   .0397722     3.14   0.002     .0467785    .2026955
          2  |   .2682463   .0415864     6.45   0.000     .1867317    .3497609
          3  |   .4002779   .0428687     9.34   0.000     .3162499     .484306
          4  |   .5480475   .0439213    12.48   0.000     .4619563    .6341388
          5  |    .640116   .0447758    14.30   0.000     .5523498    .7278823
          6  |   .7080726   .0456642    15.51   0.000     .6185651    .7975801
          7  |   .7867038   .0464969    16.92   0.000      .695564    .8778436
          8  |   .8659556   .0472118    18.34   0.000     .7734145    .9584967
          9  |   .9406405   .0477486    19.70   0.000     .8470473    1.034234
         10  |   .9848223   .0485241    20.30   0.000     .8897089    1.079936
         11  |   1.038403   .0494895    20.98   0.000     .9413979    1.135409
         12  |   1.103346   .0501999    21.98   0.000     1.004947    1.201744
         13  |   1.136803   .0514627    22.09   0.000     1.035929    1.237676
         14  |   1.186499   .0526052    22.55   0.000     1.083387    1.289612
         15  |   1.242543   .0536736    23.15   0.000     1.137336     1.34775
         16  |   1.265136   .0553281    22.87   0.000     1.156686    1.373586
         17  |   1.279866   .0566537    22.59   0.000     1.168818    1.390914
         18  |   1.321887   .0579777    22.80   0.000     1.208243     1.43553
         19  |   1.342323   .0597698    22.46   0.000     1.225167    1.459479
         20  |   1.403766   .0635329    22.10   0.000     1.279233    1.528298
         25  |   1.284125   .0797274    16.11   0.000      1.12785    1.440401
         30  |   1.165927   .0957222    12.18   0.000     .9782994    1.353554
         40  |   1.025759   .1009373    10.16   0.000     .8279095    1.223609
         50  |    .802878   .1314748     6.11   0.000     .5451707    1.060585
             |
       _cons |   3.447802   .0545255    63.23   0.000     3.340925    3.554679
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    233,110
Group variable: id                              Number of groups  =     14,661

R-sq:                                           Obs per group:
     within  = 0.2051                                         min =          1
     between = 0.0745                                         avg =       15.9
     overall = 0.0978                                         max =        140

                                                F(75,14660)       =      84.62
corr(u_i, Xb)  = 0.0034                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0079088   .0494755     0.16   0.873    -.0890694    .1048869
       expat |   .0060098   .0320034     0.19   0.851    -.0567208    .0687404
             |
    ind_year |
          2  |    .157592   .0368602     4.28   0.000     .0853414    .2298426
          3  |   .8033391   .0451012    17.81   0.000      .714935    .8917432
          4  |   .9674155   .0507113    19.08   0.000      .868015    1.066816
          5  |   1.120384   .0554084    20.22   0.000     1.011777    1.228992
          6  |    1.36792   .0598185    22.87   0.000     1.250669    1.485172
          7  |   1.643852   .0648374    25.35   0.000     1.516763    1.770942
          8  |   1.852658   .0700625    26.44   0.000     1.715327     1.98999
          9  |   1.987385   .0754418    26.34   0.000     1.839509     2.13526
         10  |   2.131944   .0814036    26.19   0.000     1.972383    2.291505
         11  |   2.288854   .0870122    26.30   0.000     2.118299    2.459408
         12  |    2.34356   .0930679    25.18   0.000     2.161136    2.525985
         13  |   2.398119   .0993593    24.14   0.000     2.203362    2.592876
         14  |    2.41127   .1056392    22.83   0.000     2.204204    2.618336
         15  |   2.379304   .1122287    21.20   0.000     2.159321    2.599286
         16  |   2.419271   .1185698    20.40   0.000     2.186859    2.651682
         17  |   2.445903   .1254606    19.50   0.000     2.199984    2.691822
         18  |   2.444939   .1321211    18.51   0.000     2.185965    2.703913
         19  |    2.39841   .1385307    17.31   0.000     2.126873    2.669948
         20  |   2.391048   .1448085    16.51   0.000     2.107205    2.674891
         21  |   2.413181   .1502825    16.06   0.000     2.118608    2.707753
         22  |   2.448475   .1558144    15.71   0.000     2.143059     2.75389
         23  |   2.568991   .1614131    15.92   0.000     2.252601    2.885381
         24  |    2.37113    .167758    14.13   0.000     2.042303    2.699957
         25  |   2.358151   .1741998    13.54   0.000     2.016698    2.699605
         26  |   .4729248   .0863834     5.47   0.000     .3036024    .6422471
         27  |   .5987231   .0764561     7.83   0.000     .4488596    .7485866
         28  |   .9069764   .0716046    12.67   0.000     .7666225     1.04733
         29  |   1.043494   .0705933    14.78   0.000     .9051226    1.181866
         30  |   1.161755   .0718507    16.17   0.000     1.020919    1.302592
         31  |     1.3236   .0738461    17.92   0.000     1.178852    1.468347
         32  |   1.536828   .0763434    20.13   0.000     1.387185    1.686471
         33  |   1.693696   .0805809    21.02   0.000     1.535748    1.851645
         34  |   1.820493   .0848507    21.46   0.000     1.654175    1.986811
         35  |   1.938524   .0897331    21.60   0.000     1.762636    2.114412
         36  |   2.067119    .094932    21.77   0.000     1.881041    2.253198
         37  |   2.182834   .1002407    21.78   0.000      1.98635    2.379318
         38  |   2.263894   .1053579    21.49   0.000      2.05738    2.470409
         39  |    2.27601    .111224    20.46   0.000     2.057997    2.494023
         40  |   2.281423   .1169549    19.51   0.000     2.052177    2.510669
         41  |   2.312415   .1233828    18.74   0.000     2.070569    2.554261
         42  |   2.379513   .1299907    18.31   0.000     2.124715    2.634311
         43  |   2.419265   .1368701    17.68   0.000     2.150982    2.687548
         44  |   2.395836   .1437858    16.66   0.000     2.113998    2.677674
         45  |   2.413834   .1500193    16.09   0.000     2.119777    2.707891
         46  |   2.411938   .1564592    15.42   0.000     2.105258    2.718617
         47  |   2.448493   .1619476    15.12   0.000     2.131055    2.765931
         48  |   2.532221   .1669304    15.17   0.000     2.205017    2.859426
         49  |   2.452784   .1732462    14.16   0.000       2.1132    2.792369
         50  |   2.469239   .1786196    13.82   0.000     2.119122    2.819356
             |
     age_cat |
          1  |   .0911184   .0314495     2.90   0.004     .0294734    .1527633
          2  |   .1508539   .0355874     4.24   0.000     .0810982    .2206096
          3  |   .1715272   .0399779     4.29   0.000     .0931654     .249889
          4  |   .2031046   .0449732     4.52   0.000     .1149514    .2912577
          5  |    .203572    .050416     4.04   0.000     .1047504    .3023937
          6  |   .1856963   .0562662     3.30   0.001     .0754074    .2959852
          7  |   .1947065   .0623294     3.12   0.002     .0725331      .31688
          8  |   .2010096   .0687207     2.93   0.003     .0663084    .3357109
          9  |    .212654     .07508     2.83   0.005     .0654878    .3598202
         10  |   .2102403   .0816658     2.57   0.010     .0501651    .3703154
         11  |   .2090872   .0883263     2.37   0.018     .0359565    .3822179
         12  |   .2113927   .0948673     2.23   0.026     .0254409    .3973446
         13  |   .2073189   .1015736     2.04   0.041     .0082218    .4064161
         14  |   .2210168   .1083887     2.04   0.041     .0085614    .4334722
         15  |   .2302158   .1152665     2.00   0.046      .004279    .4561526
         16  |   .2292286   .1225352     1.87   0.061    -.0109559    .4694131
         17  |   .2270262   .1297109     1.75   0.080    -.0272234    .4812758
         18  |    .242665   .1368089     1.77   0.076    -.0254976    .5108276
         19  |   .2291246   .1441938     1.59   0.112    -.0535135    .5117626
         20  |   .2110472   .1586763     1.33   0.184    -.0999783    .5220727
         25  |   .1653794   .1831601     0.90   0.367    -.1936373    .5243962
         30  |   .3069342   .2277531     1.35   0.178    -.1394905    .7533588
         40  |   .4856612   .2698897     1.80   0.072    -.0433567    1.014679
         50  |   .4779879   .3090915     1.55   0.122    -.1278704    1.083846
             |
       _cons |   3.820137    .057886    65.99   0.000     3.706673      3.9336
-------------+----------------------------------------------------------------
     sigma_u |  1.7337578
     sigma_e |  .87350936
         rho |  .79755059   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2051209221417067

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    233,110
Group variable: id                              Number of groups  =     14,661

R-sq:                                           Obs per group:
     within  = 0.2051                                         min =          1
     between = 0.0745                                         avg =       15.9
     overall = 0.0978                                         max =        140

                                                F(75,14660)       =      84.62
corr(u_i, Xb)  = 0.0034                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0079088   .0494755     0.16   0.873    -.0890694    .1048869
       expat |   .0060098   .0320034     0.19   0.851    -.0567208    .0687404
             |
    ind_year |
          2  |    .157592   .0368602     4.28   0.000     .0853414    .2298426
          3  |   .8033391   .0451012    17.81   0.000      .714935    .8917432
          4  |   .9674155   .0507113    19.08   0.000      .868015    1.066816
          5  |   1.120384   .0554084    20.22   0.000     1.011777    1.228992
          6  |    1.36792   .0598185    22.87   0.000     1.250669    1.485172
          7  |   1.643852   .0648374    25.35   0.000     1.516763    1.770942
          8  |   1.852658   .0700625    26.44   0.000     1.715327     1.98999
          9  |   1.987385   .0754418    26.34   0.000     1.839509     2.13526
         10  |   2.131944   .0814036    26.19   0.000     1.972383    2.291505
         11  |   2.288854   .0870122    26.30   0.000     2.118299    2.459408
         12  |    2.34356   .0930679    25.18   0.000     2.161136    2.525985
         13  |   2.398119   .0993593    24.14   0.000     2.203362    2.592876
         14  |    2.41127   .1056392    22.83   0.000     2.204204    2.618336
         15  |   2.379304   .1122287    21.20   0.000     2.159321    2.599286
         16  |   2.419271   .1185698    20.40   0.000     2.186859    2.651682
         17  |   2.445903   .1254606    19.50   0.000     2.199984    2.691822
         18  |   2.444939   .1321211    18.51   0.000     2.185965    2.703913
         19  |    2.39841   .1385307    17.31   0.000     2.126873    2.669948
         20  |   2.391048   .1448085    16.51   0.000     2.107205    2.674891
         21  |   2.413181   .1502825    16.06   0.000     2.118608    2.707753
         22  |   2.448475   .1558144    15.71   0.000     2.143059     2.75389
         23  |   2.568991   .1614131    15.92   0.000     2.252601    2.885381
         24  |    2.37113    .167758    14.13   0.000     2.042303    2.699957
         25  |   2.358151   .1741998    13.54   0.000     2.016698    2.699605
         26  |   .4729248   .0863834     5.47   0.000     .3036024    .6422471
         27  |   .5987231   .0764561     7.83   0.000     .4488596    .7485866
         28  |   .9069764   .0716046    12.67   0.000     .7666225     1.04733
         29  |   1.043494   .0705933    14.78   0.000     .9051226    1.181866
         30  |   1.161755   .0718507    16.17   0.000     1.020919    1.302592
         31  |     1.3236   .0738461    17.92   0.000     1.178852    1.468347
         32  |   1.536828   .0763434    20.13   0.000     1.387185    1.686471
         33  |   1.693696   .0805809    21.02   0.000     1.535748    1.851645
         34  |   1.820493   .0848507    21.46   0.000     1.654175    1.986811
         35  |   1.938524   .0897331    21.60   0.000     1.762636    2.114412
         36  |   2.067119    .094932    21.77   0.000     1.881041    2.253198
         37  |   2.182834   .1002407    21.78   0.000      1.98635    2.379318
         38  |   2.263894   .1053579    21.49   0.000      2.05738    2.470409
         39  |    2.27601    .111224    20.46   0.000     2.057997    2.494023
         40  |   2.281423   .1169549    19.51   0.000     2.052177    2.510669
         41  |   2.312415   .1233828    18.74   0.000     2.070569    2.554261
         42  |   2.379513   .1299907    18.31   0.000     2.124715    2.634311
         43  |   2.419265   .1368701    17.68   0.000     2.150982    2.687548
         44  |   2.395836   .1437858    16.66   0.000     2.113998    2.677674
         45  |   2.413834   .1500193    16.09   0.000     2.119777    2.707891
         46  |   2.411938   .1564592    15.42   0.000     2.105258    2.718617
         47  |   2.448493   .1619476    15.12   0.000     2.131055    2.765931
         48  |   2.532221   .1669304    15.17   0.000     2.205017    2.859426
         49  |   2.452784   .1732462    14.16   0.000       2.1132    2.792369
         50  |   2.469239   .1786196    13.82   0.000     2.119122    2.819356
             |
     age_cat |
          1  |   .0911184   .0314495     2.90   0.004     .0294734    .1527633
          2  |   .1508539   .0355874     4.24   0.000     .0810982    .2206096
          3  |   .1715272   .0399779     4.29   0.000     .0931654     .249889
          4  |   .2031046   .0449732     4.52   0.000     .1149514    .2912577
          5  |    .203572    .050416     4.04   0.000     .1047504    .3023937
          6  |   .1856963   .0562662     3.30   0.001     .0754074    .2959852
          7  |   .1947065   .0623294     3.12   0.002     .0725331      .31688
          8  |   .2010096   .0687207     2.93   0.003     .0663084    .3357109
          9  |    .212654     .07508     2.83   0.005     .0654878    .3598202
         10  |   .2102403   .0816658     2.57   0.010     .0501651    .3703154
         11  |   .2090872   .0883263     2.37   0.018     .0359565    .3822179
         12  |   .2113927   .0948673     2.23   0.026     .0254409    .3973446
         13  |   .2073189   .1015736     2.04   0.041     .0082218    .4064161
         14  |   .2210168   .1083887     2.04   0.041     .0085614    .4334722
         15  |   .2302158   .1152665     2.00   0.046      .004279    .4561526
         16  |   .2292286   .1225352     1.87   0.061    -.0109559    .4694131
         17  |   .2270262   .1297109     1.75   0.080    -.0272234    .4812758
         18  |    .242665   .1368089     1.77   0.076    -.0254976    .5108276
         19  |   .2291246   .1441938     1.59   0.112    -.0535135    .5117626
         20  |   .2110472   .1586763     1.33   0.184    -.0999783    .5220727
         25  |   .1653794   .1831601     0.90   0.367    -.1936373    .5243962
         30  |   .3069342   .2277531     1.35   0.178    -.1394905    .7533588
         40  |   .4856612   .2698897     1.80   0.072    -.0433567    1.014679
         50  |   .4779879   .3090915     1.55   0.122    -.1278704    1.083846
             |
       _cons |   3.820137    .057886    65.99   0.000     3.706673      3.9336
-------------+----------------------------------------------------------------
     sigma_u |  1.7337578
     sigma_e |  .87350936
         rho |  .79755059   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.1718                         Obs per group: min =         1
       between = 0.0596                                        avg =       9.0
       overall = 0.0746                                        max =        25

                                                F(78,14660)        =     79.91
corr(u_i, Xb)  = -0.0393                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0214498   .0451317     0.48   0.635     -.067014    .1099136
      during |  -.0003096   .0124348    -0.02   0.980    -.0246834    .0240643
       after |  -.0195559   .0230028    -0.85   0.395    -.0646443    .0255324
during_expat |  -.0867436   .0504872    -1.72   0.086    -.1857048    .0122176
 after_expat |  -.1634289   .0651955    -2.51   0.012    -.2912202   -.0356376
             |
    ind_year |
          2  |   .1596708   .0348051     4.59   0.000     .0914484    .2278932
          3  |   .8123607    .042962    18.91   0.000     .7281497    .8965717
          4  |   .9914793   .0489227    20.27   0.000     .8955846    1.087374
          5  |   1.165381   .0540248    21.57   0.000     1.059486    1.271276
          6  |   1.410057   .0591691    23.83   0.000     1.294078    1.526035
          7  |   1.697383   .0644839    26.32   0.000     1.570986    1.823779
          8  |    1.90693   .0698579    27.30   0.000     1.769999     2.04386
          9  |   2.054223   .0752486    27.30   0.000     1.906727     2.20172
         10  |   2.196766   .0814763    26.96   0.000     2.037062    2.356469
         11  |   2.353242   .0873541    26.94   0.000     2.182017    2.524467
         12  |   2.416878   .0936041    25.82   0.000     2.233402    2.600354
         13  |   2.479283    .099988    24.80   0.000     2.283294    2.675272
         14  |   2.500225   .1063893    23.50   0.000     2.291689    2.708761
         15  |   2.476189   .1128825    21.94   0.000     2.254925    2.697453
         16  |   2.536226   .1190641    21.30   0.000     2.302845    2.769606
         17  |   2.566844   .1256831    20.42   0.000     2.320489    2.813199
         18  |   2.580608    .132116    19.53   0.000     2.321644    2.839572
         19  |   2.543136   .1385429    18.36   0.000     2.271575    2.814698
         20  |   2.544925   .1447875    17.58   0.000     2.261123    2.828726
         21  |   2.575272   .1502427    17.14   0.000     2.280778    2.869767
         22  |   2.615002   .1556318    16.80   0.000     2.309944    2.920059
         23  |   2.731404   .1609903    16.97   0.000     2.415843    3.046965
         24  |   2.532482   .1672487    15.14   0.000     2.204653    2.860311
         25  |    2.52507   .1733992    14.56   0.000     2.185185    2.864954
         26  |   .4674276   .0835486     5.59   0.000     .3036619    .6311934
         27  |   .5851782   .0745117     7.85   0.000      .439126    .7312305
         28  |   .9072643   .0698633    12.99   0.000     .7703235    1.044205
         29  |   1.070579   .0690817    15.50   0.000     .9351703    1.205988
         30  |   1.190149   .0704073    16.90   0.000     1.052142    1.328156
         31  |   1.355722   .0729238    18.59   0.000     1.212782    1.498662
         32  |   1.582082   .0754048    20.98   0.000      1.43428    1.729885
         33  |   1.743039   .0795425    21.91   0.000     1.587126    1.898953
         34  |   1.873775   .0840663    22.29   0.000     1.708994    2.038555
         35  |   1.992919   .0891654    22.35   0.000     1.818143    2.167694
         36  |   2.128722   .0944935    22.53   0.000     1.943503    2.313941
         37  |   2.259915   .0999186    22.62   0.000     2.064062    2.455768
         38  |   2.334627   .1055008    22.13   0.000     2.127832    2.541422
         39  |    2.36482   .1112864    21.25   0.000     2.146684    2.582955
         40  |   2.380753    .117127    20.33   0.000     2.151169    2.610336
         41  |   2.412721   .1232506    19.58   0.000     2.171135    2.654308
         42  |   2.496613   .1298539    19.23   0.000     2.242083    2.751143
         43  |   2.548617   .1365233    18.67   0.000     2.281014     2.81622
         44  |   2.538933   .1432493    17.72   0.000     2.258146     2.81972
         45  |     2.5706   .1494132    17.20   0.000     2.277732    2.863469
         46  |   2.573315   .1557112    16.53   0.000     2.268102    2.878529
         47  |   2.611626   .1611578    16.21   0.000     2.295736    2.927516
         48  |   2.692856   .1661197    16.21   0.000     2.367241    3.018472
         49  |   2.618717   .1721269    15.21   0.000     2.281326    2.956107
         50  |   2.639385   .1774325    14.88   0.000     2.291595    2.987175
             |
     age_cat |
          1  |   .0915412   .0295973     3.09   0.002     .0335269    .1495556
          2  |   .1383016    .033915     4.08   0.000     .0718239    .2047792
          3  |   .1499958   .0383848     3.91   0.000     .0747569    .2252348
          4  |   .1721697   .0434879     3.96   0.000     .0869279    .2574116
          5  |   .1639247   .0490332     3.34   0.001     .0678134     .260036
          6  |   .1381595   .0549143     2.52   0.012     .0305207    .2457984
          7  |   .1400865   .0610382     2.30   0.022     .0204439     .259729
          8  |   .1360751   .0673992     2.02   0.044     .0039641    .2681861
          9  |   .1401293   .0737371     1.90   0.057    -.0044047    .2846632
         10  |   .1329752   .0802482     1.66   0.098    -.0243214    .2902718
         11  |   .1266605   .0868712     1.46   0.145    -.0436181    .2969391
         12  |   .1209862   .0932668     1.30   0.195    -.0618285     .303801
         13  |    .104987   .0998803     1.05   0.293     -.090791     .300765
         14  |   .1091472   .1065774     1.02   0.306    -.0997578    .3180522
         15  |   .1109845   .1133339     0.98   0.327    -.1111641    .3331332
         16  |   .0939886   .1203534     0.78   0.435    -.1419192    .3298964
         17  |   .0842524   .1272785     0.66   0.508    -.1652295    .3337343
         18  |   .0913024   .1341003     0.68   0.496    -.1715511    .3541558
         19  |   .0721902    .141243     0.51   0.609    -.2046638    .3490443
         20  |   .0358648    .154999     0.23   0.817    -.2679528    .3396824
         25  |  -.0297631    .177706    -0.17   0.867    -.3780892     .318563
         30  |   .0396869   .2173202     0.18   0.855    -.3862879    .4656618
         40  |   .1999936   .2507883     0.80   0.425    -.2915831    .6915702
         50  |   .2737366    .274716     1.00   0.319    -.2647413    .8122145
             |
       _cons |   3.819852   .0570915    66.91   0.000     3.707945    3.931758
-------------+----------------------------------------------------------------
     sigma_u |  1.7079634
     sigma_e |  .88376949
         rho |  .78880236   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1717722812395722

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.1718                                         min =          1
     between = 0.0596                                         avg =        9.0
     overall = 0.0746                                         max =         25

                                                F(78,14660)       =      79.91
corr(u_i, Xb)  = -0.0393                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0214498   .0451317     0.48   0.635     -.067014    .1099136
      during |  -.0003096   .0124348    -0.02   0.980    -.0246834    .0240643
       after |  -.0195559   .0230028    -0.85   0.395    -.0646443    .0255324
during_expat |  -.0867436   .0504872    -1.72   0.086    -.1857048    .0122176
 after_expat |  -.1634289   .0651955    -2.51   0.012    -.2912202   -.0356376
             |
    ind_year |
          2  |   .1596708   .0348051     4.59   0.000     .0914484    .2278932
          3  |   .8123607    .042962    18.91   0.000     .7281497    .8965717
          4  |   .9914793   .0489227    20.27   0.000     .8955846    1.087374
          5  |   1.165381   .0540248    21.57   0.000     1.059486    1.271276
          6  |   1.410057   .0591691    23.83   0.000     1.294078    1.526035
          7  |   1.697383   .0644839    26.32   0.000     1.570986    1.823779
          8  |    1.90693   .0698579    27.30   0.000     1.769999     2.04386
          9  |   2.054223   .0752486    27.30   0.000     1.906727     2.20172
         10  |   2.196766   .0814763    26.96   0.000     2.037062    2.356469
         11  |   2.353242   .0873541    26.94   0.000     2.182017    2.524467
         12  |   2.416878   .0936041    25.82   0.000     2.233402    2.600354
         13  |   2.479283    .099988    24.80   0.000     2.283294    2.675272
         14  |   2.500225   .1063893    23.50   0.000     2.291689    2.708761
         15  |   2.476189   .1128825    21.94   0.000     2.254925    2.697453
         16  |   2.536226   .1190641    21.30   0.000     2.302845    2.769606
         17  |   2.566844   .1256831    20.42   0.000     2.320489    2.813199
         18  |   2.580608    .132116    19.53   0.000     2.321644    2.839572
         19  |   2.543136   .1385429    18.36   0.000     2.271575    2.814698
         20  |   2.544925   .1447875    17.58   0.000     2.261123    2.828726
         21  |   2.575272   .1502427    17.14   0.000     2.280778    2.869767
         22  |   2.615002   .1556318    16.80   0.000     2.309944    2.920059
         23  |   2.731404   .1609903    16.97   0.000     2.415843    3.046965
         24  |   2.532482   .1672487    15.14   0.000     2.204653    2.860311
         25  |    2.52507   .1733992    14.56   0.000     2.185185    2.864954
         26  |   .4674276   .0835486     5.59   0.000     .3036619    .6311934
         27  |   .5851782   .0745117     7.85   0.000      .439126    .7312305
         28  |   .9072643   .0698633    12.99   0.000     .7703235    1.044205
         29  |   1.070579   .0690817    15.50   0.000     .9351703    1.205988
         30  |   1.190149   .0704073    16.90   0.000     1.052142    1.328156
         31  |   1.355722   .0729238    18.59   0.000     1.212782    1.498662
         32  |   1.582082   .0754048    20.98   0.000      1.43428    1.729885
         33  |   1.743039   .0795425    21.91   0.000     1.587126    1.898953
         34  |   1.873775   .0840663    22.29   0.000     1.708994    2.038555
         35  |   1.992919   .0891654    22.35   0.000     1.818143    2.167694
         36  |   2.128722   .0944935    22.53   0.000     1.943503    2.313941
         37  |   2.259915   .0999186    22.62   0.000     2.064062    2.455768
         38  |   2.334627   .1055008    22.13   0.000     2.127832    2.541422
         39  |    2.36482   .1112864    21.25   0.000     2.146684    2.582955
         40  |   2.380753    .117127    20.33   0.000     2.151169    2.610336
         41  |   2.412721   .1232506    19.58   0.000     2.171135    2.654308
         42  |   2.496613   .1298539    19.23   0.000     2.242083    2.751143
         43  |   2.548617   .1365233    18.67   0.000     2.281014     2.81622
         44  |   2.538933   .1432493    17.72   0.000     2.258146     2.81972
         45  |     2.5706   .1494132    17.20   0.000     2.277732    2.863469
         46  |   2.573315   .1557112    16.53   0.000     2.268102    2.878529
         47  |   2.611626   .1611578    16.21   0.000     2.295736    2.927516
         48  |   2.692856   .1661197    16.21   0.000     2.367241    3.018472
         49  |   2.618717   .1721269    15.21   0.000     2.281326    2.956107
         50  |   2.639385   .1774325    14.88   0.000     2.291595    2.987175
             |
     age_cat |
          1  |   .0915412   .0295973     3.09   0.002     .0335269    .1495556
          2  |   .1383016    .033915     4.08   0.000     .0718239    .2047792
          3  |   .1499958   .0383848     3.91   0.000     .0747569    .2252348
          4  |   .1721697   .0434879     3.96   0.000     .0869279    .2574116
          5  |   .1639247   .0490332     3.34   0.001     .0678134     .260036
          6  |   .1381595   .0549143     2.52   0.012     .0305207    .2457984
          7  |   .1400865   .0610382     2.30   0.022     .0204439     .259729
          8  |   .1360751   .0673992     2.02   0.044     .0039641    .2681861
          9  |   .1401293   .0737371     1.90   0.057    -.0044047    .2846632
         10  |   .1329752   .0802482     1.66   0.098    -.0243214    .2902718
         11  |   .1266605   .0868712     1.46   0.145    -.0436181    .2969391
         12  |   .1209862   .0932668     1.30   0.195    -.0618285     .303801
         13  |    .104987   .0998803     1.05   0.293     -.090791     .300765
         14  |   .1091472   .1065774     1.02   0.306    -.0997578    .3180522
         15  |   .1109845   .1133339     0.98   0.327    -.1111641    .3331332
         16  |   .0939886   .1203534     0.78   0.435    -.1419192    .3298964
         17  |   .0842524   .1272785     0.66   0.508    -.1652295    .3337343
         18  |   .0913024   .1341003     0.68   0.496    -.1715511    .3541558
         19  |   .0721902    .141243     0.51   0.609    -.2046638    .3490443
         20  |   .0358648    .154999     0.23   0.817    -.2679528    .3396824
         25  |  -.0297631    .177706    -0.17   0.867    -.3780892     .318563
         30  |   .0396869   .2173202     0.18   0.855    -.3862879    .4656618
         40  |   .1999936   .2507883     0.80   0.425    -.2915831    .6915702
         50  |   .2737366    .274716     1.00   0.319    -.2647413    .8122145
             |
       _cons |   3.819852   .0570915    66.91   0.000     3.707945    3.931758
-------------+----------------------------------------------------------------
     sigma_u |  1.7079634
     sigma_e |  .88376949
         rho |  .78880236   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 14660) =    0.00
            Prob > F =    0.9801

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 14660) =    1.35
            Prob > F =    0.2460

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 14660) =    2.95
            Prob > F =    0.0858

 ( 1)  during_expat = 0

       F(  1, 14660) =    2.95
            Prob > F =    0.0858
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 14660) =    2.82
            Prob > F =    0.0931

 ( 1)  after_expat = 0

       F(  1, 14660) =    6.28
            Prob > F =    0.0122
variable label was str12 now str13
(1 real change made)
(file output/figure/acquisitions_lnKL_slope.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.1718                         Obs per group: min =         1
       between = 0.0598                                        avg =       9.0
       overall = 0.0747                                        max =        25

                                                F(82,14660)        =     76.05
corr(u_i, Xb)  = -0.0396                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0213902   .0451291     0.47   0.636    -.0670684    .1098489
   during_DD |   .0027393   .0128647     0.21   0.831    -.0224771    .0279558
   during_DE |  -.0579123   .0659517    -0.88   0.380    -.1871859    .0713613
   during_ED |  -.0911874   .0572306    -1.59   0.111    -.2033666    .0209917
   during_EE |  -.1374223   .0648041    -2.12   0.034    -.2644464   -.0103981
    after_DD |   -.030663    .024197    -1.27   0.205    -.0780922    .0167663
    after_DE |  -.1159726   .0812761    -1.43   0.154     -.275284    .0433389
    after_ED |  -.1533905   .0666724    -2.30   0.021    -.2840768   -.0227043
    after_EE |  -.2527458    .083862    -3.01   0.003    -.4171258   -.0883659
             |
    ind_year |
          2  |   .1597237   .0347962     4.59   0.000     .0915188    .2279287
          3  |   .8123711   .0429346    18.92   0.000     .7282139    .8965282
          4  |    .991469   .0488679    20.29   0.000     .8956819    1.087256
          5  |   1.165379   .0539457    21.60   0.000     1.059638    1.271119
          6  |   1.410115    .059062    23.88   0.000     1.294346    1.525884
          7  |   1.697401   .0643417    26.38   0.000     1.571283    1.823519
          8  |    1.90701   .0696849    27.37   0.000     1.770419    2.043601
          9  |   2.054305    .075041    27.38   0.000     1.907216    2.201395
         10  |   2.196778    .081221    27.05   0.000     2.037575    2.355981
         11  |     2.3531   .0870478    27.03   0.000     2.182475    2.523725
         12  |   2.416589   .0932472    25.92   0.000     2.233813    2.599365
         13  |   2.478917   .0995625    24.90   0.000     2.283762    2.674072
         14  |   2.499673    .105913    23.60   0.000     2.292071    2.707276
         15  |   2.475365   .1123546    22.03   0.000     2.255136    2.695594
         16  |   2.535194   .1184867    21.40   0.000     2.302945    2.767442
         17  |    2.56559   .1250269    20.52   0.000     2.320521    2.810658
         18  |   2.579152   .1313963    19.63   0.000     2.321598    2.836705
         19  |   2.541544   .1377658    18.45   0.000     2.271506    2.811583
         20  |   2.543205   .1439393    17.67   0.000     2.261066    2.825345
         21  |   2.573479   .1493244    17.23   0.000     2.280785    2.866174
         22  |    2.61301   .1546474    16.90   0.000     2.309881    2.916138
         23  |   2.729329   .1599515    17.06   0.000     2.415804    3.042854
         24  |   2.530269   .1661707    15.23   0.000     2.204554    2.855985
         25  |   2.522679   .1722615    14.64   0.000     2.185024    2.860333
         26  |   .4664604   .0835572     5.58   0.000     .3026778     .630243
         27  |   .5844574   .0745074     7.84   0.000     .4384134    .7305014
         28  |   .9068743   .0698393    12.99   0.000     .7699804    1.043768
         29  |   1.070329   .0690327    15.50   0.000     .9350163    1.205642
         30  |   1.190095   .0703334    16.92   0.000     1.052232    1.327957
         31  |   1.355735   .0728102    18.62   0.000     1.213018    1.498453
         32  |   1.582116    .075264    21.02   0.000     1.434589    1.729643
         33  |   1.743078   .0793771    21.96   0.000     1.587488    1.898667
         34  |   1.873758   .0838694    22.34   0.000     1.709363    2.038152
         35  |   1.992794   .0889327    22.41   0.000     1.818475    2.167113
         36  |   2.128344   .0942131    22.59   0.000     1.943675    2.313014
         37  |   2.259327   .0995932    22.69   0.000     2.064111    2.454542
         38  |   2.333892   .1051249    22.20   0.000     2.127834     2.53995
         39  |   2.363864   .1108514    21.32   0.000     2.146581    2.581147
         40  |   2.379611   .1166169    20.41   0.000     2.151027    2.608195
         41  |   2.411427   .1227009    19.65   0.000     2.170918    2.651936
         42  |   2.495217   .1292353    19.31   0.000     2.241899    2.748534
         43  |   2.547081   .1358358    18.75   0.000     2.280825    2.813336
         44  |   2.537303   .1425097    17.80   0.000     2.257967     2.81664
         45  |   2.568731   .1486018    17.29   0.000     2.277452    2.860009
         46  |   2.571329   .1548265    16.61   0.000      2.26785    2.874809
         47  |   2.609498   .1602069    16.29   0.000     2.295472    2.923524
         48  |   2.690618   .1651107    16.30   0.000     2.366981    3.014256
         49  |   2.616357   .1710715    15.29   0.000     2.281035    2.951679
         50  |   2.636969   .1763235    14.96   0.000     2.291352    2.982585
             |
     age_cat |
          1  |   .0916017   .0295934     3.10   0.002      .033595    .1496084
          2  |   .1383601   .0338999     4.08   0.000      .071912    .2048081
          3  |   .1501485   .0383534     3.91   0.000      .074971     .225326
          4  |   .1724446    .043439     3.97   0.000     .0872987    .2575906
          5  |   .1643483   .0489606     3.36   0.001     .0683794    .2603172
          6  |   .1387791    .054819     2.53   0.011     .0313269    .2462313
          7  |   .1409008   .0609212     2.31   0.021     .0214876    .2603141
          8  |     .13702   .0672601     2.04   0.042     .0051818    .2688583
          9  |   .1412579   .0735781     1.92   0.055    -.0029644    .2854803
         10  |   .1342893   .0800666     1.68   0.094    -.0226514      .29123
         11  |   .1281869    .086669     1.48   0.139    -.0416953    .2980692
         12  |   .1226382   .0930415     1.32   0.187    -.0597348    .3050113
         13  |   .1068045   .0996146     1.07   0.284    -.0884526    .3020616
         14  |   .1111541   .1062814     1.05   0.296    -.0971709    .3194791
         15  |   .1131136   .1130082     1.00   0.317    -.1083967    .3346239
         16  |   .0961946   .1200039     0.80   0.423    -.1390281    .3314173
         17  |   .0866762   .1269142     0.68   0.495    -.1620916     .335444
         18  |    .093881   .1337265     0.70   0.483    -.1682398    .3560018
         19  |   .0749118   .1408387     0.53   0.595    -.2011498    .3509733
         20  |    .038889   .1545236     0.25   0.801    -.2639967    .3417747
         25  |  -.0259731   .1772131    -0.15   0.883    -.3733331    .3213868
         30  |   .0434291   .2168683     0.20   0.841      -.38166    .4685182
         40  |   .2027329   .2503417     0.81   0.418    -.2879683     .693434
         50  |   .2758155   .2744836     1.00   0.315    -.2622068    .8138379
             |
       _cons |   3.819554   .0570823    66.91   0.000     3.707665    3.931442
-------------+----------------------------------------------------------------
     sigma_u |  1.7077607
     sigma_e |  .88375648
         rho |   .7887677   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1718069875522105

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.1718                                         min =          1
     between = 0.0598                                         avg =        9.0
     overall = 0.0747                                         max =         25

                                                F(82,14660)       =      76.05
corr(u_i, Xb)  = -0.0396                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0213902   .0451291     0.47   0.636    -.0670684    .1098489
   during_DD |   .0027393   .0128647     0.21   0.831    -.0224771    .0279558
   during_DE |  -.0579123   .0659517    -0.88   0.380    -.1871859    .0713613
   during_ED |  -.0911874   .0572306    -1.59   0.111    -.2033666    .0209917
   during_EE |  -.1374223   .0648041    -2.12   0.034    -.2644464   -.0103981
    after_DD |   -.030663    .024197    -1.27   0.205    -.0780922    .0167663
    after_DE |  -.1159726   .0812761    -1.43   0.154     -.275284    .0433389
    after_ED |  -.1533905   .0666724    -2.30   0.021    -.2840768   -.0227043
    after_EE |  -.2527458    .083862    -3.01   0.003    -.4171258   -.0883659
             |
    ind_year |
          2  |   .1597237   .0347962     4.59   0.000     .0915188    .2279287
          3  |   .8123711   .0429346    18.92   0.000     .7282139    .8965282
          4  |    .991469   .0488679    20.29   0.000     .8956819    1.087256
          5  |   1.165379   .0539457    21.60   0.000     1.059638    1.271119
          6  |   1.410115    .059062    23.88   0.000     1.294346    1.525884
          7  |   1.697401   .0643417    26.38   0.000     1.571283    1.823519
          8  |    1.90701   .0696849    27.37   0.000     1.770419    2.043601
          9  |   2.054305    .075041    27.38   0.000     1.907216    2.201395
         10  |   2.196778    .081221    27.05   0.000     2.037575    2.355981
         11  |     2.3531   .0870478    27.03   0.000     2.182475    2.523725
         12  |   2.416589   .0932472    25.92   0.000     2.233813    2.599365
         13  |   2.478917   .0995625    24.90   0.000     2.283762    2.674072
         14  |   2.499673    .105913    23.60   0.000     2.292071    2.707276
         15  |   2.475365   .1123546    22.03   0.000     2.255136    2.695594
         16  |   2.535194   .1184867    21.40   0.000     2.302945    2.767442
         17  |    2.56559   .1250269    20.52   0.000     2.320521    2.810658
         18  |   2.579152   .1313963    19.63   0.000     2.321598    2.836705
         19  |   2.541544   .1377658    18.45   0.000     2.271506    2.811583
         20  |   2.543205   .1439393    17.67   0.000     2.261066    2.825345
         21  |   2.573479   .1493244    17.23   0.000     2.280785    2.866174
         22  |    2.61301   .1546474    16.90   0.000     2.309881    2.916138
         23  |   2.729329   .1599515    17.06   0.000     2.415804    3.042854
         24  |   2.530269   .1661707    15.23   0.000     2.204554    2.855985
         25  |   2.522679   .1722615    14.64   0.000     2.185024    2.860333
         26  |   .4664604   .0835572     5.58   0.000     .3026778     .630243
         27  |   .5844574   .0745074     7.84   0.000     .4384134    .7305014
         28  |   .9068743   .0698393    12.99   0.000     .7699804    1.043768
         29  |   1.070329   .0690327    15.50   0.000     .9350163    1.205642
         30  |   1.190095   .0703334    16.92   0.000     1.052232    1.327957
         31  |   1.355735   .0728102    18.62   0.000     1.213018    1.498453
         32  |   1.582116    .075264    21.02   0.000     1.434589    1.729643
         33  |   1.743078   .0793771    21.96   0.000     1.587488    1.898667
         34  |   1.873758   .0838694    22.34   0.000     1.709363    2.038152
         35  |   1.992794   .0889327    22.41   0.000     1.818475    2.167113
         36  |   2.128344   .0942131    22.59   0.000     1.943675    2.313014
         37  |   2.259327   .0995932    22.69   0.000     2.064111    2.454542
         38  |   2.333892   .1051249    22.20   0.000     2.127834     2.53995
         39  |   2.363864   .1108514    21.32   0.000     2.146581    2.581147
         40  |   2.379611   .1166169    20.41   0.000     2.151027    2.608195
         41  |   2.411427   .1227009    19.65   0.000     2.170918    2.651936
         42  |   2.495217   .1292353    19.31   0.000     2.241899    2.748534
         43  |   2.547081   .1358358    18.75   0.000     2.280825    2.813336
         44  |   2.537303   .1425097    17.80   0.000     2.257967     2.81664
         45  |   2.568731   .1486018    17.29   0.000     2.277452    2.860009
         46  |   2.571329   .1548265    16.61   0.000      2.26785    2.874809
         47  |   2.609498   .1602069    16.29   0.000     2.295472    2.923524
         48  |   2.690618   .1651107    16.30   0.000     2.366981    3.014256
         49  |   2.616357   .1710715    15.29   0.000     2.281035    2.951679
         50  |   2.636969   .1763235    14.96   0.000     2.291352    2.982585
             |
     age_cat |
          1  |   .0916017   .0295934     3.10   0.002      .033595    .1496084
          2  |   .1383601   .0338999     4.08   0.000      .071912    .2048081
          3  |   .1501485   .0383534     3.91   0.000      .074971     .225326
          4  |   .1724446    .043439     3.97   0.000     .0872987    .2575906
          5  |   .1643483   .0489606     3.36   0.001     .0683794    .2603172
          6  |   .1387791    .054819     2.53   0.011     .0313269    .2462313
          7  |   .1409008   .0609212     2.31   0.021     .0214876    .2603141
          8  |     .13702   .0672601     2.04   0.042     .0051818    .2688583
          9  |   .1412579   .0735781     1.92   0.055    -.0029644    .2854803
         10  |   .1342893   .0800666     1.68   0.094    -.0226514      .29123
         11  |   .1281869    .086669     1.48   0.139    -.0416953    .2980692
         12  |   .1226382   .0930415     1.32   0.187    -.0597348    .3050113
         13  |   .1068045   .0996146     1.07   0.284    -.0884526    .3020616
         14  |   .1111541   .1062814     1.05   0.296    -.0971709    .3194791
         15  |   .1131136   .1130082     1.00   0.317    -.1083967    .3346239
         16  |   .0961946   .1200039     0.80   0.423    -.1390281    .3314173
         17  |   .0866762   .1269142     0.68   0.495    -.1620916     .335444
         18  |    .093881   .1337265     0.70   0.483    -.1682398    .3560018
         19  |   .0749118   .1408387     0.53   0.595    -.2011498    .3509733
         20  |    .038889   .1545236     0.25   0.801    -.2639967    .3417747
         25  |  -.0259731   .1772131    -0.15   0.883    -.3733331    .3213868
         30  |   .0434291   .2168683     0.20   0.841      -.38166    .4685182
         40  |   .2027329   .2503417     0.81   0.418    -.2879683     .693434
         50  |   .2758155   .2744836     1.00   0.315    -.2622068    .8138379
             |
       _cons |   3.819554   .0570823    66.91   0.000     3.707665    3.931442
-------------+----------------------------------------------------------------
     sigma_u |  1.7077607
     sigma_e |  .88375648
         rho |   .7887677   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. local fname = e(depvar)

. local title : variable label `fname'

. 
. slopegraph, ///
>         from(0 0 0 0 1 _b[during_DE] 1 _b[during_DE]) ///
>         to(1 _b[during_DD] 1 _b[during_DE] 2 _b[during_ED]+_b[during_DE] 2 _b[during_EE]+_b[during_DE]) ///
>         style(p1 p2 p1 p2) ///
>         label(Local-Local Local-Expat Expat-Local Expat-Expat) ///
>         width_test(during_DD during_DE during_ED during_EE) ///
>         star_test(1==1 during_DE==during_DD 1==1 during_EE==during_ED) ///
>         connect(stepstair) ///
>         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(.5) plotregion(style(none)) x
> size(16) ysize(10))
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str11
(1 real change made)

 ( 1)  during_DD = 0

       F(  1, 14660) =    0.05
            Prob > F =    0.8314

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_DE = 0

       F(  1, 14660) =    0.77
            Prob > F =    0.3799

 ( 1)  - during_DD + during_DE = 0

       F(  1, 14660) =    0.81
            Prob > F =    0.3670
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_ED = 0

       F(  1, 14660) =    2.54
            Prob > F =    0.1111

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_EE = 0

       F(  1, 14660) =    4.50
            Prob > F =    0.0340

 ( 1)  - during_ED + during_EE = 0

       F(  1, 14660) =    0.30
            Prob > F =    0.5847

. 
. graph export output/figure/`fname'_tree.png, width(1600) replace
(file output/figure/lnKL_tree.png written in PNG format)

. 
end of do-file
(sum of wgt is 117,753.451417632)

Linear regression                               Number of obs     =    318,157
                                                F(75, 18788)      =     191.87
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2072
                                                Root MSE          =     1.1477

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .6457123   .0232166    27.81   0.000     .6002056     .691219
       expat |  -.0916645    .027008    -3.39   0.001    -.1446026   -.0387264
             |
    ind_year |
          2  |   .1377778   .0285468     4.83   0.000     .0818235    .1937321
          3  |   .3497909   .0325722    10.74   0.000     .2859466    .4136353
          4  |   .5722686     .03374    16.96   0.000     .5061352    .6384021
          5  |   .7402667   .0346164    21.38   0.000     .6724155     .808118
          6  |   .9327921    .035531    26.25   0.000     .8631481    1.002436
          7  |   1.026118    .036058    28.46   0.000     .9554409    1.096795
          8  |   1.092681   .0360894    30.28   0.000     1.021942    1.163419
          9  |   1.196564   .0361299    33.12   0.000     1.125746    1.267382
         10  |   1.292996   .0364343    35.49   0.000     1.221581     1.36441
         11  |   1.295629   .0369973    35.02   0.000     1.223111    1.368147
         12  |   1.308718   .0373454    35.04   0.000     1.235517    1.381918
         13  |   1.328191   .0375185    35.40   0.000     1.254652    1.401731
         14  |    1.33908   .0380337    35.21   0.000     1.264531     1.41363
         15  |   1.391441   .0382215    36.40   0.000     1.316524    1.466359
         16  |   1.401056   .0380136    36.86   0.000     1.326546    1.475566
         17  |   1.434664   .0383167    37.44   0.000      1.35956    1.509768
         18  |   1.352735   .0387725    34.89   0.000     1.276737    1.428733
         19  |   1.369503   .0387173    35.37   0.000     1.293614    1.445393
         20  |   1.416043   .0393062    36.03   0.000     1.338999    1.493087
         21  |   1.416818   .0400098    35.41   0.000     1.338395    1.495241
         22  |   1.435705   .0405184    35.43   0.000     1.356286    1.515125
         23  |   1.493061   .0406199    36.76   0.000     1.413442    1.572679
         24  |   1.551901   .0416214    37.29   0.000     1.470319    1.633482
         25  |   1.565202   .0421537    37.13   0.000     1.482577    1.647827
         26  |   -.572471   .0465218   -12.31   0.000     -.663658   -.4812841
         27  |  -.4287805   .0432158    -9.92   0.000    -.5134874   -.3440736
         28  |  -.2446117   .0417808    -5.85   0.000    -.3265058   -.1627177
         29  |  -.0082177   .0413313    -0.20   0.842    -.0892308    .0727955
         30  |   .1346866   .0412191     3.27   0.001     .0538934    .2154799
         31  |   .2797094   .0407728     6.86   0.000     .1997911    .3596277
         32  |   .4156819   .0399413    10.41   0.000     .3373934    .4939703
         33  |    .459107   .0394935    11.62   0.000     .3816963    .5365178
         34  |   .5939348   .0399499    14.87   0.000     .5156293    .6722402
         35  |    .666135   .0397495    16.76   0.000     .5882225    .7440476
         36  |   .7351306   .0396599    18.54   0.000     .6573937    .8128675
         37  |   .7979847    .040151    19.87   0.000     .7192851    .8766844
         38  |   .8751768   .0401385    21.80   0.000     .7965017    .9538519
         39  |   .9303004   .0404258    23.01   0.000     .8510622    1.009539
         40  |   1.016052   .0413993    24.54   0.000     .9349054    1.097198
         41  |   1.077484   .0410097    26.27   0.000     .9971008    1.157866
         42  |   1.140483   .0409934    27.82   0.000     1.060132    1.220834
         43  |   1.133259   .0416864    27.19   0.000      1.05155    1.214968
         44  |   1.177237   .0421942    27.90   0.000     1.094532    1.259941
         45  |   1.234974   .0428914    28.79   0.000     1.150903    1.319045
         46  |    1.24998   .0432308    28.91   0.000     1.165244    1.334716
         47  |     1.2751   .0436276    29.23   0.000     1.189586    1.360614
         48  |    1.34152   .0437782    30.64   0.000     1.255711     1.42733
         49  |   1.393803   .0450526    30.94   0.000     1.305496     1.48211
         50  |    1.43168   .0449087    31.88   0.000     1.343655    1.519705
             |
     age_cat |
          1  |   .3210159   .0240112    13.37   0.000     .2739518    .3680801
          2  |    .398474   .0248018    16.07   0.000     .3498602    .4470878
          3  |   .4530363   .0254579    17.80   0.000     .4031366     .502936
          4  |   .4937781   .0261189    18.90   0.000     .4425826    .5449736
          5  |   .5332606    .026674    19.99   0.000     .4809772    .5855441
          6  |   .5583245   .0272344    20.50   0.000     .5049426    .6117064
          7  |   .5960106   .0277857    21.45   0.000     .5415482     .650473
          8  |    .617329   .0282215    21.87   0.000     .5620123    .6726457
          9  |   .6591891   .0287898    22.90   0.000     .6027585    .7156198
         10  |   .6704847   .0292558    22.92   0.000     .6131408    .7278287
         11  |   .7044957   .0298949    23.57   0.000     .6458991    .7630923
         12  |   .7220172   .0305857    23.61   0.000     .6620664     .781968
         13  |   .7473079   .0312187    23.94   0.000     .6861164    .8084994
         14  |    .775155   .0317417    24.42   0.000     .7129383    .8373716
         15  |   .8025709    .032516    24.68   0.000     .7388366    .8663053
         16  |   .8179868   .0331226    24.70   0.000     .7530635    .8829101
         17  |   .8220339    .034012    24.17   0.000     .7553673    .8887006
         18  |   .8376308   .0346413    24.18   0.000     .7697306    .9055309
         19  |   .8388257   .0356944    23.50   0.000     .7688614      .90879
         20  |   .8472166    .038046    22.27   0.000     .7726429    .9217902
         25  |   .7839238   .0481972    16.26   0.000     .6894529    .8783947
         30  |   .2197069   .0634221     3.46   0.001     .0953938      .34402
         40  |   .1420336   .0561079     2.53   0.011     .0320569    .2520102
         50  |   .3517716   .0685433     5.13   0.000     .2174205    .4861227
             |
       _cons |   7.281518   .0384678   189.29   0.000     7.206117    7.356918
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    318,157
                                                F(75, 18788)      =     191.87
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2072
                                                Root MSE          =     1.1477

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .6457123   .0232166    27.81   0.000     .6002056     .691219
       expat |  -.0916645    .027008    -3.39   0.001    -.1446026   -.0387264
             |
    ind_year |
          2  |   .1377778   .0285468     4.83   0.000     .0818235    .1937321
          3  |   .3497909   .0325722    10.74   0.000     .2859466    .4136353
          4  |   .5722686     .03374    16.96   0.000     .5061352    .6384021
          5  |   .7402667   .0346164    21.38   0.000     .6724155     .808118
          6  |   .9327921    .035531    26.25   0.000     .8631481    1.002436
          7  |   1.026118    .036058    28.46   0.000     .9554409    1.096795
          8  |   1.092681   .0360894    30.28   0.000     1.021942    1.163419
          9  |   1.196564   .0361299    33.12   0.000     1.125746    1.267382
         10  |   1.292996   .0364343    35.49   0.000     1.221581     1.36441
         11  |   1.295629   .0369973    35.02   0.000     1.223111    1.368147
         12  |   1.308718   .0373454    35.04   0.000     1.235517    1.381918
         13  |   1.328191   .0375185    35.40   0.000     1.254652    1.401731
         14  |    1.33908   .0380337    35.21   0.000     1.264531     1.41363
         15  |   1.391441   .0382215    36.40   0.000     1.316524    1.466359
         16  |   1.401056   .0380136    36.86   0.000     1.326546    1.475566
         17  |   1.434664   .0383167    37.44   0.000      1.35956    1.509768
         18  |   1.352735   .0387725    34.89   0.000     1.276737    1.428733
         19  |   1.369503   .0387173    35.37   0.000     1.293614    1.445393
         20  |   1.416043   .0393062    36.03   0.000     1.338999    1.493087
         21  |   1.416818   .0400098    35.41   0.000     1.338395    1.495241
         22  |   1.435705   .0405184    35.43   0.000     1.356286    1.515125
         23  |   1.493061   .0406199    36.76   0.000     1.413442    1.572679
         24  |   1.551901   .0416214    37.29   0.000     1.470319    1.633482
         25  |   1.565202   .0421537    37.13   0.000     1.482577    1.647827
         26  |   -.572471   .0465218   -12.31   0.000     -.663658   -.4812841
         27  |  -.4287805   .0432158    -9.92   0.000    -.5134874   -.3440736
         28  |  -.2446117   .0417808    -5.85   0.000    -.3265058   -.1627177
         29  |  -.0082177   .0413313    -0.20   0.842    -.0892308    .0727955
         30  |   .1346866   .0412191     3.27   0.001     .0538934    .2154799
         31  |   .2797094   .0407728     6.86   0.000     .1997911    .3596277
         32  |   .4156819   .0399413    10.41   0.000     .3373934    .4939703
         33  |    .459107   .0394935    11.62   0.000     .3816963    .5365178
         34  |   .5939348   .0399499    14.87   0.000     .5156293    .6722402
         35  |    .666135   .0397495    16.76   0.000     .5882225    .7440476
         36  |   .7351306   .0396599    18.54   0.000     .6573937    .8128675
         37  |   .7979847    .040151    19.87   0.000     .7192851    .8766844
         38  |   .8751768   .0401385    21.80   0.000     .7965017    .9538519
         39  |   .9303004   .0404258    23.01   0.000     .8510622    1.009539
         40  |   1.016052   .0413993    24.54   0.000     .9349054    1.097198
         41  |   1.077484   .0410097    26.27   0.000     .9971008    1.157866
         42  |   1.140483   .0409934    27.82   0.000     1.060132    1.220834
         43  |   1.133259   .0416864    27.19   0.000      1.05155    1.214968
         44  |   1.177237   .0421942    27.90   0.000     1.094532    1.259941
         45  |   1.234974   .0428914    28.79   0.000     1.150903    1.319045
         46  |    1.24998   .0432308    28.91   0.000     1.165244    1.334716
         47  |     1.2751   .0436276    29.23   0.000     1.189586    1.360614
         48  |    1.34152   .0437782    30.64   0.000     1.255711     1.42733
         49  |   1.393803   .0450526    30.94   0.000     1.305496     1.48211
         50  |    1.43168   .0449087    31.88   0.000     1.343655    1.519705
             |
     age_cat |
          1  |   .3210159   .0240112    13.37   0.000     .2739518    .3680801
          2  |    .398474   .0248018    16.07   0.000     .3498602    .4470878
          3  |   .4530363   .0254579    17.80   0.000     .4031366     .502936
          4  |   .4937781   .0261189    18.90   0.000     .4425826    .5449736
          5  |   .5332606    .026674    19.99   0.000     .4809772    .5855441
          6  |   .5583245   .0272344    20.50   0.000     .5049426    .6117064
          7  |   .5960106   .0277857    21.45   0.000     .5415482     .650473
          8  |    .617329   .0282215    21.87   0.000     .5620123    .6726457
          9  |   .6591891   .0287898    22.90   0.000     .6027585    .7156198
         10  |   .6704847   .0292558    22.92   0.000     .6131408    .7278287
         11  |   .7044957   .0298949    23.57   0.000     .6458991    .7630923
         12  |   .7220172   .0305857    23.61   0.000     .6620664     .781968
         13  |   .7473079   .0312187    23.94   0.000     .6861164    .8084994
         14  |    .775155   .0317417    24.42   0.000     .7129383    .8373716
         15  |   .8025709    .032516    24.68   0.000     .7388366    .8663053
         16  |   .8179868   .0331226    24.70   0.000     .7530635    .8829101
         17  |   .8220339    .034012    24.17   0.000     .7553673    .8887006
         18  |   .8376308   .0346413    24.18   0.000     .7697306    .9055309
         19  |   .8388257   .0356944    23.50   0.000     .7688614      .90879
         20  |   .8472166    .038046    22.27   0.000     .7726429    .9217902
         25  |   .7839238   .0481972    16.26   0.000     .6894529    .8783947
         30  |   .2197069   .0634221     3.46   0.001     .0953938      .34402
         40  |   .1420336   .0561079     2.53   0.011     .0320569    .2520102
         50  |   .3517716   .0685433     5.13   0.000     .2174205    .4861227
             |
       _cons |   7.281518   .0384678   189.29   0.000     7.206117    7.356918
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    318,157
Group variable: id                              Number of groups  =     18,789

R-sq:                                           Obs per group:
     within  = 0.2837                                         min =          1
     between = 0.1711                                         avg =       16.9
     overall = 0.1468                                         max =        148

                                                F(75,18788)       =     164.34
corr(u_i, Xb)  = 0.0318                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0756736   .0214739     3.52   0.000     .0335829    .1177643
       expat |  -.0076386   .0089243    -0.86   0.392     -.025131    .0098537
             |
    ind_year |
          2  |   .1154803   .0208607     5.54   0.000     .0745914    .1563692
          3  |   .2964269   .0245808    12.06   0.000     .2482463    .3446074
          4  |   .4826947   .0261238    18.48   0.000     .4314897    .5338997
          5  |   .6546645   .0286124    22.88   0.000     .5985815    .7107475
          6  |   .8497884   .0310078    27.41   0.000     .7890102    .9105665
          7  |   .9792191   .0334078    29.31   0.000     .9137369    1.044701
          8  |   1.056911   .0358148    29.51   0.000     .9867107    1.127111
          9  |   1.167841   .0384385    30.38   0.000     1.092498    1.243184
         10  |   1.282058   .0414826    30.91   0.000     1.200748    1.363367
         11  |   1.347462   .0443435    30.39   0.000     1.260545    1.434379
         12  |   1.379259   .0474726    29.05   0.000     1.286209     1.47231
         13  |   1.427758   .0502677    28.40   0.000     1.329229    1.526288
         14  |   1.471158   .0530725    27.72   0.000     1.367131    1.575184
         15  |   1.541498   .0563543    27.35   0.000     1.431038    1.651957
         16  |   1.578421   .0590646    26.72   0.000     1.462649    1.694193
         17  |   1.629523   .0624124    26.11   0.000     1.507189    1.751857
         18  |   1.564255   .0654978    23.88   0.000     1.435873    1.692636
         19  |   1.593866    .068465    23.28   0.000     1.459669    1.728064
         20  |   1.654524   .0715031    23.14   0.000     1.514371    1.794676
         21  |     1.6748   .0743812    22.52   0.000     1.529006    1.820593
         22  |   1.724027   .0770541    22.37   0.000     1.572994     1.87506
         23  |   1.780557   .0797565    22.32   0.000     1.624227    1.936887
         24  |    1.80568   .0828766    21.79   0.000     1.643235    1.968126
         25  |   1.810879   .0856091    21.15   0.000     1.643078    1.978681
         26  |  -.3149501   .0435688    -7.23   0.000    -.4003488   -.2295513
         27  |  -.1629634   .0410647    -3.97   0.000     -.243454   -.0824729
         28  |   .0315522   .0390563     0.81   0.419    -.0450017    .1081061
         29  |   .2719979   .0392224     6.93   0.000     .1951184    .3488775
         30  |   .4368249   .0396529    11.02   0.000     .3591015    .5145482
         31  |   .6020812   .0404418    14.89   0.000     .5228116    .6813509
         32  |   .7516704    .041675    18.04   0.000     .6699836    .8333571
         33  |    .831042   .0430757    19.29   0.000     .7466098    .9154742
         34  |   .9840208   .0450483    21.84   0.000     .8957222    1.072319
         35  |   1.074149   .0468825    22.91   0.000     .9822551    1.166043
         36  |   1.126937   .0495584    22.74   0.000     1.029798    1.224076
         37  |   1.198355   .0518878    23.10   0.000      1.09665     1.30006
         38  |   1.275251   .0545543    23.38   0.000      1.16832    1.382182
         39  |   1.327169   .0571737    23.21   0.000     1.215103    1.439234
         40  |   1.430394   .0606703    23.58   0.000     1.311475    1.549313
         41  |   1.497944   .0629632    23.79   0.000      1.37453    1.621357
         42  |   1.574553   .0655138    24.03   0.000      1.44614    1.702966
         43  |   1.556207   .0686586    22.67   0.000      1.42163    1.690784
         44  |   1.616695   .0717051    22.55   0.000     1.476147    1.757244
         45  |   1.689099   .0745935    22.64   0.000     1.542889    1.835309
         46  |   1.696367   .0773515    21.93   0.000     1.544751    1.847982
         47  |   1.730757   .0797936    21.69   0.000     1.574354     1.88716
         48  |   1.798212   .0821875    21.88   0.000     1.637117    1.959306
         49  |   1.815025   .0853714    21.26   0.000      1.64769    1.982361
         50  |   1.851899   .0881487    21.01   0.000     1.679119    2.024678
             |
     age_cat |
          1  |   .2636877   .0167194    15.77   0.000     .2309162    .2964592
          2  |   .2943384    .018504    15.91   0.000      .258069    .3306079
          3  |   .2870456   .0205869    13.94   0.000     .2466934    .3273978
          4  |   .2743582    .022842    12.01   0.000     .2295858    .3191306
          5  |   .2654205   .0253369    10.48   0.000     .2157579     .315083
          6  |   .2542577   .0280759     9.06   0.000     .1992265    .3092889
          7  |   .2578037    .030991     8.32   0.000     .1970585    .3185489
          8  |   .2391347   .0339735     7.04   0.000     .1725436    .3057258
          9  |   .2364133   .0370426     6.38   0.000     .1638064    .3090202
         10  |   .2222706   .0401893     5.53   0.000     .1434959    .3010453
         11  |   .2243178   .0434034     5.17   0.000     .1392432    .3093923
         12  |   .2076569   .0467155     4.45   0.000     .1160903    .2992235
         13  |   .2038714   .0498851     4.09   0.000     .1060922    .3016507
         14  |   .2027894    .053171     3.81   0.000     .0985695    .3070093
         15  |   .2023232   .0564709     3.58   0.000     .0916352    .3130112
         16  |   .1992057   .0597222     3.34   0.001     .0821448    .3162666
         17  |   .1868291   .0632189     2.96   0.003     .0629144    .3107438
         18  |   .1875636   .0665895     2.82   0.005     .0570422    .3180849
         19  |   .1633407   .0702183     2.33   0.020     .0257065    .3009748
         20  |   .1332166   .0771507     1.73   0.084    -.0180057    .2844389
         25  |   .0927723    .088871     1.04   0.297     -.081423    .2669676
         30  |   .1264782   .1197616     1.06   0.291    -.1082653    .3612217
         40  |   .2300854   .1387573     1.66   0.097    -.0418916    .5020623
         50  |    .228674   .1551187     1.47   0.140    -.0753726    .5327206
             |
       _cons |   7.537654   .0316652   238.04   0.000     7.475588    7.599721
-------------+----------------------------------------------------------------
     sigma_u |  1.1931923
     sigma_e |  .52762703
         rho |  .83644287   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .283728818291856

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    318,157
Group variable: id                              Number of groups  =     18,789

R-sq:                                           Obs per group:
     within  = 0.2837                                         min =          1
     between = 0.1711                                         avg =       16.9
     overall = 0.1468                                         max =        148

                                                F(75,18788)       =     164.34
corr(u_i, Xb)  = 0.0318                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0756736   .0214739     3.52   0.000     .0335829    .1177643
       expat |  -.0076386   .0089243    -0.86   0.392     -.025131    .0098537
             |
    ind_year |
          2  |   .1154803   .0208607     5.54   0.000     .0745914    .1563692
          3  |   .2964269   .0245808    12.06   0.000     .2482463    .3446074
          4  |   .4826947   .0261238    18.48   0.000     .4314897    .5338997
          5  |   .6546645   .0286124    22.88   0.000     .5985815    .7107475
          6  |   .8497884   .0310078    27.41   0.000     .7890102    .9105665
          7  |   .9792191   .0334078    29.31   0.000     .9137369    1.044701
          8  |   1.056911   .0358148    29.51   0.000     .9867107    1.127111
          9  |   1.167841   .0384385    30.38   0.000     1.092498    1.243184
         10  |   1.282058   .0414826    30.91   0.000     1.200748    1.363367
         11  |   1.347462   .0443435    30.39   0.000     1.260545    1.434379
         12  |   1.379259   .0474726    29.05   0.000     1.286209     1.47231
         13  |   1.427758   .0502677    28.40   0.000     1.329229    1.526288
         14  |   1.471158   .0530725    27.72   0.000     1.367131    1.575184
         15  |   1.541498   .0563543    27.35   0.000     1.431038    1.651957
         16  |   1.578421   .0590646    26.72   0.000     1.462649    1.694193
         17  |   1.629523   .0624124    26.11   0.000     1.507189    1.751857
         18  |   1.564255   .0654978    23.88   0.000     1.435873    1.692636
         19  |   1.593866    .068465    23.28   0.000     1.459669    1.728064
         20  |   1.654524   .0715031    23.14   0.000     1.514371    1.794676
         21  |     1.6748   .0743812    22.52   0.000     1.529006    1.820593
         22  |   1.724027   .0770541    22.37   0.000     1.572994     1.87506
         23  |   1.780557   .0797565    22.32   0.000     1.624227    1.936887
         24  |    1.80568   .0828766    21.79   0.000     1.643235    1.968126
         25  |   1.810879   .0856091    21.15   0.000     1.643078    1.978681
         26  |  -.3149501   .0435688    -7.23   0.000    -.4003488   -.2295513
         27  |  -.1629634   .0410647    -3.97   0.000     -.243454   -.0824729
         28  |   .0315522   .0390563     0.81   0.419    -.0450017    .1081061
         29  |   .2719979   .0392224     6.93   0.000     .1951184    .3488775
         30  |   .4368249   .0396529    11.02   0.000     .3591015    .5145482
         31  |   .6020812   .0404418    14.89   0.000     .5228116    .6813509
         32  |   .7516704    .041675    18.04   0.000     .6699836    .8333571
         33  |    .831042   .0430757    19.29   0.000     .7466098    .9154742
         34  |   .9840208   .0450483    21.84   0.000     .8957222    1.072319
         35  |   1.074149   .0468825    22.91   0.000     .9822551    1.166043
         36  |   1.126937   .0495584    22.74   0.000     1.029798    1.224076
         37  |   1.198355   .0518878    23.10   0.000      1.09665     1.30006
         38  |   1.275251   .0545543    23.38   0.000      1.16832    1.382182
         39  |   1.327169   .0571737    23.21   0.000     1.215103    1.439234
         40  |   1.430394   .0606703    23.58   0.000     1.311475    1.549313
         41  |   1.497944   .0629632    23.79   0.000      1.37453    1.621357
         42  |   1.574553   .0655138    24.03   0.000      1.44614    1.702966
         43  |   1.556207   .0686586    22.67   0.000      1.42163    1.690784
         44  |   1.616695   .0717051    22.55   0.000     1.476147    1.757244
         45  |   1.689099   .0745935    22.64   0.000     1.542889    1.835309
         46  |   1.696367   .0773515    21.93   0.000     1.544751    1.847982
         47  |   1.730757   .0797936    21.69   0.000     1.574354     1.88716
         48  |   1.798212   .0821875    21.88   0.000     1.637117    1.959306
         49  |   1.815025   .0853714    21.26   0.000      1.64769    1.982361
         50  |   1.851899   .0881487    21.01   0.000     1.679119    2.024678
             |
     age_cat |
          1  |   .2636877   .0167194    15.77   0.000     .2309162    .2964592
          2  |   .2943384    .018504    15.91   0.000      .258069    .3306079
          3  |   .2870456   .0205869    13.94   0.000     .2466934    .3273978
          4  |   .2743582    .022842    12.01   0.000     .2295858    .3191306
          5  |   .2654205   .0253369    10.48   0.000     .2157579     .315083
          6  |   .2542577   .0280759     9.06   0.000     .1992265    .3092889
          7  |   .2578037    .030991     8.32   0.000     .1970585    .3185489
          8  |   .2391347   .0339735     7.04   0.000     .1725436    .3057258
          9  |   .2364133   .0370426     6.38   0.000     .1638064    .3090202
         10  |   .2222706   .0401893     5.53   0.000     .1434959    .3010453
         11  |   .2243178   .0434034     5.17   0.000     .1392432    .3093923
         12  |   .2076569   .0467155     4.45   0.000     .1160903    .2992235
         13  |   .2038714   .0498851     4.09   0.000     .1060922    .3016507
         14  |   .2027894    .053171     3.81   0.000     .0985695    .3070093
         15  |   .2023232   .0564709     3.58   0.000     .0916352    .3130112
         16  |   .1992057   .0597222     3.34   0.001     .0821448    .3162666
         17  |   .1868291   .0632189     2.96   0.003     .0629144    .3107438
         18  |   .1875636   .0665895     2.82   0.005     .0570422    .3180849
         19  |   .1633407   .0702183     2.33   0.020     .0257065    .3009748
         20  |   .1332166   .0771507     1.73   0.084    -.0180057    .2844389
         25  |   .0927723    .088871     1.04   0.297     -.081423    .2669676
         30  |   .1264782   .1197616     1.06   0.291    -.1082653    .3612217
         40  |   .2300854   .1387573     1.66   0.097    -.0418916    .5020623
         50  |    .228674   .1551187     1.47   0.140    -.0753726    .5327206
             |
       _cons |   7.537654   .0316652   238.04   0.000     7.475588    7.599721
-------------+----------------------------------------------------------------
     sigma_u |  1.1931923
     sigma_e |  .52762703
         rho |  .83644287   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    529632
Group variable: firm_person                     Number of groups   =     59467

R-sq:  within  = 0.2322                         Obs per group: min =         1
       between = 0.1631                                        avg =       8.9
       overall = 0.1435                                        max =        25

                                                F(78,18788)        =    155.98
corr(u_i, Xb)  = 0.0568                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0697717   .0196188     3.56   0.000     .0313171    .1082262
      during |   .0339907   .0066271     5.13   0.000      .021001    .0469803
       after |   .0605475   .0119481     5.07   0.000     .0371281    .0839668
during_expat |   .0492959   .0132247     3.73   0.000     .0233742    .0752175
 after_expat |   .0703284   .0189266     3.72   0.000     .0332305    .1074263
             |
    ind_year |
          2  |   .1039297   .0195358     5.32   0.000     .0656378    .1422216
          3  |     .27831   .0237659    11.71   0.000     .2317267    .3248933
          4  |   .4621062     .02558    18.07   0.000     .4119671    .5122452
          5  |   .6353182   .0279529    22.73   0.000      .580528    .6901084
          6  |   .8208611   .0307302    26.71   0.000     .7606271    .8810952
          7  |   .9525866   .0330466    28.83   0.000     .8878122    1.017361
          8  |   1.021196   .0355566    28.72   0.000     .9515019     1.09089
          9  |   1.134901   .0381306    29.76   0.000     1.060161     1.20964
         10  |   1.242819   .0411116    30.23   0.000     1.162236    1.323401
         11  |   1.310247   .0439168    29.83   0.000     1.224167    1.396328
         12  |   1.339582   .0468881    28.57   0.000     1.247677    1.431487
         13  |    1.39168   .0497383    27.98   0.000     1.294188    1.489171
         14  |   1.431297   .0525244    27.25   0.000     1.328344    1.534249
         15  |   1.495087    .055717    26.83   0.000     1.385876    1.604297
         16  |   1.529998   .0581967    26.29   0.000     1.415928    1.644069
         17  |   1.576603   .0613192    25.71   0.000     1.456412    1.696794
         18  |   1.513133   .0642537    23.55   0.000      1.38719    1.639076
         19  |    1.54373   .0671913    22.98   0.000     1.412029    1.675431
         20  |   1.590846   .0700661    22.70   0.000      1.45351    1.728182
         21  |   1.607699    .072667    22.12   0.000     1.465265    1.750133
         22  |   1.659285   .0751354    22.08   0.000     1.512013    1.806557
         23  |   1.713127   .0776232    22.07   0.000     1.560979    1.865276
         24  |   1.738379   .0804089    21.62   0.000     1.580771    1.895988
         25  |    1.73449   .0828985    20.92   0.000     1.572002    1.896979
         26  |  -.3310783   .0427662    -7.74   0.000    -.4149038   -.2472527
         27  |   -.190785   .0396663    -4.81   0.000    -.2685345   -.1130354
         28  |   .0119875   .0379365     0.32   0.752    -.0623716    .0863465
         29  |   .2590031   .0381341     6.79   0.000     .1842568    .3337494
         30  |   .4258164   .0381375    11.17   0.000     .3510634    .5005693
         31  |   .5879705   .0391688    15.01   0.000     .5111961    .6647449
         32  |   .7341871   .0407033    18.04   0.000      .654405    .8139692
         33  |   .8108404   .0420612    19.28   0.000     .7283967    .8932841
         34  |   .9603153   .0440803    21.79   0.000     .8739139    1.046717
         35  |   1.045188   .0459095    22.77   0.000     .9552016    1.135175
         36  |   1.090461   .0483575    22.55   0.000     .9956758    1.185246
         37  |   1.165262   .0507332    22.97   0.000      1.06582    1.264703
         38  |   1.239833   .0532898    23.27   0.000      1.13538    1.344286
         39  |   1.294482   .0559489    23.14   0.000     1.184817    1.404146
         40  |   1.398056   .0592081    23.61   0.000     1.282002    1.514109
         41  |   1.456316   .0614937    23.68   0.000     1.335783    1.576849
         42  |   1.533875   .0639765    23.98   0.000     1.408475    1.659275
         43  |   1.510605   .0669732    22.56   0.000     1.379331    1.641878
         44  |   1.569433   .0698822    22.46   0.000     1.432458    1.706409
         45  |   1.634652   .0725942    22.52   0.000     1.492361    1.776943
         46  |   1.643801   .0752029    21.86   0.000     1.496396    1.791205
         47  |   1.678228   .0774871    21.66   0.000     1.526346     1.83011
         48  |   1.736302   .0797435    21.77   0.000     1.579998    1.892607
         49  |   1.738533   .0826474    21.04   0.000     1.576537    1.900529
         50  |   1.777523   .0850889    20.89   0.000     1.610741    1.944305
             |
     age_cat |
          1  |   .2816019   .0163707    17.20   0.000     .2495139    .3136898
          2  |   .3134334   .0180722    17.34   0.000     .2780103    .3488564
          3  |   .3074754   .0200529    15.33   0.000     .2681698    .3467809
          4  |   .3018364   .0221582    13.62   0.000     .2584043    .3452686
          5  |   .2921786   .0245946    11.88   0.000      .243971    .3403862
          6  |   .2823507   .0272374    10.37   0.000     .2289629    .3357385
          7  |   .2889272   .0300381     9.62   0.000     .2300499    .3478046
          8  |   .2736355   .0328963     8.32   0.000     .2091558    .3381152
          9  |   .2689398    .035788     7.51   0.000     .1987922    .3390875
         10  |   .2571643   .0387892     6.63   0.000     .1811339    .3331946
         11  |   .2563759   .0418678     6.12   0.000     .1743113    .3384405
         12  |   .2422097   .0449817     5.38   0.000     .1540416    .3303779
         13  |   .2376707    .047998     4.95   0.000     .1435904     .331751
         14  |   .2364545    .051107     4.63   0.000     .1362801    .3366288
         15  |   .2357917   .0542417     4.35   0.000     .1294731    .3421102
         16  |   .2304123   .0573437     4.02   0.000     .1180134    .3428112
         17  |   .2198435   .0606084     3.63   0.000     .1010456    .3386414
         18  |   .2180586    .063787     3.42   0.001     .0930302    .3430869
         19  |   .1948799   .0672348     2.90   0.004     .0630937    .3266661
         20  |   .1650103   .0734162     2.25   0.025     .0211078    .3089127
         25  |   .1287976   .0835846     1.54   0.123    -.0350357    .2926309
         30  |    .125937   .1110081     1.13   0.257     -.091649    .3435229
         40  |   .1556207   .1256651     1.24   0.216    -.0906943    .4019356
         50  |    .157086   .1376583     1.14   0.254    -.1127366    .4269087
             |
       _cons |   7.583487   .0316815   239.37   0.000     7.521388    7.645586
-------------+----------------------------------------------------------------
     sigma_u |  1.2072089
     sigma_e |  .53872822
         rho |  .83392586   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2322378106044549

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    529,632
Group variable: firm_person                     Number of groups  =     59,467

R-sq:                                           Obs per group:
     within  = 0.2322                                         min =          1
     between = 0.1631                                         avg =        8.9
     overall = 0.1435                                         max =         25

                                                F(78,18788)       =     155.98
corr(u_i, Xb)  = 0.0568                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0697717   .0196188     3.56   0.000     .0313171    .1082262
      during |   .0339907   .0066271     5.13   0.000      .021001    .0469803
       after |   .0605475   .0119481     5.07   0.000     .0371281    .0839668
during_expat |   .0492959   .0132247     3.73   0.000     .0233742    .0752175
 after_expat |   .0703284   .0189266     3.72   0.000     .0332305    .1074263
             |
    ind_year |
          2  |   .1039297   .0195358     5.32   0.000     .0656378    .1422216
          3  |     .27831   .0237659    11.71   0.000     .2317267    .3248933
          4  |   .4621062     .02558    18.07   0.000     .4119671    .5122452
          5  |   .6353182   .0279529    22.73   0.000      .580528    .6901084
          6  |   .8208611   .0307302    26.71   0.000     .7606271    .8810952
          7  |   .9525866   .0330466    28.83   0.000     .8878122    1.017361
          8  |   1.021196   .0355566    28.72   0.000     .9515019     1.09089
          9  |   1.134901   .0381306    29.76   0.000     1.060161     1.20964
         10  |   1.242819   .0411116    30.23   0.000     1.162236    1.323401
         11  |   1.310247   .0439168    29.83   0.000     1.224167    1.396328
         12  |   1.339582   .0468881    28.57   0.000     1.247677    1.431487
         13  |    1.39168   .0497383    27.98   0.000     1.294188    1.489171
         14  |   1.431297   .0525244    27.25   0.000     1.328344    1.534249
         15  |   1.495087    .055717    26.83   0.000     1.385876    1.604297
         16  |   1.529998   .0581967    26.29   0.000     1.415928    1.644069
         17  |   1.576603   .0613192    25.71   0.000     1.456412    1.696794
         18  |   1.513133   .0642537    23.55   0.000      1.38719    1.639076
         19  |    1.54373   .0671913    22.98   0.000     1.412029    1.675431
         20  |   1.590846   .0700661    22.70   0.000      1.45351    1.728182
         21  |   1.607699    .072667    22.12   0.000     1.465265    1.750133
         22  |   1.659285   .0751354    22.08   0.000     1.512013    1.806557
         23  |   1.713127   .0776232    22.07   0.000     1.560979    1.865276
         24  |   1.738379   .0804089    21.62   0.000     1.580771    1.895988
         25  |    1.73449   .0828985    20.92   0.000     1.572002    1.896979
         26  |  -.3310783   .0427662    -7.74   0.000    -.4149038   -.2472527
         27  |   -.190785   .0396663    -4.81   0.000    -.2685345   -.1130354
         28  |   .0119875   .0379365     0.32   0.752    -.0623716    .0863465
         29  |   .2590031   .0381341     6.79   0.000     .1842568    .3337494
         30  |   .4258164   .0381375    11.17   0.000     .3510634    .5005693
         31  |   .5879705   .0391688    15.01   0.000     .5111961    .6647449
         32  |   .7341871   .0407033    18.04   0.000      .654405    .8139692
         33  |   .8108404   .0420612    19.28   0.000     .7283967    .8932841
         34  |   .9603153   .0440803    21.79   0.000     .8739139    1.046717
         35  |   1.045188   .0459095    22.77   0.000     .9552016    1.135175
         36  |   1.090461   .0483575    22.55   0.000     .9956758    1.185246
         37  |   1.165262   .0507332    22.97   0.000      1.06582    1.264703
         38  |   1.239833   .0532898    23.27   0.000      1.13538    1.344286
         39  |   1.294482   .0559489    23.14   0.000     1.184817    1.404146
         40  |   1.398056   .0592081    23.61   0.000     1.282002    1.514109
         41  |   1.456316   .0614937    23.68   0.000     1.335783    1.576849
         42  |   1.533875   .0639765    23.98   0.000     1.408475    1.659275
         43  |   1.510605   .0669732    22.56   0.000     1.379331    1.641878
         44  |   1.569433   .0698822    22.46   0.000     1.432458    1.706409
         45  |   1.634652   .0725942    22.52   0.000     1.492361    1.776943
         46  |   1.643801   .0752029    21.86   0.000     1.496396    1.791205
         47  |   1.678228   .0774871    21.66   0.000     1.526346     1.83011
         48  |   1.736302   .0797435    21.77   0.000     1.579998    1.892607
         49  |   1.738533   .0826474    21.04   0.000     1.576537    1.900529
         50  |   1.777523   .0850889    20.89   0.000     1.610741    1.944305
             |
     age_cat |
          1  |   .2816019   .0163707    17.20   0.000     .2495139    .3136898
          2  |   .3134334   .0180722    17.34   0.000     .2780103    .3488564
          3  |   .3074754   .0200529    15.33   0.000     .2681698    .3467809
          4  |   .3018364   .0221582    13.62   0.000     .2584043    .3452686
          5  |   .2921786   .0245946    11.88   0.000      .243971    .3403862
          6  |   .2823507   .0272374    10.37   0.000     .2289629    .3357385
          7  |   .2889272   .0300381     9.62   0.000     .2300499    .3478046
          8  |   .2736355   .0328963     8.32   0.000     .2091558    .3381152
          9  |   .2689398    .035788     7.51   0.000     .1987922    .3390875
         10  |   .2571643   .0387892     6.63   0.000     .1811339    .3331946
         11  |   .2563759   .0418678     6.12   0.000     .1743113    .3384405
         12  |   .2422097   .0449817     5.38   0.000     .1540416    .3303779
         13  |   .2376707    .047998     4.95   0.000     .1435904     .331751
         14  |   .2364545    .051107     4.63   0.000     .1362801    .3366288
         15  |   .2357917   .0542417     4.35   0.000     .1294731    .3421102
         16  |   .2304123   .0573437     4.02   0.000     .1180134    .3428112
         17  |   .2198435   .0606084     3.63   0.000     .1010456    .3386414
         18  |   .2180586    .063787     3.42   0.001     .0930302    .3430869
         19  |   .1948799   .0672348     2.90   0.004     .0630937    .3266661
         20  |   .1650103   .0734162     2.25   0.025     .0211078    .3089127
         25  |   .1287976   .0835846     1.54   0.123    -.0350357    .2926309
         30  |    .125937   .1110081     1.13   0.257     -.091649    .3435229
         40  |   .1556207   .1256651     1.24   0.216    -.0906943    .4019356
         50  |    .157086   .1376583     1.14   0.254    -.1127366    .4269087
             |
       _cons |   7.583487   .0316815   239.37   0.000     7.521388    7.645586
-------------+----------------------------------------------------------------
     sigma_u |  1.2072089
     sigma_e |  .53872822
         rho |  .83392586   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 18788) =   26.31
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18788) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 18788) =    9.92
            Prob > F =    0.0016

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18788) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 18788) =   13.89
            Prob > F =    0.0002

 ( 1)  during_expat = 0

       F(  1, 18788) =   13.89
            Prob > F =    0.0002
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 18788) =    2.72
            Prob > F =    0.0993

 ( 1)  after_expat = 0

       F(  1, 18788) =   13.81
            Prob > F =    0.0002
(1 real change made)
(file output/figure/baseline_lnQL_slope.png written in PNG format)
(sum of wgt is 39,871.272767067)

Linear regression                               Number of obs     =    108,694
                                                F(50, 6854)       =     128.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2706
                                                Root MSE          =     1.0258

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .464975   .0342212    13.59   0.000     .3978908    .5320591
       expat |  -.1100291   .0374109    -2.94   0.003    -.1833662   -.0366921
             |
    ind_year |
         27  |    .134573   .0324379     4.15   0.000     .0709846    .1981614
         28  |   .3235814   .0351525     9.21   0.000     .2546717    .3924911
         29  |   .5687316   .0381292    14.92   0.000     .4939865    .6434766
         30  |   .7078664   .0394326    17.95   0.000     .6305663    .7851666
         31  |   .8585647   .0405079    21.19   0.000     .7791566    .9379728
         32  |   .9995252   .0409048    24.44   0.000     .9193392    1.079711
         33  |   1.046477   .0411154    25.45   0.000     .9658786    1.127076
         34  |   1.188501   .0424019    28.03   0.000      1.10538    1.271621
         35  |   1.269608   .0428877    29.60   0.000     1.185535    1.353681
         36  |   1.342818   .0432925    31.02   0.000     1.257951    1.427685
         37  |   1.410521   .0439862    32.07   0.000     1.324294    1.496747
         38  |   1.499257   .0445582    33.65   0.000     1.411909    1.586605
         39  |   1.561653   .0454498    34.36   0.000     1.472557    1.650749
         40  |   1.660065   .0472245    35.15   0.000      1.56749     1.75264
         41  |   1.726494   .0469921    36.74   0.000     1.634375    1.818613
         42  |   1.795715   .0471608    38.08   0.000     1.703265    1.888165
         43  |   1.791475   .0480173    37.31   0.000     1.697346    1.885604
         44  |   1.847535   .0489369    37.75   0.000     1.751603    1.943466
         45  |   1.917078   .0501814    38.20   0.000     1.818707    2.015449
         46  |   1.930594   .0508814    37.94   0.000     1.830851    2.030338
         47  |   1.959615   .0518334    37.81   0.000     1.858005    2.061225
         48  |   2.022894   .0525602    38.49   0.000      1.91986    2.125929
         49  |   2.073405   .0547416    37.88   0.000     1.966094    2.180715
         50  |   2.122951   .0555522    38.22   0.000     2.014051     2.23185
             |
     age_cat |
          1  |    .332177   .0379647     8.75   0.000     .2577544    .4065996
          2  |   .4368751    .039029    11.19   0.000     .3603662    .5133841
          3  |    .488344   .0406933    12.00   0.000     .4085725    .5681154
          4  |   .5330453   .0418499    12.74   0.000     .4510064    .6150841
          5  |   .5470678    .042928    12.74   0.000     .4629156      .63122
          6  |   .5631731     .04375    12.87   0.000     .4774096    .6489366
          7  |   .5861533   .0444416    13.19   0.000      .499034    .6732727
          8  |   .5890613   .0451021    13.06   0.000     .5006473    .6774754
          9  |   .6127505   .0461543    13.28   0.000     .5222738    .7032272
         10  |   .6243182   .0467967    13.34   0.000     .5325822    .7160542
         11  |   .6303367   .0475935    13.24   0.000     .5370387    .7236348
         12  |   .6353484   .0487262    13.04   0.000     .5398299    .7308669
         13  |   .6565286   .0495098    13.26   0.000     .5594741    .7535832
         14  |   .6490023   .0505619    12.84   0.000     .5498852    .7481193
         15  |   .6542134   .0515504    12.69   0.000     .5531587    .7552681
         16  |   .6715647   .0526464    12.76   0.000     .5683614    .7747681
         17  |   .6530932   .0539854    12.10   0.000      .547265    .7589214
         18  |   .6538514   .0554726    11.79   0.000      .545108    .7625948
         19  |   .6499396   .0569015    11.42   0.000     .5383951    .7614842
         20  |   .6506232   .0608729    10.69   0.000     .5312934     .769953
         25  |    .624251    .074989     8.32   0.000     .4772494    .7712526
         30  |   .2115845   .1266435     1.67   0.095    -.0366761    .4598451
         40  |  -.0824386   .1162132    -0.71   0.478    -.3102526    .1453753
         50  |   .0098228   .1242775     0.08   0.937    -.2337996    .2534453
             |
       _cons |   6.752292   .0488227   138.30   0.000     6.656585       6.848
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    108,694
                                                F(50, 6854)       =     128.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2706
                                                Root MSE          =     1.0258

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .464975   .0342212    13.59   0.000     .3978908    .5320591
       expat |  -.1100291   .0374109    -2.94   0.003    -.1833662   -.0366921
             |
    ind_year |
         27  |    .134573   .0324379     4.15   0.000     .0709846    .1981614
         28  |   .3235814   .0351525     9.21   0.000     .2546717    .3924911
         29  |   .5687316   .0381292    14.92   0.000     .4939865    .6434766
         30  |   .7078664   .0394326    17.95   0.000     .6305663    .7851666
         31  |   .8585647   .0405079    21.19   0.000     .7791566    .9379728
         32  |   .9995252   .0409048    24.44   0.000     .9193392    1.079711
         33  |   1.046477   .0411154    25.45   0.000     .9658786    1.127076
         34  |   1.188501   .0424019    28.03   0.000      1.10538    1.271621
         35  |   1.269608   .0428877    29.60   0.000     1.185535    1.353681
         36  |   1.342818   .0432925    31.02   0.000     1.257951    1.427685
         37  |   1.410521   .0439862    32.07   0.000     1.324294    1.496747
         38  |   1.499257   .0445582    33.65   0.000     1.411909    1.586605
         39  |   1.561653   .0454498    34.36   0.000     1.472557    1.650749
         40  |   1.660065   .0472245    35.15   0.000      1.56749     1.75264
         41  |   1.726494   .0469921    36.74   0.000     1.634375    1.818613
         42  |   1.795715   .0471608    38.08   0.000     1.703265    1.888165
         43  |   1.791475   .0480173    37.31   0.000     1.697346    1.885604
         44  |   1.847535   .0489369    37.75   0.000     1.751603    1.943466
         45  |   1.917078   .0501814    38.20   0.000     1.818707    2.015449
         46  |   1.930594   .0508814    37.94   0.000     1.830851    2.030338
         47  |   1.959615   .0518334    37.81   0.000     1.858005    2.061225
         48  |   2.022894   .0525602    38.49   0.000      1.91986    2.125929
         49  |   2.073405   .0547416    37.88   0.000     1.966094    2.180715
         50  |   2.122951   .0555522    38.22   0.000     2.014051     2.23185
             |
     age_cat |
          1  |    .332177   .0379647     8.75   0.000     .2577544    .4065996
          2  |   .4368751    .039029    11.19   0.000     .3603662    .5133841
          3  |    .488344   .0406933    12.00   0.000     .4085725    .5681154
          4  |   .5330453   .0418499    12.74   0.000     .4510064    .6150841
          5  |   .5470678    .042928    12.74   0.000     .4629156      .63122
          6  |   .5631731     .04375    12.87   0.000     .4774096    .6489366
          7  |   .5861533   .0444416    13.19   0.000      .499034    .6732727
          8  |   .5890613   .0451021    13.06   0.000     .5006473    .6774754
          9  |   .6127505   .0461543    13.28   0.000     .5222738    .7032272
         10  |   .6243182   .0467967    13.34   0.000     .5325822    .7160542
         11  |   .6303367   .0475935    13.24   0.000     .5370387    .7236348
         12  |   .6353484   .0487262    13.04   0.000     .5398299    .7308669
         13  |   .6565286   .0495098    13.26   0.000     .5594741    .7535832
         14  |   .6490023   .0505619    12.84   0.000     .5498852    .7481193
         15  |   .6542134   .0515504    12.69   0.000     .5531587    .7552681
         16  |   .6715647   .0526464    12.76   0.000     .5683614    .7747681
         17  |   .6530932   .0539854    12.10   0.000      .547265    .7589214
         18  |   .6538514   .0554726    11.79   0.000      .545108    .7625948
         19  |   .6499396   .0569015    11.42   0.000     .5383951    .7614842
         20  |   .6506232   .0608729    10.69   0.000     .5312934     .769953
         25  |    .624251    .074989     8.32   0.000     .4772494    .7712526
         30  |   .2115845   .1266435     1.67   0.095    -.0366761    .4598451
         40  |  -.0824386   .1162132    -0.71   0.478    -.3102526    .1453753
         50  |   .0098228   .1242775     0.08   0.937    -.2337996    .2534453
             |
       _cons |   6.752292   .0488227   138.30   0.000     6.656585       6.848
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    108,694
Group variable: id                              Number of groups  =      6,855

R-sq:                                           Obs per group:
     within  = 0.3769                                         min =          1
     between = 0.2651                                         avg =       15.9
     overall = 0.2441                                         max =        125

                                                F(50,6854)        =     130.22
corr(u_i, Xb)  = 0.1059                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0777946   .0327325     2.38   0.017     .0136288    .1419604
       expat |   .0151063   .0102387     1.48   0.140    -.0049647    .0351772
             |
    ind_year |
         27  |   .1360705   .0235714     5.77   0.000     .0898633    .1822778
         28  |   .3094432   .0290124    10.67   0.000     .2525699    .3663164
         29  |   .5358258   .0328209    16.33   0.000     .4714866    .6001649
         30  |   .6712233   .0364504    18.41   0.000     .5997692    .7426773
         31  |   .8185317   .0402335    20.34   0.000     .7396615    .8974019
         32  |   .9578347   .0444716    21.54   0.000     .8706566    1.045013
         33  |   1.017558   .0484184    21.02   0.000     .9226432    1.112474
         34  |   1.158616   .0532356    21.76   0.000     1.054257    1.262974
         35  |   1.240043   .0579122    21.41   0.000     1.126517    1.353569
         36  |   1.274954   .0626425    20.35   0.000     1.152155    1.397752
         37  |   1.336719   .0670048    19.95   0.000     1.205368    1.468069
         38  |    1.40306   .0721318    19.45   0.000      1.26166    1.544461
         39  |   1.440882   .0767736    18.77   0.000     1.290382    1.591382
         40  |   1.536446   .0826359    18.59   0.000     1.374454    1.698438
         41  |    1.58989    .086981    18.28   0.000      1.41938    1.760399
         42  |   1.655466   .0911606    18.16   0.000     1.476763    1.834169
         43  |   1.618023   .0961674    16.83   0.000     1.429505    1.806541
         44  |   1.671768   .1008109    16.58   0.000     1.474147    1.869388
         45  |   1.737631   .1053907    16.49   0.000     1.531033     1.94423
         46  |   1.733908   .1101768    15.74   0.000     1.517927    1.949888
         47  |   1.763956   .1141535    15.45   0.000      1.54018    1.987733
         48  |    1.82442   .1179709    15.46   0.000      1.59316     2.05568
         49  |   1.835929   .1224108    15.00   0.000     1.595966    2.075892
         50  |   1.867113   .1268986    14.71   0.000     1.618352    2.115874
             |
     age_cat |
          1  |   .2593238   .0288452     8.99   0.000     .2027782    .3158694
          2  |   .3259801   .0317142    10.28   0.000     .2638105    .3881498
          3  |   .3384232   .0351456     9.63   0.000      .269527    .4073195
          4  |    .360994   .0386089     9.35   0.000     .2853086    .4366794
          5  |   .3610022   .0420277     8.59   0.000     .2786148    .4433895
          6  |   .3704874   .0458726     8.08   0.000     .2805629    .4604118
          7  |   .3867349   .0497964     7.77   0.000     .2891184    .4843513
          8  |    .381602   .0542058     7.04   0.000     .2753418    .4878621
          9  |   .3919528   .0586295     6.69   0.000     .2770209    .5068847
         10  |   .3902641   .0632754     6.17   0.000     .2662247    .5143035
         11  |   .3944013   .0677618     5.82   0.000     .2615672    .5272354
         12  |   .3851524   .0730262     5.27   0.000     .2419983    .5283065
         13  |     .39897   .0774767     5.15   0.000     .2470916    .5508484
         14  |   .3981079   .0822677     4.84   0.000     .2368378     .559378
         15  |   .3983959   .0870985     4.57   0.000     .2276558    .5691359
         16  |   .4223508   .0918806     4.60   0.000     .2422364    .6024652
         17  |    .417615   .0972376     4.29   0.000     .2269991    .6082309
         18  |   .4320148   .1021718     4.23   0.000     .2317264    .6323032
         19  |   .4268561   .1071992     3.98   0.000     .2167125    .6369998
         20  |   .4128549   .1177362     3.51   0.000     .1820555    .6436544
         25  |   .3879746   .1335423     2.91   0.004     .1261903    .6497589
         30  |   .2853875   .1705705     1.67   0.094    -.0489835    .6197585
         40  |   .3416408   .2173808     1.57   0.116     -.084493    .7677746
         50  |   .2379454   .2393169     0.99   0.320      -.23119    .7070809
             |
       _cons |   7.144169   .0403729   176.95   0.000     7.065025    7.223312
-------------+----------------------------------------------------------------
     sigma_u |  1.0700771
     sigma_e |  .46701323
         rho |  .84000385   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3769108586782866

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    108,694
Group variable: id                              Number of groups  =      6,855

R-sq:                                           Obs per group:
     within  = 0.3769                                         min =          1
     between = 0.2651                                         avg =       15.9
     overall = 0.2441                                         max =        125

                                                F(50,6854)        =     130.22
corr(u_i, Xb)  = 0.1059                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0777946   .0327325     2.38   0.017     .0136288    .1419604
       expat |   .0151063   .0102387     1.48   0.140    -.0049647    .0351772
             |
    ind_year |
         27  |   .1360705   .0235714     5.77   0.000     .0898633    .1822778
         28  |   .3094432   .0290124    10.67   0.000     .2525699    .3663164
         29  |   .5358258   .0328209    16.33   0.000     .4714866    .6001649
         30  |   .6712233   .0364504    18.41   0.000     .5997692    .7426773
         31  |   .8185317   .0402335    20.34   0.000     .7396615    .8974019
         32  |   .9578347   .0444716    21.54   0.000     .8706566    1.045013
         33  |   1.017558   .0484184    21.02   0.000     .9226432    1.112474
         34  |   1.158616   .0532356    21.76   0.000     1.054257    1.262974
         35  |   1.240043   .0579122    21.41   0.000     1.126517    1.353569
         36  |   1.274954   .0626425    20.35   0.000     1.152155    1.397752
         37  |   1.336719   .0670048    19.95   0.000     1.205368    1.468069
         38  |    1.40306   .0721318    19.45   0.000      1.26166    1.544461
         39  |   1.440882   .0767736    18.77   0.000     1.290382    1.591382
         40  |   1.536446   .0826359    18.59   0.000     1.374454    1.698438
         41  |    1.58989    .086981    18.28   0.000      1.41938    1.760399
         42  |   1.655466   .0911606    18.16   0.000     1.476763    1.834169
         43  |   1.618023   .0961674    16.83   0.000     1.429505    1.806541
         44  |   1.671768   .1008109    16.58   0.000     1.474147    1.869388
         45  |   1.737631   .1053907    16.49   0.000     1.531033     1.94423
         46  |   1.733908   .1101768    15.74   0.000     1.517927    1.949888
         47  |   1.763956   .1141535    15.45   0.000      1.54018    1.987733
         48  |    1.82442   .1179709    15.46   0.000      1.59316     2.05568
         49  |   1.835929   .1224108    15.00   0.000     1.595966    2.075892
         50  |   1.867113   .1268986    14.71   0.000     1.618352    2.115874
             |
     age_cat |
          1  |   .2593238   .0288452     8.99   0.000     .2027782    .3158694
          2  |   .3259801   .0317142    10.28   0.000     .2638105    .3881498
          3  |   .3384232   .0351456     9.63   0.000      .269527    .4073195
          4  |    .360994   .0386089     9.35   0.000     .2853086    .4366794
          5  |   .3610022   .0420277     8.59   0.000     .2786148    .4433895
          6  |   .3704874   .0458726     8.08   0.000     .2805629    .4604118
          7  |   .3867349   .0497964     7.77   0.000     .2891184    .4843513
          8  |    .381602   .0542058     7.04   0.000     .2753418    .4878621
          9  |   .3919528   .0586295     6.69   0.000     .2770209    .5068847
         10  |   .3902641   .0632754     6.17   0.000     .2662247    .5143035
         11  |   .3944013   .0677618     5.82   0.000     .2615672    .5272354
         12  |   .3851524   .0730262     5.27   0.000     .2419983    .5283065
         13  |     .39897   .0774767     5.15   0.000     .2470916    .5508484
         14  |   .3981079   .0822677     4.84   0.000     .2368378     .559378
         15  |   .3983959   .0870985     4.57   0.000     .2276558    .5691359
         16  |   .4223508   .0918806     4.60   0.000     .2422364    .6024652
         17  |    .417615   .0972376     4.29   0.000     .2269991    .6082309
         18  |   .4320148   .1021718     4.23   0.000     .2317264    .6323032
         19  |   .4268561   .1071992     3.98   0.000     .2167125    .6369998
         20  |   .4128549   .1177362     3.51   0.000     .1820555    .6436544
         25  |   .3879746   .1335423     2.91   0.004     .1261903    .6497589
         30  |   .2853875   .1705705     1.67   0.094    -.0489835    .6197585
         40  |   .3416408   .2173808     1.57   0.116     -.084493    .7677746
         50  |   .2379454   .2393169     0.99   0.320      -.23119    .7070809
             |
       _cons |   7.144169   .0403729   176.95   0.000     7.065025    7.223312
-------------+----------------------------------------------------------------
     sigma_u |  1.0700771
     sigma_e |  .46701323
         rho |  .84000385   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    182199
Group variable: firm_person                     Number of groups   =     21832

R-sq:  within  = 0.3243                         Obs per group: min =         1
       between = 0.2688                                        avg =       8.3
       overall = 0.2447                                        max =        25

                                                F(53,6854)         =    124.99
corr(u_i, Xb)  = 0.1352                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0594891   .0303726     1.96   0.050    -.0000506    .1190289
      during |   .0188998    .010083     1.87   0.061     -.000866    .0386656
       after |   .0642917   .0175239     3.67   0.000     .0299395     .098644
during_expat |   .1098013   .0176167     6.23   0.000      .075267    .1443355
 after_expat |   .1619397   .0252215     6.42   0.000     .1124977    .2113817
             |
    ind_year |
         27  |   .1219191   .0233693     5.22   0.000     .0761081    .1677301
         28  |   .3024184   .0282557    10.70   0.000     .2470285    .3578083
         29  |   .5298366   .0326241    16.24   0.000     .4658833      .59379
         30  |   .6653902   .0359142    18.53   0.000     .5949872    .7357932
         31  |    .808555   .0397309    20.35   0.000     .7306701    .8864398
         32  |   .9408651    .043835    21.46   0.000     .8549349    1.026795
         33  |   .9996827   .0474649    21.06   0.000     .9066368    1.092729
         34  |   1.141561   .0519299    21.98   0.000     1.039763     1.24336
         35  |   1.215612   .0563139    21.59   0.000     1.105219    1.326004
         36  |   1.241829   .0605967    20.49   0.000     1.123041    1.360618
         37  |   1.304296   .0648144    20.12   0.000     1.177239    1.431352
         38  |    1.36932   .0695565    19.69   0.000     1.232968    1.505673
         39  |   1.408291    .073918    19.05   0.000     1.263389    1.553193
         40  |   1.505452   .0793068    18.98   0.000     1.349986    1.660918
         41  |   1.549096   .0832401    18.61   0.000      1.38592    1.712273
         42  |   1.615367   .0872452    18.52   0.000     1.444339    1.786394
         43  |   1.571416    .091811    17.12   0.000     1.391437    1.751394
         44  |   1.622591   .0961653    16.87   0.000     1.434077    1.811104
         45  |   1.681433   .1002997    16.76   0.000     1.484814    1.878051
         46  |   1.678911   .1044986    16.07   0.000     1.474061     1.88376
         47  |   1.709344   .1081131    15.81   0.000     1.497409     1.92128
         48  |   1.761307   .1115689    15.79   0.000     1.542598    1.980017
         49  |   1.756545   .1155926    15.20   0.000     1.529948    1.983142
         50  |   1.787538    .119645    14.94   0.000     1.552997    2.022079
             |
     age_cat |
          1  |   .2811035   .0285367     9.85   0.000     .2251627    .3370442
          2  |   .3546481   .0312375    11.35   0.000     .2934129    .4158833
          3  |   .3695967   .0343472    10.76   0.000     .3022655    .4369278
          4  |   .3978881   .0373461    10.65   0.000     .3246781     .471098
          5  |   .4021306   .0405784     9.91   0.000     .3225843    .4816768
          6  |   .4137112   .0441206     9.38   0.000     .3272212    .5002013
          7  |   .4270484   .0479003     8.92   0.000     .3331491    .5209478
          8  |   .4279568   .0519706     8.23   0.000     .3260783    .5298353
          9  |   .4336497   .0560025     7.74   0.000     .3238674    .5434321
         10  |   .4317485   .0602985     7.16   0.000     .3135447    .5499522
         11  |   .4346524   .0644364     6.75   0.000     .3083371    .5609677
         12  |   .4281436   .0692096     6.19   0.000     .2924713     .563816
         13  |    .439977   .0734065     5.99   0.000     .2960775    .5838766
         14  |   .4413826   .0777878     5.67   0.000     .2888944    .5938708
         15  |   .4437035   .0821732     5.40   0.000     .2826184    .6047885
         16  |   .4622126   .0866789     5.33   0.000     .2922951      .63213
         17  |   .4620107   .0916391     5.04   0.000     .2823696    .6416517
         18  |   .4789909   .0962792     4.98   0.000     .2902539    .6677279
         19  |    .472259   .1008702     4.68   0.000      .274522     .669996
         20  |   .4583804   .1095302     4.18   0.000     .2436673    .6730936
         25  |   .4476943   .1234603     3.63   0.000     .2056739    .6897148
         30  |   .3638325   .1629034     2.23   0.026     .0444913    .6831736
         40  |    .421474    .198752     2.12   0.034     .0318584    .8110895
         50  |     .33339   .2139041     1.56   0.119    -.0859283    .7527083
             |
       _cons |   7.182361   .0405112   177.29   0.000     7.102946    7.261775
-------------+----------------------------------------------------------------
     sigma_u |  1.0784563
     sigma_e |  .47508678
         rho |  .83747736   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3243362060046698

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    182,199
Group variable: firm_person                     Number of groups  =     21,832

R-sq:                                           Obs per group:
     within  = 0.3243                                         min =          1
     between = 0.2688                                         avg =        8.3
     overall = 0.2447                                         max =         25

                                                F(53,6854)        =     124.99
corr(u_i, Xb)  = 0.1352                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0594891   .0303726     1.96   0.050    -.0000506    .1190289
      during |   .0188998    .010083     1.87   0.061     -.000866    .0386656
       after |   .0642917   .0175239     3.67   0.000     .0299395     .098644
during_expat |   .1098013   .0176167     6.23   0.000      .075267    .1443355
 after_expat |   .1619397   .0252215     6.42   0.000     .1124977    .2113817
             |
    ind_year |
         27  |   .1219191   .0233693     5.22   0.000     .0761081    .1677301
         28  |   .3024184   .0282557    10.70   0.000     .2470285    .3578083
         29  |   .5298366   .0326241    16.24   0.000     .4658833      .59379
         30  |   .6653902   .0359142    18.53   0.000     .5949872    .7357932
         31  |    .808555   .0397309    20.35   0.000     .7306701    .8864398
         32  |   .9408651    .043835    21.46   0.000     .8549349    1.026795
         33  |   .9996827   .0474649    21.06   0.000     .9066368    1.092729
         34  |   1.141561   .0519299    21.98   0.000     1.039763     1.24336
         35  |   1.215612   .0563139    21.59   0.000     1.105219    1.326004
         36  |   1.241829   .0605967    20.49   0.000     1.123041    1.360618
         37  |   1.304296   .0648144    20.12   0.000     1.177239    1.431352
         38  |    1.36932   .0695565    19.69   0.000     1.232968    1.505673
         39  |   1.408291    .073918    19.05   0.000     1.263389    1.553193
         40  |   1.505452   .0793068    18.98   0.000     1.349986    1.660918
         41  |   1.549096   .0832401    18.61   0.000      1.38592    1.712273
         42  |   1.615367   .0872452    18.52   0.000     1.444339    1.786394
         43  |   1.571416    .091811    17.12   0.000     1.391437    1.751394
         44  |   1.622591   .0961653    16.87   0.000     1.434077    1.811104
         45  |   1.681433   .1002997    16.76   0.000     1.484814    1.878051
         46  |   1.678911   .1044986    16.07   0.000     1.474061     1.88376
         47  |   1.709344   .1081131    15.81   0.000     1.497409     1.92128
         48  |   1.761307   .1115689    15.79   0.000     1.542598    1.980017
         49  |   1.756545   .1155926    15.20   0.000     1.529948    1.983142
         50  |   1.787538    .119645    14.94   0.000     1.552997    2.022079
             |
     age_cat |
          1  |   .2811035   .0285367     9.85   0.000     .2251627    .3370442
          2  |   .3546481   .0312375    11.35   0.000     .2934129    .4158833
          3  |   .3695967   .0343472    10.76   0.000     .3022655    .4369278
          4  |   .3978881   .0373461    10.65   0.000     .3246781     .471098
          5  |   .4021306   .0405784     9.91   0.000     .3225843    .4816768
          6  |   .4137112   .0441206     9.38   0.000     .3272212    .5002013
          7  |   .4270484   .0479003     8.92   0.000     .3331491    .5209478
          8  |   .4279568   .0519706     8.23   0.000     .3260783    .5298353
          9  |   .4336497   .0560025     7.74   0.000     .3238674    .5434321
         10  |   .4317485   .0602985     7.16   0.000     .3135447    .5499522
         11  |   .4346524   .0644364     6.75   0.000     .3083371    .5609677
         12  |   .4281436   .0692096     6.19   0.000     .2924713     .563816
         13  |    .439977   .0734065     5.99   0.000     .2960775    .5838766
         14  |   .4413826   .0777878     5.67   0.000     .2888944    .5938708
         15  |   .4437035   .0821732     5.40   0.000     .2826184    .6047885
         16  |   .4622126   .0866789     5.33   0.000     .2922951      .63213
         17  |   .4620107   .0916391     5.04   0.000     .2823696    .6416517
         18  |   .4789909   .0962792     4.98   0.000     .2902539    .6677279
         19  |    .472259   .1008702     4.68   0.000      .274522     .669996
         20  |   .4583804   .1095302     4.18   0.000     .2436673    .6730936
         25  |   .4476943   .1234603     3.63   0.000     .2056739    .6897148
         30  |   .3638325   .1629034     2.23   0.026     .0444913    .6831736
         40  |    .421474    .198752     2.12   0.034     .0318584    .8110895
         50  |     .33339   .2139041     1.56   0.119    -.0859283    .7527083
             |
       _cons |   7.182361   .0405112   177.29   0.000     7.102946    7.261775
-------------+----------------------------------------------------------------
     sigma_u |  1.0784563
     sigma_e |  .47508678
         rho |  .83747736   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1,  6854) =    3.51
            Prob > F =    0.0609

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6854) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1,  6854) =   12.71
            Prob > F =    0.0004

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6854) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1,  6854) =   38.85
            Prob > F =    0.0000

 ( 1)  during_expat = 0

       F(  1,  6854) =   38.85
            Prob > F =    0.0000
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1,  6854) =    8.58
            Prob > F =    0.0034

 ( 1)  after_expat = 0

       F(  1,  6854) =   41.23
            Prob > F =    0.0000
(1 real change made)
(file output/figure/manufacturing_lnQL_slope.png written in PNG format)
(sum of wgt is 97,100.1176971942)

Linear regression                               Number of obs     =    233,110
                                                F(75, 14660)      =     143.28
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1838
                                                Root MSE          =      1.131

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5919631   .0356299    16.61   0.000     .5221241    .6618022
       expat |   .0009536   .0541218     0.02   0.986    -.1051321    .1070392
             |
    ind_year |
          2  |   .1225328   .0303808     4.03   0.000     .0629825    .1820831
          3  |   .3524496     .03459    10.19   0.000     .2846489    .4202503
          4  |   .5921585   .0359034    16.49   0.000     .5217833    .6625338
          5  |   .7504941    .036506    20.56   0.000     .6789377    .8220505
          6  |    .948234   .0377804    25.10   0.000     .8741798    1.022288
          7  |   1.035559   .0383368    27.01   0.000      .960414    1.110704
          8  |   1.099818   .0383319    28.69   0.000     1.024683    1.174954
          9  |    1.20343   .0383433    31.39   0.000     1.128272    1.278588
         10  |   1.296461   .0387373    33.47   0.000     1.220531    1.372391
         11  |   1.291639   .0394092    32.78   0.000     1.214392    1.368886
         12  |   1.304572   .0398457    32.74   0.000     1.226469    1.382675
         13  |   1.312023   .0400137    32.79   0.000     1.233591    1.390455
         14  |   1.320872   .0404375    32.66   0.000     1.241609    1.400134
         15  |   1.374286   .0408564    33.64   0.000     1.294202     1.45437
         16  |   1.381571   .0405945    34.03   0.000     1.302001    1.461142
         17  |   1.417217   .0410335    34.54   0.000     1.336786    1.497647
         18  |   1.328969    .041538    31.99   0.000     1.247549    1.410389
         19  |   1.336116   .0414997    32.20   0.000     1.254771     1.41746
         20  |   1.378651   .0420969    32.75   0.000     1.296136    1.461166
         21  |   1.379255   .0430311    32.05   0.000     1.294909    1.463602
         22  |   1.408692   .0435606    32.34   0.000     1.323308    1.494076
         23  |   1.470952   .0436147    33.73   0.000     1.385462    1.556443
         24  |   1.514385   .0448638    33.76   0.000     1.426446    1.602324
         25  |   1.525058   .0454657    33.54   0.000     1.435939    1.614177
         26  |  -.5076355   .0505835   -10.04   0.000    -.6067856   -.4084854
         27  |  -.3232136   .0466727    -6.93   0.000    -.4146979   -.2317293
         28  |  -.1385165   .0454821    -3.05   0.002     -.227667   -.0493659
         29  |   .0997374    .045021     2.22   0.027     .0114906    .1879841
         30  |   .2702854   .0449545     6.01   0.000      .182169    .3584019
         31  |   .4081699   .0444288     9.19   0.000     .3210839    .4952559
         32  |   .5448257   .0433171    12.58   0.000     .4599188    .6297327
         33  |   .5671298   .0428451    13.24   0.000      .483148    .6511116
         34  |   .7037609   .0434593    16.19   0.000     .6185752    .7889465
         35  |   .7675304   .0432584    17.74   0.000     .6827386    .8523222
         36  |   .8339208   .0430151    19.39   0.000     .7496058    .9182358
         37  |   .8584898   .0436324    19.68   0.000     .7729648    .9440148
         38  |   .9203715   .0436155    21.10   0.000     .8348797    1.005863
         39  |    .954794   .0438827    21.76   0.000     .8687783     1.04081
         40  |   1.024254   .0451664    22.68   0.000     .9357227    1.112786
         41  |   1.092188   .0447023    24.43   0.000     1.004566     1.17981
         42  |   1.150539   .0445737    25.81   0.000     1.063169    1.237909
         43  |   1.129945   .0454621    24.85   0.000     1.040833    1.219056
         44  |   1.172321   .0462085    25.37   0.000     1.081747    1.262895
         45  |   1.223743   .0469031    26.09   0.000     1.131807    1.315679
         46  |   1.230277   .0473649    25.97   0.000     1.137436    1.323118
         47  |   1.261141   .0476116    26.49   0.000     1.167816    1.354466
         48  |   1.333501   .0473753    28.15   0.000      1.24064    1.426363
         49  |   1.364945   .0492454    27.72   0.000     1.268418    1.461472
         50  |    1.40856   .0487994    28.86   0.000     1.312907    1.504213
             |
     age_cat |
          1  |    .298919   .0261237    11.44   0.000     .2477133    .3501247
          2  |   .3562375   .0270401    13.17   0.000     .3032355    .4092394
          3  |   .4021231   .0278402    14.44   0.000     .3475528    .4566933
          4  |   .4393236   .0286724    15.32   0.000      .383122    .4955251
          5  |   .4787299   .0293257    16.32   0.000     .4212479     .536212
          6  |   .4984342   .0300325    16.60   0.000     .4395667    .5573017
          7  |   .5421517   .0306706    17.68   0.000     .4820335    .6022698
          8  |   .5730373   .0311928    18.37   0.000     .5118954    .6341791
          9  |   .6184901   .0318698    19.41   0.000     .5560213    .6809589
         10  |   .6306502   .0323996    19.46   0.000     .5671429    .6941575
         11  |   .6770008   .0331786    20.40   0.000     .6119666    .7420349
         12  |   .7025633   .0339591    20.69   0.000     .6359992    .7691275
         13  |   .7308415   .0347139    21.05   0.000     .6627979    .7988852
         14  |    .764095   .0353441    21.62   0.000     .6948162    .8333738
         15  |   .7916087   .0362703    21.83   0.000     .7205143     .862703
         16  |   .8135282   .0370033    21.99   0.000      .740997    .8860594
         17  |   .8209372   .0380361    21.58   0.000     .7463818    .8954927
         18  |   .8379894   .0387261    21.64   0.000     .7620814    .9138974
         19  |   .8411386   .0399403    21.06   0.000     .7628507    .9194265
         20  |   .8410371   .0425064    19.79   0.000     .7577192     .924355
         25  |   .7492748   .0535692    13.99   0.000     .6442724    .8542772
         30  |    .180473   .0655649     2.75   0.006     .0519576    .3089884
         40  |   .0997111   .0584876     1.70   0.088    -.0149319    .2143542
         50  |   .3300473   .0704855     4.68   0.000     .1918869    .4682077
             |
       _cons |   7.302888   .0409303   178.42   0.000     7.222659    7.383116
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    233,110
                                                F(75, 14660)      =     143.28
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1838
                                                Root MSE          =      1.131

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5919631   .0356299    16.61   0.000     .5221241    .6618022
       expat |   .0009536   .0541218     0.02   0.986    -.1051321    .1070392
             |
    ind_year |
          2  |   .1225328   .0303808     4.03   0.000     .0629825    .1820831
          3  |   .3524496     .03459    10.19   0.000     .2846489    .4202503
          4  |   .5921585   .0359034    16.49   0.000     .5217833    .6625338
          5  |   .7504941    .036506    20.56   0.000     .6789377    .8220505
          6  |    .948234   .0377804    25.10   0.000     .8741798    1.022288
          7  |   1.035559   .0383368    27.01   0.000      .960414    1.110704
          8  |   1.099818   .0383319    28.69   0.000     1.024683    1.174954
          9  |    1.20343   .0383433    31.39   0.000     1.128272    1.278588
         10  |   1.296461   .0387373    33.47   0.000     1.220531    1.372391
         11  |   1.291639   .0394092    32.78   0.000     1.214392    1.368886
         12  |   1.304572   .0398457    32.74   0.000     1.226469    1.382675
         13  |   1.312023   .0400137    32.79   0.000     1.233591    1.390455
         14  |   1.320872   .0404375    32.66   0.000     1.241609    1.400134
         15  |   1.374286   .0408564    33.64   0.000     1.294202     1.45437
         16  |   1.381571   .0405945    34.03   0.000     1.302001    1.461142
         17  |   1.417217   .0410335    34.54   0.000     1.336786    1.497647
         18  |   1.328969    .041538    31.99   0.000     1.247549    1.410389
         19  |   1.336116   .0414997    32.20   0.000     1.254771     1.41746
         20  |   1.378651   .0420969    32.75   0.000     1.296136    1.461166
         21  |   1.379255   .0430311    32.05   0.000     1.294909    1.463602
         22  |   1.408692   .0435606    32.34   0.000     1.323308    1.494076
         23  |   1.470952   .0436147    33.73   0.000     1.385462    1.556443
         24  |   1.514385   .0448638    33.76   0.000     1.426446    1.602324
         25  |   1.525058   .0454657    33.54   0.000     1.435939    1.614177
         26  |  -.5076355   .0505835   -10.04   0.000    -.6067856   -.4084854
         27  |  -.3232136   .0466727    -6.93   0.000    -.4146979   -.2317293
         28  |  -.1385165   .0454821    -3.05   0.002     -.227667   -.0493659
         29  |   .0997374    .045021     2.22   0.027     .0114906    .1879841
         30  |   .2702854   .0449545     6.01   0.000      .182169    .3584019
         31  |   .4081699   .0444288     9.19   0.000     .3210839    .4952559
         32  |   .5448257   .0433171    12.58   0.000     .4599188    .6297327
         33  |   .5671298   .0428451    13.24   0.000      .483148    .6511116
         34  |   .7037609   .0434593    16.19   0.000     .6185752    .7889465
         35  |   .7675304   .0432584    17.74   0.000     .6827386    .8523222
         36  |   .8339208   .0430151    19.39   0.000     .7496058    .9182358
         37  |   .8584898   .0436324    19.68   0.000     .7729648    .9440148
         38  |   .9203715   .0436155    21.10   0.000     .8348797    1.005863
         39  |    .954794   .0438827    21.76   0.000     .8687783     1.04081
         40  |   1.024254   .0451664    22.68   0.000     .9357227    1.112786
         41  |   1.092188   .0447023    24.43   0.000     1.004566     1.17981
         42  |   1.150539   .0445737    25.81   0.000     1.063169    1.237909
         43  |   1.129945   .0454621    24.85   0.000     1.040833    1.219056
         44  |   1.172321   .0462085    25.37   0.000     1.081747    1.262895
         45  |   1.223743   .0469031    26.09   0.000     1.131807    1.315679
         46  |   1.230277   .0473649    25.97   0.000     1.137436    1.323118
         47  |   1.261141   .0476116    26.49   0.000     1.167816    1.354466
         48  |   1.333501   .0473753    28.15   0.000      1.24064    1.426363
         49  |   1.364945   .0492454    27.72   0.000     1.268418    1.461472
         50  |    1.40856   .0487994    28.86   0.000     1.312907    1.504213
             |
     age_cat |
          1  |    .298919   .0261237    11.44   0.000     .2477133    .3501247
          2  |   .3562375   .0270401    13.17   0.000     .3032355    .4092394
          3  |   .4021231   .0278402    14.44   0.000     .3475528    .4566933
          4  |   .4393236   .0286724    15.32   0.000      .383122    .4955251
          5  |   .4787299   .0293257    16.32   0.000     .4212479     .536212
          6  |   .4984342   .0300325    16.60   0.000     .4395667    .5573017
          7  |   .5421517   .0306706    17.68   0.000     .4820335    .6022698
          8  |   .5730373   .0311928    18.37   0.000     .5118954    .6341791
          9  |   .6184901   .0318698    19.41   0.000     .5560213    .6809589
         10  |   .6306502   .0323996    19.46   0.000     .5671429    .6941575
         11  |   .6770008   .0331786    20.40   0.000     .6119666    .7420349
         12  |   .7025633   .0339591    20.69   0.000     .6359992    .7691275
         13  |   .7308415   .0347139    21.05   0.000     .6627979    .7988852
         14  |    .764095   .0353441    21.62   0.000     .6948162    .8333738
         15  |   .7916087   .0362703    21.83   0.000     .7205143     .862703
         16  |   .8135282   .0370033    21.99   0.000      .740997    .8860594
         17  |   .8209372   .0380361    21.58   0.000     .7463818    .8954927
         18  |   .8379894   .0387261    21.64   0.000     .7620814    .9138974
         19  |   .8411386   .0399403    21.06   0.000     .7628507    .9194265
         20  |   .8410371   .0425064    19.79   0.000     .7577192     .924355
         25  |   .7492748   .0535692    13.99   0.000     .6442724    .8542772
         30  |    .180473   .0655649     2.75   0.006     .0519576    .3089884
         40  |   .0997111   .0584876     1.70   0.088    -.0149319    .2143542
         50  |   .3300473   .0704855     4.68   0.000     .1918869    .4682077
             |
       _cons |   7.302888   .0409303   178.42   0.000     7.222659    7.383116
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    233,110
Group variable: id                              Number of groups  =     14,661

R-sq:                                           Obs per group:
     within  = 0.2796                                         min =          1
     between = 0.1534                                         avg =       15.9
     overall = 0.1317                                         max =        140

                                                F(75,14660)       =     123.32
corr(u_i, Xb)  = -0.0039                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0569626   .0282542     2.02   0.044     .0015808    .1123444
       expat |   .0216723   .0203515     1.06   0.287    -.0182192    .0615638
             |
    ind_year |
          2  |    .111207   .0220739     5.04   0.000     .0679395    .1544746
          3  |   .3112097   .0264783    11.75   0.000     .2593088    .3631105
          4  |   .5094886   .0280017    18.19   0.000     .4546018    .5643755
          5  |   .6786025   .0307161    22.09   0.000      .618395      .73881
          6  |   .8749418    .033415    26.18   0.000     .8094441    .9404395
          7  |   1.003886   .0360069    27.88   0.000     .9333077    1.074464
          8  |    1.08628   .0385074    28.21   0.000     1.010801    1.161759
          9  |   1.205175   .0413097    29.17   0.000     1.124203    1.286147
         10  |   1.325038   .0445729    29.73   0.000     1.237669    1.412406
         11  |   1.390398   .0475818    29.22   0.000     1.297132    1.483664
         12  |   1.423396   .0509178    27.95   0.000     1.323591    1.523202
         13  |   1.467301   .0538286    27.26   0.000      1.36179    1.572811
         14  |    1.51382   .0567699    26.67   0.000     1.402544    1.625096
         15  |   1.589337   .0602904    26.36   0.000      1.47116    1.707514
         16  |   1.631532    .063056    25.87   0.000     1.507935     1.75513
         17  |     1.6909   .0666281    25.38   0.000     1.560301    1.821499
         18  |   1.622994   .0698765    23.23   0.000     1.486027    1.759961
         19  |   1.647686   .0729548    22.59   0.000     1.504685    1.790687
         20  |   1.706956   .0761571    22.41   0.000     1.557678    1.856233
         21  |   1.730041   .0792208    21.84   0.000     1.574758    1.885323
         22  |   1.782619   .0820216    21.73   0.000     1.621846    1.943392
         23  |   1.840396   .0848376    21.69   0.000     1.674103    2.006688
         24  |   1.871206   .0881643    21.22   0.000     1.698393    2.044019
         25  |   1.871685   .0909928    20.57   0.000     1.693328    2.050043
         26  |  -.2438028   .0491108    -4.96   0.000    -.3400661   -.1475396
         27  |  -.0894789   .0459645    -1.95   0.052    -.1795752    .0006174
         28  |   .0785441   .0439799     1.79   0.074     -.007662    .1647502
         29  |   .3080614    .043958     7.01   0.000     .2218982    .3942245
         30  |   .4936296   .0441826    11.17   0.000     .4070261    .5802332
         31  |   .6501642   .0449957    14.45   0.000     .5619671    .7383614
         32  |   .8019241   .0462885    17.32   0.000     .7111928    .8926554
         33  |   .8687388   .0476651    18.23   0.000     .7753092    .9621684
         34  |   1.026309   .0495848    20.70   0.000     .9291164    1.123501
         35  |   1.122027   .0513439    21.85   0.000     1.021386    1.222667
         36  |   1.179935   .0542362    21.76   0.000     1.073625    1.286245
         37  |   1.244422   .0566577    21.96   0.000     1.133366    1.355478
         38  |   1.323295   .0593666    22.29   0.000     1.206929    1.439661
         39  |   1.365021   .0620007    22.02   0.000     1.243491     1.48655
         40  |   1.462748   .0656954    22.27   0.000     1.333977     1.59152
         41  |   1.542919   .0679135    22.72   0.000       1.4098    1.676038
         42  |   1.620983   .0705471    22.98   0.000     1.482702    1.759264
         43  |   1.598665   .0738815    21.64   0.000     1.453848    1.743482
         44  |    1.64957   .0770947    21.40   0.000     1.498455    1.800685
         45  |   1.721664   .0801413    21.48   0.000     1.564577    1.878751
         46  |   1.719869   .0830841    20.70   0.000     1.557013    1.882724
         47  |   1.752921   .0855031    20.50   0.000     1.585324    1.920518
         48  |   1.825146   .0879325    20.76   0.000     1.652788    1.997505
         49  |   1.836561   .0914204    20.09   0.000     1.657366    2.015757
         50  |   1.875488   .0943136    19.89   0.000     1.690622    2.060355
             |
     age_cat |
          1  |   .2459319   .0180023    13.66   0.000      .210645    .2812188
          2  |   .2508907   .0199404    12.58   0.000      .211805    .2899763
          3  |   .2297623   .0222725    10.32   0.000     .1861053    .2734193
          4  |   .2118034   .0246799     8.58   0.000     .1634277    .2601791
          5  |   .2040305   .0273085     7.47   0.000     .1505024    .2575586
          6  |   .1869772    .030278     6.18   0.000     .1276285    .2463258
          7  |   .1895597   .0333911     5.68   0.000      .124109    .2550105
          8  |   .1730568   .0365759     4.73   0.000     .1013635    .2447501
          9  |   .1664339   .0398303     4.18   0.000     .0883616    .2445062
         10  |    .151256   .0431463     3.51   0.000     .0666839    .2358282
         11  |   .1547534   .0465192     3.33   0.001     .0635699    .2459369
         12  |   .1398287   .0500256     2.80   0.005     .0417723    .2378852
         13  |   .1329452   .0533689     2.49   0.013     .0283354    .2375551
         14  |   .1338498   .0568321     2.36   0.019     .0224517    .2452479
         15  |   .1296592   .0603311     2.15   0.032     .0114026    .2479157
         16  |   .1278838   .0637414     2.01   0.045     .0029427     .252825
         17  |   .1131645   .0674881     1.68   0.094    -.0191207    .2454496
         18  |   .1139498   .0710507     1.60   0.109    -.0253184    .2532181
         19  |   .0889575   .0749574     1.19   0.235    -.0579684    .2358834
         20  |   .0590724   .0823277     0.72   0.473    -.1023002     .220445
         25  |   .0193276   .0948142     0.20   0.838      -.16652    .2051753
         30  |   .0618314   .1265299     0.49   0.625    -.1861831    .3098459
         40  |   .1691342   .1452344     1.16   0.244    -.1155436     .453812
         50  |   .1575156   .1624624     0.97   0.332    -.1609312    .4759624
             |
       _cons |   7.479886   .0333396   224.35   0.000     7.414536    7.545236
-------------+----------------------------------------------------------------
     sigma_u |  1.1571384
     sigma_e |  .52274204
         rho |  .83050837   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2796495165448615

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    233,110
Group variable: id                              Number of groups  =     14,661

R-sq:                                           Obs per group:
     within  = 0.2796                                         min =          1
     between = 0.1534                                         avg =       15.9
     overall = 0.1317                                         max =        140

                                                F(75,14660)       =     123.32
corr(u_i, Xb)  = -0.0039                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0569626   .0282542     2.02   0.044     .0015808    .1123444
       expat |   .0216723   .0203515     1.06   0.287    -.0182192    .0615638
             |
    ind_year |
          2  |    .111207   .0220739     5.04   0.000     .0679395    .1544746
          3  |   .3112097   .0264783    11.75   0.000     .2593088    .3631105
          4  |   .5094886   .0280017    18.19   0.000     .4546018    .5643755
          5  |   .6786025   .0307161    22.09   0.000      .618395      .73881
          6  |   .8749418    .033415    26.18   0.000     .8094441    .9404395
          7  |   1.003886   .0360069    27.88   0.000     .9333077    1.074464
          8  |    1.08628   .0385074    28.21   0.000     1.010801    1.161759
          9  |   1.205175   .0413097    29.17   0.000     1.124203    1.286147
         10  |   1.325038   .0445729    29.73   0.000     1.237669    1.412406
         11  |   1.390398   .0475818    29.22   0.000     1.297132    1.483664
         12  |   1.423396   .0509178    27.95   0.000     1.323591    1.523202
         13  |   1.467301   .0538286    27.26   0.000      1.36179    1.572811
         14  |    1.51382   .0567699    26.67   0.000     1.402544    1.625096
         15  |   1.589337   .0602904    26.36   0.000      1.47116    1.707514
         16  |   1.631532    .063056    25.87   0.000     1.507935     1.75513
         17  |     1.6909   .0666281    25.38   0.000     1.560301    1.821499
         18  |   1.622994   .0698765    23.23   0.000     1.486027    1.759961
         19  |   1.647686   .0729548    22.59   0.000     1.504685    1.790687
         20  |   1.706956   .0761571    22.41   0.000     1.557678    1.856233
         21  |   1.730041   .0792208    21.84   0.000     1.574758    1.885323
         22  |   1.782619   .0820216    21.73   0.000     1.621846    1.943392
         23  |   1.840396   .0848376    21.69   0.000     1.674103    2.006688
         24  |   1.871206   .0881643    21.22   0.000     1.698393    2.044019
         25  |   1.871685   .0909928    20.57   0.000     1.693328    2.050043
         26  |  -.2438028   .0491108    -4.96   0.000    -.3400661   -.1475396
         27  |  -.0894789   .0459645    -1.95   0.052    -.1795752    .0006174
         28  |   .0785441   .0439799     1.79   0.074     -.007662    .1647502
         29  |   .3080614    .043958     7.01   0.000     .2218982    .3942245
         30  |   .4936296   .0441826    11.17   0.000     .4070261    .5802332
         31  |   .6501642   .0449957    14.45   0.000     .5619671    .7383614
         32  |   .8019241   .0462885    17.32   0.000     .7111928    .8926554
         33  |   .8687388   .0476651    18.23   0.000     .7753092    .9621684
         34  |   1.026309   .0495848    20.70   0.000     .9291164    1.123501
         35  |   1.122027   .0513439    21.85   0.000     1.021386    1.222667
         36  |   1.179935   .0542362    21.76   0.000     1.073625    1.286245
         37  |   1.244422   .0566577    21.96   0.000     1.133366    1.355478
         38  |   1.323295   .0593666    22.29   0.000     1.206929    1.439661
         39  |   1.365021   .0620007    22.02   0.000     1.243491     1.48655
         40  |   1.462748   .0656954    22.27   0.000     1.333977     1.59152
         41  |   1.542919   .0679135    22.72   0.000       1.4098    1.676038
         42  |   1.620983   .0705471    22.98   0.000     1.482702    1.759264
         43  |   1.598665   .0738815    21.64   0.000     1.453848    1.743482
         44  |    1.64957   .0770947    21.40   0.000     1.498455    1.800685
         45  |   1.721664   .0801413    21.48   0.000     1.564577    1.878751
         46  |   1.719869   .0830841    20.70   0.000     1.557013    1.882724
         47  |   1.752921   .0855031    20.50   0.000     1.585324    1.920518
         48  |   1.825146   .0879325    20.76   0.000     1.652788    1.997505
         49  |   1.836561   .0914204    20.09   0.000     1.657366    2.015757
         50  |   1.875488   .0943136    19.89   0.000     1.690622    2.060355
             |
     age_cat |
          1  |   .2459319   .0180023    13.66   0.000      .210645    .2812188
          2  |   .2508907   .0199404    12.58   0.000      .211805    .2899763
          3  |   .2297623   .0222725    10.32   0.000     .1861053    .2734193
          4  |   .2118034   .0246799     8.58   0.000     .1634277    .2601791
          5  |   .2040305   .0273085     7.47   0.000     .1505024    .2575586
          6  |   .1869772    .030278     6.18   0.000     .1276285    .2463258
          7  |   .1895597   .0333911     5.68   0.000      .124109    .2550105
          8  |   .1730568   .0365759     4.73   0.000     .1013635    .2447501
          9  |   .1664339   .0398303     4.18   0.000     .0883616    .2445062
         10  |    .151256   .0431463     3.51   0.000     .0666839    .2358282
         11  |   .1547534   .0465192     3.33   0.001     .0635699    .2459369
         12  |   .1398287   .0500256     2.80   0.005     .0417723    .2378852
         13  |   .1329452   .0533689     2.49   0.013     .0283354    .2375551
         14  |   .1338498   .0568321     2.36   0.019     .0224517    .2452479
         15  |   .1296592   .0603311     2.15   0.032     .0114026    .2479157
         16  |   .1278838   .0637414     2.01   0.045     .0029427     .252825
         17  |   .1131645   .0674881     1.68   0.094    -.0191207    .2454496
         18  |   .1139498   .0710507     1.60   0.109    -.0253184    .2532181
         19  |   .0889575   .0749574     1.19   0.235    -.0579684    .2358834
         20  |   .0590724   .0823277     0.72   0.473    -.1023002     .220445
         25  |   .0193276   .0948142     0.20   0.838      -.16652    .2051753
         30  |   .0618314   .1265299     0.49   0.625    -.1861831    .3098459
         40  |   .1691342   .1452344     1.16   0.244    -.1155436     .453812
         50  |   .1575156   .1624624     0.97   0.332    -.1609312    .4759624
             |
       _cons |   7.479886   .0333396   224.35   0.000     7.414536    7.545236
-------------+----------------------------------------------------------------
     sigma_u |  1.1571384
     sigma_e |  .52274204
         rho |  .83050837   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.2314                         Obs per group: min =         1
       between = 0.1426                                        avg =       9.0
       overall = 0.1254                                        max =        25

                                                F(78,14660)        =    116.91
corr(u_i, Xb)  = 0.0172                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0631526   .0254674     2.48   0.013     .0132333    .1130719
      during |   .0364244   .0074719     4.87   0.000     .0217786    .0510703
       after |    .065949   .0138317     4.77   0.000     .0388372    .0930608
during_expat |    .128722   .0283706     4.54   0.000     .0731122    .1843319
 after_expat |   .2033986   .0364545     5.58   0.000     .1319431     .274854
             |
    ind_year |
          2  |   .0998581   .0210879     4.74   0.000     .0585231    .1411931
          3  |   .2902907   .0256198    11.33   0.000     .2400725    .3405088
          4  |   .4891054   .0272444    17.95   0.000     .4357029    .5425079
          5  |   .6542427   .0300287    21.79   0.000     .5953827    .7131027
          6  |   .8415385   .0332698    25.29   0.000     .7763254    .9067516
          7  |   .9696458   .0358637    27.04   0.000     .8993483    1.039943
          8  |   1.040531   .0385621    26.98   0.000     .9649445    1.116118
          9  |   1.165547    .041324    28.21   0.000     1.084547    1.246548
         10  |   1.280258   .0445711    28.72   0.000     1.192893    1.367623
         11  |    1.34598    .047618    28.27   0.000     1.252643    1.439317
         12  |   1.375709   .0507848    27.09   0.000     1.276164    1.475253
         13  |   1.422819   .0538372    26.43   0.000     1.317291    1.528346
         14  |   1.464071   .0568429    25.76   0.000     1.352652    1.575491
         15  |   1.535498   .0603443    25.45   0.000     1.417215     1.65378
         16  |    1.57446   .0629407    25.01   0.000     1.451089    1.697832
         17  |   1.630223   .0662926    24.59   0.000     1.500281    1.760165
         18  |   1.563321   .0694382    22.51   0.000     1.427214    1.699429
         19  |   1.590433    .072531    21.93   0.000     1.448263    1.732603
         20  |   1.636354   .0755658    21.65   0.000     1.488235    1.784472
         21  |   1.656562   .0784061    21.13   0.000     1.502877    1.810248
         22  |   1.711921   .0810413    21.12   0.000      1.55307    1.870772
         23  |   1.765299   .0836616    21.10   0.000     1.601312    1.929286
         24  |   1.797978   .0866495    20.75   0.000     1.628134    1.967822
         25  |   1.790632   .0892423    20.06   0.000     1.615706    1.965558
         26  |   -.265288   .0473066    -5.61   0.000    -.3580149   -.1725612
         27  |  -.1245332   .0447291    -2.78   0.005    -.2122079   -.0368585
         28  |   .0476966   .0430272     1.11   0.268    -.0366422    .1320354
         29  |   .2833065   .0428858     6.61   0.000      .199245     .367368
         30  |   .4654666   .0429152    10.85   0.000     .3813474    .5495858
         31  |     .61904   .0440972    14.04   0.000     .5326039    .7054762
         32  |   .7705245   .0454837    16.94   0.000     .6813707    .8596784
         33  |   .8333407    .047004    17.73   0.000     .7412069    .9254745
         34  |   .9889427   .0490517    20.16   0.000     .8927952     1.08509
         35  |   1.079759   .0508299    21.24   0.000     .9801258    1.179392
         36  |   1.131608   .0533827    21.20   0.000     1.026972    1.236245
         37  |   1.196923   .0559361    21.40   0.000     1.087281    1.306564
         38  |   1.278957   .0585234    21.85   0.000     1.164244     1.39367
         39  |   1.320138   .0612866    21.54   0.000     1.200009    1.440268
         40  |   1.417093   .0648242    21.86   0.000     1.290029    1.544156
         41  |   1.492937   .0670289    22.27   0.000     1.361552    1.624322
         42  |   1.572817   .0697405    22.55   0.000     1.436117    1.709517
         43  |   1.548721   .0728756    21.25   0.000     1.405876    1.691566
         44  |   1.589116   .0759866    20.91   0.000     1.440173    1.738059
         45  |   1.658956   .0788765    21.03   0.000     1.504349    1.813564
         46  |   1.661874   .0817586    20.33   0.000     1.501617    1.822131
         47  |   1.689413   .0840054    20.11   0.000     1.524752    1.854074
         48  |   1.747969   .0864005    20.23   0.000     1.578613    1.917325
         49  |   1.756766   .0896193    19.60   0.000     1.581101    1.932432
         50  |   1.795099   .0921398    19.48   0.000     1.614494    1.975705
             |
     age_cat |
          1  |   .2577959    .017418    14.80   0.000     .2236544    .2919374
          2  |     .25932   .0193546    13.40   0.000     .2213825    .2972576
          3  |   .2377995   .0216216    11.00   0.000     .1954185    .2801806
          4  |   .2251317    .023929     9.41   0.000     .1782279    .2720356
          5  |   .2167271   .0265502     8.16   0.000     .1646854    .2687688
          6  |   .2006394   .0294792     6.81   0.000     .1428565    .2584224
          7  |   .2089057   .0325201     6.42   0.000     .1451623    .2726492
          8  |   .1961543   .0356312     5.51   0.000     .1263127    .2659958
          9  |   .1887273   .0387645     4.87   0.000     .1127441    .2647105
         10  |   .1748996   .0419565     4.17   0.000     .0926596    .2571396
         11  |    .176311   .0452712     3.89   0.000     .0875737    .2650483
         12  |    .168511   .0485787     3.47   0.001     .0732906    .2637313
         13  |   .1581208   .0518255     3.05   0.002     .0565362    .2597053
         14  |   .1586538   .0551713     2.88   0.004     .0505112    .2667965
         15  |   .1549548   .0585132     2.65   0.008     .0402615     .269648
         16  |    .151704    .061835     2.45   0.014     .0304995    .2729084
         17  |   .1385897   .0653564     2.12   0.034     .0104829    .2666964
         18  |   .1366393    .068781     1.99   0.047     .0018199    .2714588
         19  |      .1146   .0725203     1.58   0.114     -.027549     .256749
         20  |    .082773   .0792227     1.04   0.296    -.0725135    .2380594
         25  |   .0466764   .0903021     0.52   0.605    -.1303271    .2236799
         30  |   .0493801   .1187003     0.42   0.677    -.1832875    .2820477
         40  |   .0821838   .1327608     0.62   0.536    -.1780442    .3424117
         50  |   .0724349   .1453429     0.50   0.618    -.2124554    .3573252
             |
       _cons |    7.51246   .0333548   225.23   0.000     7.447081     7.57784
-------------+----------------------------------------------------------------
     sigma_u |  1.1587439
     sigma_e |  .53506378
         rho |  .82425006   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2313665460630808

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.2314                                         min =          1
     between = 0.1426                                         avg =        9.0
     overall = 0.1254                                         max =         25

                                                F(78,14660)       =     116.91
corr(u_i, Xb)  = 0.0172                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0631526   .0254674     2.48   0.013     .0132333    .1130719
      during |   .0364244   .0074719     4.87   0.000     .0217786    .0510703
       after |    .065949   .0138317     4.77   0.000     .0388372    .0930608
during_expat |    .128722   .0283706     4.54   0.000     .0731122    .1843319
 after_expat |   .2033986   .0364545     5.58   0.000     .1319431     .274854
             |
    ind_year |
          2  |   .0998581   .0210879     4.74   0.000     .0585231    .1411931
          3  |   .2902907   .0256198    11.33   0.000     .2400725    .3405088
          4  |   .4891054   .0272444    17.95   0.000     .4357029    .5425079
          5  |   .6542427   .0300287    21.79   0.000     .5953827    .7131027
          6  |   .8415385   .0332698    25.29   0.000     .7763254    .9067516
          7  |   .9696458   .0358637    27.04   0.000     .8993483    1.039943
          8  |   1.040531   .0385621    26.98   0.000     .9649445    1.116118
          9  |   1.165547    .041324    28.21   0.000     1.084547    1.246548
         10  |   1.280258   .0445711    28.72   0.000     1.192893    1.367623
         11  |    1.34598    .047618    28.27   0.000     1.252643    1.439317
         12  |   1.375709   .0507848    27.09   0.000     1.276164    1.475253
         13  |   1.422819   .0538372    26.43   0.000     1.317291    1.528346
         14  |   1.464071   .0568429    25.76   0.000     1.352652    1.575491
         15  |   1.535498   .0603443    25.45   0.000     1.417215     1.65378
         16  |    1.57446   .0629407    25.01   0.000     1.451089    1.697832
         17  |   1.630223   .0662926    24.59   0.000     1.500281    1.760165
         18  |   1.563321   .0694382    22.51   0.000     1.427214    1.699429
         19  |   1.590433    .072531    21.93   0.000     1.448263    1.732603
         20  |   1.636354   .0755658    21.65   0.000     1.488235    1.784472
         21  |   1.656562   .0784061    21.13   0.000     1.502877    1.810248
         22  |   1.711921   .0810413    21.12   0.000      1.55307    1.870772
         23  |   1.765299   .0836616    21.10   0.000     1.601312    1.929286
         24  |   1.797978   .0866495    20.75   0.000     1.628134    1.967822
         25  |   1.790632   .0892423    20.06   0.000     1.615706    1.965558
         26  |   -.265288   .0473066    -5.61   0.000    -.3580149   -.1725612
         27  |  -.1245332   .0447291    -2.78   0.005    -.2122079   -.0368585
         28  |   .0476966   .0430272     1.11   0.268    -.0366422    .1320354
         29  |   .2833065   .0428858     6.61   0.000      .199245     .367368
         30  |   .4654666   .0429152    10.85   0.000     .3813474    .5495858
         31  |     .61904   .0440972    14.04   0.000     .5326039    .7054762
         32  |   .7705245   .0454837    16.94   0.000     .6813707    .8596784
         33  |   .8333407    .047004    17.73   0.000     .7412069    .9254745
         34  |   .9889427   .0490517    20.16   0.000     .8927952     1.08509
         35  |   1.079759   .0508299    21.24   0.000     .9801258    1.179392
         36  |   1.131608   .0533827    21.20   0.000     1.026972    1.236245
         37  |   1.196923   .0559361    21.40   0.000     1.087281    1.306564
         38  |   1.278957   .0585234    21.85   0.000     1.164244     1.39367
         39  |   1.320138   .0612866    21.54   0.000     1.200009    1.440268
         40  |   1.417093   .0648242    21.86   0.000     1.290029    1.544156
         41  |   1.492937   .0670289    22.27   0.000     1.361552    1.624322
         42  |   1.572817   .0697405    22.55   0.000     1.436117    1.709517
         43  |   1.548721   .0728756    21.25   0.000     1.405876    1.691566
         44  |   1.589116   .0759866    20.91   0.000     1.440173    1.738059
         45  |   1.658956   .0788765    21.03   0.000     1.504349    1.813564
         46  |   1.661874   .0817586    20.33   0.000     1.501617    1.822131
         47  |   1.689413   .0840054    20.11   0.000     1.524752    1.854074
         48  |   1.747969   .0864005    20.23   0.000     1.578613    1.917325
         49  |   1.756766   .0896193    19.60   0.000     1.581101    1.932432
         50  |   1.795099   .0921398    19.48   0.000     1.614494    1.975705
             |
     age_cat |
          1  |   .2577959    .017418    14.80   0.000     .2236544    .2919374
          2  |     .25932   .0193546    13.40   0.000     .2213825    .2972576
          3  |   .2377995   .0216216    11.00   0.000     .1954185    .2801806
          4  |   .2251317    .023929     9.41   0.000     .1782279    .2720356
          5  |   .2167271   .0265502     8.16   0.000     .1646854    .2687688
          6  |   .2006394   .0294792     6.81   0.000     .1428565    .2584224
          7  |   .2089057   .0325201     6.42   0.000     .1451623    .2726492
          8  |   .1961543   .0356312     5.51   0.000     .1263127    .2659958
          9  |   .1887273   .0387645     4.87   0.000     .1127441    .2647105
         10  |   .1748996   .0419565     4.17   0.000     .0926596    .2571396
         11  |    .176311   .0452712     3.89   0.000     .0875737    .2650483
         12  |    .168511   .0485787     3.47   0.001     .0732906    .2637313
         13  |   .1581208   .0518255     3.05   0.002     .0565362    .2597053
         14  |   .1586538   .0551713     2.88   0.004     .0505112    .2667965
         15  |   .1549548   .0585132     2.65   0.008     .0402615     .269648
         16  |    .151704    .061835     2.45   0.014     .0304995    .2729084
         17  |   .1385897   .0653564     2.12   0.034     .0104829    .2666964
         18  |   .1366393    .068781     1.99   0.047     .0018199    .2714588
         19  |      .1146   .0725203     1.58   0.114     -.027549     .256749
         20  |    .082773   .0792227     1.04   0.296    -.0725135    .2380594
         25  |   .0466764   .0903021     0.52   0.605    -.1303271    .2236799
         30  |   .0493801   .1187003     0.42   0.677    -.1832875    .2820477
         40  |   .0821838   .1327608     0.62   0.536    -.1780442    .3424117
         50  |   .0724349   .1453429     0.50   0.618    -.2124554    .3573252
             |
       _cons |    7.51246   .0333548   225.23   0.000     7.447081     7.57784
-------------+----------------------------------------------------------------
     sigma_u |  1.1587439
     sigma_e |  .53506378
         rho |  .82425006   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 14660) =   23.76
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 14660) =    8.83
            Prob > F =    0.0030

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 14660) =   20.59
            Prob > F =    0.0000

 ( 1)  during_expat = 0

       F(  1, 14660) =   20.59
            Prob > F =    0.0000
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 14660) =    9.35
            Prob > F =    0.0022

 ( 1)  after_expat = 0

       F(  1, 14660) =   31.13
            Prob > F =    0.0000
(1 real change made)
(file output/figure/acquisitions_lnQL_slope.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.2312                         Obs per group: min =         1
       between = 0.1398                                        avg =       9.0
       overall = 0.1240                                        max =        25

                                                F(82,14660)        =    111.00
corr(u_i, Xb)  = 0.0132                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0640343   .0254514     2.52   0.012     .0141463    .1139223
   during_DD |   .0274363   .0076256     3.60   0.000     .0124892    .0423835
   during_DE |   .1286609   .0421956     3.05   0.002     .0459523    .2113695
   during_ED |   .1378795   .0324918     4.24   0.000     .0741916    .2015675
   during_EE |   .1832595    .038619     4.75   0.000     .1075615    .2589576
    after_DD |   .0326245   .0148316     2.20   0.028     .0035528    .0616962
    after_DE |   .2522673   .0489113     5.16   0.000      .156395    .3481396
    after_ED |   .2324402    .048044     4.84   0.000     .1382679    .3266125
    after_EE |   .2703164    .049273     5.49   0.000     .1737351    .3668977
             |
    ind_year |
          2  |   .1005024   .0210797     4.77   0.000     .0591836    .1418213
          3  |   .2917082   .0256031    11.39   0.000     .2415229    .3418934
          4  |   .4911467   .0272189    18.04   0.000     .4377943    .5444991
          5  |   .6568918   .0299921    21.90   0.000     .5981035    .7156802
          6  |   .8448228   .0332216    25.43   0.000     .7797043    .9099413
          7  |    .973643   .0358048    27.19   0.000     .9034611    1.043825
          8  |   1.045007   .0384982    27.14   0.000     .9695457    1.120468
          9  |   1.170829    .041242    28.39   0.000      1.08999    1.251669
         10  |   1.286507   .0444782    28.92   0.000     1.199324     1.37369
         11  |   1.353427   .0475054    28.49   0.000      1.26031    1.446543
         12  |   1.384218   .0506549    27.33   0.000     1.284928    1.483508
         13  |    1.43267    .053687    26.69   0.000     1.327437    1.537904
         14  |    1.47525   .0566704    26.03   0.000     1.364169    1.586331
         15  |   1.548074   .0601414    25.74   0.000     1.430189    1.665958
         16  |   1.588406   .0627144    25.33   0.000     1.465478    1.711334
         17  |   1.646118   .0660253    24.93   0.000       1.5167    1.775536
         18  |    1.58068   .0691378    22.86   0.000     1.445161    1.716199
         19  |   1.609299   .0721978    22.29   0.000     1.467782    1.750816
         20  |   1.656808   .0752104    22.03   0.000     1.509387     1.80423
         21  |   1.678436   .0780291    21.51   0.000     1.525489    1.831383
         22  |   1.735293   .0806291    21.52   0.000      1.57725    1.893336
         23  |   1.789987   .0832187    21.51   0.000     1.626868    1.953107
         24  |   1.824087   .0861907    21.16   0.000     1.655142    1.993031
         25  |   1.818303    .088765    20.48   0.000     1.644312    1.992293
         26  |  -.2649499   .0472924    -5.60   0.000    -.3576489   -.1722509
         27  |  -.1235829   .0447162    -2.76   0.006    -.2112322   -.0359336
         28  |   .0490135   .0430071     1.14   0.254    -.0352858    .1333128
         29  |   .2852429   .0428638     6.65   0.000     .2012243    .3692614
         30  |   .4677837   .0428876    10.91   0.000     .3837186    .5518487
         31  |   .6221144   .0440583    14.12   0.000     .5357546    .7084742
         32  |   .7743467   .0454289    17.05   0.000     .6853004     .863393
         33  |   .8378334   .0469441    17.85   0.000     .7458171    .9298498
         34  |    .994264   .0489789    20.30   0.000     .8982591    1.090269
         35  |   1.085976   .0507431    21.40   0.000     .9865127    1.185439
         36  |   1.139045   .0532874    21.38   0.000     1.034595    1.243495
         37  |   1.205443    .055833    21.59   0.000     1.096004    1.314883
         38  |   1.288816   .0583954    22.07   0.000     1.174354    1.403279
         39  |   1.331484   .0611355    21.78   0.000     1.211651    1.451317
         40  |   1.429802   .0646423    22.12   0.000     1.303095    1.556509
         41  |   1.506818    .066821    22.55   0.000      1.37584    1.637795
         42  |   1.588264   .0695223    22.85   0.000     1.451992    1.724536
         43  |   1.565586   .0726362    21.55   0.000      1.42321    1.707962
         44  |   1.607225   .0757202    21.23   0.000     1.458804    1.755646
         45  |   1.678581   .0785885    21.36   0.000     1.524538    1.832624
         46  |   1.682817   .0814285    20.67   0.000     1.523207    1.842427
         47  |   1.711578   .0836588    20.46   0.000     1.547596     1.87556
         48  |   1.771495   .0860366    20.59   0.000     1.602853    1.940138
         49  |   1.781927   .0892516    19.97   0.000     1.606982    1.956871
         50  |   1.821587   .0917189    19.86   0.000     1.641806    2.001368
             |
     age_cat |
          1  |   .2571175   .0174186    14.76   0.000     .2229749    .2912601
          2  |   .2581164   .0193523    13.34   0.000     .2201834    .2960494
          3  |   .2360267   .0216178    10.92   0.000      .193653    .2784003
          4  |   .2227245   .0239228     9.31   0.000     .1758327    .2696162
          5  |   .2135624   .0265432     8.05   0.000     .1615344    .2655904
          6  |    .196745   .0294682     6.68   0.000     .1389837    .2545063
          7  |   .2041763   .0325104     6.28   0.000     .1404519    .2679008
          8  |   .1906459   .0356154     5.35   0.000     .1208351    .2604566
          9  |   .1824584   .0387467     4.71   0.000       .10651    .2584067
         10  |    .167812   .0419352     4.00   0.000     .0856138    .2500102
         11  |   .1683157   .0452393     3.72   0.000     .0796409    .2569905
         12  |   .1596461    .048547     3.29   0.001     .0644879    .2548043
         13  |   .1483597   .0517992     2.86   0.004     .0468268    .2498926
         14  |   .1479444   .0551393     2.68   0.007     .0398644    .2560243
         15  |   .1432515   .0584757     2.45   0.014     .0286317    .2578713
         16  |   .1392823   .0617881     2.25   0.024     .0181698    .2603949
         17  |    .125146   .0653235     1.92   0.055    -.0028963    .2531883
         18  |   .1221777   .0687425     1.78   0.076    -.0125661    .2569216
         19  |   .0991219   .0724805     1.37   0.171     -.042949    .2411928
         20  |   .0651221   .0791561     0.82   0.411    -.0900337     .220278
         25  |   .0259212   .0902125     0.29   0.774    -.1509068    .2027491
         30  |   .0282857   .1186445     0.24   0.812    -.2042724    .2608439
         40  |   .0644716   .1327668     0.49   0.627    -.1957679    .3247112
         50  |   .0557451   .1453018     0.38   0.701    -.2290648    .3405549
             |
       _cons |   7.512757   .0333434   225.31   0.000       7.4474    7.578114
-------------+----------------------------------------------------------------
     sigma_u |  1.1602931
     sigma_e |  .53512177
         rho |  .82460548   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2312094851652381

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.2312                                         min =          1
     between = 0.1398                                         avg =        9.0
     overall = 0.1240                                         max =         25

                                                F(82,14660)       =     111.00
corr(u_i, Xb)  = 0.0132                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0640343   .0254514     2.52   0.012     .0141463    .1139223
   during_DD |   .0274363   .0076256     3.60   0.000     .0124892    .0423835
   during_DE |   .1286609   .0421956     3.05   0.002     .0459523    .2113695
   during_ED |   .1378795   .0324918     4.24   0.000     .0741916    .2015675
   during_EE |   .1832595    .038619     4.75   0.000     .1075615    .2589576
    after_DD |   .0326245   .0148316     2.20   0.028     .0035528    .0616962
    after_DE |   .2522673   .0489113     5.16   0.000      .156395    .3481396
    after_ED |   .2324402    .048044     4.84   0.000     .1382679    .3266125
    after_EE |   .2703164    .049273     5.49   0.000     .1737351    .3668977
             |
    ind_year |
          2  |   .1005024   .0210797     4.77   0.000     .0591836    .1418213
          3  |   .2917082   .0256031    11.39   0.000     .2415229    .3418934
          4  |   .4911467   .0272189    18.04   0.000     .4377943    .5444991
          5  |   .6568918   .0299921    21.90   0.000     .5981035    .7156802
          6  |   .8448228   .0332216    25.43   0.000     .7797043    .9099413
          7  |    .973643   .0358048    27.19   0.000     .9034611    1.043825
          8  |   1.045007   .0384982    27.14   0.000     .9695457    1.120468
          9  |   1.170829    .041242    28.39   0.000      1.08999    1.251669
         10  |   1.286507   .0444782    28.92   0.000     1.199324     1.37369
         11  |   1.353427   .0475054    28.49   0.000      1.26031    1.446543
         12  |   1.384218   .0506549    27.33   0.000     1.284928    1.483508
         13  |    1.43267    .053687    26.69   0.000     1.327437    1.537904
         14  |    1.47525   .0566704    26.03   0.000     1.364169    1.586331
         15  |   1.548074   .0601414    25.74   0.000     1.430189    1.665958
         16  |   1.588406   .0627144    25.33   0.000     1.465478    1.711334
         17  |   1.646118   .0660253    24.93   0.000       1.5167    1.775536
         18  |    1.58068   .0691378    22.86   0.000     1.445161    1.716199
         19  |   1.609299   .0721978    22.29   0.000     1.467782    1.750816
         20  |   1.656808   .0752104    22.03   0.000     1.509387     1.80423
         21  |   1.678436   .0780291    21.51   0.000     1.525489    1.831383
         22  |   1.735293   .0806291    21.52   0.000      1.57725    1.893336
         23  |   1.789987   .0832187    21.51   0.000     1.626868    1.953107
         24  |   1.824087   .0861907    21.16   0.000     1.655142    1.993031
         25  |   1.818303    .088765    20.48   0.000     1.644312    1.992293
         26  |  -.2649499   .0472924    -5.60   0.000    -.3576489   -.1722509
         27  |  -.1235829   .0447162    -2.76   0.006    -.2112322   -.0359336
         28  |   .0490135   .0430071     1.14   0.254    -.0352858    .1333128
         29  |   .2852429   .0428638     6.65   0.000     .2012243    .3692614
         30  |   .4677837   .0428876    10.91   0.000     .3837186    .5518487
         31  |   .6221144   .0440583    14.12   0.000     .5357546    .7084742
         32  |   .7743467   .0454289    17.05   0.000     .6853004     .863393
         33  |   .8378334   .0469441    17.85   0.000     .7458171    .9298498
         34  |    .994264   .0489789    20.30   0.000     .8982591    1.090269
         35  |   1.085976   .0507431    21.40   0.000     .9865127    1.185439
         36  |   1.139045   .0532874    21.38   0.000     1.034595    1.243495
         37  |   1.205443    .055833    21.59   0.000     1.096004    1.314883
         38  |   1.288816   .0583954    22.07   0.000     1.174354    1.403279
         39  |   1.331484   .0611355    21.78   0.000     1.211651    1.451317
         40  |   1.429802   .0646423    22.12   0.000     1.303095    1.556509
         41  |   1.506818    .066821    22.55   0.000      1.37584    1.637795
         42  |   1.588264   .0695223    22.85   0.000     1.451992    1.724536
         43  |   1.565586   .0726362    21.55   0.000      1.42321    1.707962
         44  |   1.607225   .0757202    21.23   0.000     1.458804    1.755646
         45  |   1.678581   .0785885    21.36   0.000     1.524538    1.832624
         46  |   1.682817   .0814285    20.67   0.000     1.523207    1.842427
         47  |   1.711578   .0836588    20.46   0.000     1.547596     1.87556
         48  |   1.771495   .0860366    20.59   0.000     1.602853    1.940138
         49  |   1.781927   .0892516    19.97   0.000     1.606982    1.956871
         50  |   1.821587   .0917189    19.86   0.000     1.641806    2.001368
             |
     age_cat |
          1  |   .2571175   .0174186    14.76   0.000     .2229749    .2912601
          2  |   .2581164   .0193523    13.34   0.000     .2201834    .2960494
          3  |   .2360267   .0216178    10.92   0.000      .193653    .2784003
          4  |   .2227245   .0239228     9.31   0.000     .1758327    .2696162
          5  |   .2135624   .0265432     8.05   0.000     .1615344    .2655904
          6  |    .196745   .0294682     6.68   0.000     .1389837    .2545063
          7  |   .2041763   .0325104     6.28   0.000     .1404519    .2679008
          8  |   .1906459   .0356154     5.35   0.000     .1208351    .2604566
          9  |   .1824584   .0387467     4.71   0.000       .10651    .2584067
         10  |    .167812   .0419352     4.00   0.000     .0856138    .2500102
         11  |   .1683157   .0452393     3.72   0.000     .0796409    .2569905
         12  |   .1596461    .048547     3.29   0.001     .0644879    .2548043
         13  |   .1483597   .0517992     2.86   0.004     .0468268    .2498926
         14  |   .1479444   .0551393     2.68   0.007     .0398644    .2560243
         15  |   .1432515   .0584757     2.45   0.014     .0286317    .2578713
         16  |   .1392823   .0617881     2.25   0.024     .0181698    .2603949
         17  |    .125146   .0653235     1.92   0.055    -.0028963    .2531883
         18  |   .1221777   .0687425     1.78   0.076    -.0125661    .2569216
         19  |   .0991219   .0724805     1.37   0.171     -.042949    .2411928
         20  |   .0651221   .0791561     0.82   0.411    -.0900337     .220278
         25  |   .0259212   .0902125     0.29   0.774    -.1509068    .2027491
         30  |   .0282857   .1186445     0.24   0.812    -.2042724    .2608439
         40  |   .0644716   .1327668     0.49   0.627    -.1957679    .3247112
         50  |   .0557451   .1453018     0.38   0.701    -.2290648    .3405549
             |
       _cons |   7.512757   .0333434   225.31   0.000       7.4474    7.578114
-------------+----------------------------------------------------------------
     sigma_u |  1.1602931
     sigma_e |  .53512177
         rho |  .82460548   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. local fname = e(depvar)

. local title : variable label `fname'

. 
. slopegraph, ///
>         from(0 0 0 0 1 _b[during_DE] 1 _b[during_DE]) ///
>         to(1 _b[during_DD] 1 _b[during_DE] 2 _b[during_ED]+_b[during_DE] 2 _b[during_EE]+_b[during_DE]) ///
>         style(p1 p2 p1 p2) ///
>         label(Local-Local Local-Expat Expat-Local Expat-Expat) ///
>         width_test(during_DD during_DE during_ED during_EE) ///
>         star_test(1==1 during_DE==during_DD 1==1 during_EE==during_ED) ///
>         connect(stepstair) ///
>         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(.5) plotregion(style(none)) x
> size(16) ysize(10))
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str11
(1 real change made)

 ( 1)  during_DD = 0

       F(  1, 14660) =   12.95
            Prob > F =    0.0003

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_DE = 0

       F(  1, 14660) =    9.30
            Prob > F =    0.0023

 ( 1)  - during_DD + during_DE = 0

       F(  1, 14660) =    5.59
            Prob > F =    0.0181
variable label was str11 now str13
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_ED = 0

       F(  1, 14660) =   18.01
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_EE = 0

       F(  1, 14660) =   22.52
            Prob > F =    0.0000

 ( 1)  - during_ED + during_EE = 0

       F(  1, 14660) =    0.84
            Prob > F =    0.3587

. 
. graph export output/figure/`fname'_tree.png, width(1600) replace
(file output/figure/lnQL_tree.png written in PNG format)

. 
end of do-file
(sum of wgt is 117,753.451417632)

Linear regression                               Number of obs     =    318,157
                                                F(75, 18788)      =     158.69
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1985
                                                Root MSE          =     .43775

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3262016   .0079375    41.10   0.000     .3106435    .3417598
       expat |   .0602606   .0082092     7.34   0.000     .0441699    .0763513
             |
    ind_year |
          2  |  -.0309122   .0105088    -2.94   0.003    -.0515104    -.010314
          3  |  -.0565516   .0119038    -4.75   0.000    -.0798841   -.0332191
          4  |  -.0645722   .0122914    -5.25   0.000    -.0886646   -.0404799
          5  |  -.0516727   .0127155    -4.06   0.000    -.0765961   -.0267492
          6  |   -.067678   .0127844    -5.29   0.000    -.0927366   -.0426193
          7  |  -.0692775   .0128075    -5.41   0.000    -.0943814   -.0441735
          8  |  -.0846777   .0129402    -6.54   0.000    -.1100417   -.0593137
          9  |  -.0949965     .01295    -7.34   0.000    -.1203797   -.0696133
         10  |  -.0921329   .0130623    -7.05   0.000    -.1177362   -.0665296
         11  |   -.106699   .0129743    -8.22   0.000    -.1321299   -.0812681
         12  |  -.1097349   .0129595    -8.47   0.000    -.1351367   -.0843331
         13  |  -.1092239   .0129872    -8.41   0.000      -.13468   -.0837678
         14  |  -.0998986   .0131298    -7.61   0.000    -.1256341   -.0741631
         15  |  -.0908536   .0132061    -6.88   0.000    -.1167388   -.0649684
         16  |  -.0812144   .0133443    -6.09   0.000    -.1073703   -.0550584
         17  |  -.0694564   .0134405    -5.17   0.000     -.095801   -.0431119
         18  |  -.0669477   .0135319    -4.95   0.000    -.0934714   -.0404239
         19  |  -.0611142   .0136651    -4.47   0.000     -.087899   -.0343293
         20  |  -.0491491   .0137901    -3.56   0.000     -.076179   -.0221193
         21  |  -.0398893   .0139227    -2.87   0.004    -.0671791   -.0125996
         22  |   -.042924   .0141906    -3.02   0.002    -.0707388   -.0151091
         23  |  -.0416952   .0142704    -2.92   0.003    -.0696665    -.013724
         24  |  -.1401664    .014104    -9.94   0.000    -.1678115   -.1125213
         25  |  -.1677507   .0143718   -11.67   0.000    -.1959206   -.1395807
         26  |   .2040014   .0198199    10.29   0.000     .1651526    .2428502
         27  |   .1620647   .0173129     9.36   0.000     .1281298    .1959996
         28  |   .1674228   .0165574    10.11   0.000     .1349688    .1998768
         29  |   .1703955   .0161877    10.53   0.000     .1386661    .2021248
         30  |   .1909376   .0160497    11.90   0.000     .1594787    .2223965
         31  |   .1883834   .0157808    11.94   0.000     .1574516    .2193153
         32  |   .1858137   .0155257    11.97   0.000      .155382    .2162454
         33  |   .1736131   .0153092    11.34   0.000     .1436057    .2036206
         34  |   .1800226   .0152628    11.79   0.000     .1501061    .2099392
         35  |    .181714   .0152797    11.89   0.000     .1517645    .2116635
         36  |   .1838115   .0152409    12.06   0.000     .1539379     .213685
         37  |   .1769673   .0152021    11.64   0.000     .1471697    .2067648
         38  |   .1748916   .0150965    11.58   0.000     .1453011    .2044821
         39  |   .1715893   .0151568    11.32   0.000     .1418806    .2012979
         40  |   .1695959   .0152163    11.15   0.000     .1397706    .1994212
         41  |   .1908384   .0152966    12.48   0.000     .1608556    .2208211
         42  |   .1963961   .0153656    12.78   0.000     .1662781    .2265141
         43  |   .1958919   .0155958    12.56   0.000     .1653228     .226461
         44  |   .2118617   .0157374    13.46   0.000      .181015    .2427085
         45  |   .2125385   .0158967    13.37   0.000     .1813795    .2436975
         46  |   .2200263   .0159992    13.75   0.000     .1886664    .2513862
         47  |   .2278563   .0163237    13.96   0.000     .1958603    .2598522
         48  |   .2168213   .0164316    13.20   0.000     .1846139    .2490287
         49  |  -.0256575     .01654    -1.55   0.121    -.0580774    .0067623
         50  |  -.0685528   .0168175    -4.08   0.000    -.1015167   -.0355889
             |
     age_cat |
          1  |   .0555133   .0070353     7.89   0.000     .0417234    .0693032
          2  |   .0836621   .0073731    11.35   0.000     .0692102    .0981139
          3  |   .1018513   .0075698    13.45   0.000     .0870137    .1166888
          4  |    .126088   .0078152    16.13   0.000     .1107694    .1414065
          5  |   .1428406   .0080321    17.78   0.000     .1270968    .1585843
          6  |   .1560615   .0082989    18.81   0.000     .1397949     .172328
          7  |   .1661581   .0085348    19.47   0.000     .1494292     .182887
          8  |   .1826815   .0088455    20.65   0.000     .1653435    .2000196
          9  |   .1881186   .0090413    20.81   0.000     .1703969    .2058403
         10  |   .1904778   .0092235    20.65   0.000      .172399    .2085567
         11  |   .1985669   .0094172    21.09   0.000     .1801084    .2170254
         12  |   .2017779   .0096336    20.95   0.000     .1828951    .2206607
         13  |   .2135593   .0099364    21.49   0.000     .1940831    .2330354
         14  |   .2231671   .0103324    21.60   0.000     .2029146    .2434196
         15  |   .2352772   .0106376    22.12   0.000     .2144266    .2561278
         16  |   .2425541   .0110154    22.02   0.000      .220963    .2641453
         17  |   .2420421   .0114277    21.18   0.000     .2196427    .2644414
         18  |    .248948   .0118897    20.94   0.000     .2256432    .2722528
         19  |   .2370027   .0122778    19.30   0.000     .2129372    .2610682
         20  |   .2466989   .0127519    19.35   0.000      .221704    .2716937
         25  |   .2593014   .0173985    14.90   0.000     .2251988    .2934041
         30  |   .0760896   .0205828     3.70   0.000     .0357456    .1164337
         40  |   .1025038    .020489     5.00   0.000     .0623435    .1426641
         50  |   .0932567   .0232284     4.01   0.000     .0477269    .1387864
             |
       _cons |   .1455308   .0128754    11.30   0.000      .120294    .1707677
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    318,157
                                                F(75, 18788)      =     158.69
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1985
                                                Root MSE          =     .43775

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3262016   .0079375    41.10   0.000     .3106435    .3417598
       expat |   .0602606   .0082092     7.34   0.000     .0441699    .0763513
             |
    ind_year |
          2  |  -.0309122   .0105088    -2.94   0.003    -.0515104    -.010314
          3  |  -.0565516   .0119038    -4.75   0.000    -.0798841   -.0332191
          4  |  -.0645722   .0122914    -5.25   0.000    -.0886646   -.0404799
          5  |  -.0516727   .0127155    -4.06   0.000    -.0765961   -.0267492
          6  |   -.067678   .0127844    -5.29   0.000    -.0927366   -.0426193
          7  |  -.0692775   .0128075    -5.41   0.000    -.0943814   -.0441735
          8  |  -.0846777   .0129402    -6.54   0.000    -.1100417   -.0593137
          9  |  -.0949965     .01295    -7.34   0.000    -.1203797   -.0696133
         10  |  -.0921329   .0130623    -7.05   0.000    -.1177362   -.0665296
         11  |   -.106699   .0129743    -8.22   0.000    -.1321299   -.0812681
         12  |  -.1097349   .0129595    -8.47   0.000    -.1351367   -.0843331
         13  |  -.1092239   .0129872    -8.41   0.000      -.13468   -.0837678
         14  |  -.0998986   .0131298    -7.61   0.000    -.1256341   -.0741631
         15  |  -.0908536   .0132061    -6.88   0.000    -.1167388   -.0649684
         16  |  -.0812144   .0133443    -6.09   0.000    -.1073703   -.0550584
         17  |  -.0694564   .0134405    -5.17   0.000     -.095801   -.0431119
         18  |  -.0669477   .0135319    -4.95   0.000    -.0934714   -.0404239
         19  |  -.0611142   .0136651    -4.47   0.000     -.087899   -.0343293
         20  |  -.0491491   .0137901    -3.56   0.000     -.076179   -.0221193
         21  |  -.0398893   .0139227    -2.87   0.004    -.0671791   -.0125996
         22  |   -.042924   .0141906    -3.02   0.002    -.0707388   -.0151091
         23  |  -.0416952   .0142704    -2.92   0.003    -.0696665    -.013724
         24  |  -.1401664    .014104    -9.94   0.000    -.1678115   -.1125213
         25  |  -.1677507   .0143718   -11.67   0.000    -.1959206   -.1395807
         26  |   .2040014   .0198199    10.29   0.000     .1651526    .2428502
         27  |   .1620647   .0173129     9.36   0.000     .1281298    .1959996
         28  |   .1674228   .0165574    10.11   0.000     .1349688    .1998768
         29  |   .1703955   .0161877    10.53   0.000     .1386661    .2021248
         30  |   .1909376   .0160497    11.90   0.000     .1594787    .2223965
         31  |   .1883834   .0157808    11.94   0.000     .1574516    .2193153
         32  |   .1858137   .0155257    11.97   0.000      .155382    .2162454
         33  |   .1736131   .0153092    11.34   0.000     .1436057    .2036206
         34  |   .1800226   .0152628    11.79   0.000     .1501061    .2099392
         35  |    .181714   .0152797    11.89   0.000     .1517645    .2116635
         36  |   .1838115   .0152409    12.06   0.000     .1539379     .213685
         37  |   .1769673   .0152021    11.64   0.000     .1471697    .2067648
         38  |   .1748916   .0150965    11.58   0.000     .1453011    .2044821
         39  |   .1715893   .0151568    11.32   0.000     .1418806    .2012979
         40  |   .1695959   .0152163    11.15   0.000     .1397706    .1994212
         41  |   .1908384   .0152966    12.48   0.000     .1608556    .2208211
         42  |   .1963961   .0153656    12.78   0.000     .1662781    .2265141
         43  |   .1958919   .0155958    12.56   0.000     .1653228     .226461
         44  |   .2118617   .0157374    13.46   0.000      .181015    .2427085
         45  |   .2125385   .0158967    13.37   0.000     .1813795    .2436975
         46  |   .2200263   .0159992    13.75   0.000     .1886664    .2513862
         47  |   .2278563   .0163237    13.96   0.000     .1958603    .2598522
         48  |   .2168213   .0164316    13.20   0.000     .1846139    .2490287
         49  |  -.0256575     .01654    -1.55   0.121    -.0580774    .0067623
         50  |  -.0685528   .0168175    -4.08   0.000    -.1015167   -.0355889
             |
     age_cat |
          1  |   .0555133   .0070353     7.89   0.000     .0417234    .0693032
          2  |   .0836621   .0073731    11.35   0.000     .0692102    .0981139
          3  |   .1018513   .0075698    13.45   0.000     .0870137    .1166888
          4  |    .126088   .0078152    16.13   0.000     .1107694    .1414065
          5  |   .1428406   .0080321    17.78   0.000     .1270968    .1585843
          6  |   .1560615   .0082989    18.81   0.000     .1397949     .172328
          7  |   .1661581   .0085348    19.47   0.000     .1494292     .182887
          8  |   .1826815   .0088455    20.65   0.000     .1653435    .2000196
          9  |   .1881186   .0090413    20.81   0.000     .1703969    .2058403
         10  |   .1904778   .0092235    20.65   0.000      .172399    .2085567
         11  |   .1985669   .0094172    21.09   0.000     .1801084    .2170254
         12  |   .2017779   .0096336    20.95   0.000     .1828951    .2206607
         13  |   .2135593   .0099364    21.49   0.000     .1940831    .2330354
         14  |   .2231671   .0103324    21.60   0.000     .2029146    .2434196
         15  |   .2352772   .0106376    22.12   0.000     .2144266    .2561278
         16  |   .2425541   .0110154    22.02   0.000      .220963    .2641453
         17  |   .2420421   .0114277    21.18   0.000     .2196427    .2644414
         18  |    .248948   .0118897    20.94   0.000     .2256432    .2722528
         19  |   .2370027   .0122778    19.30   0.000     .2129372    .2610682
         20  |   .2466989   .0127519    19.35   0.000      .221704    .2716937
         25  |   .2593014   .0173985    14.90   0.000     .2251988    .2934041
         30  |   .0760896   .0205828     3.70   0.000     .0357456    .1164337
         40  |   .1025038    .020489     5.00   0.000     .0623435    .1426641
         50  |   .0932567   .0232284     4.01   0.000     .0477269    .1387864
             |
       _cons |   .1455308   .0128754    11.30   0.000      .120294    .1707677
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    318,157
Group variable: id                              Number of groups  =     18,789

R-sq:                                           Obs per group:
     within  = 0.0479                                         min =          1
     between = 0.1552                                         avg =       16.9
     overall = 0.0964                                         max =        148

                                                F(75,18788)       =      32.87
corr(u_i, Xb)  = 0.2038                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0318759   .0117035     2.72   0.006     .0089359    .0548158
       expat |   .0161278   .0037025     4.36   0.000     .0088705    .0233851
             |
    ind_year |
          2  |  -.0194864   .0097975    -1.99   0.047    -.0386904   -.0002824
          3  |  -.0378498   .0117379    -3.22   0.001    -.0608572   -.0148424
          4  |  -.0450521   .0124745    -3.61   0.000    -.0695032    -.020601
          5  |  -.0332509   .0136807    -2.43   0.015    -.0600662   -.0064356
          6  |    -.04443   .0145187    -3.06   0.002    -.0728879   -.0159722
          7  |  -.0437104   .0154868    -2.82   0.005    -.0740659   -.0133548
          8  |  -.0574801   .0165474    -3.47   0.001    -.0899146   -.0250457
          9  |  -.0604168   .0177868    -3.40   0.001    -.0952806    -.025553
         10  |  -.0571758   .0189563    -3.02   0.003    -.0943318   -.0200198
         11  |  -.0632635   .0202316    -3.13   0.002    -.1029192   -.0236077
         12  |  -.0618783   .0213503    -2.90   0.004    -.1037269   -.0200297
         13  |  -.0568233   .0227098    -2.50   0.012    -.1013366   -.0123101
         14  |  -.0455398   .0240573    -1.89   0.058    -.0926943    .0016148
         15  |  -.0338168   .0254102    -1.33   0.183    -.0836231    .0159896
         16  |  -.0229073   .0267728    -0.86   0.392    -.0753845    .0295699
         17  |  -.0095015   .0281438    -0.34   0.736    -.0646659    .0456629
         18  |  -.0072545   .0296866    -0.24   0.807     -.065443     .050934
         19  |   -.004025   .0311106    -0.13   0.897    -.0650046    .0569546
         20  |   .0038689   .0324414     0.12   0.905    -.0597192     .067457
         21  |    .008694   .0337329     0.26   0.797    -.0574256    .0748135
         22  |   .0101609   .0349916     0.29   0.772    -.0584257    .0787476
         23  |   .0088226    .036237     0.24   0.808    -.0622053    .0798504
         24  |  -.1076445   .0374962    -2.87   0.004    -.1811403   -.0341486
         25  |  -.1401483   .0389804    -3.60   0.000    -.2165533   -.0637432
         26  |   .0245342   .0223018     1.10   0.271    -.0191793    .0682478
         27  |    .018503   .0198815     0.93   0.352    -.0204664    .0574725
         28  |   .0282736   .0193772     1.46   0.145    -.0097075    .0662547
         29  |   .0357765   .0190559     1.88   0.060    -.0015748    .0731278
         30  |   .0442398   .0191774     2.31   0.021     .0066504    .0818291
         31  |   .0364944   .0192722     1.89   0.058    -.0012808    .0742695
         32  |   .0338847   .0198011     1.71   0.087    -.0049273    .0726967
         33  |   .0298686   .0204614     1.46   0.144    -.0102376    .0699748
         34  |   .0306845    .021148     1.45   0.147    -.0107675    .0721364
         35  |   .0325637    .022106     1.47   0.141    -.0107659    .0758934
         36  |   .0304338   .0232113     1.31   0.190    -.0150625    .0759301
         37  |   .0284591    .024243     1.17   0.240    -.0190594    .0759777
         38  |   .0286899   .0252396     1.14   0.256     -.020782    .0781618
         39  |   .0279011   .0263972     1.06   0.291    -.0238399     .079642
         40  |    .027136    .027468     0.99   0.323    -.0267037    .0809757
         41  |   .0481928   .0286593     1.68   0.093    -.0079821    .1043676
         42  |   .0553304   .0299121     1.85   0.064       -.0033    .1139608
         43  |   .0537797   .0313743     1.71   0.087    -.0077166    .1152761
         44  |   .0699605   .0327664     2.14   0.033     .0057354    .1341857
         45  |   .0734917   .0340201     2.16   0.031     .0068094    .1401741
         46  |   .0764843   .0354173     2.16   0.031     .0070632    .1459054
         47  |   .0850344   .0366691     2.32   0.020     .0131596    .1569092
         48  |   .0743087   .0376023     1.98   0.048     .0006047    .1480126
         49  |  -.1939828   .0390568    -4.97   0.000    -.2705377    -.117428
         50  |  -.2481088   .0404743    -6.13   0.000     -.327442   -.1687756
             |
     age_cat |
          1  |    .045062   .0067596     6.67   0.000     .0318125    .0583115
          2  |   .0681058   .0076327     8.92   0.000      .053145    .0830666
          3  |   .0843818   .0085677     9.85   0.000     .0675884    .1011753
          4  |   .1049648   .0097106    10.81   0.000     .0859311    .1239986
          5  |   .1207893   .0109155    11.07   0.000     .0993939    .1421848
          6  |   .1328174   .0122716    10.82   0.000      .108764    .1568708
          7  |   .1394389   .0136343    10.23   0.000     .1127145    .1661633
          8  |   .1532192   .0150833    10.16   0.000     .1236547    .1827838
          9  |   .1551251   .0165271     9.39   0.000     .1227306    .1875197
         10  |   .1569477   .0179723     8.73   0.000     .1217203    .1921752
         11  |    .164483   .0194097     8.47   0.000     .1264382    .2025277
         12  |   .1637805   .0208728     7.85   0.000     .1228679    .2046931
         13  |   .1750296   .0224332     7.80   0.000     .1310585    .2190006
         14  |   .1854679   .0240306     7.72   0.000     .1383659      .23257
         15  |   .1934507   .0255262     7.58   0.000      .143417    .2434844
         16  |   .2010448   .0270779     7.42   0.000     .1479697      .25412
         17  |   .1998775   .0285566     7.00   0.000      .143904    .2558511
         18  |   .2063033   .0302629     6.82   0.000     .1469852    .2656214
         19  |   .1953188   .0320484     6.09   0.000      .132501    .2581365
         20  |   .2044236   .0347157     5.89   0.000     .1363777    .2724694
         25  |   .2257414    .040248     5.61   0.000     .1468517    .3046312
         30  |   .2056731   .0593574     3.46   0.001     .0893273    .3220189
         40  |   .1941639   .0671053     2.89   0.004     .0626314    .3256963
         50  |   .1219068   .0724608     1.68   0.093     -.020123    .2639366
             |
       _cons |   .2617062   .0141798    18.46   0.000     .2339125    .2894999
-------------+----------------------------------------------------------------
     sigma_u |  .39271148
     sigma_e |  .28569012
         rho |  .65392451   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .047922840419062

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    318,157
Group variable: id                              Number of groups  =     18,789

R-sq:                                           Obs per group:
     within  = 0.0479                                         min =          1
     between = 0.1552                                         avg =       16.9
     overall = 0.0964                                         max =        148

                                                F(75,18788)       =      32.87
corr(u_i, Xb)  = 0.2038                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0318759   .0117035     2.72   0.006     .0089359    .0548158
       expat |   .0161278   .0037025     4.36   0.000     .0088705    .0233851
             |
    ind_year |
          2  |  -.0194864   .0097975    -1.99   0.047    -.0386904   -.0002824
          3  |  -.0378498   .0117379    -3.22   0.001    -.0608572   -.0148424
          4  |  -.0450521   .0124745    -3.61   0.000    -.0695032    -.020601
          5  |  -.0332509   .0136807    -2.43   0.015    -.0600662   -.0064356
          6  |    -.04443   .0145187    -3.06   0.002    -.0728879   -.0159722
          7  |  -.0437104   .0154868    -2.82   0.005    -.0740659   -.0133548
          8  |  -.0574801   .0165474    -3.47   0.001    -.0899146   -.0250457
          9  |  -.0604168   .0177868    -3.40   0.001    -.0952806    -.025553
         10  |  -.0571758   .0189563    -3.02   0.003    -.0943318   -.0200198
         11  |  -.0632635   .0202316    -3.13   0.002    -.1029192   -.0236077
         12  |  -.0618783   .0213503    -2.90   0.004    -.1037269   -.0200297
         13  |  -.0568233   .0227098    -2.50   0.012    -.1013366   -.0123101
         14  |  -.0455398   .0240573    -1.89   0.058    -.0926943    .0016148
         15  |  -.0338168   .0254102    -1.33   0.183    -.0836231    .0159896
         16  |  -.0229073   .0267728    -0.86   0.392    -.0753845    .0295699
         17  |  -.0095015   .0281438    -0.34   0.736    -.0646659    .0456629
         18  |  -.0072545   .0296866    -0.24   0.807     -.065443     .050934
         19  |   -.004025   .0311106    -0.13   0.897    -.0650046    .0569546
         20  |   .0038689   .0324414     0.12   0.905    -.0597192     .067457
         21  |    .008694   .0337329     0.26   0.797    -.0574256    .0748135
         22  |   .0101609   .0349916     0.29   0.772    -.0584257    .0787476
         23  |   .0088226    .036237     0.24   0.808    -.0622053    .0798504
         24  |  -.1076445   .0374962    -2.87   0.004    -.1811403   -.0341486
         25  |  -.1401483   .0389804    -3.60   0.000    -.2165533   -.0637432
         26  |   .0245342   .0223018     1.10   0.271    -.0191793    .0682478
         27  |    .018503   .0198815     0.93   0.352    -.0204664    .0574725
         28  |   .0282736   .0193772     1.46   0.145    -.0097075    .0662547
         29  |   .0357765   .0190559     1.88   0.060    -.0015748    .0731278
         30  |   .0442398   .0191774     2.31   0.021     .0066504    .0818291
         31  |   .0364944   .0192722     1.89   0.058    -.0012808    .0742695
         32  |   .0338847   .0198011     1.71   0.087    -.0049273    .0726967
         33  |   .0298686   .0204614     1.46   0.144    -.0102376    .0699748
         34  |   .0306845    .021148     1.45   0.147    -.0107675    .0721364
         35  |   .0325637    .022106     1.47   0.141    -.0107659    .0758934
         36  |   .0304338   .0232113     1.31   0.190    -.0150625    .0759301
         37  |   .0284591    .024243     1.17   0.240    -.0190594    .0759777
         38  |   .0286899   .0252396     1.14   0.256     -.020782    .0781618
         39  |   .0279011   .0263972     1.06   0.291    -.0238399     .079642
         40  |    .027136    .027468     0.99   0.323    -.0267037    .0809757
         41  |   .0481928   .0286593     1.68   0.093    -.0079821    .1043676
         42  |   .0553304   .0299121     1.85   0.064       -.0033    .1139608
         43  |   .0537797   .0313743     1.71   0.087    -.0077166    .1152761
         44  |   .0699605   .0327664     2.14   0.033     .0057354    .1341857
         45  |   .0734917   .0340201     2.16   0.031     .0068094    .1401741
         46  |   .0764843   .0354173     2.16   0.031     .0070632    .1459054
         47  |   .0850344   .0366691     2.32   0.020     .0131596    .1569092
         48  |   .0743087   .0376023     1.98   0.048     .0006047    .1480126
         49  |  -.1939828   .0390568    -4.97   0.000    -.2705377    -.117428
         50  |  -.2481088   .0404743    -6.13   0.000     -.327442   -.1687756
             |
     age_cat |
          1  |    .045062   .0067596     6.67   0.000     .0318125    .0583115
          2  |   .0681058   .0076327     8.92   0.000      .053145    .0830666
          3  |   .0843818   .0085677     9.85   0.000     .0675884    .1011753
          4  |   .1049648   .0097106    10.81   0.000     .0859311    .1239986
          5  |   .1207893   .0109155    11.07   0.000     .0993939    .1421848
          6  |   .1328174   .0122716    10.82   0.000      .108764    .1568708
          7  |   .1394389   .0136343    10.23   0.000     .1127145    .1661633
          8  |   .1532192   .0150833    10.16   0.000     .1236547    .1827838
          9  |   .1551251   .0165271     9.39   0.000     .1227306    .1875197
         10  |   .1569477   .0179723     8.73   0.000     .1217203    .1921752
         11  |    .164483   .0194097     8.47   0.000     .1264382    .2025277
         12  |   .1637805   .0208728     7.85   0.000     .1228679    .2046931
         13  |   .1750296   .0224332     7.80   0.000     .1310585    .2190006
         14  |   .1854679   .0240306     7.72   0.000     .1383659      .23257
         15  |   .1934507   .0255262     7.58   0.000      .143417    .2434844
         16  |   .2010448   .0270779     7.42   0.000     .1479697      .25412
         17  |   .1998775   .0285566     7.00   0.000      .143904    .2558511
         18  |   .2063033   .0302629     6.82   0.000     .1469852    .2656214
         19  |   .1953188   .0320484     6.09   0.000      .132501    .2581365
         20  |   .2044236   .0347157     5.89   0.000     .1363777    .2724694
         25  |   .2257414    .040248     5.61   0.000     .1468517    .3046312
         30  |   .2056731   .0593574     3.46   0.001     .0893273    .3220189
         40  |   .1941639   .0671053     2.89   0.004     .0626314    .3256963
         50  |   .1219068   .0724608     1.68   0.093     -.020123    .2639366
             |
       _cons |   .2617062   .0141798    18.46   0.000     .2339125    .2894999
-------------+----------------------------------------------------------------
     sigma_u |  .39271148
     sigma_e |  .28569012
         rho |  .65392451   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    529632
Group variable: firm_person                     Number of groups   =     59467

R-sq:  within  = 0.0426                         Obs per group: min =         1
       between = 0.1361                                        avg =       8.9
       overall = 0.0859                                        max =        25

                                                F(78,18788)        =     33.64
corr(u_i, Xb)  = 0.1871                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0276689   .0104506     2.65   0.008     .0071848     .048153
      during |  -.0057211   .0030803    -1.86   0.063    -.0117587    .0003165
       after |  -.0214455   .0052161    -4.11   0.000    -.0316695   -.0112214
during_expat |   .0055036   .0054567     1.01   0.313    -.0051919    .0161992
 after_expat |  -.0030563   .0077318    -0.40   0.693    -.0182113    .0120988
             |
    ind_year |
          2  |  -.0207929   .0097055    -2.14   0.032    -.0398166   -.0017693
          3  |  -.0366685   .0114156    -3.21   0.001    -.0590442   -.0142928
          4  |  -.0445742   .0123717    -3.60   0.000    -.0688238   -.0203245
          5  |  -.0334975   .0136125    -2.46   0.014    -.0601793   -.0068158
          6  |  -.0457639   .0146363    -3.13   0.002    -.0744523   -.0170755
          7  |  -.0438763   .0156883    -2.80   0.005    -.0746268   -.0131258
          8  |  -.0558583    .016814    -3.32   0.001    -.0888153   -.0229014
          9  |   -.059751   .0181048    -3.30   0.001     -.095238    -.024264
         10  |  -.0576522   .0193418    -2.98   0.003    -.0955639   -.0197405
         11  |  -.0621306   .0207189    -3.00   0.003    -.1027414   -.0215197
         12  |   -.061383   .0219679    -2.79   0.005     -.104442    -.018324
         13  |  -.0548588   .0234097    -2.34   0.019     -.100744   -.0089736
         14  |  -.0434316   .0248586    -1.75   0.081    -.0921567    .0052936
         15  |  -.0337586   .0262668    -1.29   0.199    -.0852439    .0177267
         16  |  -.0212068   .0276947    -0.77   0.444    -.0754908    .0330772
         17  |  -.0069569   .0291451    -0.24   0.811    -.0640839    .0501701
         18  |  -.0024461   .0306833    -0.08   0.936    -.0625882    .0576959
         19  |   .0012277   .0321467     0.04   0.970    -.0617827    .0642381
         20  |   .0097743   .0335107     0.29   0.771    -.0559097    .0754583
         21  |   .0110466   .0348517     0.32   0.751    -.0572659    .0793592
         22  |   .0172022   .0360909     0.48   0.634    -.0535392    .0879435
         23  |    .014481    .037361     0.39   0.698      -.05875    .0877119
         24  |  -.0962355   .0386845    -2.49   0.013    -.1720606   -.0204104
         25  |  -.1293697   .0401205    -3.22   0.001    -.2080095     -.05073
         26  |   .0222843    .021337     1.04   0.296    -.0195382    .0641068
         27  |   .0186611   .0191287     0.98   0.329    -.0188329    .0561552
         28  |   .0295051   .0185795     1.59   0.112    -.0069123    .0659225
         29  |   .0345948    .018396     1.88   0.060    -.0014629    .0706526
         30  |   .0434337   .0184301     2.36   0.018      .007309    .0795583
         31  |   .0353996   .0187625     1.89   0.059    -.0013765    .0721757
         32  |   .0342131   .0193475     1.77   0.077    -.0037098    .0721359
         33  |   .0348285   .0199738     1.74   0.081    -.0043219    .0739788
         34  |   .0291592   .0208826     1.40   0.163    -.0117726     .070091
         35  |   .0358728   .0218505     1.64   0.101    -.0069562    .0787018
         36  |   .0333725   .0230543     1.45   0.148     -.011816    .0785611
         37  |   .0315894   .0241527     1.31   0.191    -.0157521    .0789308
         38  |   .0338741    .025311     1.34   0.181    -.0157377     .083486
         39  |   .0317228   .0266149     1.19   0.233    -.0204448    .0838905
         40  |   .0317654   .0278062     1.14   0.253    -.0227372     .086268
         41  |   .0492724   .0290642     1.70   0.090     -.007696    .1062408
         42  |   .0552192   .0304291     1.81   0.070    -.0044246    .1148629
         43  |   .0550682   .0319254     1.72   0.085    -.0075085     .117645
         44  |   .0704117   .0333895     2.11   0.035     .0049653    .1358581
         45  |   .0747623   .0347798     2.15   0.032     .0065908    .1429339
         46  |   .0783817     .03623     2.16   0.031     .0073677    .1493958
         47  |   .0846045   .0374251     2.26   0.024     .0112479    .1579611
         48  |   .0769314   .0384998     2.00   0.046     .0014683    .1523944
         49  |  -.1752792   .0399686    -4.39   0.000    -.2536213   -.0969372
         50  |  -.2275864    .041396    -5.50   0.000    -.3087262   -.1464465
             |
     age_cat |
          1  |   .0481054    .006377     7.54   0.000      .035606    .0606048
          2  |   .0719684     .00728     9.89   0.000     .0576989    .0862378
          3  |   .0884614   .0082852    10.68   0.000     .0722217    .1047011
          4  |   .1102045   .0095066    11.59   0.000     .0915706    .1288383
          5  |   .1248129   .0107865    11.57   0.000     .1036703    .1459554
          6  |   .1353296   .0122066    11.09   0.000     .1114036    .1592556
          7  |   .1414584   .0136365    10.37   0.000     .1147296    .1681872
          8  |   .1546275   .0151324    10.22   0.000     .1249667    .1842883
          9  |   .1565584   .0166479     9.40   0.000      .123927    .1891898
         10  |   .1605322   .0181643     8.84   0.000     .1249285     .196136
         11  |    .167446   .0196633     8.52   0.000     .1289042    .2059877
         12  |   .1680314   .0211786     7.93   0.000     .1265194    .2095434
         13  |    .176551   .0227661     7.75   0.000     .1319273    .2211746
         14  |   .1861259   .0243612     7.64   0.000     .1383758     .233876
         15  |   .1930301   .0258779     7.46   0.000      .142307    .2437531
         16  |   .2016739   .0274495     7.35   0.000     .1478705    .2554774
         17  |   .2024302   .0289801     6.99   0.000     .1456265    .2592338
         18  |   .2071303   .0306964     6.75   0.000     .1469626    .2672981
         19  |   .1990143   .0323937     6.14   0.000     .1355198    .2625089
         20  |   .2059936   .0351866     5.85   0.000     .1370248    .2749624
         25  |   .2272303   .0405186     5.61   0.000     .1478101    .3066505
         30  |   .2169099   .0571526     3.80   0.000     .1048857    .3289341
         40  |    .202523   .0640692     3.16   0.002     .0769415    .3281045
         50  |   .1426255   .0680725     2.10   0.036     .0091973    .2760537
             |
       _cons |   .2789802   .0142201    19.62   0.000     .2511074    .3068529
-------------+----------------------------------------------------------------
     sigma_u |  .41218724
     sigma_e |  .28552159
         rho |  .67575257   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0425524964474641

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    529,632
Group variable: firm_person                     Number of groups  =     59,467

R-sq:                                           Obs per group:
     within  = 0.0426                                         min =          1
     between = 0.1361                                         avg =        8.9
     overall = 0.0859                                         max =         25

                                                F(78,18788)       =      33.64
corr(u_i, Xb)  = 0.1871                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,789 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0276689   .0104506     2.65   0.008     .0071848     .048153
      during |  -.0057211   .0030803    -1.86   0.063    -.0117587    .0003165
       after |  -.0214455   .0052161    -4.11   0.000    -.0316695   -.0112214
during_expat |   .0055036   .0054567     1.01   0.313    -.0051919    .0161992
 after_expat |  -.0030563   .0077318    -0.40   0.693    -.0182113    .0120988
             |
    ind_year |
          2  |  -.0207929   .0097055    -2.14   0.032    -.0398166   -.0017693
          3  |  -.0366685   .0114156    -3.21   0.001    -.0590442   -.0142928
          4  |  -.0445742   .0123717    -3.60   0.000    -.0688238   -.0203245
          5  |  -.0334975   .0136125    -2.46   0.014    -.0601793   -.0068158
          6  |  -.0457639   .0146363    -3.13   0.002    -.0744523   -.0170755
          7  |  -.0438763   .0156883    -2.80   0.005    -.0746268   -.0131258
          8  |  -.0558583    .016814    -3.32   0.001    -.0888153   -.0229014
          9  |   -.059751   .0181048    -3.30   0.001     -.095238    -.024264
         10  |  -.0576522   .0193418    -2.98   0.003    -.0955639   -.0197405
         11  |  -.0621306   .0207189    -3.00   0.003    -.1027414   -.0215197
         12  |   -.061383   .0219679    -2.79   0.005     -.104442    -.018324
         13  |  -.0548588   .0234097    -2.34   0.019     -.100744   -.0089736
         14  |  -.0434316   .0248586    -1.75   0.081    -.0921567    .0052936
         15  |  -.0337586   .0262668    -1.29   0.199    -.0852439    .0177267
         16  |  -.0212068   .0276947    -0.77   0.444    -.0754908    .0330772
         17  |  -.0069569   .0291451    -0.24   0.811    -.0640839    .0501701
         18  |  -.0024461   .0306833    -0.08   0.936    -.0625882    .0576959
         19  |   .0012277   .0321467     0.04   0.970    -.0617827    .0642381
         20  |   .0097743   .0335107     0.29   0.771    -.0559097    .0754583
         21  |   .0110466   .0348517     0.32   0.751    -.0572659    .0793592
         22  |   .0172022   .0360909     0.48   0.634    -.0535392    .0879435
         23  |    .014481    .037361     0.39   0.698      -.05875    .0877119
         24  |  -.0962355   .0386845    -2.49   0.013    -.1720606   -.0204104
         25  |  -.1293697   .0401205    -3.22   0.001    -.2080095     -.05073
         26  |   .0222843    .021337     1.04   0.296    -.0195382    .0641068
         27  |   .0186611   .0191287     0.98   0.329    -.0188329    .0561552
         28  |   .0295051   .0185795     1.59   0.112    -.0069123    .0659225
         29  |   .0345948    .018396     1.88   0.060    -.0014629    .0706526
         30  |   .0434337   .0184301     2.36   0.018      .007309    .0795583
         31  |   .0353996   .0187625     1.89   0.059    -.0013765    .0721757
         32  |   .0342131   .0193475     1.77   0.077    -.0037098    .0721359
         33  |   .0348285   .0199738     1.74   0.081    -.0043219    .0739788
         34  |   .0291592   .0208826     1.40   0.163    -.0117726     .070091
         35  |   .0358728   .0218505     1.64   0.101    -.0069562    .0787018
         36  |   .0333725   .0230543     1.45   0.148     -.011816    .0785611
         37  |   .0315894   .0241527     1.31   0.191    -.0157521    .0789308
         38  |   .0338741    .025311     1.34   0.181    -.0157377     .083486
         39  |   .0317228   .0266149     1.19   0.233    -.0204448    .0838905
         40  |   .0317654   .0278062     1.14   0.253    -.0227372     .086268
         41  |   .0492724   .0290642     1.70   0.090     -.007696    .1062408
         42  |   .0552192   .0304291     1.81   0.070    -.0044246    .1148629
         43  |   .0550682   .0319254     1.72   0.085    -.0075085     .117645
         44  |   .0704117   .0333895     2.11   0.035     .0049653    .1358581
         45  |   .0747623   .0347798     2.15   0.032     .0065908    .1429339
         46  |   .0783817     .03623     2.16   0.031     .0073677    .1493958
         47  |   .0846045   .0374251     2.26   0.024     .0112479    .1579611
         48  |   .0769314   .0384998     2.00   0.046     .0014683    .1523944
         49  |  -.1752792   .0399686    -4.39   0.000    -.2536213   -.0969372
         50  |  -.2275864    .041396    -5.50   0.000    -.3087262   -.1464465
             |
     age_cat |
          1  |   .0481054    .006377     7.54   0.000      .035606    .0606048
          2  |   .0719684     .00728     9.89   0.000     .0576989    .0862378
          3  |   .0884614   .0082852    10.68   0.000     .0722217    .1047011
          4  |   .1102045   .0095066    11.59   0.000     .0915706    .1288383
          5  |   .1248129   .0107865    11.57   0.000     .1036703    .1459554
          6  |   .1353296   .0122066    11.09   0.000     .1114036    .1592556
          7  |   .1414584   .0136365    10.37   0.000     .1147296    .1681872
          8  |   .1546275   .0151324    10.22   0.000     .1249667    .1842883
          9  |   .1565584   .0166479     9.40   0.000      .123927    .1891898
         10  |   .1605322   .0181643     8.84   0.000     .1249285     .196136
         11  |    .167446   .0196633     8.52   0.000     .1289042    .2059877
         12  |   .1680314   .0211786     7.93   0.000     .1265194    .2095434
         13  |    .176551   .0227661     7.75   0.000     .1319273    .2211746
         14  |   .1861259   .0243612     7.64   0.000     .1383758     .233876
         15  |   .1930301   .0258779     7.46   0.000      .142307    .2437531
         16  |   .2016739   .0274495     7.35   0.000     .1478705    .2554774
         17  |   .2024302   .0289801     6.99   0.000     .1456265    .2592338
         18  |   .2071303   .0306964     6.75   0.000     .1469626    .2672981
         19  |   .1990143   .0323937     6.14   0.000     .1355198    .2625089
         20  |   .2059936   .0351866     5.85   0.000     .1370248    .2749624
         25  |   .2272303   .0405186     5.61   0.000     .1478101    .3066505
         30  |   .2169099   .0571526     3.80   0.000     .1048857    .3289341
         40  |    .202523   .0640692     3.16   0.002     .0769415    .3281045
         50  |   .1426255   .0680725     2.10   0.036     .0091973    .2760537
             |
       _cons |   .2789802   .0142201    19.62   0.000     .2511074    .3068529
-------------+----------------------------------------------------------------
     sigma_u |  .41218724
     sigma_e |  .28552159
         rho |  .67575257   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 18788) =    3.45
            Prob > F =    0.0633

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18788) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 18788) =   17.66
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18788) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 18788) =    1.02
            Prob > F =    0.3132

 ( 1)  during_expat = 0

       F(  1, 18788) =    1.02
            Prob > F =    0.3132
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 18788) =    2.19
            Prob > F =    0.1388

 ( 1)  after_expat = 0

       F(  1, 18788) =    0.16
            Prob > F =    0.6926
(file output/figure/baseline_exporter_slope.png written in PNG format)
(sum of wgt is 39,871.272767067)

Linear regression                               Number of obs     =    108,694
                                                F(50, 6854)       =      78.28
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1438
                                                Root MSE          =     .44988

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3216295     .01061    30.31   0.000     .3008307    .3424283
       expat |   .0556918   .0089678     6.21   0.000     .0381122    .0732715
             |
    ind_year |
         27  |  -.0402223   .0159253    -2.53   0.012    -.0714408   -.0090038
         28  |   -.033157   .0174901    -1.90   0.058    -.0674429     .001129
         29  |  -.0329894   .0180457    -1.83   0.068    -.0683647    .0023859
         30  |  -.0070089   .0189051    -0.37   0.711    -.0440687    .0300509
         31  |  -.0081658   .0191981    -0.43   0.671    -.0458001    .0294684
         32  |  -.0107288   .0193325    -0.55   0.579    -.0486265    .0271689
         33  |  -.0252095   .0195235    -1.29   0.197    -.0634817    .0130627
         34  |  -.0202408   .0198132    -1.02   0.307    -.0590808    .0185991
         35  |  -.0174106   .0200439    -0.87   0.385     -.056703    .0218817
         36  |  -.0165717   .0201423    -0.82   0.411    -.0560569    .0229135
         37  |  -.0225219   .0201479    -1.12   0.264     -.062018    .0169741
         38  |  -.0259162    .020315    -1.28   0.202      -.06574    .0139075
         39  |  -.0302203   .0204471    -1.48   0.139    -.0703028    .0098623
         40  |  -.0338116   .0206512    -1.64   0.102    -.0742944    .0066712
         41  |  -.0112102   .0207719    -0.54   0.589    -.0519296    .0295093
         42  |  -.0065311   .0210449    -0.31   0.756    -.0477855    .0347234
         43  |  -.0057748   .0214271    -0.27   0.788    -.0477786    .0362289
         44  |   .0095343   .0217795     0.44   0.662    -.0331602    .0522289
         45  |    .008877   .0220597     0.40   0.687    -.0343668    .0521208
         46  |   .0145273   .0221883     0.65   0.513    -.0289687    .0580233
         47  |   .0231394   .0225102     1.03   0.304    -.0209876    .0672663
         48  |   .0119566   .0228852     0.52   0.601    -.0329055    .0568187
         49  |  -.2477076   .0231503   -10.70   0.000    -.2930894   -.2023257
         50  |  -.2917423   .0236618   -12.33   0.000    -.3381267   -.2453578
             |
     age_cat |
          1  |   .0811813   .0146365     5.55   0.000     .0524891    .1098734
          2  |   .1109646   .0153126     7.25   0.000     .0809472    .1409821
          3  |   .1192991   .0156565     7.62   0.000     .0886075    .1499908
          4  |   .1481691   .0162805     9.10   0.000     .1162544    .1800839
          5  |     .16647   .0167667     9.93   0.000     .1336022    .1993379
          6  |   .1804581   .0172174    10.48   0.000     .1467066    .2142095
          7  |   .1937868   .0175705    11.03   0.000     .1593431    .2282305
          8  |   .1993706    .018065    11.04   0.000     .1639575    .2347837
          9  |   .2082563   .0183215    11.37   0.000     .1723406    .2441721
         10  |   .2176535   .0185805    11.71   0.000     .1812299    .2540772
         11  |   .2240212   .0188642    11.88   0.000     .1870416    .2610009
         12  |   .2287204   .0191718    11.93   0.000     .1911378     .266303
         13  |   .2501955    .019525    12.81   0.000     .2119205    .2884704
         14  |   .2634362   .0201626    13.07   0.000     .2239112    .3029613
         15  |   .2690115   .0206037    13.06   0.000     .2286218    .3094012
         16  |   .2745056   .0212522    12.92   0.000     .2328447    .3161664
         17  |   .2726329   .0217478    12.54   0.000     .2300003    .3152654
         18  |   .2785477   .0223131    12.48   0.000     .2348071    .3222882
         19  |   .2692582   .0231831    11.61   0.000     .2238121    .3147043
         20  |   .2867632   .0233308    12.29   0.000     .2410277    .3324988
         25  |   .2820137   .0320277     8.81   0.000     .2192295     .344798
         30  |   .1887306   .0583584     3.23   0.001     .0743301    .3031312
         40  |   .3064585   .0499441     6.14   0.000     .2085525    .4043645
         50  |   .2546873    .056085     4.54   0.000     .1447434    .3646312
             |
       _cons |   .3469214   .0206099    16.83   0.000     .3065196    .3873232
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    108,694
                                                F(50, 6854)       =      78.28
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1438
                                                Root MSE          =     .44988

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3216295     .01061    30.31   0.000     .3008307    .3424283
       expat |   .0556918   .0089678     6.21   0.000     .0381122    .0732715
             |
    ind_year |
         27  |  -.0402223   .0159253    -2.53   0.012    -.0714408   -.0090038
         28  |   -.033157   .0174901    -1.90   0.058    -.0674429     .001129
         29  |  -.0329894   .0180457    -1.83   0.068    -.0683647    .0023859
         30  |  -.0070089   .0189051    -0.37   0.711    -.0440687    .0300509
         31  |  -.0081658   .0191981    -0.43   0.671    -.0458001    .0294684
         32  |  -.0107288   .0193325    -0.55   0.579    -.0486265    .0271689
         33  |  -.0252095   .0195235    -1.29   0.197    -.0634817    .0130627
         34  |  -.0202408   .0198132    -1.02   0.307    -.0590808    .0185991
         35  |  -.0174106   .0200439    -0.87   0.385     -.056703    .0218817
         36  |  -.0165717   .0201423    -0.82   0.411    -.0560569    .0229135
         37  |  -.0225219   .0201479    -1.12   0.264     -.062018    .0169741
         38  |  -.0259162    .020315    -1.28   0.202      -.06574    .0139075
         39  |  -.0302203   .0204471    -1.48   0.139    -.0703028    .0098623
         40  |  -.0338116   .0206512    -1.64   0.102    -.0742944    .0066712
         41  |  -.0112102   .0207719    -0.54   0.589    -.0519296    .0295093
         42  |  -.0065311   .0210449    -0.31   0.756    -.0477855    .0347234
         43  |  -.0057748   .0214271    -0.27   0.788    -.0477786    .0362289
         44  |   .0095343   .0217795     0.44   0.662    -.0331602    .0522289
         45  |    .008877   .0220597     0.40   0.687    -.0343668    .0521208
         46  |   .0145273   .0221883     0.65   0.513    -.0289687    .0580233
         47  |   .0231394   .0225102     1.03   0.304    -.0209876    .0672663
         48  |   .0119566   .0228852     0.52   0.601    -.0329055    .0568187
         49  |  -.2477076   .0231503   -10.70   0.000    -.2930894   -.2023257
         50  |  -.2917423   .0236618   -12.33   0.000    -.3381267   -.2453578
             |
     age_cat |
          1  |   .0811813   .0146365     5.55   0.000     .0524891    .1098734
          2  |   .1109646   .0153126     7.25   0.000     .0809472    .1409821
          3  |   .1192991   .0156565     7.62   0.000     .0886075    .1499908
          4  |   .1481691   .0162805     9.10   0.000     .1162544    .1800839
          5  |     .16647   .0167667     9.93   0.000     .1336022    .1993379
          6  |   .1804581   .0172174    10.48   0.000     .1467066    .2142095
          7  |   .1937868   .0175705    11.03   0.000     .1593431    .2282305
          8  |   .1993706    .018065    11.04   0.000     .1639575    .2347837
          9  |   .2082563   .0183215    11.37   0.000     .1723406    .2441721
         10  |   .2176535   .0185805    11.71   0.000     .1812299    .2540772
         11  |   .2240212   .0188642    11.88   0.000     .1870416    .2610009
         12  |   .2287204   .0191718    11.93   0.000     .1911378     .266303
         13  |   .2501955    .019525    12.81   0.000     .2119205    .2884704
         14  |   .2634362   .0201626    13.07   0.000     .2239112    .3029613
         15  |   .2690115   .0206037    13.06   0.000     .2286218    .3094012
         16  |   .2745056   .0212522    12.92   0.000     .2328447    .3161664
         17  |   .2726329   .0217478    12.54   0.000     .2300003    .3152654
         18  |   .2785477   .0223131    12.48   0.000     .2348071    .3222882
         19  |   .2692582   .0231831    11.61   0.000     .2238121    .3147043
         20  |   .2867632   .0233308    12.29   0.000     .2410277    .3324988
         25  |   .2820137   .0320277     8.81   0.000     .2192295     .344798
         30  |   .1887306   .0583584     3.23   0.001     .0743301    .3031312
         40  |   .3064585   .0499441     6.14   0.000     .2085525    .4043645
         50  |   .2546873    .056085     4.54   0.000     .1447434    .3646312
             |
       _cons |   .3469214   .0206099    16.83   0.000     .3065196    .3873232
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    108,694
Group variable: id                              Number of groups  =      6,855

R-sq:                                           Obs per group:
     within  = 0.0674                                         min =          1
     between = 0.0679                                         avg =       15.9
     overall = 0.0487                                         max =        125

                                                F(50,6854)        =      25.12
corr(u_i, Xb)  = 0.0590                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0242301   .0213042     1.14   0.255    -.0175328    .0659929
       expat |   .0191841   .0042862     4.48   0.000     .0107819    .0275863
             |
    ind_year |
         27  |   -.005089   .0142854    -0.36   0.722    -.0330929    .0229149
         28  |   .0040866   .0167623     0.24   0.807    -.0287727    .0369459
         29  |    .007584   .0189614     0.40   0.689    -.0295862    .0447543
         30  |   .0189107   .0216426     0.87   0.382    -.0235154    .0613369
         31  |   .0112087   .0240522     0.47   0.641     -.035941    .0583584
         32  |   .0089908   .0263058     0.34   0.733    -.0425767    .0605582
         33  |   .0038995   .0287055     0.14   0.892    -.0523721    .0601711
         34  |   .0032433    .031288     0.10   0.917    -.0580909    .0645774
         35  |   .0043206   .0339122     0.13   0.899    -.0621579    .0707991
         36  |   .0022336   .0365931     0.06   0.951    -.0695002    .0739674
         37  |  -.0016863   .0390575    -0.04   0.966     -.078251    .0748785
         38  |  -.0033923   .0418539    -0.08   0.935     -.085439    .0786544
         39  |  -.0062269    .044623    -0.14   0.889    -.0937019     .081248
         40  |    -.00812   .0471121    -0.17   0.863    -.1004742    .0842343
         41  |   .0110035   .0496296     0.22   0.825    -.0862859    .1082929
         42  |   .0193582   .0524535     0.37   0.712     -.083467    .1221834
         43  |   .0189686   .0554784     0.34   0.732    -.0897862    .1277234
         44  |   .0344846   .0582471     0.59   0.554    -.0796977     .148667
         45  |   .0364344   .0609647     0.60   0.550    -.0830753    .1559441
         46  |    .037272   .0634877     0.59   0.557    -.0871836    .1617277
         47  |   .0449127   .0659487     0.68   0.496    -.0843672    .1741926
         48  |   .0366154   .0679711     0.54   0.590    -.0966289    .1698598
         49  |  -.2455294   .0703813    -3.49   0.000    -.3834986   -.1075601
         50  |  -.3006405   .0729921    -4.12   0.000    -.4437276   -.1575533
             |
     age_cat |
          1  |    .069159   .0137679     5.02   0.000     .0421697    .0961483
          2  |   .1015386    .015506     6.55   0.000      .071142    .1319353
          3  |   .1126826   .0173977     6.48   0.000     .0785776    .1467875
          4  |   .1404065   .0196994     7.13   0.000     .1017896    .1790234
          5  |   .1614736   .0220886     7.31   0.000     .1181731    .2047742
          6  |   .1747006   .0246988     7.07   0.000     .1262832     .223118
          7  |   .1800465   .0272248     6.61   0.000     .1266774    .2334156
          8  |   .1820294   .0299643     6.07   0.000       .12329    .2407689
          9  |   .1928158   .0326622     5.90   0.000     .1287877    .2568439
         10  |   .1992718   .0351752     5.67   0.000     .1303176     .268226
         11  |   .2050501   .0378964     5.41   0.000     .1307615    .2793388
         12  |   .2049826   .0406876     5.04   0.000     .1252224    .2847429
         13  |   .2257675   .0436527     5.17   0.000     .1401947    .3113404
         14  |   .2441325    .046736     5.22   0.000     .1525154    .3357495
         15  |   .2499201   .0496386     5.03   0.000     .1526131    .3472272
         16  |   .2517669   .0523854     4.81   0.000     .1490754    .3544584
         17  |   .2568145    .055387     4.64   0.000     .1482387    .3653903
         18  |   .2569806   .0586201     4.38   0.000      .142067    .3718942
         19  |   .2477926    .061835     4.01   0.000     .1265769    .3690084
         20  |    .259526   .0666027     3.90   0.000      .128964     .390088
         25  |   .2667386   .0764523     3.49   0.000     .1168684    .4166088
         30  |   .2754194   .1144126     2.41   0.016     .0511352    .4997036
         40  |   .1757368   .1338192     1.31   0.189    -.0865904     .438064
         50  |   .0116976   .1526436     0.08   0.939    -.2875312    .3109264
             |
       _cons |   .4366874   .0219895    19.86   0.000     .3935812    .4797936
-------------+----------------------------------------------------------------
     sigma_u |  .39536593
     sigma_e |  .30122425
         rho |  .63272232   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0674119190338273

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    108,694
Group variable: id                              Number of groups  =      6,855

R-sq:                                           Obs per group:
     within  = 0.0674                                         min =          1
     between = 0.0679                                         avg =       15.9
     overall = 0.0487                                         max =        125

                                                F(50,6854)        =      25.12
corr(u_i, Xb)  = 0.0590                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0242301   .0213042     1.14   0.255    -.0175328    .0659929
       expat |   .0191841   .0042862     4.48   0.000     .0107819    .0275863
             |
    ind_year |
         27  |   -.005089   .0142854    -0.36   0.722    -.0330929    .0229149
         28  |   .0040866   .0167623     0.24   0.807    -.0287727    .0369459
         29  |    .007584   .0189614     0.40   0.689    -.0295862    .0447543
         30  |   .0189107   .0216426     0.87   0.382    -.0235154    .0613369
         31  |   .0112087   .0240522     0.47   0.641     -.035941    .0583584
         32  |   .0089908   .0263058     0.34   0.733    -.0425767    .0605582
         33  |   .0038995   .0287055     0.14   0.892    -.0523721    .0601711
         34  |   .0032433    .031288     0.10   0.917    -.0580909    .0645774
         35  |   .0043206   .0339122     0.13   0.899    -.0621579    .0707991
         36  |   .0022336   .0365931     0.06   0.951    -.0695002    .0739674
         37  |  -.0016863   .0390575    -0.04   0.966     -.078251    .0748785
         38  |  -.0033923   .0418539    -0.08   0.935     -.085439    .0786544
         39  |  -.0062269    .044623    -0.14   0.889    -.0937019     .081248
         40  |    -.00812   .0471121    -0.17   0.863    -.1004742    .0842343
         41  |   .0110035   .0496296     0.22   0.825    -.0862859    .1082929
         42  |   .0193582   .0524535     0.37   0.712     -.083467    .1221834
         43  |   .0189686   .0554784     0.34   0.732    -.0897862    .1277234
         44  |   .0344846   .0582471     0.59   0.554    -.0796977     .148667
         45  |   .0364344   .0609647     0.60   0.550    -.0830753    .1559441
         46  |    .037272   .0634877     0.59   0.557    -.0871836    .1617277
         47  |   .0449127   .0659487     0.68   0.496    -.0843672    .1741926
         48  |   .0366154   .0679711     0.54   0.590    -.0966289    .1698598
         49  |  -.2455294   .0703813    -3.49   0.000    -.3834986   -.1075601
         50  |  -.3006405   .0729921    -4.12   0.000    -.4437276   -.1575533
             |
     age_cat |
          1  |    .069159   .0137679     5.02   0.000     .0421697    .0961483
          2  |   .1015386    .015506     6.55   0.000      .071142    .1319353
          3  |   .1126826   .0173977     6.48   0.000     .0785776    .1467875
          4  |   .1404065   .0196994     7.13   0.000     .1017896    .1790234
          5  |   .1614736   .0220886     7.31   0.000     .1181731    .2047742
          6  |   .1747006   .0246988     7.07   0.000     .1262832     .223118
          7  |   .1800465   .0272248     6.61   0.000     .1266774    .2334156
          8  |   .1820294   .0299643     6.07   0.000       .12329    .2407689
          9  |   .1928158   .0326622     5.90   0.000     .1287877    .2568439
         10  |   .1992718   .0351752     5.67   0.000     .1303176     .268226
         11  |   .2050501   .0378964     5.41   0.000     .1307615    .2793388
         12  |   .2049826   .0406876     5.04   0.000     .1252224    .2847429
         13  |   .2257675   .0436527     5.17   0.000     .1401947    .3113404
         14  |   .2441325    .046736     5.22   0.000     .1525154    .3357495
         15  |   .2499201   .0496386     5.03   0.000     .1526131    .3472272
         16  |   .2517669   .0523854     4.81   0.000     .1490754    .3544584
         17  |   .2568145    .055387     4.64   0.000     .1482387    .3653903
         18  |   .2569806   .0586201     4.38   0.000      .142067    .3718942
         19  |   .2477926    .061835     4.01   0.000     .1265769    .3690084
         20  |    .259526   .0666027     3.90   0.000      .128964     .390088
         25  |   .2667386   .0764523     3.49   0.000     .1168684    .4166088
         30  |   .2754194   .1144126     2.41   0.016     .0511352    .4997036
         40  |   .1757368   .1338192     1.31   0.189    -.0865904     .438064
         50  |   .0116976   .1526436     0.08   0.939    -.2875312    .3109264
             |
       _cons |   .4366874   .0219895    19.86   0.000     .3935812    .4797936
-------------+----------------------------------------------------------------
     sigma_u |  .39536593
     sigma_e |  .30122425
         rho |  .63272232   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    182199
Group variable: firm_person                     Number of groups   =     21832

R-sq:  within  = 0.0612                         Obs per group: min =         1
       between = 0.0535                                        avg =       8.3
       overall = 0.0386                                        max =        25

                                                F(53,6854)         =     24.88
corr(u_i, Xb)  = 0.0270                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0303803   .0188797     1.61   0.108    -.0066298    .0673904
      during |  -.0192002   .0059965    -3.20   0.001    -.0309552   -.0074452
       after |  -.0330941   .0098207    -3.37   0.001    -.0523457   -.0138424
during_expat |   .0005018   .0076365     0.07   0.948    -.0144681    .0154717
 after_expat |  -.0183218   .0109404    -1.67   0.094    -.0397684    .0031249
             |
    ind_year |
         27  |  -.0043421   .0129303    -0.34   0.737    -.0296895    .0210053
         28  |   .0035947   .0152035     0.24   0.813    -.0262088    .0333983
         29  |   .0029602   .0175386     0.17   0.866    -.0314209    .0373412
         30  |   .0130602    .020308     0.64   0.520    -.0267497    .0528702
         31  |   .0034342   .0230163     0.15   0.881    -.0416849    .0485532
         32  |   .0001922   .0254881     0.01   0.994    -.0497723    .0501568
         33  |  -.0024771   .0279697    -0.09   0.929    -.0573063    .0523521
         34  |  -.0118157   .0307524    -0.38   0.701    -.0720999    .0484685
         35  |  -.0088058   .0334429    -0.26   0.792    -.0743643    .0567527
         36  |  -.0133296   .0362197    -0.37   0.713    -.0843315    .0576723
         37  |   -.019089   .0387987    -0.49   0.623    -.0951464    .0569685
         38  |  -.0213299   .0416943    -0.51   0.609    -.1030636    .0604038
         39  |  -.0272838   .0445763    -0.61   0.541    -.1146672    .0600996
         40  |  -.0309871   .0471902    -0.66   0.511    -.1234947    .0615204
         41  |  -.0171353   .0497609    -0.34   0.731    -.1146822    .0804116
         42  |  -.0126038   .0526154    -0.24   0.811    -.1157463    .0905388
         43  |  -.0131138   .0555619    -0.24   0.813    -.1220323    .0958047
         44  |  -.0003335   .0583494    -0.01   0.995    -.1147165    .1140495
         45  |   .0000119   .0611617     0.00   1.000    -.1198839    .1199078
         46  |   .0003675   .0637126     0.01   0.995    -.1245289    .1252639
         47  |   .0061754   .0660203     0.09   0.925    -.1232447    .1355956
         48  |  -.0011954   .0681556    -0.02   0.986    -.1348015    .1324108
         49  |  -.2686934   .0705096    -3.81   0.000    -.4069142   -.1304726
         50  |  -.3241084   .0730722    -4.44   0.000    -.4673527   -.1808642
             |
     age_cat |
          1  |    .077531   .0128858     6.02   0.000     .0522708    .1027911
          2  |   .1106831   .0145442     7.61   0.000      .082172    .1391942
          3  |    .128231   .0164009     7.82   0.000     .0960802    .1603818
          4  |   .1554019   .0187901     8.27   0.000     .1185675    .1922364
          5  |   .1740061    .021217     8.20   0.000     .1324142     .215598
          6  |   .1872641   .0238864     7.84   0.000     .1404395    .2340888
          7  |   .1962675   .0265071     7.40   0.000     .1443053    .2482297
          8  |   .2014829   .0292801     6.88   0.000     .1440848     .258881
          9  |    .215213   .0320164     6.72   0.000     .1524508    .2779752
         10  |   .2240547   .0346393     6.47   0.000      .156151    .2919584
         11  |   .2351135   .0373763     6.29   0.000     .1618444    .3083826
         12  |    .237844   .0401934     5.92   0.000     .1590525    .3166354
         13  |   .2562331   .0431024     5.94   0.000     .1717391    .3407271
         14  |   .2759938   .0461137     5.99   0.000     .1855966     .366391
         15  |   .2866689   .0490061     5.85   0.000     .1906017    .3827361
         16  |   .2902817   .0517074     5.61   0.000     .1889191    .3916444
         17  |   .2994342    .054648     5.48   0.000     .1923072    .4065612
         18  |   .3000302   .0578059     5.19   0.000     .1867128    .4133477
         19  |   .2932781   .0608407     4.82   0.000     .1740114    .4125448
         20  |    .307524   .0656924     4.68   0.000     .1787465    .4363014
         25  |   .3185159   .0748957     4.25   0.000     .1716971    .4653347
         30  |   .3420628   .1061089     3.22   0.001     .1340564    .5500693
         40  |   .2531907   .1251635     2.02   0.043     .0078315    .4985499
         50  |   .1331212   .1383788     0.96   0.336    -.1381441    .4043865
             |
       _cons |   .4677274   .0211801    22.08   0.000     .4262079    .5092469
-------------+----------------------------------------------------------------
     sigma_u |  .37377973
     sigma_e |  .29537296
         rho |  .61558627   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0612180656945638

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    182,199
Group variable: firm_person                     Number of groups  =     21,832

R-sq:                                           Obs per group:
     within  = 0.0612                                         min =          1
     between = 0.0535                                         avg =        8.3
     overall = 0.0386                                         max =         25

                                                F(53,6854)        =      24.88
corr(u_i, Xb)  = 0.0270                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,855 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0303803   .0188797     1.61   0.108    -.0066298    .0673904
      during |  -.0192002   .0059965    -3.20   0.001    -.0309552   -.0074452
       after |  -.0330941   .0098207    -3.37   0.001    -.0523457   -.0138424
during_expat |   .0005018   .0076365     0.07   0.948    -.0144681    .0154717
 after_expat |  -.0183218   .0109404    -1.67   0.094    -.0397684    .0031249
             |
    ind_year |
         27  |  -.0043421   .0129303    -0.34   0.737    -.0296895    .0210053
         28  |   .0035947   .0152035     0.24   0.813    -.0262088    .0333983
         29  |   .0029602   .0175386     0.17   0.866    -.0314209    .0373412
         30  |   .0130602    .020308     0.64   0.520    -.0267497    .0528702
         31  |   .0034342   .0230163     0.15   0.881    -.0416849    .0485532
         32  |   .0001922   .0254881     0.01   0.994    -.0497723    .0501568
         33  |  -.0024771   .0279697    -0.09   0.929    -.0573063    .0523521
         34  |  -.0118157   .0307524    -0.38   0.701    -.0720999    .0484685
         35  |  -.0088058   .0334429    -0.26   0.792    -.0743643    .0567527
         36  |  -.0133296   .0362197    -0.37   0.713    -.0843315    .0576723
         37  |   -.019089   .0387987    -0.49   0.623    -.0951464    .0569685
         38  |  -.0213299   .0416943    -0.51   0.609    -.1030636    .0604038
         39  |  -.0272838   .0445763    -0.61   0.541    -.1146672    .0600996
         40  |  -.0309871   .0471902    -0.66   0.511    -.1234947    .0615204
         41  |  -.0171353   .0497609    -0.34   0.731    -.1146822    .0804116
         42  |  -.0126038   .0526154    -0.24   0.811    -.1157463    .0905388
         43  |  -.0131138   .0555619    -0.24   0.813    -.1220323    .0958047
         44  |  -.0003335   .0583494    -0.01   0.995    -.1147165    .1140495
         45  |   .0000119   .0611617     0.00   1.000    -.1198839    .1199078
         46  |   .0003675   .0637126     0.01   0.995    -.1245289    .1252639
         47  |   .0061754   .0660203     0.09   0.925    -.1232447    .1355956
         48  |  -.0011954   .0681556    -0.02   0.986    -.1348015    .1324108
         49  |  -.2686934   .0705096    -3.81   0.000    -.4069142   -.1304726
         50  |  -.3241084   .0730722    -4.44   0.000    -.4673527   -.1808642
             |
     age_cat |
          1  |    .077531   .0128858     6.02   0.000     .0522708    .1027911
          2  |   .1106831   .0145442     7.61   0.000      .082172    .1391942
          3  |    .128231   .0164009     7.82   0.000     .0960802    .1603818
          4  |   .1554019   .0187901     8.27   0.000     .1185675    .1922364
          5  |   .1740061    .021217     8.20   0.000     .1324142     .215598
          6  |   .1872641   .0238864     7.84   0.000     .1404395    .2340888
          7  |   .1962675   .0265071     7.40   0.000     .1443053    .2482297
          8  |   .2014829   .0292801     6.88   0.000     .1440848     .258881
          9  |    .215213   .0320164     6.72   0.000     .1524508    .2779752
         10  |   .2240547   .0346393     6.47   0.000      .156151    .2919584
         11  |   .2351135   .0373763     6.29   0.000     .1618444    .3083826
         12  |    .237844   .0401934     5.92   0.000     .1590525    .3166354
         13  |   .2562331   .0431024     5.94   0.000     .1717391    .3407271
         14  |   .2759938   .0461137     5.99   0.000     .1855966     .366391
         15  |   .2866689   .0490061     5.85   0.000     .1906017    .3827361
         16  |   .2902817   .0517074     5.61   0.000     .1889191    .3916444
         17  |   .2994342    .054648     5.48   0.000     .1923072    .4065612
         18  |   .3000302   .0578059     5.19   0.000     .1867128    .4133477
         19  |   .2932781   .0608407     4.82   0.000     .1740114    .4125448
         20  |    .307524   .0656924     4.68   0.000     .1787465    .4363014
         25  |   .3185159   .0748957     4.25   0.000     .1716971    .4653347
         30  |   .3420628   .1061089     3.22   0.001     .1340564    .5500693
         40  |   .2531907   .1251635     2.02   0.043     .0078315    .4985499
         50  |   .1331212   .1383788     0.96   0.336    -.1381441    .4043865
             |
       _cons |   .4677274   .0211801    22.08   0.000     .4262079    .5092469
-------------+----------------------------------------------------------------
     sigma_u |  .37377973
     sigma_e |  .29537296
         rho |  .61558627   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1,  6854) =   10.25
            Prob > F =    0.0014

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6854) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1,  6854) =    3.73
            Prob > F =    0.0536

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6854) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1,  6854) =    0.00
            Prob > F =    0.9476

 ( 1)  during_expat = 0

       F(  1,  6854) =    0.00
            Prob > F =    0.9476
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1,  6854) =    4.41
            Prob > F =    0.0357

 ( 1)  after_expat = 0

       F(  1,  6854) =    2.80
            Prob > F =    0.0940
(file output/figure/manufacturing_exporter_slope.png written in PNG format)
(sum of wgt is 97,100.1176971942)

Linear regression                               Number of obs     =    233,110
                                                F(75, 14660)      =      53.56
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1136
                                                Root MSE          =     .44037

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .227644   .0132746    17.15   0.000     .2016242    .2536639
       expat |   .0699351   .0196248     3.56   0.000     .0314681    .1084021
             |
    ind_year |
          2  |  -.0321388   .0110778    -2.90   0.004    -.0538528   -.0104249
          3  |  -.0556825   .0127692    -4.36   0.000    -.0807118   -.0306532
          4  |  -.0618755   .0130986    -4.72   0.000    -.0875504   -.0362006
          5  |  -.0514974   .0135706    -3.79   0.000    -.0780974   -.0248974
          6  |  -.0598549   .0137116    -4.37   0.000    -.0867313   -.0329784
          7  |  -.0677247   .0137835    -4.91   0.000     -.094742   -.0407073
          8  |  -.0812398    .013882    -5.85   0.000    -.1084503   -.0540294
          9  |  -.0898646   .0139134    -6.46   0.000    -.1171366   -.0625927
         10  |  -.0882147    .014028    -6.29   0.000    -.1157114    -.060718
         11  |  -.1044432   .0139234    -7.50   0.000    -.1317348   -.0771515
         12  |  -.1090015   .0139158    -7.83   0.000    -.1362783   -.0817247
         13  |  -.1098312   .0139483    -7.87   0.000    -.1371717   -.0824908
         14  |  -.1023375   .0140956    -7.26   0.000    -.1299667   -.0747082
         15  |  -.0945841   .0141955    -6.66   0.000    -.1224091    -.066759
         16  |  -.0859831   .0143238    -6.00   0.000    -.1140596   -.0579066
         17  |  -.0737771   .0144781    -5.10   0.000    -.1021559   -.0453983
         18  |  -.0726596    .014585    -4.98   0.000     -.101248   -.0440712
         19  |  -.0647718   .0147542    -4.39   0.000     -.093692   -.0358516
         20  |  -.0532673   .0148971    -3.58   0.000    -.0824674   -.0240671
         21  |  -.0489965   .0150697    -3.25   0.001    -.0785349    -.019458
         22  |  -.0498398    .015328    -3.25   0.001    -.0798845    -.019795
         23  |  -.0503955   .0154681    -3.26   0.001     -.080715    -.020076
         24  |  -.1550275   .0151642   -10.22   0.000    -.1847512   -.1253038
         25  |  -.1845487   .0154574   -11.94   0.000    -.2148471   -.1542504
         26  |   .1938204    .022971     8.44   0.000     .1487942    .2388465
         27  |   .1580656    .019738     8.01   0.000     .1193765    .1967547
         28  |   .1663226   .0189323     8.79   0.000     .1292129    .2034322
         29  |   .1585721   .0186594     8.50   0.000     .1219973    .1951468
         30  |    .190395   .0184846    10.30   0.000     .1541627    .2266272
         31  |   .1870025    .018159    10.30   0.000     .1514085    .2225965
         32  |   .1852614   .0177826    10.42   0.000     .1504054    .2201175
         33  |   .1652809    .017502     9.44   0.000     .1309747     .199587
         34  |   .1745946   .0173807    10.05   0.000     .1405261     .208663
         35  |   .1790743    .017315    10.34   0.000     .1451348    .2130139
         36  |     .18448   .0172321    10.71   0.000     .1507028    .2182571
         37  |   .1692222   .0172161     9.83   0.000     .1354765     .202968
         38  |   .1640074   .0170632     9.61   0.000     .1305614    .1974534
         39  |   .1641093   .0171254     9.58   0.000     .1305413    .1976773
         40  |   .1681532   .0171578     9.80   0.000     .1345218    .2017846
         41  |   .1872994   .0173997    10.76   0.000     .1531939     .221405
         42  |   .1940329   .0174982    11.09   0.000     .1597342    .2283316
         43  |    .193772    .017826    10.87   0.000     .1588308    .2287132
         44  |   .2148024   .0180368    11.91   0.000      .179448    .2501567
         45  |   .2160263   .0182256    11.85   0.000     .1803018    .2517509
         46  |   .2240773   .0184205    12.16   0.000     .1879707    .2601839
         47  |   .2411528   .0187272    12.88   0.000     .2044452    .2778605
         48  |   .2326657    .018751    12.41   0.000     .1959114    .2694201
         49  |  -.0434708   .0185415    -2.34   0.019    -.0798145   -.0071272
         50  |  -.0845969   .0187597    -4.51   0.000    -.1213683   -.0478256
             |
     age_cat |
          1  |   .0516233   .0074612     6.92   0.000     .0369984    .0662482
          2  |   .0758231   .0078162     9.70   0.000     .0605023    .0911439
          3  |   .0932796   .0080991    11.52   0.000     .0774045    .1091548
          4  |   .1167331   .0083695    13.95   0.000     .1003278    .1331384
          5  |   .1360874   .0086298    15.77   0.000     .1191718     .153003
          6  |   .1502151   .0089655    16.75   0.000     .1326415    .1677886
          7  |   .1599704   .0092272    17.34   0.000      .141884    .1780569
          8  |   .1780731   .0095772    18.59   0.000     .1593005    .1968457
          9  |    .181549   .0098268    18.47   0.000     .1622873    .2008108
         10  |   .1847746   .0100451    18.39   0.000     .1650849    .2044643
         11  |   .1931216    .010286    18.78   0.000     .1729597    .2132834
         12  |   .1999448   .0105254    19.00   0.000     .1793137    .2205759
         13  |   .2124759   .0109058    19.48   0.000     .1910992    .2338526
         14  |    .221151   .0113777    19.44   0.000     .1988493    .2434527
         15  |   .2333935   .0117519    19.86   0.000     .2103583    .2564287
         16  |   .2378377    .012216    19.47   0.000     .2138927    .2617826
         17  |   .2422621   .0126729    19.12   0.000     .2174217    .2671025
         18  |   .2490218   .0132511    18.79   0.000      .223048    .2749956
         19  |   .2361121   .0137073    17.23   0.000     .2092441    .2629801
         20  |   .2465152   .0142457    17.30   0.000     .2185919    .2744386
         25  |   .2583161   .0191235    13.51   0.000     .2208316    .2958007
         30  |   .0757241   .0210399     3.60   0.000     .0344833     .116965
         40  |   .1040135   .0207659     5.01   0.000     .0633098    .1447172
         50  |   .1004338   .0235581     4.26   0.000      .054257    .1466105
             |
       _cons |   .1485947   .0137276    10.82   0.000     .1216869    .1755024
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    233,110
                                                F(75, 14660)      =      53.56
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1136
                                                Root MSE          =     .44037

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .227644   .0132746    17.15   0.000     .2016242    .2536639
       expat |   .0699351   .0196248     3.56   0.000     .0314681    .1084021
             |
    ind_year |
          2  |  -.0321388   .0110778    -2.90   0.004    -.0538528   -.0104249
          3  |  -.0556825   .0127692    -4.36   0.000    -.0807118   -.0306532
          4  |  -.0618755   .0130986    -4.72   0.000    -.0875504   -.0362006
          5  |  -.0514974   .0135706    -3.79   0.000    -.0780974   -.0248974
          6  |  -.0598549   .0137116    -4.37   0.000    -.0867313   -.0329784
          7  |  -.0677247   .0137835    -4.91   0.000     -.094742   -.0407073
          8  |  -.0812398    .013882    -5.85   0.000    -.1084503   -.0540294
          9  |  -.0898646   .0139134    -6.46   0.000    -.1171366   -.0625927
         10  |  -.0882147    .014028    -6.29   0.000    -.1157114    -.060718
         11  |  -.1044432   .0139234    -7.50   0.000    -.1317348   -.0771515
         12  |  -.1090015   .0139158    -7.83   0.000    -.1362783   -.0817247
         13  |  -.1098312   .0139483    -7.87   0.000    -.1371717   -.0824908
         14  |  -.1023375   .0140956    -7.26   0.000    -.1299667   -.0747082
         15  |  -.0945841   .0141955    -6.66   0.000    -.1224091    -.066759
         16  |  -.0859831   .0143238    -6.00   0.000    -.1140596   -.0579066
         17  |  -.0737771   .0144781    -5.10   0.000    -.1021559   -.0453983
         18  |  -.0726596    .014585    -4.98   0.000     -.101248   -.0440712
         19  |  -.0647718   .0147542    -4.39   0.000     -.093692   -.0358516
         20  |  -.0532673   .0148971    -3.58   0.000    -.0824674   -.0240671
         21  |  -.0489965   .0150697    -3.25   0.001    -.0785349    -.019458
         22  |  -.0498398    .015328    -3.25   0.001    -.0798845    -.019795
         23  |  -.0503955   .0154681    -3.26   0.001     -.080715    -.020076
         24  |  -.1550275   .0151642   -10.22   0.000    -.1847512   -.1253038
         25  |  -.1845487   .0154574   -11.94   0.000    -.2148471   -.1542504
         26  |   .1938204    .022971     8.44   0.000     .1487942    .2388465
         27  |   .1580656    .019738     8.01   0.000     .1193765    .1967547
         28  |   .1663226   .0189323     8.79   0.000     .1292129    .2034322
         29  |   .1585721   .0186594     8.50   0.000     .1219973    .1951468
         30  |    .190395   .0184846    10.30   0.000     .1541627    .2266272
         31  |   .1870025    .018159    10.30   0.000     .1514085    .2225965
         32  |   .1852614   .0177826    10.42   0.000     .1504054    .2201175
         33  |   .1652809    .017502     9.44   0.000     .1309747     .199587
         34  |   .1745946   .0173807    10.05   0.000     .1405261     .208663
         35  |   .1790743    .017315    10.34   0.000     .1451348    .2130139
         36  |     .18448   .0172321    10.71   0.000     .1507028    .2182571
         37  |   .1692222   .0172161     9.83   0.000     .1354765     .202968
         38  |   .1640074   .0170632     9.61   0.000     .1305614    .1974534
         39  |   .1641093   .0171254     9.58   0.000     .1305413    .1976773
         40  |   .1681532   .0171578     9.80   0.000     .1345218    .2017846
         41  |   .1872994   .0173997    10.76   0.000     .1531939     .221405
         42  |   .1940329   .0174982    11.09   0.000     .1597342    .2283316
         43  |    .193772    .017826    10.87   0.000     .1588308    .2287132
         44  |   .2148024   .0180368    11.91   0.000      .179448    .2501567
         45  |   .2160263   .0182256    11.85   0.000     .1803018    .2517509
         46  |   .2240773   .0184205    12.16   0.000     .1879707    .2601839
         47  |   .2411528   .0187272    12.88   0.000     .2044452    .2778605
         48  |   .2326657    .018751    12.41   0.000     .1959114    .2694201
         49  |  -.0434708   .0185415    -2.34   0.019    -.0798145   -.0071272
         50  |  -.0845969   .0187597    -4.51   0.000    -.1213683   -.0478256
             |
     age_cat |
          1  |   .0516233   .0074612     6.92   0.000     .0369984    .0662482
          2  |   .0758231   .0078162     9.70   0.000     .0605023    .0911439
          3  |   .0932796   .0080991    11.52   0.000     .0774045    .1091548
          4  |   .1167331   .0083695    13.95   0.000     .1003278    .1331384
          5  |   .1360874   .0086298    15.77   0.000     .1191718     .153003
          6  |   .1502151   .0089655    16.75   0.000     .1326415    .1677886
          7  |   .1599704   .0092272    17.34   0.000      .141884    .1780569
          8  |   .1780731   .0095772    18.59   0.000     .1593005    .1968457
          9  |    .181549   .0098268    18.47   0.000     .1622873    .2008108
         10  |   .1847746   .0100451    18.39   0.000     .1650849    .2044643
         11  |   .1931216    .010286    18.78   0.000     .1729597    .2132834
         12  |   .1999448   .0105254    19.00   0.000     .1793137    .2205759
         13  |   .2124759   .0109058    19.48   0.000     .1910992    .2338526
         14  |    .221151   .0113777    19.44   0.000     .1988493    .2434527
         15  |   .2333935   .0117519    19.86   0.000     .2103583    .2564287
         16  |   .2378377    .012216    19.47   0.000     .2138927    .2617826
         17  |   .2422621   .0126729    19.12   0.000     .2174217    .2671025
         18  |   .2490218   .0132511    18.79   0.000      .223048    .2749956
         19  |   .2361121   .0137073    17.23   0.000     .2092441    .2629801
         20  |   .2465152   .0142457    17.30   0.000     .2185919    .2744386
         25  |   .2583161   .0191235    13.51   0.000     .2208316    .2958007
         30  |   .0757241   .0210399     3.60   0.000     .0344833     .116965
         40  |   .1040135   .0207659     5.01   0.000     .0633098    .1447172
         50  |   .1004338   .0235581     4.26   0.000      .054257    .1466105
             |
       _cons |   .1485947   .0137276    10.82   0.000     .1216869    .1755024
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    233,110
Group variable: id                              Number of groups  =     14,661

R-sq:                                           Obs per group:
     within  = 0.0524                                         min =          1
     between = 0.0734                                         avg =       15.9
     overall = 0.0605                                         max =        140

                                                F(75,14660)       =      27.12
corr(u_i, Xb)  = 0.1018                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0167206   .0130422     1.28   0.200    -.0088437    .0422849
       expat |   .0318184   .0094203     3.38   0.001     .0133535    .0502833
             |
    ind_year |
          2  |  -.0170482   .0104255    -1.64   0.102    -.0374835    .0033871
          3  |  -.0351072   .0127721    -2.75   0.006    -.0601422   -.0100722
          4  |  -.0419491   .0133948    -3.13   0.002    -.0682046   -.0156937
          5  |  -.0334035   .0147113    -2.27   0.023    -.0622394   -.0045675
          6  |  -.0414498   .0156634    -2.65   0.008     -.072152   -.0107477
          7  |  -.0483682   .0167456    -2.89   0.004    -.0811916   -.0155448
          8  |     -.0603   .0177933    -3.39   0.001    -.0951772   -.0254228
          9  |  -.0629714   .0191145    -3.29   0.001    -.1004381   -.0255047
         10  |  -.0608258    .020331    -2.99   0.003    -.1006771   -.0209746
         11  |  -.0683234   .0216431    -3.16   0.002    -.1107466   -.0259002
         12  |  -.0693854   .0228237    -3.04   0.002    -.1141228   -.0246481
         13  |  -.0657429   .0242522    -2.71   0.007    -.1132803   -.0182056
         14  |  -.0560182   .0256702    -2.18   0.029    -.1063349   -.0057014
         15  |  -.0440496    .027099    -1.63   0.104    -.0971671    .0090678
         16  |  -.0338626   .0284911    -1.19   0.235    -.0897087    .0219835
         17  |  -.0201437   .0299526    -0.67   0.501    -.0788546    .0385673
         18  |  -.0196487   .0315882    -0.62   0.534    -.0815655    .0422682
         19  |  -.0133981   .0330835    -0.40   0.685    -.0782459    .0514497
         20  |   -.006166   .0344862    -0.18   0.858    -.0737633    .0614312
         21  |  -.0061981   .0358221    -0.17   0.863     -.076414    .0640177
         22  |  -.0050174   .0371377    -0.14   0.893     -.077812    .0677771
         23  |  -.0081814   .0384721    -0.21   0.832    -.0835916    .0672288
         24  |  -.1213005   .0397644    -3.05   0.002    -.1992437   -.0433573
         25  |  -.1565292   .0413551    -3.78   0.000    -.2375904   -.0754679
         26  |  -.0112683   .0258736    -0.44   0.663    -.0619838    .0394473
         27  |  -.0085707   .0228485    -0.38   0.708    -.0533566    .0362152
         28  |     .01247   .0222132     0.56   0.575    -.0310707    .0560108
         29  |   .0090975   .0218454     0.42   0.677    -.0337224    .0519173
         30  |   .0288374   .0218632     1.32   0.187    -.0140172    .0716921
         31  |   .0216457   .0218353     0.99   0.322    -.0211543    .0644457
         32  |   .0235705   .0222961     1.06   0.290    -.0201327    .0672738
         33  |   .0146413   .0228903     0.64   0.522    -.0302267    .0595092
         34  |   .0190587   .0235149     0.81   0.418    -.0270335    .0651509
         35  |   .0235562   .0243647     0.97   0.334    -.0242017     .071314
         36  |   .0267054   .0255344     1.05   0.296    -.0233452     .076756
         37  |    .015649   .0266597     0.59   0.557    -.0366074    .0679055
         38  |   .0136255   .0275843     0.49   0.621    -.0404431    .0676941
         39  |   .0184768   .0288351     0.64   0.522    -.0380435    .0749972
         40  |   .0272057   .0298561     0.91   0.362     -.031316    .0857273
         41  |   .0472542   .0311166     1.52   0.129    -.0137382    .1082466
         42  |    .055474   .0323217     1.72   0.086    -.0078806    .1188286
         43  |   .0552051   .0338606     1.63   0.103    -.0111659     .121576
         44  |   .0751953   .0353252     2.13   0.033     .0059534    .1444372
         45  |   .0807417   .0366017     2.21   0.027     .0089978    .1524855
         46  |   .0833492   .0381112     2.19   0.029     .0086464    .1580519
         47  |   .0976043   .0393775     2.48   0.013     .0204195    .1747891
         48  |   .0863859   .0402409     2.15   0.032     .0075086    .1652632
         49  |  -.2075758   .0418061    -4.97   0.000    -.2895211   -.1256305
         50  |  -.2619066   .0433527    -6.04   0.000    -.3468832   -.1769299
             |
     age_cat |
          1  |   .0432673   .0072528     5.97   0.000     .0290509    .0574837
          2  |   .0633668   .0081899     7.74   0.000     .0473135    .0794201
          3  |   .0808856   .0092248     8.77   0.000     .0628039    .0989673
          4  |   .1024669   .0104469     9.81   0.000     .0819897    .1229441
          5  |   .1223267   .0117211    10.44   0.000     .0993518    .1453016
          6  |   .1357049   .0131743    10.30   0.000     .1098817    .1615282
          7  |   .1433363   .0146041     9.81   0.000     .1147104    .1719623
          8  |    .159449   .0161476     9.87   0.000     .1277977    .1911003
          9  |   .1601597   .0176412     9.08   0.000     .1255807    .1947388
         10  |   .1625567   .0191814     8.47   0.000     .1249588    .2001546
         11  |   .1713723   .0207096     8.28   0.000     .1307788    .2119658
         12  |    .173986   .0222527     7.82   0.000      .130368     .217604
         13  |   .1856516   .0239085     7.77   0.000      .138788    .2325153
         14  |   .1966325   .0256081     7.68   0.000     .1464374    .2468276
         15  |   .2054264   .0272046     7.55   0.000     .1521019    .2587509
         16  |   .2096284   .0288397     7.27   0.000      .153099    .2661577
         17  |   .2133288   .0303697     7.02   0.000     .1538003    .2728573
         18  |   .2198437   .0321902     6.83   0.000     .1567469    .2829405
         19  |   .2085713   .0340946     6.12   0.000     .1417416    .2754011
         20  |    .220077   .0368976     5.96   0.000     .1477531    .2924009
         25  |   .2436885   .0427826     5.70   0.000     .1598293    .3275476
         30  |   .2333326   .0627038     3.72   0.000     .1104254    .3562399
         40  |   .2217325   .0709044     3.13   0.002     .0827509     .360714
         50  |   .1501233   .0761128     1.97   0.049     .0009327    .2993139
             |
       _cons |   .1995017   .0149009    13.39   0.000      .170294    .2287094
-------------+----------------------------------------------------------------
     sigma_u |  .36717852
     sigma_e |  .28639149
         rho |  .62174862   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .052367958117605

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    233,110
Group variable: id                              Number of groups  =     14,661

R-sq:                                           Obs per group:
     within  = 0.0524                                         min =          1
     between = 0.0734                                         avg =       15.9
     overall = 0.0605                                         max =        140

                                                F(75,14660)       =      27.12
corr(u_i, Xb)  = 0.1018                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0167206   .0130422     1.28   0.200    -.0088437    .0422849
       expat |   .0318184   .0094203     3.38   0.001     .0133535    .0502833
             |
    ind_year |
          2  |  -.0170482   .0104255    -1.64   0.102    -.0374835    .0033871
          3  |  -.0351072   .0127721    -2.75   0.006    -.0601422   -.0100722
          4  |  -.0419491   .0133948    -3.13   0.002    -.0682046   -.0156937
          5  |  -.0334035   .0147113    -2.27   0.023    -.0622394   -.0045675
          6  |  -.0414498   .0156634    -2.65   0.008     -.072152   -.0107477
          7  |  -.0483682   .0167456    -2.89   0.004    -.0811916   -.0155448
          8  |     -.0603   .0177933    -3.39   0.001    -.0951772   -.0254228
          9  |  -.0629714   .0191145    -3.29   0.001    -.1004381   -.0255047
         10  |  -.0608258    .020331    -2.99   0.003    -.1006771   -.0209746
         11  |  -.0683234   .0216431    -3.16   0.002    -.1107466   -.0259002
         12  |  -.0693854   .0228237    -3.04   0.002    -.1141228   -.0246481
         13  |  -.0657429   .0242522    -2.71   0.007    -.1132803   -.0182056
         14  |  -.0560182   .0256702    -2.18   0.029    -.1063349   -.0057014
         15  |  -.0440496    .027099    -1.63   0.104    -.0971671    .0090678
         16  |  -.0338626   .0284911    -1.19   0.235    -.0897087    .0219835
         17  |  -.0201437   .0299526    -0.67   0.501    -.0788546    .0385673
         18  |  -.0196487   .0315882    -0.62   0.534    -.0815655    .0422682
         19  |  -.0133981   .0330835    -0.40   0.685    -.0782459    .0514497
         20  |   -.006166   .0344862    -0.18   0.858    -.0737633    .0614312
         21  |  -.0061981   .0358221    -0.17   0.863     -.076414    .0640177
         22  |  -.0050174   .0371377    -0.14   0.893     -.077812    .0677771
         23  |  -.0081814   .0384721    -0.21   0.832    -.0835916    .0672288
         24  |  -.1213005   .0397644    -3.05   0.002    -.1992437   -.0433573
         25  |  -.1565292   .0413551    -3.78   0.000    -.2375904   -.0754679
         26  |  -.0112683   .0258736    -0.44   0.663    -.0619838    .0394473
         27  |  -.0085707   .0228485    -0.38   0.708    -.0533566    .0362152
         28  |     .01247   .0222132     0.56   0.575    -.0310707    .0560108
         29  |   .0090975   .0218454     0.42   0.677    -.0337224    .0519173
         30  |   .0288374   .0218632     1.32   0.187    -.0140172    .0716921
         31  |   .0216457   .0218353     0.99   0.322    -.0211543    .0644457
         32  |   .0235705   .0222961     1.06   0.290    -.0201327    .0672738
         33  |   .0146413   .0228903     0.64   0.522    -.0302267    .0595092
         34  |   .0190587   .0235149     0.81   0.418    -.0270335    .0651509
         35  |   .0235562   .0243647     0.97   0.334    -.0242017     .071314
         36  |   .0267054   .0255344     1.05   0.296    -.0233452     .076756
         37  |    .015649   .0266597     0.59   0.557    -.0366074    .0679055
         38  |   .0136255   .0275843     0.49   0.621    -.0404431    .0676941
         39  |   .0184768   .0288351     0.64   0.522    -.0380435    .0749972
         40  |   .0272057   .0298561     0.91   0.362     -.031316    .0857273
         41  |   .0472542   .0311166     1.52   0.129    -.0137382    .1082466
         42  |    .055474   .0323217     1.72   0.086    -.0078806    .1188286
         43  |   .0552051   .0338606     1.63   0.103    -.0111659     .121576
         44  |   .0751953   .0353252     2.13   0.033     .0059534    .1444372
         45  |   .0807417   .0366017     2.21   0.027     .0089978    .1524855
         46  |   .0833492   .0381112     2.19   0.029     .0086464    .1580519
         47  |   .0976043   .0393775     2.48   0.013     .0204195    .1747891
         48  |   .0863859   .0402409     2.15   0.032     .0075086    .1652632
         49  |  -.2075758   .0418061    -4.97   0.000    -.2895211   -.1256305
         50  |  -.2619066   .0433527    -6.04   0.000    -.3468832   -.1769299
             |
     age_cat |
          1  |   .0432673   .0072528     5.97   0.000     .0290509    .0574837
          2  |   .0633668   .0081899     7.74   0.000     .0473135    .0794201
          3  |   .0808856   .0092248     8.77   0.000     .0628039    .0989673
          4  |   .1024669   .0104469     9.81   0.000     .0819897    .1229441
          5  |   .1223267   .0117211    10.44   0.000     .0993518    .1453016
          6  |   .1357049   .0131743    10.30   0.000     .1098817    .1615282
          7  |   .1433363   .0146041     9.81   0.000     .1147104    .1719623
          8  |    .159449   .0161476     9.87   0.000     .1277977    .1911003
          9  |   .1601597   .0176412     9.08   0.000     .1255807    .1947388
         10  |   .1625567   .0191814     8.47   0.000     .1249588    .2001546
         11  |   .1713723   .0207096     8.28   0.000     .1307788    .2119658
         12  |    .173986   .0222527     7.82   0.000      .130368     .217604
         13  |   .1856516   .0239085     7.77   0.000      .138788    .2325153
         14  |   .1966325   .0256081     7.68   0.000     .1464374    .2468276
         15  |   .2054264   .0272046     7.55   0.000     .1521019    .2587509
         16  |   .2096284   .0288397     7.27   0.000      .153099    .2661577
         17  |   .2133288   .0303697     7.02   0.000     .1538003    .2728573
         18  |   .2198437   .0321902     6.83   0.000     .1567469    .2829405
         19  |   .2085713   .0340946     6.12   0.000     .1417416    .2754011
         20  |    .220077   .0368976     5.96   0.000     .1477531    .2924009
         25  |   .2436885   .0427826     5.70   0.000     .1598293    .3275476
         30  |   .2333326   .0627038     3.72   0.000     .1104254    .3562399
         40  |   .2217325   .0709044     3.13   0.002     .0827509     .360714
         50  |   .1501233   .0761128     1.97   0.049     .0009327    .2993139
             |
       _cons |   .1995017   .0149009    13.39   0.000      .170294    .2287094
-------------+----------------------------------------------------------------
     sigma_u |  .36717852
     sigma_e |  .28639149
         rho |  .62174862   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.0479                         Obs per group: min =         1
       between = 0.0763                                        avg =       9.0
       overall = 0.0612                                        max =        25

                                                F(78,14660)        =     27.64
corr(u_i, Xb)  = 0.1063                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0188682   .0119662     1.58   0.115     -.004587    .0423235
      during |  -.0073625   .0034801    -2.12   0.034    -.0141839   -.0005412
       after |  -.0243857   .0059922    -4.07   0.000    -.0361312   -.0126401
during_expat |    .030938   .0130805     2.37   0.018     .0052984    .0565775
 after_expat |   .0278368   .0173545     1.60   0.109    -.0061802    .0618537
             |
    ind_year |
          2  |  -.0172377   .0102282    -1.69   0.092    -.0372863    .0028109
          3  |  -.0350138   .0123775    -2.83   0.005    -.0592753   -.0107522
          4  |  -.0424093   .0133002    -3.19   0.001    -.0684793   -.0163393
          5  |  -.0353283   .0146945    -2.40   0.016    -.0641314   -.0065251
          6  |  -.0427536   .0158594    -2.70   0.007    -.0738401   -.0116671
          7  |  -.0491345   .0170464    -2.88   0.004    -.0825476   -.0157214
          8  |  -.0597153   .0181923    -3.28   0.001    -.0953745   -.0240561
          9  |  -.0626264   .0196158    -3.19   0.001    -.1010758   -.0241769
         10  |  -.0619215   .0209245    -2.96   0.003    -.1029361   -.0209068
         11  |    -.07039   .0223753    -3.15   0.002    -.1142484   -.0265316
         12  |  -.0702507   .0237209    -2.96   0.003    -.1167466   -.0237548
         13  |  -.0653748   .0252792    -2.59   0.010    -.1149252   -.0158245
         14  |  -.0566774   .0268427    -2.11   0.035    -.1092925   -.0040623
         15  |  -.0461504   .0283442    -1.63   0.104    -.1017086    .0094078
         16  |  -.0329484   .0298329    -1.10   0.269    -.0914246    .0255278
         17  |    -.01805   .0314166    -0.57   0.566    -.0796305    .0435305
         18  |  -.0141201   .0330724    -0.43   0.669    -.0789462     .050706
         19  |  -.0089587   .0346389    -0.26   0.796    -.0768553     .058938
         20  |  -.0011236    .036096    -0.03   0.975    -.0718763    .0696291
         21  |  -.0064736   .0375058    -0.17   0.863    -.0799896    .0670425
         22  |  -4.92e-06   .0388139    -0.00   1.000    -.0760851    .0760752
         23  |  -.0035317   .0401876    -0.09   0.930    -.0823044    .0752411
         24  |   -.112407   .0415858    -2.70   0.007    -.1939205   -.0308936
         25  |  -.1475568   .0431473    -3.42   0.001    -.2321309   -.0629828
         26  |  -.0142615   .0250962    -0.57   0.570    -.0634532    .0349302
         27  |  -.0108618   .0221713    -0.49   0.624    -.0543203    .0325968
         28  |   .0102994   .0214908     0.48   0.632    -.0318252    .0524241
         29  |   .0077509   .0212317     0.37   0.715    -.0338659    .0493677
         30  |   .0274017   .0211663     1.29   0.195     -.014087    .0688904
         31  |   .0198829   .0213454     0.93   0.352    -.0219568    .0617226
         32  |    .027523   .0218751     1.26   0.208    -.0153548    .0704009
         33  |   .0176854   .0224784     0.79   0.431    -.0263751    .0617458
         34  |   .0168693   .0233952     0.72   0.471    -.0289884    .0627269
         35  |   .0271207   .0242905     1.12   0.264    -.0204917    .0747331
         36  |   .0281202   .0255816     1.10   0.272    -.0220229    .0782633
         37  |   .0195962   .0267488     0.73   0.464    -.0328348    .0720271
         38  |   .0161414   .0278896     0.58   0.563    -.0385256    .0708084
         39  |   .0206139   .0293157     0.70   0.482    -.0368486    .0780765
         40  |    .031633   .0304997     1.04   0.300    -.0281503    .0914162
         41  |   .0475408   .0318325     1.49   0.135    -.0148548    .1099364
         42  |   .0555876   .0332044     1.67   0.094    -.0094973    .1206725
         43  |   .0565284    .034789     1.62   0.104    -.0116625    .1247193
         44  |    .076812   .0363625     2.11   0.035     .0055369    .1480872
         45  |   .0836865   .0378452     2.21   0.027     .0095052    .1578679
         46  |    .085566   .0394503     2.17   0.030     .0082385    .1628936
         47  |   .0972184   .0406409     2.39   0.017     .0175572    .1768796
         48  |   .0874439   .0416805     2.10   0.036     .0057449    .1691428
         49  |  -.1960341   .0433002    -4.53   0.000    -.2809079   -.1111603
         50  |  -.2464229   .0448832    -5.49   0.000    -.3343998   -.1584461
             |
     age_cat |
          1  |   .0467835   .0068833     6.80   0.000     .0332915    .0602756
          2  |    .066242   .0078729     8.41   0.000     .0508101    .0816739
          3  |   .0839027   .0089786     9.34   0.000     .0663035     .101502
          4  |   .1061351   .0103041    10.30   0.000     .0859377    .1263324
          5  |   .1247872   .0116838    10.68   0.000     .1018855    .1476889
          6  |    .137144   .0132213    10.37   0.000     .1112286    .1630595
          7  |   .1437474   .0147661     9.73   0.000     .1148039    .1726909
          8  |   .1603029   .0163888     9.78   0.000     .1281787    .1924271
          9  |   .1611884   .0179903     8.96   0.000     .1259251    .1964518
         10  |   .1661111   .0196276     8.46   0.000     .1276385    .2045837
         11  |   .1749116    .021234     8.24   0.000     .1332903     .216533
         12  |   .1776346   .0228614     7.77   0.000     .1328234    .2224459
         13  |   .1875366   .0245691     7.63   0.000      .139378    .2356952
         14  |   .1968453   .0262781     7.49   0.000      .145337    .2483536
         15  |   .2050712   .0279144     7.35   0.000     .1503555    .2597869
         16  |   .2102631   .0295985     7.10   0.000     .1522464    .2682798
         17  |   .2150529   .0312199     6.89   0.000     .1538581    .2762478
         18  |    .220599   .0330709     6.67   0.000     .1557758    .2854221
         19  |   .2118251   .0349247     6.07   0.000     .1433683    .2802819
         20  |   .2224445    .037895     5.87   0.000     .1481656    .2967234
         25  |   .2444492   .0437072     5.59   0.000     .1587777    .3301208
         30  |    .245273   .0611279     4.01   0.000     .1254546    .3650914
         40  |   .2306171   .0684473     3.37   0.001     .0964517    .3647824
         50  |   .1720006   .0722541     2.38   0.017     .0303734    .3136278
             |
       _cons |   .2021936   .0149825    13.50   0.000      .172826    .2315613
-------------+----------------------------------------------------------------
     sigma_u |  .38780271
     sigma_e |  .28679479
         rho |   .6464474   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0479448882103147

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.0479                                         min =          1
     between = 0.0763                                         avg =        9.0
     overall = 0.0612                                         max =         25

                                                F(78,14660)       =      27.64
corr(u_i, Xb)  = 0.1063                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0188682   .0119662     1.58   0.115     -.004587    .0423235
      during |  -.0073625   .0034801    -2.12   0.034    -.0141839   -.0005412
       after |  -.0243857   .0059922    -4.07   0.000    -.0361312   -.0126401
during_expat |    .030938   .0130805     2.37   0.018     .0052984    .0565775
 after_expat |   .0278368   .0173545     1.60   0.109    -.0061802    .0618537
             |
    ind_year |
          2  |  -.0172377   .0102282    -1.69   0.092    -.0372863    .0028109
          3  |  -.0350138   .0123775    -2.83   0.005    -.0592753   -.0107522
          4  |  -.0424093   .0133002    -3.19   0.001    -.0684793   -.0163393
          5  |  -.0353283   .0146945    -2.40   0.016    -.0641314   -.0065251
          6  |  -.0427536   .0158594    -2.70   0.007    -.0738401   -.0116671
          7  |  -.0491345   .0170464    -2.88   0.004    -.0825476   -.0157214
          8  |  -.0597153   .0181923    -3.28   0.001    -.0953745   -.0240561
          9  |  -.0626264   .0196158    -3.19   0.001    -.1010758   -.0241769
         10  |  -.0619215   .0209245    -2.96   0.003    -.1029361   -.0209068
         11  |    -.07039   .0223753    -3.15   0.002    -.1142484   -.0265316
         12  |  -.0702507   .0237209    -2.96   0.003    -.1167466   -.0237548
         13  |  -.0653748   .0252792    -2.59   0.010    -.1149252   -.0158245
         14  |  -.0566774   .0268427    -2.11   0.035    -.1092925   -.0040623
         15  |  -.0461504   .0283442    -1.63   0.104    -.1017086    .0094078
         16  |  -.0329484   .0298329    -1.10   0.269    -.0914246    .0255278
         17  |    -.01805   .0314166    -0.57   0.566    -.0796305    .0435305
         18  |  -.0141201   .0330724    -0.43   0.669    -.0789462     .050706
         19  |  -.0089587   .0346389    -0.26   0.796    -.0768553     .058938
         20  |  -.0011236    .036096    -0.03   0.975    -.0718763    .0696291
         21  |  -.0064736   .0375058    -0.17   0.863    -.0799896    .0670425
         22  |  -4.92e-06   .0388139    -0.00   1.000    -.0760851    .0760752
         23  |  -.0035317   .0401876    -0.09   0.930    -.0823044    .0752411
         24  |   -.112407   .0415858    -2.70   0.007    -.1939205   -.0308936
         25  |  -.1475568   .0431473    -3.42   0.001    -.2321309   -.0629828
         26  |  -.0142615   .0250962    -0.57   0.570    -.0634532    .0349302
         27  |  -.0108618   .0221713    -0.49   0.624    -.0543203    .0325968
         28  |   .0102994   .0214908     0.48   0.632    -.0318252    .0524241
         29  |   .0077509   .0212317     0.37   0.715    -.0338659    .0493677
         30  |   .0274017   .0211663     1.29   0.195     -.014087    .0688904
         31  |   .0198829   .0213454     0.93   0.352    -.0219568    .0617226
         32  |    .027523   .0218751     1.26   0.208    -.0153548    .0704009
         33  |   .0176854   .0224784     0.79   0.431    -.0263751    .0617458
         34  |   .0168693   .0233952     0.72   0.471    -.0289884    .0627269
         35  |   .0271207   .0242905     1.12   0.264    -.0204917    .0747331
         36  |   .0281202   .0255816     1.10   0.272    -.0220229    .0782633
         37  |   .0195962   .0267488     0.73   0.464    -.0328348    .0720271
         38  |   .0161414   .0278896     0.58   0.563    -.0385256    .0708084
         39  |   .0206139   .0293157     0.70   0.482    -.0368486    .0780765
         40  |    .031633   .0304997     1.04   0.300    -.0281503    .0914162
         41  |   .0475408   .0318325     1.49   0.135    -.0148548    .1099364
         42  |   .0555876   .0332044     1.67   0.094    -.0094973    .1206725
         43  |   .0565284    .034789     1.62   0.104    -.0116625    .1247193
         44  |    .076812   .0363625     2.11   0.035     .0055369    .1480872
         45  |   .0836865   .0378452     2.21   0.027     .0095052    .1578679
         46  |    .085566   .0394503     2.17   0.030     .0082385    .1628936
         47  |   .0972184   .0406409     2.39   0.017     .0175572    .1768796
         48  |   .0874439   .0416805     2.10   0.036     .0057449    .1691428
         49  |  -.1960341   .0433002    -4.53   0.000    -.2809079   -.1111603
         50  |  -.2464229   .0448832    -5.49   0.000    -.3343998   -.1584461
             |
     age_cat |
          1  |   .0467835   .0068833     6.80   0.000     .0332915    .0602756
          2  |    .066242   .0078729     8.41   0.000     .0508101    .0816739
          3  |   .0839027   .0089786     9.34   0.000     .0663035     .101502
          4  |   .1061351   .0103041    10.30   0.000     .0859377    .1263324
          5  |   .1247872   .0116838    10.68   0.000     .1018855    .1476889
          6  |    .137144   .0132213    10.37   0.000     .1112286    .1630595
          7  |   .1437474   .0147661     9.73   0.000     .1148039    .1726909
          8  |   .1603029   .0163888     9.78   0.000     .1281787    .1924271
          9  |   .1611884   .0179903     8.96   0.000     .1259251    .1964518
         10  |   .1661111   .0196276     8.46   0.000     .1276385    .2045837
         11  |   .1749116    .021234     8.24   0.000     .1332903     .216533
         12  |   .1776346   .0228614     7.77   0.000     .1328234    .2224459
         13  |   .1875366   .0245691     7.63   0.000      .139378    .2356952
         14  |   .1968453   .0262781     7.49   0.000      .145337    .2483536
         15  |   .2050712   .0279144     7.35   0.000     .1503555    .2597869
         16  |   .2102631   .0295985     7.10   0.000     .1522464    .2682798
         17  |   .2150529   .0312199     6.89   0.000     .1538581    .2762478
         18  |    .220599   .0330709     6.67   0.000     .1557758    .2854221
         19  |   .2118251   .0349247     6.07   0.000     .1433683    .2802819
         20  |   .2224445    .037895     5.87   0.000     .1481656    .2967234
         25  |   .2444492   .0437072     5.59   0.000     .1587777    .3301208
         30  |    .245273   .0611279     4.01   0.000     .1254546    .3650914
         40  |   .2306171   .0684473     3.37   0.001     .0964517    .3647824
         50  |   .1720006   .0722541     2.38   0.017     .0303734    .3136278
             |
       _cons |   .2021936   .0149825    13.50   0.000      .172826    .2315613
-------------+----------------------------------------------------------------
     sigma_u |  .38780271
     sigma_e |  .28679479
         rho |   .6464474   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 14660) =    4.48
            Prob > F =    0.0344

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 14660) =   15.24
            Prob > F =    0.0001

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 14660) =    5.59
            Prob > F =    0.0180

 ( 1)  during_expat = 0

       F(  1, 14660) =    5.59
            Prob > F =    0.0180
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 14660) =    0.06
            Prob > F =    0.8075

 ( 1)  after_expat = 0

       F(  1, 14660) =    2.57
            Prob > F =    0.1087
(file output/figure/acquisitions_exporter_slope.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.0479                         Obs per group: min =         1
       between = 0.0736                                        avg =       9.0
       overall = 0.0600                                        max =        25

                                                F(82,14660)        =     26.30
corr(u_i, Xb)  = 0.1007                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0187049   .0119691     1.56   0.118    -.0047561    .0421658
   during_DD |  -.0059863   .0035675    -1.68   0.093    -.0129791    .0010064
   during_DE |   .0189751   .0184528     1.03   0.304    -.0171946    .0551449
   during_ED |   .0015685   .0161728     0.10   0.923    -.0301322    .0332693
   during_EE |   .0176086   .0180878     0.97   0.330    -.0178457    .0530629
    after_DD |  -.0193287   .0062388    -3.10   0.002    -.0315576   -.0070998
    after_DE |  -.0042613   .0195551    -0.22   0.828    -.0425917    .0340691
    after_ED |  -.0309613   .0189883    -1.63   0.103    -.0681808    .0062582
    after_EE |  -.0014458   .0230113    -0.06   0.950    -.0465508    .0436592
             |
    ind_year |
          2  |  -.0175012   .0102265    -1.71   0.087    -.0375464    .0025441
          3  |  -.0355518   .0123744    -2.87   0.004    -.0598073   -.0112964
          4  |  -.0432284   .0132941    -3.25   0.001    -.0692866   -.0171703
          5  |  -.0364297   .0146851    -2.48   0.013    -.0652143    -.007645
          6  |  -.0441577   .0158439    -2.79   0.005    -.0752138   -.0131016
          7  |  -.0507973   .0170256    -2.98   0.003    -.0841697   -.0174249
          8  |  -.0616334   .0181685    -3.39   0.001    -.0972459   -.0260209
          9  |  -.0648364   .0195835    -3.31   0.001    -.1032225   -.0264502
         10  |  -.0644507   .0208775    -3.09   0.002    -.1053733   -.0235282
         11  |  -.0732571   .0223132    -3.28   0.001    -.1169937   -.0295205
         12  |  -.0734474   .0236466    -3.11   0.002    -.1197978    -.027097
         13  |  -.0689106   .0251821    -2.74   0.006    -.1182708   -.0195505
         14  |  -.0605624   .0267344    -2.27   0.024    -.1129652   -.0081596
         15  |    -.05047   .0282228    -1.79   0.074    -.1057903    .0048503
         16  |  -.0376903   .0296977    -1.27   0.204    -.0959015    .0205208
         17  |  -.0233364   .0312556    -0.75   0.455    -.0846013    .0379285
         18  |  -.0198113   .0328968    -0.60   0.547    -.0842931    .0446705
         19  |  -.0150799   .0344376    -0.44   0.661     -.082582    .0524221
         20  |   -.007701   .0358771    -0.21   0.830    -.0780246    .0626225
         21  |  -.0134471   .0372665    -0.36   0.718     -.086494    .0595998
         22  |  -.0073912   .0385597    -0.19   0.848    -.0829731    .0681906
         23  |  -.0112994   .0399177    -0.28   0.777    -.0895432    .0669444
         24  |  -.1205714   .0413051    -2.92   0.004    -.2015345   -.0396083
         25  |  -.1561604   .0428531    -3.64   0.000    -.2401579   -.0721629
         26  |  -.0140521   .0251018    -0.56   0.576    -.0632548    .0351506
         27  |  -.0110339   .0221756    -0.50   0.619    -.0545008     .032433
         28  |   .0097965   .0214954     0.46   0.649    -.0323372    .0519302
         29  |   .0070105   .0212342     0.33   0.741    -.0346111    .0486322
         30  |   .0263625   .0211693     1.25   0.213     -.015132    .0678569
         31  |   .0185227   .0213447     0.87   0.386    -.0233156     .060361
         32  |   .0258726   .0218741     1.18   0.237    -.0170034    .0687485
         33  |   .0157851   .0224749     0.70   0.482    -.0282685    .0598388
         34  |   .0146623   .0233817     0.63   0.531    -.0311688    .0604934
         35  |   .0246351   .0242644     1.02   0.310    -.0229261    .0721962
         36  |   .0252795   .0255421     0.99   0.322    -.0247863    .0753452
         37  |   .0164292   .0267021     0.62   0.538    -.0359102    .0687686
         38  |   .0126949   .0278269     0.46   0.648    -.0418492    .0672391
         39  |   .0167197   .0292327     0.57   0.567    -.0405801    .0740196
         40  |   .0273089   .0303992     0.90   0.369    -.0322773    .0868951
         41  |   .0428039   .0317101     1.35   0.177     -.019352    .1049597
         42  |   .0504054   .0330631     1.52   0.127    -.0144023    .1152132
         43  |   .0509538    .034639     1.47   0.141    -.0169431    .1188506
         44  |   .0708882     .03619     1.96   0.050    -.0000487    .1418251
         45  |    .077385   .0376564     2.06   0.040     .0035738    .1511962
         46  |   .0789025   .0392388     2.01   0.044     .0019895    .1558156
         47  |   .0902305   .0404234     2.23   0.026     .0109956    .1694654
         48  |   .0800683   .0414452     1.93   0.053    -.0011696    .1613062
         49  |  -.2038338   .0430455    -4.74   0.000    -.2882084   -.1194592
         50  |  -.2545992   .0446182    -5.71   0.000    -.3420564    -.167142
             |
     age_cat |
          1  |   .0470308   .0068813     6.83   0.000     .0335426    .0605191
          2  |   .0667627   .0078658     8.49   0.000     .0513447    .0821808
          3  |   .0846736    .008968     9.44   0.000      .067095    .1022521
          4  |   .1071544   .0102878    10.42   0.000      .086989    .1273198
          5  |   .1260869   .0116611    10.81   0.000     .1032298    .1489441
          6  |    .138701   .0131945    10.51   0.000     .1128382    .1645638
          7  |   .1455709   .0147333     9.88   0.000     .1166917      .17445
          8  |   .1624052    .016349     9.93   0.000     .1303591    .1944512
          9  |   .1635643   .0179396     9.12   0.000     .1284005    .1987282
         10  |   .1687339   .0195702     8.62   0.000     .1303739     .207094
         11  |   .1778346   .0211715     8.40   0.000     .1363358    .2193334
         12  |   .1808497   .0227925     7.93   0.000     .1361735    .2255259
         13  |   .1910185   .0244942     7.80   0.000     .1430068    .2390302
         14  |   .2006461   .0262036     7.66   0.000     .1492838    .2520084
         15  |   .2091839   .0278357     7.51   0.000     .1546224    .2637454
         16  |   .2146516   .0295124     7.27   0.000     .1568036    .2724995
         17  |   .2197596   .0311277     7.06   0.000     .1587453    .2807739
         18  |   .2256347   .0329709     6.84   0.000     .1610074    .2902619
         19  |   .2171782   .0348205     6.24   0.000     .1489256    .2854308
         20  |   .2284656   .0377716     6.05   0.000     .1544285    .3025028
         25  |   .2514287   .0435692     5.77   0.000     .1660275    .3368299
         30  |   .2521904   .0610566     4.13   0.000     .1325119     .371869
         40  |   .2365933   .0683917     3.46   0.001      .102537    .3706497
         50  |   .1776273   .0722528     2.46   0.014     .0360028    .3192519
             |
       _cons |   .2026618   .0149829    13.53   0.000     .1732934    .2320303
-------------+----------------------------------------------------------------
     sigma_u |  .38795539
     sigma_e |  .28680885
         rho |   .6466049   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0478633825152632

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.0479                                         min =          1
     between = 0.0736                                         avg =        9.0
     overall = 0.0600                                         max =         25

                                                F(82,14660)       =      26.30
corr(u_i, Xb)  = 0.1007                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,661 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0187049   .0119691     1.56   0.118    -.0047561    .0421658
   during_DD |  -.0059863   .0035675    -1.68   0.093    -.0129791    .0010064
   during_DE |   .0189751   .0184528     1.03   0.304    -.0171946    .0551449
   during_ED |   .0015685   .0161728     0.10   0.923    -.0301322    .0332693
   during_EE |   .0176086   .0180878     0.97   0.330    -.0178457    .0530629
    after_DD |  -.0193287   .0062388    -3.10   0.002    -.0315576   -.0070998
    after_DE |  -.0042613   .0195551    -0.22   0.828    -.0425917    .0340691
    after_ED |  -.0309613   .0189883    -1.63   0.103    -.0681808    .0062582
    after_EE |  -.0014458   .0230113    -0.06   0.950    -.0465508    .0436592
             |
    ind_year |
          2  |  -.0175012   .0102265    -1.71   0.087    -.0375464    .0025441
          3  |  -.0355518   .0123744    -2.87   0.004    -.0598073   -.0112964
          4  |  -.0432284   .0132941    -3.25   0.001    -.0692866   -.0171703
          5  |  -.0364297   .0146851    -2.48   0.013    -.0652143    -.007645
          6  |  -.0441577   .0158439    -2.79   0.005    -.0752138   -.0131016
          7  |  -.0507973   .0170256    -2.98   0.003    -.0841697   -.0174249
          8  |  -.0616334   .0181685    -3.39   0.001    -.0972459   -.0260209
          9  |  -.0648364   .0195835    -3.31   0.001    -.1032225   -.0264502
         10  |  -.0644507   .0208775    -3.09   0.002    -.1053733   -.0235282
         11  |  -.0732571   .0223132    -3.28   0.001    -.1169937   -.0295205
         12  |  -.0734474   .0236466    -3.11   0.002    -.1197978    -.027097
         13  |  -.0689106   .0251821    -2.74   0.006    -.1182708   -.0195505
         14  |  -.0605624   .0267344    -2.27   0.024    -.1129652   -.0081596
         15  |    -.05047   .0282228    -1.79   0.074    -.1057903    .0048503
         16  |  -.0376903   .0296977    -1.27   0.204    -.0959015    .0205208
         17  |  -.0233364   .0312556    -0.75   0.455    -.0846013    .0379285
         18  |  -.0198113   .0328968    -0.60   0.547    -.0842931    .0446705
         19  |  -.0150799   .0344376    -0.44   0.661     -.082582    .0524221
         20  |   -.007701   .0358771    -0.21   0.830    -.0780246    .0626225
         21  |  -.0134471   .0372665    -0.36   0.718     -.086494    .0595998
         22  |  -.0073912   .0385597    -0.19   0.848    -.0829731    .0681906
         23  |  -.0112994   .0399177    -0.28   0.777    -.0895432    .0669444
         24  |  -.1205714   .0413051    -2.92   0.004    -.2015345   -.0396083
         25  |  -.1561604   .0428531    -3.64   0.000    -.2401579   -.0721629
         26  |  -.0140521   .0251018    -0.56   0.576    -.0632548    .0351506
         27  |  -.0110339   .0221756    -0.50   0.619    -.0545008     .032433
         28  |   .0097965   .0214954     0.46   0.649    -.0323372    .0519302
         29  |   .0070105   .0212342     0.33   0.741    -.0346111    .0486322
         30  |   .0263625   .0211693     1.25   0.213     -.015132    .0678569
         31  |   .0185227   .0213447     0.87   0.386    -.0233156     .060361
         32  |   .0258726   .0218741     1.18   0.237    -.0170034    .0687485
         33  |   .0157851   .0224749     0.70   0.482    -.0282685    .0598388
         34  |   .0146623   .0233817     0.63   0.531    -.0311688    .0604934
         35  |   .0246351   .0242644     1.02   0.310    -.0229261    .0721962
         36  |   .0252795   .0255421     0.99   0.322    -.0247863    .0753452
         37  |   .0164292   .0267021     0.62   0.538    -.0359102    .0687686
         38  |   .0126949   .0278269     0.46   0.648    -.0418492    .0672391
         39  |   .0167197   .0292327     0.57   0.567    -.0405801    .0740196
         40  |   .0273089   .0303992     0.90   0.369    -.0322773    .0868951
         41  |   .0428039   .0317101     1.35   0.177     -.019352    .1049597
         42  |   .0504054   .0330631     1.52   0.127    -.0144023    .1152132
         43  |   .0509538    .034639     1.47   0.141    -.0169431    .1188506
         44  |   .0708882     .03619     1.96   0.050    -.0000487    .1418251
         45  |    .077385   .0376564     2.06   0.040     .0035738    .1511962
         46  |   .0789025   .0392388     2.01   0.044     .0019895    .1558156
         47  |   .0902305   .0404234     2.23   0.026     .0109956    .1694654
         48  |   .0800683   .0414452     1.93   0.053    -.0011696    .1613062
         49  |  -.2038338   .0430455    -4.74   0.000    -.2882084   -.1194592
         50  |  -.2545992   .0446182    -5.71   0.000    -.3420564    -.167142
             |
     age_cat |
          1  |   .0470308   .0068813     6.83   0.000     .0335426    .0605191
          2  |   .0667627   .0078658     8.49   0.000     .0513447    .0821808
          3  |   .0846736    .008968     9.44   0.000      .067095    .1022521
          4  |   .1071544   .0102878    10.42   0.000      .086989    .1273198
          5  |   .1260869   .0116611    10.81   0.000     .1032298    .1489441
          6  |    .138701   .0131945    10.51   0.000     .1128382    .1645638
          7  |   .1455709   .0147333     9.88   0.000     .1166917      .17445
          8  |   .1624052    .016349     9.93   0.000     .1303591    .1944512
          9  |   .1635643   .0179396     9.12   0.000     .1284005    .1987282
         10  |   .1687339   .0195702     8.62   0.000     .1303739     .207094
         11  |   .1778346   .0211715     8.40   0.000     .1363358    .2193334
         12  |   .1808497   .0227925     7.93   0.000     .1361735    .2255259
         13  |   .1910185   .0244942     7.80   0.000     .1430068    .2390302
         14  |   .2006461   .0262036     7.66   0.000     .1492838    .2520084
         15  |   .2091839   .0278357     7.51   0.000     .1546224    .2637454
         16  |   .2146516   .0295124     7.27   0.000     .1568036    .2724995
         17  |   .2197596   .0311277     7.06   0.000     .1587453    .2807739
         18  |   .2256347   .0329709     6.84   0.000     .1610074    .2902619
         19  |   .2171782   .0348205     6.24   0.000     .1489256    .2854308
         20  |   .2284656   .0377716     6.05   0.000     .1544285    .3025028
         25  |   .2514287   .0435692     5.77   0.000     .1660275    .3368299
         30  |   .2521904   .0610566     4.13   0.000     .1325119     .371869
         40  |   .2365933   .0683917     3.46   0.001      .102537    .3706497
         50  |   .1776273   .0722528     2.46   0.014     .0360028    .3192519
             |
       _cons |   .2026618   .0149829    13.53   0.000     .1732934    .2320303
-------------+----------------------------------------------------------------
     sigma_u |  .38795539
     sigma_e |  .28680885
         rho |   .6466049   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. local fname = e(depvar)

. local title : variable label `fname'

. 
. slopegraph, ///
>         from(0 0 0 0 1 _b[during_DE] 1 _b[during_DE]) ///
>         to(1 _b[during_DD] 1 _b[during_DE] 2 _b[during_ED]+_b[during_DE] 2 _b[during_EE]+_b[during_DE]) ///
>         style(p1 p2 p1 p2) ///
>         label(Local-Local Local-Expat Expat-Local Expat-Expat) ///
>         width_test(during_DD during_DE during_ED during_EE) ///
>         star_test(1==1 during_DE==during_DD 1==1 during_EE==during_ED) ///
>         connect(stepstair) ///
>         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(.5) plotregion(style(none)) x
> size(16) ysize(10))
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str11
(1 real change made)

 ( 1)  during_DD = 0

       F(  1, 14660) =    2.82
            Prob > F =    0.0934

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_DE = 0

       F(  1, 14660) =    1.06
            Prob > F =    0.3038

 ( 1)  - during_DD + during_DE = 0

       F(  1, 14660) =    1.77
            Prob > F =    0.1835
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_ED = 0

       F(  1, 14660) =    0.01
            Prob > F =    0.9227

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14660) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_EE = 0

       F(  1, 14660) =    0.95
            Prob > F =    0.3303

 ( 1)  - during_ED + during_EE = 0

       F(  1, 14660) =    0.44
            Prob > F =    0.5063

. 
. graph export output/figure/`fname'_tree.png, width(1600) replace
(file output/figure/exporter_tree.png written in PNG format)

. 
end of do-file

. foreach X of var exporter lnQL {
  2.         local i = 1
  3.         foreach Z of var H_* {
  4.                 xtreg `X' foreign during_domestic after_domestic during_expat after_expat during_domestic_`Z' after_domesti
> c_`Z' during_expat_`Z' after_expat_`Z' i.ind_year i.age_cat if `sample_acquisitions' [aw=inverse_weight], i(firm_person ) fe v
> ce(cluster id)
  5.                 local r2_w = `e(r2_w)'
  6.                 test during_expat_`Z'==during_domestic_`Z'
  7.                 local p = `r(p)'        
  8.                 do regram output/regression/`X'_heterogeneity `i' `Z' R2_within "`r2_w'" p_value "`p'"
  9.                 local i = `i'+1
 10.         }
 11. }

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.0482                         Obs per group: min =         1
       between = 0.0760                                        avg =       9.0
       overall = 0.0600                                        max =        25

                                                F(82,14660)        =     26.58
corr(u_i, Xb)  = 0.1075                         Prob > F           =    0.0000

                                         (Std. Err. adjusted for 14,661 clusters in id)
---------------------------------------------------------------------------------------
                      |               Robust
             exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------------+----------------------------------------------------------------
              foreign |   .0193136   .0119572     1.62   0.106    -.0041241    .0427513
      during_domestic |   .0094506   .0053761     1.76   0.079    -.0010873    .0199885
       after_domestic |   .0014113   .0089906     0.16   0.875    -.0162114     .019034
         during_expat |   .0699321    .021811     3.21   0.001     .0271799    .1126843
          after_expat |   .0487745   .0290545     1.68   0.093    -.0081759    .1057249
during_domestic_H_lnL |  -.0317031   .0068811    -4.61   0.000     -.045191   -.0182152
 after_domestic_H_lnL |  -.0446547   .0114326    -3.91   0.000     -.067064   -.0222453
   during_expat_H_lnL |  -.0694672     .02677    -2.59   0.009    -.1219397   -.0169947
    after_expat_H_lnL |  -.0672441   .0357323    -1.88   0.060    -.1372839    .0027957
                      |
             ind_year |
                   2  |  -.0163784   .0102202    -1.60   0.109    -.0364113    .0036545
                   3  |  -.0334235   .0123793    -2.70   0.007    -.0576885   -.0091586
                   4  |  -.0399501   .0133106    -3.00   0.003    -.0660405   -.0138597
                   5  |  -.0321157   .0147185    -2.18   0.029    -.0609657   -.0032656
                   6  |  -.0388259   .0159005    -2.44   0.015    -.0699928    -.007659
                   7  |  -.0444751   .0171104    -2.60   0.009    -.0780137   -.0109366
                   8  |  -.0544302   .0182735    -2.98   0.003    -.0902485    -.018612
                   9  |  -.0567128   .0197174    -2.88   0.004    -.0953614   -.0180642
                  10  |   -.055387   .0210481    -2.63   0.009     -.096644     -.01413
                  11  |  -.0631934    .022516    -2.81   0.005    -.1073276   -.0190592
                  12  |  -.0624207   .0238766    -2.61   0.009    -.1092219   -.0156195
                  13  |  -.0569331   .0254537    -2.24   0.025    -.1068256   -.0070406
                  14  |  -.0476579   .0270338    -1.76   0.078    -.1006475    .0053317
                  15  |  -.0365282   .0285457    -1.28   0.201    -.0924813    .0194249
                  16  |  -.0228235   .0300458    -0.76   0.447    -.0817171    .0360701
                  17  |  -.0072353   .0316547    -0.23   0.819    -.0692825    .0548119
                  18  |  -.0027223   .0333287    -0.08   0.935    -.0680507    .0626062
                  19  |   .0030511   .0349223     0.09   0.930    -.0654011    .0715032
                  20  |   .0114292   .0363905     0.31   0.753    -.0599008    .0827592
                  21  |   .0066077   .0378138     0.17   0.861    -.0675121    .0807275
                  22  |   .0135782   .0391291     0.35   0.729    -.0631198    .0902762
                  23  |   .0104444   .0405144     0.26   0.797    -.0689689    .0898578
                  24  |  -.0978963   .0419217    -2.34   0.020    -.1800682   -.0157244
                  25  |  -.1325446   .0434913    -3.05   0.002    -.2177929   -.0472963
                  26  |  -.0150507   .0250848    -0.60   0.549      -.06422    .0341186
                  27  |   -.010804   .0221559    -0.49   0.626    -.0542324    .0326244
                  28  |   .0111058   .0214737     0.52   0.605    -.0309854     .053197
                  29  |   .0094259   .0212166     0.44   0.657    -.0321612    .0510131
                  30  |   .0298817   .0211588     1.41   0.158    -.0115922    .0713555
                  31  |    .023118   .0213469     1.08   0.279    -.0187247    .0649607
                  32  |    .031559   .0218881     1.44   0.149    -.0113444    .0744625
                  33  |   .0223246   .0225164     0.99   0.321    -.0218105    .0664596
                  34  |   .0221669   .0234394     0.95   0.344    -.0237773    .0681111
                  35  |   .0330093    .024355     1.36   0.175    -.0147296    .0807481
                  36  |   .0347462   .0256787     1.35   0.176    -.0155872    .0850797
                  37  |   .0269879   .0268707     1.00   0.315    -.0256821    .0796578
                  38  |   .0243536   .0280361     0.87   0.385    -.0306006    .0793079
                  39  |    .029447   .0294922     1.00   0.318    -.0283613    .0872553
                  40  |   .0410245   .0306954     1.34   0.181    -.0191423    .1011914
                  41  |   .0574124   .0320467     1.79   0.073    -.0054032    .1202281
                  42  |   .0659612   .0334356     1.97   0.049     .0004231    .1314992
                  43  |   .0674534   .0350309     1.93   0.054    -.0012116    .1361183
                  44  |     .08832   .0366319     2.41   0.016      .016517     .160123
                  45  |   .0956627   .0381354     2.51   0.012     .0209125    .1704129
                  46  |    .098036   .0397415     2.47   0.014     .0201376    .1759343
                  47  |   .1100577   .0409409     2.69   0.007     .0298085     .190307
                  48  |   .1007086   .0419941     2.40   0.016      .018395    .1830223
                  49  |  -.1824156   .0436192    -4.18   0.000    -.2679146   -.0969165
                  50  |  -.2322316   .0452125    -5.14   0.000    -.3208538   -.1436094
                      |
              age_cat |
                   1  |    .045721    .006886     6.64   0.000     .0322235    .0592185
                   2  |   .0643173   .0078898     8.15   0.000     .0488523    .0797824
                   3  |   .0811609   .0090178     9.00   0.000     .0634848    .0988369
                   4  |   .1026203   .0103587     9.91   0.000      .082316    .1229247
                   5  |   .1205656   .0117641    10.25   0.000     .0975065    .1436246
                   6  |   .1321922   .0133181     9.93   0.000     .1060871    .1582974
                   7  |   .1381008   .0148881     9.28   0.000     .1089183    .1672834
                   8  |   .1539529   .0165328     9.31   0.000     .1215467    .1863592
                   9  |   .1541453   .0181574     8.49   0.000     .1185544    .1897362
                  10  |   .1583704   .0198082     8.00   0.000     .1195438    .1971971
                  11  |    .166518   .0214356     7.77   0.000     .1245015    .2085346
                  12  |    .168607   .0230726     7.31   0.000     .1233817    .2138322
                  13  |   .1779563   .0248015     7.18   0.000     .1293424    .2265703
                  14  |   .1866108   .0265293     7.03   0.000       .13461    .2386115
                  15  |   .1943179   .0281892     6.89   0.000     .1390636    .2495722
                  16  |   .1989701   .0298753     6.66   0.000     .1404107    .2575295
                  17  |   .2031514   .0315053     6.45   0.000      .141397    .2649058
                  18  |   .2081365   .0333703     6.24   0.000     .1427265    .2735466
                  19  |   .1988607   .0352425     5.64   0.000      .129781    .2679404
                  20  |    .208288   .0382359     5.45   0.000     .1333408    .2832351
                  25  |   .2289761   .0440496     5.20   0.000     .1426332    .3153189
                  30  |   .2302201   .0613905     3.75   0.000      .109887    .3505532
                  40  |   .2163774   .0686699     3.15   0.002     .0817758     .350979
                  50  |   .1583173   .0723331     2.19   0.029     .0165352    .3000993
                      |
                _cons |   .2015092   .0149766    13.45   0.000     .1721532    .2308651
----------------------+----------------------------------------------------------------
              sigma_u |  .38824403
              sigma_e |  .28675392
                  rho |  .64703222   (fraction of variance due to u_i)
---------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnL + during_expat_H_lnL = 0

       F(  1, 14660) =    1.90
            Prob > F =    0.1685

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0482280705400153
key: p_value
value: .1685280714159844

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.0482                                         min =          1
     between = 0.0760                                         avg =        9.0
     overall = 0.0600                                         max =         25

                                                F(82,14660)       =      26.58
corr(u_i, Xb)  = 0.1075                         Prob > F          =     0.0000

                                         (Std. Err. adjusted for 14,661 clusters in id)
---------------------------------------------------------------------------------------
                      |               Robust
             exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------------+----------------------------------------------------------------
              foreign |   .0193136   .0119572     1.62   0.106    -.0041241    .0427513
      during_domestic |   .0094506   .0053761     1.76   0.079    -.0010873    .0199885
       after_domestic |   .0014113   .0089906     0.16   0.875    -.0162114     .019034
         during_expat |   .0699321    .021811     3.21   0.001     .0271799    .1126843
          after_expat |   .0487745   .0290545     1.68   0.093    -.0081759    .1057249
during_domestic_H_lnL |  -.0317031   .0068811    -4.61   0.000     -.045191   -.0182152
 after_domestic_H_lnL |  -.0446547   .0114326    -3.91   0.000     -.067064   -.0222453
   during_expat_H_lnL |  -.0694672     .02677    -2.59   0.009    -.1219397   -.0169947
    after_expat_H_lnL |  -.0672441   .0357323    -1.88   0.060    -.1372839    .0027957
                      |
             ind_year |
                   2  |  -.0163784   .0102202    -1.60   0.109    -.0364113    .0036545
                   3  |  -.0334235   .0123793    -2.70   0.007    -.0576885   -.0091586
                   4  |  -.0399501   .0133106    -3.00   0.003    -.0660405   -.0138597
                   5  |  -.0321157   .0147185    -2.18   0.029    -.0609657   -.0032656
                   6  |  -.0388259   .0159005    -2.44   0.015    -.0699928    -.007659
                   7  |  -.0444751   .0171104    -2.60   0.009    -.0780137   -.0109366
                   8  |  -.0544302   .0182735    -2.98   0.003    -.0902485    -.018612
                   9  |  -.0567128   .0197174    -2.88   0.004    -.0953614   -.0180642
                  10  |   -.055387   .0210481    -2.63   0.009     -.096644     -.01413
                  11  |  -.0631934    .022516    -2.81   0.005    -.1073276   -.0190592
                  12  |  -.0624207   .0238766    -2.61   0.009    -.1092219   -.0156195
                  13  |  -.0569331   .0254537    -2.24   0.025    -.1068256   -.0070406
                  14  |  -.0476579   .0270338    -1.76   0.078    -.1006475    .0053317
                  15  |  -.0365282   .0285457    -1.28   0.201    -.0924813    .0194249
                  16  |  -.0228235   .0300458    -0.76   0.447    -.0817171    .0360701
                  17  |  -.0072353   .0316547    -0.23   0.819    -.0692825    .0548119
                  18  |  -.0027223   .0333287    -0.08   0.935    -.0680507    .0626062
                  19  |   .0030511   .0349223     0.09   0.930    -.0654011    .0715032
                  20  |   .0114292   .0363905     0.31   0.753    -.0599008    .0827592
                  21  |   .0066077   .0378138     0.17   0.861    -.0675121    .0807275
                  22  |   .0135782   .0391291     0.35   0.729    -.0631198    .0902762
                  23  |   .0104444   .0405144     0.26   0.797    -.0689689    .0898578
                  24  |  -.0978963   .0419217    -2.34   0.020    -.1800682   -.0157244
                  25  |  -.1325446   .0434913    -3.05   0.002    -.2177929   -.0472963
                  26  |  -.0150507   .0250848    -0.60   0.549      -.06422    .0341186
                  27  |   -.010804   .0221559    -0.49   0.626    -.0542324    .0326244
                  28  |   .0111058   .0214737     0.52   0.605    -.0309854     .053197
                  29  |   .0094259   .0212166     0.44   0.657    -.0321612    .0510131
                  30  |   .0298817   .0211588     1.41   0.158    -.0115922    .0713555
                  31  |    .023118   .0213469     1.08   0.279    -.0187247    .0649607
                  32  |    .031559   .0218881     1.44   0.149    -.0113444    .0744625
                  33  |   .0223246   .0225164     0.99   0.321    -.0218105    .0664596
                  34  |   .0221669   .0234394     0.95   0.344    -.0237773    .0681111
                  35  |   .0330093    .024355     1.36   0.175    -.0147296    .0807481
                  36  |   .0347462   .0256787     1.35   0.176    -.0155872    .0850797
                  37  |   .0269879   .0268707     1.00   0.315    -.0256821    .0796578
                  38  |   .0243536   .0280361     0.87   0.385    -.0306006    .0793079
                  39  |    .029447   .0294922     1.00   0.318    -.0283613    .0872553
                  40  |   .0410245   .0306954     1.34   0.181    -.0191423    .1011914
                  41  |   .0574124   .0320467     1.79   0.073    -.0054032    .1202281
                  42  |   .0659612   .0334356     1.97   0.049     .0004231    .1314992
                  43  |   .0674534   .0350309     1.93   0.054    -.0012116    .1361183
                  44  |     .08832   .0366319     2.41   0.016      .016517     .160123
                  45  |   .0956627   .0381354     2.51   0.012     .0209125    .1704129
                  46  |    .098036   .0397415     2.47   0.014     .0201376    .1759343
                  47  |   .1100577   .0409409     2.69   0.007     .0298085     .190307
                  48  |   .1007086   .0419941     2.40   0.016      .018395    .1830223
                  49  |  -.1824156   .0436192    -4.18   0.000    -.2679146   -.0969165
                  50  |  -.2322316   .0452125    -5.14   0.000    -.3208538   -.1436094
                      |
              age_cat |
                   1  |    .045721    .006886     6.64   0.000     .0322235    .0592185
                   2  |   .0643173   .0078898     8.15   0.000     .0488523    .0797824
                   3  |   .0811609   .0090178     9.00   0.000     .0634848    .0988369
                   4  |   .1026203   .0103587     9.91   0.000      .082316    .1229247
                   5  |   .1205656   .0117641    10.25   0.000     .0975065    .1436246
                   6  |   .1321922   .0133181     9.93   0.000     .1060871    .1582974
                   7  |   .1381008   .0148881     9.28   0.000     .1089183    .1672834
                   8  |   .1539529   .0165328     9.31   0.000     .1215467    .1863592
                   9  |   .1541453   .0181574     8.49   0.000     .1185544    .1897362
                  10  |   .1583704   .0198082     8.00   0.000     .1195438    .1971971
                  11  |    .166518   .0214356     7.77   0.000     .1245015    .2085346
                  12  |    .168607   .0230726     7.31   0.000     .1233817    .2138322
                  13  |   .1779563   .0248015     7.18   0.000     .1293424    .2265703
                  14  |   .1866108   .0265293     7.03   0.000       .13461    .2386115
                  15  |   .1943179   .0281892     6.89   0.000     .1390636    .2495722
                  16  |   .1989701   .0298753     6.66   0.000     .1404107    .2575295
                  17  |   .2031514   .0315053     6.45   0.000      .141397    .2649058
                  18  |   .2081365   .0333703     6.24   0.000     .1427265    .2735466
                  19  |   .1988607   .0352425     5.64   0.000      .129781    .2679404
                  20  |    .208288   .0382359     5.45   0.000     .1333408    .2832351
                  25  |   .2289761   .0440496     5.20   0.000     .1426332    .3153189
                  30  |   .2302201   .0613905     3.75   0.000      .109887    .3505532
                  40  |   .2163774   .0686699     3.15   0.002     .0817758     .350979
                  50  |   .1583173   .0723331     2.19   0.029     .0165352    .3000993
                      |
                _cons |   .2015092   .0149766    13.45   0.000     .1721532    .2308651
----------------------+----------------------------------------------------------------
              sigma_u |  .38824403
              sigma_e |  .28675392
                  rho |  .64703222   (fraction of variance due to u_i)
---------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.0482                         Obs per group: min =         1
       between = 0.0730                                        avg =       9.0
       overall = 0.0599                                        max =        25

                                                F(82,14660)        =     26.63
corr(u_i, Xb)  = 0.0986                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0188318    .011963     1.57   0.115    -.0046172    .0422808
       during_domestic |  -.0257884   .0052751    -4.89   0.000    -.0361282   -.0154485
        after_domestic |  -.0476635   .0088779    -5.37   0.000    -.0650654   -.0302616
          during_expat |  -.0060884   .0238395    -0.26   0.798    -.0528169    .0406401
           after_expat |  -.0241749   .0268246    -0.90   0.367    -.0767545    .0284047
during_domestic_H_lnKL |    .033046   .0067742     4.88   0.000     .0197676    .0463244
 after_domestic_H_lnKL |   .0408006   .0111697     3.65   0.000     .0189066    .0626945
   during_expat_H_lnKL |   .0495008   .0276027     1.79   0.073     -.004604    .1036056
    after_expat_H_lnKL |   .0467766   .0344852     1.36   0.175    -.0208187    .1143718
                       |
              ind_year |
                    2  |  -.0171568   .0102255    -1.68   0.093    -.0372002    .0028865
                    3  |  -.0348325   .0123759    -2.81   0.005    -.0590908   -.0105742
                    4  |  -.0421939   .0132986    -3.17   0.002    -.0682609   -.0161269
                    5  |  -.0352311   .0146911    -2.40   0.016    -.0640276   -.0064346
                    6  |  -.0425632   .0158546    -2.68   0.007    -.0736402   -.0114863
                    7  |  -.0490501   .0170422    -2.88   0.004    -.0824549   -.0156452
                    8  |  -.0597487   .0181893    -3.28   0.001    -.0954021   -.0240954
                    9  |  -.0626097   .0196143    -3.19   0.001    -.1010562   -.0241631
                   10  |  -.0619985   .0209237    -2.96   0.003    -.1030116   -.0209855
                   11  |  -.0706008   .0223758    -3.16   0.002    -.1144603   -.0267413
                   12  |  -.0706785    .023724    -2.98   0.003    -.1171806   -.0241764
                   13  |  -.0660384   .0252826    -2.61   0.009    -.1155954   -.0164813
                   14  |  -.0575813   .0268499    -2.14   0.032    -.1102104   -.0049522
                   15  |  -.0474202   .0283557    -1.67   0.094    -.1030008    .0081605
                   16  |  -.0344876   .0298483    -1.16   0.248    -.0929941    .0240189
                   17  |  -.0201126   .0314327    -0.64   0.522    -.0817246    .0414995
                   18  |  -.0166429   .0330917    -0.50   0.615    -.0815069     .048221
                   19  |  -.0118834   .0346642    -0.34   0.732    -.0798296    .0560628
                   20  |  -.0044015   .0361248    -0.12   0.903    -.0752107    .0664077
                   21  |  -.0100574   .0375381    -0.27   0.789    -.0836369    .0635221
                   22  |  -.0038775   .0388494    -0.10   0.920    -.0800271    .0722722
                   23  |  -.0077487    .040228    -0.19   0.847    -.0866005    .0711032
                   24  |  -.1169213    .041628    -2.81   0.005    -.1985174   -.0353251
                   25  |   -.152386   .0431956    -3.53   0.000    -.2370547   -.0677173
                   26  |  -.0147729   .0250823    -0.59   0.556    -.0639374    .0343916
                   27  |  -.0110588   .0221634    -0.50   0.618    -.0545019    .0323843
                   28  |   .0101328   .0214839     0.47   0.637    -.0319783    .0522439
                   29  |   .0073843   .0212266     0.35   0.728    -.0342225    .0489911
                   30  |   .0270242   .0211662     1.28   0.202    -.0144641    .0685125
                   31  |   .0194257   .0213456     0.91   0.363    -.0224144    .0612658
                   32  |   .0271097   .0218748     1.24   0.215    -.0157678    .0699871
                   33  |   .0172387   .0224788     0.77   0.443    -.0268226    .0613001
                   34  |   .0164081   .0233979     0.70   0.483    -.0294546    .0622709
                   35  |   .0266669   .0242958     1.10   0.272    -.0209559    .0742896
                   36  |   .0275318   .0255894     1.08   0.282    -.0226266    .0776903
                   37  |   .0187413   .0267582     0.70   0.484    -.0337082    .0711907
                   38  |   .0151278   .0279017     0.54   0.588    -.0395631    .0698187
                   39  |   .0192852   .0293298     0.66   0.511    -.0382049    .0767752
                   40  |   .0300512    .030516     0.98   0.325     -.029764    .0898664
                   41  |   .0457189   .0318498     1.44   0.151    -.0167106    .1081485
                   42  |   .0536112    .033225     1.61   0.107    -.0115139    .1187363
                   43  |   .0542605   .0348125     1.56   0.119    -.0139764    .1224974
                   44  |   .0742142   .0363866     2.04   0.041     .0028919    .1455365
                   45  |   .0807331   .0378757     2.13   0.033      .006492    .1549743
                   46  |    .082324   .0394812     2.09   0.037      .004936    .1597121
                   47  |   .0936901   .0406744     2.30   0.021     .0139632    .1734171
                   48  |   .0835463   .0417168     2.00   0.045     .0017762    .1653164
                   49  |  -.2003002   .0433371    -4.62   0.000    -.2852464   -.1153539
                   50  |  -.2510328   .0449236    -5.59   0.000    -.3390887    -.162977
                       |
               age_cat |
                    1  |   .0471058    .006882     6.84   0.000     .0336162    .0605953
                    2  |   .0669408   .0078755     8.50   0.000     .0515038    .0823777
                    3  |   .0849343   .0089853     9.45   0.000      .067322    .1025466
                    4  |   .1074207   .0103137    10.42   0.000     .0872045     .127637
                    5  |    .126304   .0116946    10.80   0.000     .1033811    .1492268
                    6  |   .1388849   .0132365    10.49   0.000     .1129396    .1648302
                    7  |   .1456457   .0147816     9.85   0.000      .116672    .1746195
                    8  |   .1623692    .016409     9.90   0.000     .1302055    .1945329
                    9  |   .1634436   .0180135     9.07   0.000     .1281349    .1987524
                   10  |    .168523    .019652     8.58   0.000     .1300025    .2070435
                   11  |    .177523   .0212592     8.35   0.000     .1358523    .2191937
                   12  |   .1804982   .0228897     7.89   0.000     .1356316    .2253648
                   13  |   .1906797   .0246014     7.75   0.000     .1424578    .2389016
                   14  |   .2002603   .0263098     7.61   0.000     .1486898    .2518308
                   15  |   .2087444   .0279501     7.47   0.000     .1539586    .2635302
                   16  |    .214184   .0296398     7.23   0.000     .1560862    .2722817
                   17  |   .2192896     .03126     7.02   0.000      .158016    .2805632
                   18  |   .2251675   .0331183     6.80   0.000     .1602514    .2900836
                   19  |   .2166968   .0349743     6.20   0.000     .1481427    .2852509
                   20  |   .2280917   .0379575     6.01   0.000     .1536902    .3024932
                   25  |   .2508973   .0437781     5.73   0.000     .1650868    .3367078
                   30  |   .2510493    .061164     4.10   0.000     .1311601    .3709385
                   40  |   .2354946   .0684819     3.44   0.001     .1012615    .3697277
                   50  |   .1767907   .0723088     2.44   0.014     .0350563    .3185251
                       |
                 _cons |   .2002241   .0149827    13.36   0.000      .170856    .2295921
-----------------------+----------------------------------------------------------------
               sigma_u |  .38796894
               sigma_e |  .28675742
                   rho |  .64670281   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnKL + during_expat_H_lnKL = 0

       F(  1, 14660) =    0.34
            Prob > F =    0.5603

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0482048216178721
key: p_value
value: .5603220286185305

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.0482                                         min =          1
     between = 0.0730                                         avg =        9.0
     overall = 0.0599                                         max =         25

                                                F(82,14660)       =      26.63
corr(u_i, Xb)  = 0.0986                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0188318    .011963     1.57   0.115    -.0046172    .0422808
       during_domestic |  -.0257884   .0052751    -4.89   0.000    -.0361282   -.0154485
        after_domestic |  -.0476635   .0088779    -5.37   0.000    -.0650654   -.0302616
          during_expat |  -.0060884   .0238395    -0.26   0.798    -.0528169    .0406401
           after_expat |  -.0241749   .0268246    -0.90   0.367    -.0767545    .0284047
during_domestic_H_lnKL |    .033046   .0067742     4.88   0.000     .0197676    .0463244
 after_domestic_H_lnKL |   .0408006   .0111697     3.65   0.000     .0189066    .0626945
   during_expat_H_lnKL |   .0495008   .0276027     1.79   0.073     -.004604    .1036056
    after_expat_H_lnKL |   .0467766   .0344852     1.36   0.175    -.0208187    .1143718
                       |
              ind_year |
                    2  |  -.0171568   .0102255    -1.68   0.093    -.0372002    .0028865
                    3  |  -.0348325   .0123759    -2.81   0.005    -.0590908   -.0105742
                    4  |  -.0421939   .0132986    -3.17   0.002    -.0682609   -.0161269
                    5  |  -.0352311   .0146911    -2.40   0.016    -.0640276   -.0064346
                    6  |  -.0425632   .0158546    -2.68   0.007    -.0736402   -.0114863
                    7  |  -.0490501   .0170422    -2.88   0.004    -.0824549   -.0156452
                    8  |  -.0597487   .0181893    -3.28   0.001    -.0954021   -.0240954
                    9  |  -.0626097   .0196143    -3.19   0.001    -.1010562   -.0241631
                   10  |  -.0619985   .0209237    -2.96   0.003    -.1030116   -.0209855
                   11  |  -.0706008   .0223758    -3.16   0.002    -.1144603   -.0267413
                   12  |  -.0706785    .023724    -2.98   0.003    -.1171806   -.0241764
                   13  |  -.0660384   .0252826    -2.61   0.009    -.1155954   -.0164813
                   14  |  -.0575813   .0268499    -2.14   0.032    -.1102104   -.0049522
                   15  |  -.0474202   .0283557    -1.67   0.094    -.1030008    .0081605
                   16  |  -.0344876   .0298483    -1.16   0.248    -.0929941    .0240189
                   17  |  -.0201126   .0314327    -0.64   0.522    -.0817246    .0414995
                   18  |  -.0166429   .0330917    -0.50   0.615    -.0815069     .048221
                   19  |  -.0118834   .0346642    -0.34   0.732    -.0798296    .0560628
                   20  |  -.0044015   .0361248    -0.12   0.903    -.0752107    .0664077
                   21  |  -.0100574   .0375381    -0.27   0.789    -.0836369    .0635221
                   22  |  -.0038775   .0388494    -0.10   0.920    -.0800271    .0722722
                   23  |  -.0077487    .040228    -0.19   0.847    -.0866005    .0711032
                   24  |  -.1169213    .041628    -2.81   0.005    -.1985174   -.0353251
                   25  |   -.152386   .0431956    -3.53   0.000    -.2370547   -.0677173
                   26  |  -.0147729   .0250823    -0.59   0.556    -.0639374    .0343916
                   27  |  -.0110588   .0221634    -0.50   0.618    -.0545019    .0323843
                   28  |   .0101328   .0214839     0.47   0.637    -.0319783    .0522439
                   29  |   .0073843   .0212266     0.35   0.728    -.0342225    .0489911
                   30  |   .0270242   .0211662     1.28   0.202    -.0144641    .0685125
                   31  |   .0194257   .0213456     0.91   0.363    -.0224144    .0612658
                   32  |   .0271097   .0218748     1.24   0.215    -.0157678    .0699871
                   33  |   .0172387   .0224788     0.77   0.443    -.0268226    .0613001
                   34  |   .0164081   .0233979     0.70   0.483    -.0294546    .0622709
                   35  |   .0266669   .0242958     1.10   0.272    -.0209559    .0742896
                   36  |   .0275318   .0255894     1.08   0.282    -.0226266    .0776903
                   37  |   .0187413   .0267582     0.70   0.484    -.0337082    .0711907
                   38  |   .0151278   .0279017     0.54   0.588    -.0395631    .0698187
                   39  |   .0192852   .0293298     0.66   0.511    -.0382049    .0767752
                   40  |   .0300512    .030516     0.98   0.325     -.029764    .0898664
                   41  |   .0457189   .0318498     1.44   0.151    -.0167106    .1081485
                   42  |   .0536112    .033225     1.61   0.107    -.0115139    .1187363
                   43  |   .0542605   .0348125     1.56   0.119    -.0139764    .1224974
                   44  |   .0742142   .0363866     2.04   0.041     .0028919    .1455365
                   45  |   .0807331   .0378757     2.13   0.033      .006492    .1549743
                   46  |    .082324   .0394812     2.09   0.037      .004936    .1597121
                   47  |   .0936901   .0406744     2.30   0.021     .0139632    .1734171
                   48  |   .0835463   .0417168     2.00   0.045     .0017762    .1653164
                   49  |  -.2003002   .0433371    -4.62   0.000    -.2852464   -.1153539
                   50  |  -.2510328   .0449236    -5.59   0.000    -.3390887    -.162977
                       |
               age_cat |
                    1  |   .0471058    .006882     6.84   0.000     .0336162    .0605953
                    2  |   .0669408   .0078755     8.50   0.000     .0515038    .0823777
                    3  |   .0849343   .0089853     9.45   0.000      .067322    .1025466
                    4  |   .1074207   .0103137    10.42   0.000     .0872045     .127637
                    5  |    .126304   .0116946    10.80   0.000     .1033811    .1492268
                    6  |   .1388849   .0132365    10.49   0.000     .1129396    .1648302
                    7  |   .1456457   .0147816     9.85   0.000      .116672    .1746195
                    8  |   .1623692    .016409     9.90   0.000     .1302055    .1945329
                    9  |   .1634436   .0180135     9.07   0.000     .1281349    .1987524
                   10  |    .168523    .019652     8.58   0.000     .1300025    .2070435
                   11  |    .177523   .0212592     8.35   0.000     .1358523    .2191937
                   12  |   .1804982   .0228897     7.89   0.000     .1356316    .2253648
                   13  |   .1906797   .0246014     7.75   0.000     .1424578    .2389016
                   14  |   .2002603   .0263098     7.61   0.000     .1486898    .2518308
                   15  |   .2087444   .0279501     7.47   0.000     .1539586    .2635302
                   16  |    .214184   .0296398     7.23   0.000     .1560862    .2722817
                   17  |   .2192896     .03126     7.02   0.000      .158016    .2805632
                   18  |   .2251675   .0331183     6.80   0.000     .1602514    .2900836
                   19  |   .2166968   .0349743     6.20   0.000     .1481427    .2852509
                   20  |   .2280917   .0379575     6.01   0.000     .1536902    .3024932
                   25  |   .2508973   .0437781     5.73   0.000     .1650868    .3367078
                   30  |   .2510493    .061164     4.10   0.000     .1311601    .3709385
                   40  |   .2354946   .0684819     3.44   0.001     .1012615    .3697277
                   50  |   .1767907   .0723088     2.44   0.014     .0350563    .3185251
                       |
                 _cons |   .2002241   .0149827    13.36   0.000      .170856    .2295921
-----------------------+----------------------------------------------------------------
               sigma_u |  .38796894
               sigma_e |  .28675742
                   rho |  .64670281   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.0482                         Obs per group: min =         1
       between = 0.0748                                        avg =       9.0
       overall = 0.0609                                        max =        25

                                                F(82,14660)        =     26.48
corr(u_i, Xb)  = 0.1021                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0190724   .0119671     1.59   0.111    -.0043846    .0425293
       during_domestic |  -.0219071   .0052765    -4.15   0.000    -.0322497   -.0115644
        after_domestic |  -.0508544   .0089279    -5.70   0.000    -.0683543   -.0333545
          during_expat |  -.0023208   .0226045    -0.10   0.918    -.0466285    .0419868
           after_expat |  -.0271449   .0269706    -1.01   0.314    -.0800107    .0257209
during_domestic_H_lnQL |   .0252528   .0067779     3.73   0.000     .0119672    .0385383
 after_domestic_H_lnQL |   .0443059   .0111799     3.96   0.000      .022392    .0662199
   during_expat_H_lnQL |   .0448561   .0268898     1.67   0.095    -.0078512    .0975634
    after_expat_H_lnQL |    .054068   .0345632     1.56   0.118    -.0136803    .1218162
                       |
              ind_year |
                    2  |  -.0170826   .0102265    -1.67   0.095    -.0371279    .0029627
                    3  |  -.0348183   .0123764    -2.81   0.005    -.0590776   -.0105591
                    4  |  -.0421772    .013301    -3.17   0.002    -.0682488   -.0161056
                    5  |  -.0352109   .0146914    -2.40   0.017    -.0640078   -.0064139
                    6  |  -.0426009   .0158576    -2.69   0.007    -.0736839   -.0115179
                    7  |  -.0490778   .0170436    -2.88   0.004    -.0824854   -.0156703
                    8  |  -.0597721   .0181904    -3.29   0.001    -.0954276   -.0241167
                    9  |  -.0625791    .019614    -3.19   0.001    -.1010251   -.0241331
                   10  |  -.0619391    .020923    -2.96   0.003    -.1029508   -.0209274
                   11  |  -.0704887   .0223735    -3.15   0.002    -.1143436   -.0266338
                   12  |  -.0704899   .0237195    -2.97   0.003    -.1169831   -.0239968
                   13  |  -.0656964   .0252771    -2.60   0.009    -.1152428   -.0161501
                   14  |  -.0571777    .026842    -2.13   0.033    -.1097913    -.004564
                   15  |   -.046902   .0283431    -1.65   0.098    -.1024581     .008654
                   16  |   -.033897   .0298337    -1.14   0.256    -.0923748    .0245807
                   17  |  -.0193367   .0314147    -0.62   0.538    -.0809134      .04224
                   18  |   -.015741   .0330715    -0.48   0.634    -.0805654    .0490834
                   19  |  -.0108887   .0346401    -0.31   0.753    -.0787876    .0570102
                   20  |  -.0033335   .0360977    -0.09   0.926    -.0740896    .0674227
                   21  |  -.0089686   .0375086    -0.24   0.811    -.0824902    .0645531
                   22  |  -.0027321   .0388184    -0.07   0.944    -.0788211    .0733568
                   23  |  -.0065633   .0401937    -0.16   0.870    -.0853481    .0722215
                   24  |  -.1157885   .0415917    -2.78   0.005    -.1973134   -.0342637
                   25  |  -.1512982   .0431574    -3.51   0.000    -.2358922   -.0667042
                   26  |   -.014768   .0250866    -0.59   0.556     -.063941     .034405
                   27  |  -.0111359   .0221638    -0.50   0.615    -.0545797     .032308
                   28  |   .0100699   .0214869     0.47   0.639    -.0320472    .0521869
                   29  |   .0073656   .0212258     0.35   0.729    -.0342395    .0489708
                   30  |   .0270827   .0211644     1.28   0.201    -.0144022    .0685677
                   31  |   .0195896   .0213438     0.92   0.359    -.0222469    .0614262
                   32  |   .0273193   .0218731     1.25   0.212    -.0155547    .0701932
                   33  |   .0175383   .0224759     0.78   0.435    -.0265174     .061594
                   34  |   .0167586   .0233934     0.72   0.474    -.0290954    .0626127
                   35  |   .0270909   .0242902     1.12   0.265     -.020521    .0747028
                   36  |   .0280084   .0255822     1.09   0.274    -.0221359    .0781526
                   37  |   .0192757   .0267489     0.72   0.471    -.0331555    .0717069
                   38  |    .015677   .0278894     0.56   0.574    -.0389899    .0703438
                   39  |   .0199559   .0293152     0.68   0.496    -.0375056    .0774174
                   40  |   .0307941   .0305003     1.01   0.313    -.0289904    .0905786
                   41  |   .0464416   .0318311     1.46   0.145    -.0159512    .1088345
                   42  |   .0542807   .0332065     1.63   0.102    -.0108082    .1193696
                   43  |   .0549644   .0347914     1.58   0.114    -.0132311      .12316
                   44  |   .0749821   .0363644     2.06   0.039     .0037034    .1462609
                   45  |   .0815726   .0378497     2.16   0.031     .0073824    .1557628
                   46  |   .0831595   .0394537     2.11   0.035     .0058254    .1604936
                   47  |   .0945952    .040645     2.33   0.020     .0149258    .1742646
                   48  |   .0845478   .0416864     2.03   0.043     .0028372    .1662583
                   49  |  -.1992904   .0433065    -4.60   0.000    -.2841765   -.1144043
                   50  |  -.2500342   .0448904    -5.57   0.000     -.338025   -.1620433
                       |
               age_cat |
                    1  |   .0472488   .0068838     6.86   0.000     .0337558    .0607419
                    2  |   .0669454   .0078737     8.50   0.000     .0515119    .0823789
                    3  |   .0848256     .00898     9.45   0.000     .0672237    .1024275
                    4  |   .1072357   .0103069    10.40   0.000     .0870329    .1274385
                    5  |   .1260509   .0116857    10.79   0.000     .1031455    .1489562
                    6  |   .1385617   .0132238    10.48   0.000     .1126415    .1644819
                    7  |   .1453136   .0147679     9.84   0.000     .1163666    .1742606
                    8  |   .1619786   .0163931     9.88   0.000     .1298461    .1941111
                    9  |   .1629975   .0179975     9.06   0.000     .1277201    .1982748
                   10  |   .1680239   .0196329     8.56   0.000     .1295409    .2065069
                   11  |   .1770002    .021239     8.33   0.000      .135369    .2186313
                   12  |   .1798853   .0228682     7.87   0.000     .1350609    .2247098
                   13  |   .1899669   .0245768     7.73   0.000     .1417933    .2381405
                   14  |   .1994644    .026285     7.59   0.000     .1479425    .2509862
                   15  |   .2079334    .027923     7.45   0.000     .1532008     .262666
                   16  |   .2133526   .0296109     7.21   0.000     .1553116    .2713937
                   17  |   .2183767   .0312315     6.99   0.000      .157159    .2795944
                   18  |   .2241218   .0330901     6.77   0.000      .159261    .2889826
                   19  |   .2155541   .0349456     6.17   0.000     .1470564    .2840518
                   20  |   .2267834   .0379243     5.98   0.000      .152447    .3011199
                   25  |   .2494522   .0437423     5.70   0.000     .1637117    .3351926
                   30  |   .2496583   .0611291     4.08   0.000     .1298376    .3694789
                   40  |   .2343205   .0684461     3.42   0.001     .1001576    .3684834
                   50  |   .1756532   .0722549     2.43   0.015     .0340246    .3172819
                       |
                 _cons |   .2004438   .0150009    13.36   0.000     .1710401    .2298475
-----------------------+----------------------------------------------------------------
               sigma_u |   .3878006
               sigma_e |  .28676487
                   rho |  .64649261   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnQL + during_expat_H_lnQL = 0

       F(  1, 14660) =    0.50
            Prob > F =    0.4773

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0481553960002631
key: p_value
value: .4773292443836453

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.0482                                         min =          1
     between = 0.0748                                         avg =        9.0
     overall = 0.0609                                         max =         25

                                                F(82,14660)       =      26.48
corr(u_i, Xb)  = 0.1021                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0190724   .0119671     1.59   0.111    -.0043846    .0425293
       during_domestic |  -.0219071   .0052765    -4.15   0.000    -.0322497   -.0115644
        after_domestic |  -.0508544   .0089279    -5.70   0.000    -.0683543   -.0333545
          during_expat |  -.0023208   .0226045    -0.10   0.918    -.0466285    .0419868
           after_expat |  -.0271449   .0269706    -1.01   0.314    -.0800107    .0257209
during_domestic_H_lnQL |   .0252528   .0067779     3.73   0.000     .0119672    .0385383
 after_domestic_H_lnQL |   .0443059   .0111799     3.96   0.000      .022392    .0662199
   during_expat_H_lnQL |   .0448561   .0268898     1.67   0.095    -.0078512    .0975634
    after_expat_H_lnQL |    .054068   .0345632     1.56   0.118    -.0136803    .1218162
                       |
              ind_year |
                    2  |  -.0170826   .0102265    -1.67   0.095    -.0371279    .0029627
                    3  |  -.0348183   .0123764    -2.81   0.005    -.0590776   -.0105591
                    4  |  -.0421772    .013301    -3.17   0.002    -.0682488   -.0161056
                    5  |  -.0352109   .0146914    -2.40   0.017    -.0640078   -.0064139
                    6  |  -.0426009   .0158576    -2.69   0.007    -.0736839   -.0115179
                    7  |  -.0490778   .0170436    -2.88   0.004    -.0824854   -.0156703
                    8  |  -.0597721   .0181904    -3.29   0.001    -.0954276   -.0241167
                    9  |  -.0625791    .019614    -3.19   0.001    -.1010251   -.0241331
                   10  |  -.0619391    .020923    -2.96   0.003    -.1029508   -.0209274
                   11  |  -.0704887   .0223735    -3.15   0.002    -.1143436   -.0266338
                   12  |  -.0704899   .0237195    -2.97   0.003    -.1169831   -.0239968
                   13  |  -.0656964   .0252771    -2.60   0.009    -.1152428   -.0161501
                   14  |  -.0571777    .026842    -2.13   0.033    -.1097913    -.004564
                   15  |   -.046902   .0283431    -1.65   0.098    -.1024581     .008654
                   16  |   -.033897   .0298337    -1.14   0.256    -.0923748    .0245807
                   17  |  -.0193367   .0314147    -0.62   0.538    -.0809134      .04224
                   18  |   -.015741   .0330715    -0.48   0.634    -.0805654    .0490834
                   19  |  -.0108887   .0346401    -0.31   0.753    -.0787876    .0570102
                   20  |  -.0033335   .0360977    -0.09   0.926    -.0740896    .0674227
                   21  |  -.0089686   .0375086    -0.24   0.811    -.0824902    .0645531
                   22  |  -.0027321   .0388184    -0.07   0.944    -.0788211    .0733568
                   23  |  -.0065633   .0401937    -0.16   0.870    -.0853481    .0722215
                   24  |  -.1157885   .0415917    -2.78   0.005    -.1973134   -.0342637
                   25  |  -.1512982   .0431574    -3.51   0.000    -.2358922   -.0667042
                   26  |   -.014768   .0250866    -0.59   0.556     -.063941     .034405
                   27  |  -.0111359   .0221638    -0.50   0.615    -.0545797     .032308
                   28  |   .0100699   .0214869     0.47   0.639    -.0320472    .0521869
                   29  |   .0073656   .0212258     0.35   0.729    -.0342395    .0489708
                   30  |   .0270827   .0211644     1.28   0.201    -.0144022    .0685677
                   31  |   .0195896   .0213438     0.92   0.359    -.0222469    .0614262
                   32  |   .0273193   .0218731     1.25   0.212    -.0155547    .0701932
                   33  |   .0175383   .0224759     0.78   0.435    -.0265174     .061594
                   34  |   .0167586   .0233934     0.72   0.474    -.0290954    .0626127
                   35  |   .0270909   .0242902     1.12   0.265     -.020521    .0747028
                   36  |   .0280084   .0255822     1.09   0.274    -.0221359    .0781526
                   37  |   .0192757   .0267489     0.72   0.471    -.0331555    .0717069
                   38  |    .015677   .0278894     0.56   0.574    -.0389899    .0703438
                   39  |   .0199559   .0293152     0.68   0.496    -.0375056    .0774174
                   40  |   .0307941   .0305003     1.01   0.313    -.0289904    .0905786
                   41  |   .0464416   .0318311     1.46   0.145    -.0159512    .1088345
                   42  |   .0542807   .0332065     1.63   0.102    -.0108082    .1193696
                   43  |   .0549644   .0347914     1.58   0.114    -.0132311      .12316
                   44  |   .0749821   .0363644     2.06   0.039     .0037034    .1462609
                   45  |   .0815726   .0378497     2.16   0.031     .0073824    .1557628
                   46  |   .0831595   .0394537     2.11   0.035     .0058254    .1604936
                   47  |   .0945952    .040645     2.33   0.020     .0149258    .1742646
                   48  |   .0845478   .0416864     2.03   0.043     .0028372    .1662583
                   49  |  -.1992904   .0433065    -4.60   0.000    -.2841765   -.1144043
                   50  |  -.2500342   .0448904    -5.57   0.000     -.338025   -.1620433
                       |
               age_cat |
                    1  |   .0472488   .0068838     6.86   0.000     .0337558    .0607419
                    2  |   .0669454   .0078737     8.50   0.000     .0515119    .0823789
                    3  |   .0848256     .00898     9.45   0.000     .0672237    .1024275
                    4  |   .1072357   .0103069    10.40   0.000     .0870329    .1274385
                    5  |   .1260509   .0116857    10.79   0.000     .1031455    .1489562
                    6  |   .1385617   .0132238    10.48   0.000     .1126415    .1644819
                    7  |   .1453136   .0147679     9.84   0.000     .1163666    .1742606
                    8  |   .1619786   .0163931     9.88   0.000     .1298461    .1941111
                    9  |   .1629975   .0179975     9.06   0.000     .1277201    .1982748
                   10  |   .1680239   .0196329     8.56   0.000     .1295409    .2065069
                   11  |   .1770002    .021239     8.33   0.000      .135369    .2186313
                   12  |   .1798853   .0228682     7.87   0.000     .1350609    .2247098
                   13  |   .1899669   .0245768     7.73   0.000     .1417933    .2381405
                   14  |   .1994644    .026285     7.59   0.000     .1479425    .2509862
                   15  |   .2079334    .027923     7.45   0.000     .1532008     .262666
                   16  |   .2133526   .0296109     7.21   0.000     .1553116    .2713937
                   17  |   .2183767   .0312315     6.99   0.000      .157159    .2795944
                   18  |   .2241218   .0330901     6.77   0.000      .159261    .2889826
                   19  |   .2155541   .0349456     6.17   0.000     .1470564    .2840518
                   20  |   .2267834   .0379243     5.98   0.000      .152447    .3011199
                   25  |   .2494522   .0437423     5.70   0.000     .1637117    .3351926
                   30  |   .2496583   .0611291     4.08   0.000     .1298376    .3694789
                   40  |   .2343205   .0684461     3.42   0.001     .1001576    .3684834
                   50  |   .1756532   .0722549     2.43   0.015     .0340246    .3172819
                       |
                 _cons |   .2004438   .0150009    13.36   0.000     .1710401    .2298475
-----------------------+----------------------------------------------------------------
               sigma_u |   .3878006
               sigma_e |  .28676487
                   rho |  .64649261   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.0508                         Obs per group: min =         1
       between = 0.0180                                        avg =       9.0
       overall = 0.0214                                        max =        25

                                                F(82,14660)        =     29.34
corr(u_i, Xb)  = -0.0228                        Prob > F           =    0.0000

                                              (Std. Err. adjusted for 14,661 clusters in id)
--------------------------------------------------------------------------------------------
                           |               Robust
                  exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------------------+----------------------------------------------------------------
                   foreign |   .0203531   .0119153     1.71   0.088    -.0030023    .0437086
           during_domestic |   .0324674   .0042481     7.64   0.000     .0241406    .0407942
            after_domestic |   .0426507   .0071107     6.00   0.000     .0287129    .0565885
              during_expat |   .1283852   .0253388     5.07   0.000      .078718    .1780524
               after_expat |   .1580216   .0324059     4.88   0.000      .094502    .2215412
during_domestic_H_exporter |  -.1016666   .0070961   -14.33   0.000    -.1155759   -.0877572
 after_domestic_H_exporter |  -.1532944   .0112604   -13.61   0.000    -.1753661   -.1312227
   during_expat_H_exporter |  -.1560538   .0287502    -5.43   0.000    -.2124079   -.0996997
    after_expat_H_exporter |  -.2247709   .0375112    -5.99   0.000    -.2982976   -.1512443
                           |
                  ind_year |
                        2  |  -.0150094   .0102099    -1.47   0.142    -.0350219    .0050032
                        3  |  -.0304585   .0123675    -2.46   0.014    -.0547004   -.0062166
                        4  |  -.0351598   .0132816    -2.65   0.008    -.0611935   -.0091262
                        5  |  -.0256701   .0146989    -1.75   0.081    -.0544818    .0031415
                        6  |    -.03079    .015878    -1.94   0.053    -.0619128    .0003329
                        7  |  -.0345884   .0170956    -2.02   0.043    -.0680979   -.0010789
                        8  |  -.0429557   .0182668    -2.35   0.019    -.0787609   -.0071505
                        9  |  -.0440155   .0197012    -2.23   0.025    -.0826323   -.0053988
                       10  |  -.0413217   .0210312    -1.96   0.049    -.0825455   -.0000979
                       11  |  -.0479876   .0224944    -2.13   0.033    -.0920795   -.0038956
                       12  |  -.0455186   .0238626    -1.91   0.056    -.0922922     .001255
                       13  |  -.0391089   .0254403    -1.54   0.124     -.088975    .0107572
                       14  |  -.0287877   .0270291    -1.07   0.287    -.0817681    .0241926
                       15  |  -.0162251   .0285367    -0.57   0.570    -.0721606    .0397103
                       16  |  -.0010397   .0300562    -0.03   0.972    -.0599536    .0578741
                       17  |   .0160037   .0316649     0.51   0.613    -.0460635    .0780709
                       18  |   .0218406   .0333383     0.66   0.512    -.0435066    .0871879
                       19  |   .0288788   .0349371     0.83   0.408    -.0396024      .09736
                       20  |   .0382672   .0364102     1.05   0.293    -.0331015    .1096358
                       21  |    .034334   .0378374     0.91   0.364     -.039832       .1085
                       22  |   .0423081   .0391611     1.08   0.280    -.0344526    .1190689
                       23  |   .0403409   .0405503     0.99   0.320    -.0391428    .1198246
                       24  |  -.0670039   .0419593    -1.60   0.110    -.1492494    .0152415
                       25  |  -.1006866   .0435321    -2.31   0.021    -.1860151   -.0153582
                       26  |  -.0214301   .0250315    -0.86   0.392    -.0704949    .0276348
                       27  |  -.0147999   .0221061    -0.67   0.503    -.0581306    .0285307
                       28  |   .0091493   .0214202     0.43   0.669    -.0328369    .0511355
                       29  |    .009635   .0211705     0.46   0.649    -.0318618    .0511317
                       30  |   .0319783   .0211052     1.52   0.130    -.0093905    .0733472
                       31  |   .0273788   .0212902     1.29   0.198    -.0143527    .0691104
                       32  |   .0374829   .0218325     1.72   0.086    -.0053115    .0802772
                       33  |    .030038   .0224635     1.34   0.181    -.0139933    .0740692
                       34  |   .0317037   .0234012     1.35   0.176    -.0141656     .077573
                       35  |   .0444594   .0243222     1.83   0.068    -.0032151     .092134
                       36  |   .0484041   .0256544     1.89   0.059    -.0018819      .09869
                       37  |   .0423645   .0268609     1.58   0.115    -.0102863    .0950153
                       38  |   .0419764   .0280322     1.50   0.134    -.0129703    .0969231
                       39  |   .0491722   .0294834     1.67   0.095     -.008619    .1069634
                       40  |   .0627313   .0307154     2.04   0.041     .0025252    .1229374
                       41  |   .0809249   .0320864     2.52   0.012     .0180315    .1438184
                       42  |   .0913667   .0335011     2.73   0.006     .0257003    .1570331
                       43  |   .0946867   .0350938     2.70   0.007     .0258985     .163475
                       44  |   .1172061   .0367116     3.19   0.001     .0452467    .1891656
                       45  |   .1263887    .038233     3.31   0.001     .0514472    .2013303
                       46  |   .1305388   .0398716     3.27   0.001     .0523855    .2086922
                       47  |   .1443159   .0410753     3.51   0.000     .0638031    .2248287
                       48  |    .136644   .0421521     3.24   0.001     .0540206    .2192674
                       49  |  -.1448358    .043765    -3.31   0.001    -.2306207   -.0590508
                       50  |  -.1928263    .045361    -4.25   0.000    -.2817395   -.1039131
                           |
                   age_cat |
                        1  |   .0431876   .0068902     6.27   0.000     .0296819    .0566933
                        2  |   .0596237   .0079016     7.55   0.000     .0441355    .0751119
                        3  |   .0742879   .0090398     8.22   0.000     .0565687    .0920071
                        4  |   .0938242   .0104021     9.02   0.000     .0734347    .1142137
                        5  |   .1099489   .0118121     9.31   0.000     .0867957     .133102
                        6  |   .1198118   .0133832     8.95   0.000     .0935791    .1460444
                        7  |   .1239771   .0149612     8.29   0.000     .0946512     .153303
                        8  |   .1382534   .0166146     8.32   0.000     .1056868    .1708201
                        9  |    .136877   .0182505     7.50   0.000     .1011038    .1726503
                       10  |   .1396187   .0199053     7.01   0.000     .1006018    .1786356
                       11  |   .1462086   .0215321     6.79   0.000     .1040029    .1884143
                       12  |   .1466958   .0231838     6.33   0.000     .1012526    .1921389
                       13  |   .1545302   .0249141     6.20   0.000     .1056954    .2033651
                       14  |   .1617651   .0266388     6.07   0.000     .1095497    .2139805
                       15  |   .1680103   .0282933     5.94   0.000     .1125518    .2234688
                       16  |   .1713456    .030002     5.71   0.000     .1125379    .2301534
                       17  |   .1740276   .0316443     5.50   0.000     .1120007    .2360545
                       18  |   .1779395   .0335159     5.31   0.000      .112244     .243635
                       19  |    .167363   .0353814     4.73   0.000      .098011    .2367151
                       20  |   .1742773   .0384084     4.54   0.000      .098992    .2495627
                       25  |   .1921293   .0442548     4.34   0.000     .1053844    .2788743
                       30  |    .193291   .0614516     3.15   0.002     .0728381    .3137438
                       40  |   .1805664   .0687283     2.63   0.009     .0458504    .3152824
                       50  |   .1224105   .0722586     1.69   0.090    -.0192255    .2640466
                           |
                     _cons |   .2034757   .0149524    13.61   0.000     .1741671    .2327843
---------------------------+----------------------------------------------------------------
                   sigma_u |  .39748839
                   sigma_e |  .28636738
                       rho |  .65831187   (fraction of variance due to u_i)
--------------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_exporter + during_expat_H_exporter = 0

       F(  1, 14660) =    3.42
            Prob > F =    0.0645

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0507923028472854
key: p_value
value: .0644525198956455

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.0508                                         min =          1
     between = 0.0180                                         avg =        9.0
     overall = 0.0214                                         max =         25

                                                F(82,14660)       =      29.34
corr(u_i, Xb)  = -0.0228                        Prob > F          =     0.0000

                                              (Std. Err. adjusted for 14,661 clusters in id)
--------------------------------------------------------------------------------------------
                           |               Robust
                  exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------------------+----------------------------------------------------------------
                   foreign |   .0203531   .0119153     1.71   0.088    -.0030023    .0437086
           during_domestic |   .0324674   .0042481     7.64   0.000     .0241406    .0407942
            after_domestic |   .0426507   .0071107     6.00   0.000     .0287129    .0565885
              during_expat |   .1283852   .0253388     5.07   0.000      .078718    .1780524
               after_expat |   .1580216   .0324059     4.88   0.000      .094502    .2215412
during_domestic_H_exporter |  -.1016666   .0070961   -14.33   0.000    -.1155759   -.0877572
 after_domestic_H_exporter |  -.1532944   .0112604   -13.61   0.000    -.1753661   -.1312227
   during_expat_H_exporter |  -.1560538   .0287502    -5.43   0.000    -.2124079   -.0996997
    after_expat_H_exporter |  -.2247709   .0375112    -5.99   0.000    -.2982976   -.1512443
                           |
                  ind_year |
                        2  |  -.0150094   .0102099    -1.47   0.142    -.0350219    .0050032
                        3  |  -.0304585   .0123675    -2.46   0.014    -.0547004   -.0062166
                        4  |  -.0351598   .0132816    -2.65   0.008    -.0611935   -.0091262
                        5  |  -.0256701   .0146989    -1.75   0.081    -.0544818    .0031415
                        6  |    -.03079    .015878    -1.94   0.053    -.0619128    .0003329
                        7  |  -.0345884   .0170956    -2.02   0.043    -.0680979   -.0010789
                        8  |  -.0429557   .0182668    -2.35   0.019    -.0787609   -.0071505
                        9  |  -.0440155   .0197012    -2.23   0.025    -.0826323   -.0053988
                       10  |  -.0413217   .0210312    -1.96   0.049    -.0825455   -.0000979
                       11  |  -.0479876   .0224944    -2.13   0.033    -.0920795   -.0038956
                       12  |  -.0455186   .0238626    -1.91   0.056    -.0922922     .001255
                       13  |  -.0391089   .0254403    -1.54   0.124     -.088975    .0107572
                       14  |  -.0287877   .0270291    -1.07   0.287    -.0817681    .0241926
                       15  |  -.0162251   .0285367    -0.57   0.570    -.0721606    .0397103
                       16  |  -.0010397   .0300562    -0.03   0.972    -.0599536    .0578741
                       17  |   .0160037   .0316649     0.51   0.613    -.0460635    .0780709
                       18  |   .0218406   .0333383     0.66   0.512    -.0435066    .0871879
                       19  |   .0288788   .0349371     0.83   0.408    -.0396024      .09736
                       20  |   .0382672   .0364102     1.05   0.293    -.0331015    .1096358
                       21  |    .034334   .0378374     0.91   0.364     -.039832       .1085
                       22  |   .0423081   .0391611     1.08   0.280    -.0344526    .1190689
                       23  |   .0403409   .0405503     0.99   0.320    -.0391428    .1198246
                       24  |  -.0670039   .0419593    -1.60   0.110    -.1492494    .0152415
                       25  |  -.1006866   .0435321    -2.31   0.021    -.1860151   -.0153582
                       26  |  -.0214301   .0250315    -0.86   0.392    -.0704949    .0276348
                       27  |  -.0147999   .0221061    -0.67   0.503    -.0581306    .0285307
                       28  |   .0091493   .0214202     0.43   0.669    -.0328369    .0511355
                       29  |    .009635   .0211705     0.46   0.649    -.0318618    .0511317
                       30  |   .0319783   .0211052     1.52   0.130    -.0093905    .0733472
                       31  |   .0273788   .0212902     1.29   0.198    -.0143527    .0691104
                       32  |   .0374829   .0218325     1.72   0.086    -.0053115    .0802772
                       33  |    .030038   .0224635     1.34   0.181    -.0139933    .0740692
                       34  |   .0317037   .0234012     1.35   0.176    -.0141656     .077573
                       35  |   .0444594   .0243222     1.83   0.068    -.0032151     .092134
                       36  |   .0484041   .0256544     1.89   0.059    -.0018819      .09869
                       37  |   .0423645   .0268609     1.58   0.115    -.0102863    .0950153
                       38  |   .0419764   .0280322     1.50   0.134    -.0129703    .0969231
                       39  |   .0491722   .0294834     1.67   0.095     -.008619    .1069634
                       40  |   .0627313   .0307154     2.04   0.041     .0025252    .1229374
                       41  |   .0809249   .0320864     2.52   0.012     .0180315    .1438184
                       42  |   .0913667   .0335011     2.73   0.006     .0257003    .1570331
                       43  |   .0946867   .0350938     2.70   0.007     .0258985     .163475
                       44  |   .1172061   .0367116     3.19   0.001     .0452467    .1891656
                       45  |   .1263887    .038233     3.31   0.001     .0514472    .2013303
                       46  |   .1305388   .0398716     3.27   0.001     .0523855    .2086922
                       47  |   .1443159   .0410753     3.51   0.000     .0638031    .2248287
                       48  |    .136644   .0421521     3.24   0.001     .0540206    .2192674
                       49  |  -.1448358    .043765    -3.31   0.001    -.2306207   -.0590508
                       50  |  -.1928263    .045361    -4.25   0.000    -.2817395   -.1039131
                           |
                   age_cat |
                        1  |   .0431876   .0068902     6.27   0.000     .0296819    .0566933
                        2  |   .0596237   .0079016     7.55   0.000     .0441355    .0751119
                        3  |   .0742879   .0090398     8.22   0.000     .0565687    .0920071
                        4  |   .0938242   .0104021     9.02   0.000     .0734347    .1142137
                        5  |   .1099489   .0118121     9.31   0.000     .0867957     .133102
                        6  |   .1198118   .0133832     8.95   0.000     .0935791    .1460444
                        7  |   .1239771   .0149612     8.29   0.000     .0946512     .153303
                        8  |   .1382534   .0166146     8.32   0.000     .1056868    .1708201
                        9  |    .136877   .0182505     7.50   0.000     .1011038    .1726503
                       10  |   .1396187   .0199053     7.01   0.000     .1006018    .1786356
                       11  |   .1462086   .0215321     6.79   0.000     .1040029    .1884143
                       12  |   .1466958   .0231838     6.33   0.000     .1012526    .1921389
                       13  |   .1545302   .0249141     6.20   0.000     .1056954    .2033651
                       14  |   .1617651   .0266388     6.07   0.000     .1095497    .2139805
                       15  |   .1680103   .0282933     5.94   0.000     .1125518    .2234688
                       16  |   .1713456    .030002     5.71   0.000     .1125379    .2301534
                       17  |   .1740276   .0316443     5.50   0.000     .1120007    .2360545
                       18  |   .1779395   .0335159     5.31   0.000      .112244     .243635
                       19  |    .167363   .0353814     4.73   0.000      .098011    .2367151
                       20  |   .1742773   .0384084     4.54   0.000      .098992    .2495627
                       25  |   .1921293   .0442548     4.34   0.000     .1053844    .2788743
                       30  |    .193291   .0614516     3.15   0.002     .0728381    .3137438
                       40  |   .1805664   .0687283     2.63   0.009     .0458504    .3152824
                       50  |   .1224105   .0722586     1.69   0.090    -.0192255    .2640466
                           |
                     _cons |   .2034757   .0149524    13.61   0.000     .1741671    .2327843
---------------------------+----------------------------------------------------------------
                   sigma_u |  .39748839
                   sigma_e |  .28636738
                       rho |  .65831187   (fraction of variance due to u_i)
--------------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.0481                         Obs per group: min =         1
       between = 0.0800                                        avg =       9.0
       overall = 0.0630                                        max =        25

                                                F(82,14660)        =     26.45
corr(u_i, Xb)  = 0.1130                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0185235   .0119645     1.55   0.122    -.0049284    .0419755
       during_domestic |   .0059569   .0054274     1.10   0.272    -.0046815    .0165953
        after_domestic |  -.0030582   .0089102    -0.34   0.731    -.0205234     .014407
          during_expat |   .0228395   .0172569     1.32   0.186    -.0109863    .0566653
           after_expat |   -.015967   .0226735    -0.70   0.481    -.0604099    .0284759
during_domestic_H_slow |   -.022642   .0069297    -3.27   0.001    -.0362251   -.0090588
 after_domestic_H_slow |  -.0364036    .011331    -3.21   0.001    -.0586137   -.0141935
   during_expat_H_slow |    .002615   .0252217     0.10   0.917    -.0468227    .0520527
    after_expat_H_slow |   .0352638   .0336301     1.05   0.294    -.0306554    .1011829
                       |
              ind_year |
                    2  |  -.0168553   .0102288    -1.65   0.099    -.0369051    .0031945
                    3  |   -.034272   .0123821    -2.77   0.006    -.0585426   -.0100015
                    4  |  -.0412711   .0133108    -3.10   0.002    -.0673619   -.0151802
                    5  |  -.0337592   .0147163    -2.29   0.022     -.062605   -.0049134
                    6  |  -.0407496   .0158914    -2.56   0.010    -.0718988   -.0096004
                    7  |  -.0467328   .0170882    -2.73   0.006    -.0802279   -.0132377
                    8  |  -.0569381   .0182391    -3.12   0.002    -.0926891   -.0211871
                    9  |  -.0595898   .0196783    -3.03   0.002    -.0981618   -.0210177
                   10  |  -.0585501   .0209933    -2.79   0.005    -.0996996   -.0174006
                   11  |  -.0666419   .0224522    -2.97   0.003     -.110651   -.0226327
                   12  |  -.0662092   .0238055    -2.78   0.005     -.112871   -.0195474
                   13  |  -.0609964   .0253691    -2.40   0.016     -.110723   -.0112699
                   14  |  -.0519406   .0269484    -1.93   0.054    -.1047627    .0008816
                   15  |  -.0410191   .0284585    -1.44   0.150    -.0968013    .0147631
                   16  |  -.0274605   .0299557    -0.92   0.359    -.0861774    .0312565
                   17  |  -.0120869   .0315492    -0.38   0.702    -.0739273    .0497535
                   18  |  -.0077302   .0332185    -0.23   0.816    -.0728427    .0573822
                   19  |  -.0021497   .0348022    -0.06   0.951    -.0703663     .066067
                   20  |   .0059803   .0362643     0.16   0.869    -.0651024    .0770629
                   21  |   .0009961   .0376793     0.03   0.979    -.0728601    .0748524
                   22  |   .0078302    .038998     0.20   0.841    -.0686108    .0842712
                   23  |   .0045692   .0403761     0.11   0.910    -.0745732    .0837115
                   24  |  -.1039863   .0417806    -2.49   0.013    -.1858815    -.022091
                   25  |  -.1388719   .0433457    -3.20   0.001    -.2238349   -.0539089
                   26  |  -.0142368   .0250972    -0.57   0.571    -.0634305    .0349569
                   27  |  -.0103341   .0221768    -0.47   0.641    -.0538035    .0331353
                   28  |   .0112916   .0215031     0.53   0.600    -.0308571    .0534403
                   29  |   .0090963   .0212529     0.43   0.669    -.0325621    .0507547
                   30  |   .0290939   .0211956     1.37   0.170    -.0124523      .07064
                   31  |    .022043   .0213825     1.03   0.303    -.0198693    .0639553
                   32  |   .0301102   .0219247     1.37   0.170    -.0128649    .0730853
                   33  |   .0205905   .0225463     0.91   0.361    -.0236031     .064784
                   34  |   .0201298   .0234759     0.86   0.391    -.0258859    .0661456
                   35  |   .0307441   .0243791     1.26   0.207     -.017042    .0785301
                   36  |   .0320768   .0256854     1.25   0.212    -.0182698    .0824234
                   37  |   .0239052   .0268626     0.89   0.374    -.0287489    .0765592
                   38  |   .0206864   .0279972     0.74   0.460    -.0341916    .0755645
                   39  |   .0254382   .0294276     0.86   0.387    -.0322436      .08312
                   40  |   .0367889   .0306242     1.20   0.230    -.0232384    .0968163
                   41  |    .052918   .0319652     1.66   0.098    -.0097378    .1155737
                   42  |   .0613076    .033347     1.84   0.066    -.0040566    .1266719
                   43  |    .062576   .0349331     1.79   0.073    -.0058973    .1310492
                   44  |    .083197   .0365148     2.28   0.023     .0116234    .1547707
                   45  |   .0903305   .0380003     2.38   0.017     .0158452    .1648159
                   46  |   .0924589   .0396108     2.33   0.020     .0148168    .1701011
                   47  |   .1043915   .0407975     2.56   0.011     .0244233    .1843597
                   48  |   .0947972   .0418412     2.27   0.023     .0127832    .1768111
                   49  |    -.18844   .0434597    -4.34   0.000    -.2736264   -.1032535
                   50  |  -.2385664   .0450488    -5.30   0.000    -.3268678    -.150265
                       |
               age_cat |
                    1  |   .0463998   .0068849     6.74   0.000     .0329045     .059895
                    2  |   .0653779    .007881     8.30   0.000     .0499302    .0808256
                    3  |   .0826057   .0089949     9.18   0.000     .0649746    .1002367
                    4  |   .1044222   .0103309    10.11   0.000     .0841724    .1246721
                    5  |   .1226569   .0117228    10.46   0.000     .0996788     .145635
                    6  |   .1346011   .0132708    10.14   0.000     .1085886    .1606137
                    7  |   .1408302   .0148253     9.50   0.000     .1117707    .1698897
                    8  |   .1570343   .0164602     9.54   0.000     .1247702    .1892983
                    9  |   .1575951   .0180725     8.72   0.000     .1221708    .1930194
                   10  |   .1621842   .0197097     8.23   0.000     .1235506    .2008178
                   11  |   .1706279   .0213251     8.00   0.000      .128828    .2124278
                   12  |   .1730065   .0229527     7.54   0.000     .1280164    .2179966
                   13  |   .1825778   .0246612     7.40   0.000     .1342388    .2309169
                   14  |   .1915511   .0263866     7.26   0.000     .1398301    .2432721
                   15  |   .1994309   .0280316     7.11   0.000     .1444855    .2543763
                   16  |    .204294   .0297296     6.87   0.000     .1460204    .2625677
                   17  |   .2087781   .0313521     6.66   0.000     .1473241    .2702321
                   18  |   .2139981   .0332136     6.44   0.000     .1488952     .279101
                   19  |   .2048949    .035072     5.84   0.000     .1361493    .2736405
                   20  |   .2148555   .0380508     5.65   0.000     .1402712    .2894398
                   25  |   .2361287   .0438547     5.38   0.000      .150168    .3220893
                   30  |   .2369922   .0611699     3.87   0.000     .1170914     .356893
                   40  |   .2229409   .0684625     3.26   0.001     .0887456    .3571361
                   50  |   .1640813   .0722203     2.27   0.023     .0225204    .3056422
                       |
                 _cons |   .2018252   .0149845    13.47   0.000     .1724538    .2311967
-----------------------+----------------------------------------------------------------
               sigma_u |   .3875464
               sigma_e |  .28677494
                   rho |  .64617677   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_slow + during_expat_H_slow = 0

       F(  1, 14660) =    0.95
            Prob > F =    0.3302

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .048088521109671
key: p_value
value: .330185685987277

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.0481                                         min =          1
     between = 0.0800                                         avg =        9.0
     overall = 0.0630                                         max =         25

                                                F(82,14660)       =      26.45
corr(u_i, Xb)  = 0.1130                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0185235   .0119645     1.55   0.122    -.0049284    .0419755
       during_domestic |   .0059569   .0054274     1.10   0.272    -.0046815    .0165953
        after_domestic |  -.0030582   .0089102    -0.34   0.731    -.0205234     .014407
          during_expat |   .0228395   .0172569     1.32   0.186    -.0109863    .0566653
           after_expat |   -.015967   .0226735    -0.70   0.481    -.0604099    .0284759
during_domestic_H_slow |   -.022642   .0069297    -3.27   0.001    -.0362251   -.0090588
 after_domestic_H_slow |  -.0364036    .011331    -3.21   0.001    -.0586137   -.0141935
   during_expat_H_slow |    .002615   .0252217     0.10   0.917    -.0468227    .0520527
    after_expat_H_slow |   .0352638   .0336301     1.05   0.294    -.0306554    .1011829
                       |
              ind_year |
                    2  |  -.0168553   .0102288    -1.65   0.099    -.0369051    .0031945
                    3  |   -.034272   .0123821    -2.77   0.006    -.0585426   -.0100015
                    4  |  -.0412711   .0133108    -3.10   0.002    -.0673619   -.0151802
                    5  |  -.0337592   .0147163    -2.29   0.022     -.062605   -.0049134
                    6  |  -.0407496   .0158914    -2.56   0.010    -.0718988   -.0096004
                    7  |  -.0467328   .0170882    -2.73   0.006    -.0802279   -.0132377
                    8  |  -.0569381   .0182391    -3.12   0.002    -.0926891   -.0211871
                    9  |  -.0595898   .0196783    -3.03   0.002    -.0981618   -.0210177
                   10  |  -.0585501   .0209933    -2.79   0.005    -.0996996   -.0174006
                   11  |  -.0666419   .0224522    -2.97   0.003     -.110651   -.0226327
                   12  |  -.0662092   .0238055    -2.78   0.005     -.112871   -.0195474
                   13  |  -.0609964   .0253691    -2.40   0.016     -.110723   -.0112699
                   14  |  -.0519406   .0269484    -1.93   0.054    -.1047627    .0008816
                   15  |  -.0410191   .0284585    -1.44   0.150    -.0968013    .0147631
                   16  |  -.0274605   .0299557    -0.92   0.359    -.0861774    .0312565
                   17  |  -.0120869   .0315492    -0.38   0.702    -.0739273    .0497535
                   18  |  -.0077302   .0332185    -0.23   0.816    -.0728427    .0573822
                   19  |  -.0021497   .0348022    -0.06   0.951    -.0703663     .066067
                   20  |   .0059803   .0362643     0.16   0.869    -.0651024    .0770629
                   21  |   .0009961   .0376793     0.03   0.979    -.0728601    .0748524
                   22  |   .0078302    .038998     0.20   0.841    -.0686108    .0842712
                   23  |   .0045692   .0403761     0.11   0.910    -.0745732    .0837115
                   24  |  -.1039863   .0417806    -2.49   0.013    -.1858815    -.022091
                   25  |  -.1388719   .0433457    -3.20   0.001    -.2238349   -.0539089
                   26  |  -.0142368   .0250972    -0.57   0.571    -.0634305    .0349569
                   27  |  -.0103341   .0221768    -0.47   0.641    -.0538035    .0331353
                   28  |   .0112916   .0215031     0.53   0.600    -.0308571    .0534403
                   29  |   .0090963   .0212529     0.43   0.669    -.0325621    .0507547
                   30  |   .0290939   .0211956     1.37   0.170    -.0124523      .07064
                   31  |    .022043   .0213825     1.03   0.303    -.0198693    .0639553
                   32  |   .0301102   .0219247     1.37   0.170    -.0128649    .0730853
                   33  |   .0205905   .0225463     0.91   0.361    -.0236031     .064784
                   34  |   .0201298   .0234759     0.86   0.391    -.0258859    .0661456
                   35  |   .0307441   .0243791     1.26   0.207     -.017042    .0785301
                   36  |   .0320768   .0256854     1.25   0.212    -.0182698    .0824234
                   37  |   .0239052   .0268626     0.89   0.374    -.0287489    .0765592
                   38  |   .0206864   .0279972     0.74   0.460    -.0341916    .0755645
                   39  |   .0254382   .0294276     0.86   0.387    -.0322436      .08312
                   40  |   .0367889   .0306242     1.20   0.230    -.0232384    .0968163
                   41  |    .052918   .0319652     1.66   0.098    -.0097378    .1155737
                   42  |   .0613076    .033347     1.84   0.066    -.0040566    .1266719
                   43  |    .062576   .0349331     1.79   0.073    -.0058973    .1310492
                   44  |    .083197   .0365148     2.28   0.023     .0116234    .1547707
                   45  |   .0903305   .0380003     2.38   0.017     .0158452    .1648159
                   46  |   .0924589   .0396108     2.33   0.020     .0148168    .1701011
                   47  |   .1043915   .0407975     2.56   0.011     .0244233    .1843597
                   48  |   .0947972   .0418412     2.27   0.023     .0127832    .1768111
                   49  |    -.18844   .0434597    -4.34   0.000    -.2736264   -.1032535
                   50  |  -.2385664   .0450488    -5.30   0.000    -.3268678    -.150265
                       |
               age_cat |
                    1  |   .0463998   .0068849     6.74   0.000     .0329045     .059895
                    2  |   .0653779    .007881     8.30   0.000     .0499302    .0808256
                    3  |   .0826057   .0089949     9.18   0.000     .0649746    .1002367
                    4  |   .1044222   .0103309    10.11   0.000     .0841724    .1246721
                    5  |   .1226569   .0117228    10.46   0.000     .0996788     .145635
                    6  |   .1346011   .0132708    10.14   0.000     .1085886    .1606137
                    7  |   .1408302   .0148253     9.50   0.000     .1117707    .1698897
                    8  |   .1570343   .0164602     9.54   0.000     .1247702    .1892983
                    9  |   .1575951   .0180725     8.72   0.000     .1221708    .1930194
                   10  |   .1621842   .0197097     8.23   0.000     .1235506    .2008178
                   11  |   .1706279   .0213251     8.00   0.000      .128828    .2124278
                   12  |   .1730065   .0229527     7.54   0.000     .1280164    .2179966
                   13  |   .1825778   .0246612     7.40   0.000     .1342388    .2309169
                   14  |   .1915511   .0263866     7.26   0.000     .1398301    .2432721
                   15  |   .1994309   .0280316     7.11   0.000     .1444855    .2543763
                   16  |    .204294   .0297296     6.87   0.000     .1460204    .2625677
                   17  |   .2087781   .0313521     6.66   0.000     .1473241    .2702321
                   18  |   .2139981   .0332136     6.44   0.000     .1488952     .279101
                   19  |   .2048949    .035072     5.84   0.000     .1361493    .2736405
                   20  |   .2148555   .0380508     5.65   0.000     .1402712    .2894398
                   25  |   .2361287   .0438547     5.38   0.000      .150168    .3220893
                   30  |   .2369922   .0611699     3.87   0.000     .1170914     .356893
                   40  |   .2229409   .0684625     3.26   0.001     .0887456    .3571361
                   50  |   .1640813   .0722203     2.27   0.023     .0225204    .3056422
                       |
                 _cons |   .2018252   .0149845    13.47   0.000     .1724538    .2311967
-----------------------+----------------------------------------------------------------
               sigma_u |   .3875464
               sigma_e |  .28677494
                   rho |  .64617677   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.0481                         Obs per group: min =         1
       between = 0.0737                                        avg =       9.0
       overall = 0.0599                                        max =        25

                                                F(82,14660)        =     26.38
corr(u_i, Xb)  = 0.1014                         Prob > F           =    0.0000

                                           (Std. Err. adjusted for 14,661 clusters in id)
-----------------------------------------------------------------------------------------
                        |               Robust
               exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                foreign |   .0190695   .0119609     1.59   0.111    -.0043754    .0425144
        during_domestic |  -.0073132   .0038338    -1.91   0.056    -.0148279    .0002015
         after_domestic |  -.0132263   .0065022    -2.03   0.042    -.0259713   -.0004812
           during_expat |   .0233565   .0140493     1.66   0.096    -.0041818    .0508949
            after_expat |   .0142746   .0208124     0.69   0.493    -.0265202    .0550695
during_domestic_H_early |  -.0043115   .0090963    -0.47   0.636    -.0221415    .0135185
 after_domestic_H_early |  -.0448922   .0126581    -3.55   0.000    -.0697037   -.0200807
   during_expat_H_early |  -.0028199   .0306785    -0.09   0.927    -.0629536    .0573137
    after_expat_H_early |  -.0270024    .037838    -0.71   0.475    -.1011696    .0471647
                        |
               ind_year |
                     2  |  -.0170406   .0102305    -1.67   0.096    -.0370938    .0030125
                     3  |  -.0346648   .0123802    -2.80   0.005    -.0589315   -.0103981
                     4  |  -.0419034   .0132986    -3.15   0.002    -.0679704   -.0158364
                     5  |  -.0345015   .0146939    -2.35   0.019    -.0633033   -.0056997
                     6  |  -.0415976   .0158671    -2.62   0.009    -.0726992   -.0104961
                     7  |  -.0476366   .0170557    -2.79   0.005     -.081068   -.0142053
                     8  |  -.0578101   .0182075    -3.18   0.002     -.093499   -.0221211
                     9  |  -.0602779   .0196369    -3.07   0.002    -.0987688   -.0217871
                    10  |  -.0592503   .0209585    -2.83   0.005    -.1003315    -.018169
                    11  |  -.0675977   .0223997    -3.02   0.003    -.1115038   -.0236915
                    12  |  -.0674376    .023745    -2.84   0.005    -.1139808   -.0208945
                    13  |  -.0625518    .025299    -2.47   0.013     -.112141   -.0129627
                    14  |  -.0539877   .0268541    -2.01   0.044    -.1066252   -.0013502
                    15  |  -.0436076   .0283509    -1.54   0.124    -.0991789    .0119637
                    16  |  -.0305768   .0298323    -1.02   0.305    -.0890519    .0278982
                    17  |  -.0158633   .0314065    -0.51   0.613     -.077424    .0456975
                    18  |  -.0120456   .0330587    -0.36   0.716    -.0768447    .0527536
                    19  |  -.0070408   .0346182    -0.20   0.839    -.0748967    .0608152
                    20  |   .0005668   .0360695     0.02   0.987     -.070134    .0712675
                    21  |  -.0050099   .0374734    -0.13   0.894    -.0784624    .0684426
                    22  |    .001246   .0387781     0.03   0.974    -.0747639     .077256
                    23  |  -.0024724   .0401485    -0.06   0.951    -.0811685    .0762236
                    24  |  -.1115244   .0415442    -2.68   0.007    -.1929562   -.0300927
                    25  |  -.1468208   .0431042    -3.41   0.001    -.2313104   -.0623311
                    26  |   -.014763   .0250917    -0.59   0.556    -.0639458    .0344198
                    27  |  -.0110782   .0221684    -0.50   0.617     -.054531    .0323746
                    28  |   .0103577   .0214825     0.48   0.630    -.0317507    .0524661
                    29  |   .0079931   .0212271     0.38   0.707    -.0336146    .0496008
                    30  |   .0280008   .0211602     1.32   0.186     -.013476    .0694775
                    31  |    .020907   .0213523     0.98   0.328    -.0209462    .0627603
                    32  |   .0289252   .0218879     1.32   0.186    -.0139779    .0718283
                    33  |   .0194956   .0225066     0.87   0.386    -.0246203    .0636114
                    34  |   .0191246   .0234294     0.82   0.414       -.0268    .0650492
                    35  |   .0296626   .0243252     1.22   0.223    -.0180178    .0773429
                    36  |   .0306935   .0256264     1.20   0.231    -.0195375    .0809245
                    37  |   .0221755   .0267903     0.83   0.408    -.0303368    .0746878
                    38  |   .0187485   .0279182     0.67   0.502    -.0359748    .0734718
                    39  |   .0231707   .0293352     0.79   0.430    -.0343301    .0806714
                    40  |   .0340291   .0305082     1.12   0.265    -.0257709    .0938291
                    41  |    .049813   .0318323     1.56   0.118    -.0125824    .1122084
                    42  |   .0577403   .0331942     1.74   0.082    -.0073245    .1228052
                    43  |   .0585687   .0347783     1.68   0.092    -.0096011    .1267385
                    44  |   .0787111   .0363437     2.17   0.030     .0074729    .1499493
                    45  |   .0854102   .0378175     2.26   0.024     .0112831    .1595372
                    46  |   .0871032    .039418     2.21   0.027      .009839    .1643674
                    47  |   .0985816   .0406066     2.43   0.015     .0189874    .1781757
                    48  |   .0886763   .0416422     2.13   0.033     .0070523    .1703003
                    49  |  -.1949476    .043255    -4.51   0.000    -.2797328   -.1101624
                    50  |  -.2454885   .0448384    -5.47   0.000    -.3333773   -.1575997
                        |
                age_cat |
                     1  |   .0467516   .0068836     6.79   0.000     .0332589    .0602443
                     2  |    .066202   .0078725     8.41   0.000     .0507708    .0816332
                     3  |   .0838466   .0089784     9.34   0.000     .0662478    .1014454
                     4  |   .1060362   .0103013    10.29   0.000     .0858443    .1262281
                     5  |    .124692     .01168    10.68   0.000     .1017977    .1475862
                     6  |   .1370398   .0132156    10.37   0.000     .1111355     .162944
                     7  |   .1436363   .0147591     9.73   0.000     .1147066    .1725661
                     8  |   .1601704   .0163807     9.78   0.000     .1280622    .1922786
                     9  |   .1610678    .017979     8.96   0.000     .1258268    .1963089
                    10  |   .1660116   .0196145     8.46   0.000     .1275648    .2044584
                    11  |    .174882   .0212194     8.24   0.000     .1332893    .2164747
                    12  |   .1776825   .0228452     7.78   0.000      .132903     .222462
                    13  |    .187599   .0245517     7.64   0.000     .1394746    .2357234
                    14  |    .196992   .0262586     7.50   0.000     .1455219     .248462
                    15  |    .205258   .0278938     7.36   0.000     .1505826    .2599334
                    16  |   .2104994   .0295764     7.12   0.000     .1525258    .2684729
                    17  |     .21537   .0311966     6.90   0.000     .1542209    .2765192
                    18  |   .2209578   .0330479     6.69   0.000     .1561799    .2857358
                    19  |   .2122778   .0348976     6.08   0.000     .1438742    .2806814
                    20  |     .22309   .0378633     5.89   0.000     .1488731    .2973069
                    25  |   .2454602   .0436654     5.62   0.000     .1598704    .3310499
                    30  |   .2462885     .06108     4.03   0.000     .1265641    .3660129
                    40  |   .2309883   .0683945     3.38   0.001     .0969264    .3650502
                    50  |   .1725047   .0722007     2.39   0.017     .0309823    .3140271
                        |
                  _cons |   .2007159   .0149945    13.39   0.000     .1713247     .230107
------------------------+----------------------------------------------------------------
                sigma_u |  .38806557
                sigma_e |  .28677877
                    rho |  .64678259   (fraction of variance due to u_i)
-----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_early + during_expat_H_early = 0

       F(  1, 14660) =    0.00
            Prob > F =    0.9623

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0480631299918778
key: p_value
value: .9622585349328977

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.0481                                         min =          1
     between = 0.0737                                         avg =        9.0
     overall = 0.0599                                         max =         25

                                                F(82,14660)       =      26.38
corr(u_i, Xb)  = 0.1014                         Prob > F          =     0.0000

                                           (Std. Err. adjusted for 14,661 clusters in id)
-----------------------------------------------------------------------------------------
                        |               Robust
               exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                foreign |   .0190695   .0119609     1.59   0.111    -.0043754    .0425144
        during_domestic |  -.0073132   .0038338    -1.91   0.056    -.0148279    .0002015
         after_domestic |  -.0132263   .0065022    -2.03   0.042    -.0259713   -.0004812
           during_expat |   .0233565   .0140493     1.66   0.096    -.0041818    .0508949
            after_expat |   .0142746   .0208124     0.69   0.493    -.0265202    .0550695
during_domestic_H_early |  -.0043115   .0090963    -0.47   0.636    -.0221415    .0135185
 after_domestic_H_early |  -.0448922   .0126581    -3.55   0.000    -.0697037   -.0200807
   during_expat_H_early |  -.0028199   .0306785    -0.09   0.927    -.0629536    .0573137
    after_expat_H_early |  -.0270024    .037838    -0.71   0.475    -.1011696    .0471647
                        |
               ind_year |
                     2  |  -.0170406   .0102305    -1.67   0.096    -.0370938    .0030125
                     3  |  -.0346648   .0123802    -2.80   0.005    -.0589315   -.0103981
                     4  |  -.0419034   .0132986    -3.15   0.002    -.0679704   -.0158364
                     5  |  -.0345015   .0146939    -2.35   0.019    -.0633033   -.0056997
                     6  |  -.0415976   .0158671    -2.62   0.009    -.0726992   -.0104961
                     7  |  -.0476366   .0170557    -2.79   0.005     -.081068   -.0142053
                     8  |  -.0578101   .0182075    -3.18   0.002     -.093499   -.0221211
                     9  |  -.0602779   .0196369    -3.07   0.002    -.0987688   -.0217871
                    10  |  -.0592503   .0209585    -2.83   0.005    -.1003315    -.018169
                    11  |  -.0675977   .0223997    -3.02   0.003    -.1115038   -.0236915
                    12  |  -.0674376    .023745    -2.84   0.005    -.1139808   -.0208945
                    13  |  -.0625518    .025299    -2.47   0.013     -.112141   -.0129627
                    14  |  -.0539877   .0268541    -2.01   0.044    -.1066252   -.0013502
                    15  |  -.0436076   .0283509    -1.54   0.124    -.0991789    .0119637
                    16  |  -.0305768   .0298323    -1.02   0.305    -.0890519    .0278982
                    17  |  -.0158633   .0314065    -0.51   0.613     -.077424    .0456975
                    18  |  -.0120456   .0330587    -0.36   0.716    -.0768447    .0527536
                    19  |  -.0070408   .0346182    -0.20   0.839    -.0748967    .0608152
                    20  |   .0005668   .0360695     0.02   0.987     -.070134    .0712675
                    21  |  -.0050099   .0374734    -0.13   0.894    -.0784624    .0684426
                    22  |    .001246   .0387781     0.03   0.974    -.0747639     .077256
                    23  |  -.0024724   .0401485    -0.06   0.951    -.0811685    .0762236
                    24  |  -.1115244   .0415442    -2.68   0.007    -.1929562   -.0300927
                    25  |  -.1468208   .0431042    -3.41   0.001    -.2313104   -.0623311
                    26  |   -.014763   .0250917    -0.59   0.556    -.0639458    .0344198
                    27  |  -.0110782   .0221684    -0.50   0.617     -.054531    .0323746
                    28  |   .0103577   .0214825     0.48   0.630    -.0317507    .0524661
                    29  |   .0079931   .0212271     0.38   0.707    -.0336146    .0496008
                    30  |   .0280008   .0211602     1.32   0.186     -.013476    .0694775
                    31  |    .020907   .0213523     0.98   0.328    -.0209462    .0627603
                    32  |   .0289252   .0218879     1.32   0.186    -.0139779    .0718283
                    33  |   .0194956   .0225066     0.87   0.386    -.0246203    .0636114
                    34  |   .0191246   .0234294     0.82   0.414       -.0268    .0650492
                    35  |   .0296626   .0243252     1.22   0.223    -.0180178    .0773429
                    36  |   .0306935   .0256264     1.20   0.231    -.0195375    .0809245
                    37  |   .0221755   .0267903     0.83   0.408    -.0303368    .0746878
                    38  |   .0187485   .0279182     0.67   0.502    -.0359748    .0734718
                    39  |   .0231707   .0293352     0.79   0.430    -.0343301    .0806714
                    40  |   .0340291   .0305082     1.12   0.265    -.0257709    .0938291
                    41  |    .049813   .0318323     1.56   0.118    -.0125824    .1122084
                    42  |   .0577403   .0331942     1.74   0.082    -.0073245    .1228052
                    43  |   .0585687   .0347783     1.68   0.092    -.0096011    .1267385
                    44  |   .0787111   .0363437     2.17   0.030     .0074729    .1499493
                    45  |   .0854102   .0378175     2.26   0.024     .0112831    .1595372
                    46  |   .0871032    .039418     2.21   0.027      .009839    .1643674
                    47  |   .0985816   .0406066     2.43   0.015     .0189874    .1781757
                    48  |   .0886763   .0416422     2.13   0.033     .0070523    .1703003
                    49  |  -.1949476    .043255    -4.51   0.000    -.2797328   -.1101624
                    50  |  -.2454885   .0448384    -5.47   0.000    -.3333773   -.1575997
                        |
                age_cat |
                     1  |   .0467516   .0068836     6.79   0.000     .0332589    .0602443
                     2  |    .066202   .0078725     8.41   0.000     .0507708    .0816332
                     3  |   .0838466   .0089784     9.34   0.000     .0662478    .1014454
                     4  |   .1060362   .0103013    10.29   0.000     .0858443    .1262281
                     5  |    .124692     .01168    10.68   0.000     .1017977    .1475862
                     6  |   .1370398   .0132156    10.37   0.000     .1111355     .162944
                     7  |   .1436363   .0147591     9.73   0.000     .1147066    .1725661
                     8  |   .1601704   .0163807     9.78   0.000     .1280622    .1922786
                     9  |   .1610678    .017979     8.96   0.000     .1258268    .1963089
                    10  |   .1660116   .0196145     8.46   0.000     .1275648    .2044584
                    11  |    .174882   .0212194     8.24   0.000     .1332893    .2164747
                    12  |   .1776825   .0228452     7.78   0.000      .132903     .222462
                    13  |    .187599   .0245517     7.64   0.000     .1394746    .2357234
                    14  |    .196992   .0262586     7.50   0.000     .1455219     .248462
                    15  |    .205258   .0278938     7.36   0.000     .1505826    .2599334
                    16  |   .2104994   .0295764     7.12   0.000     .1525258    .2684729
                    17  |     .21537   .0311966     6.90   0.000     .1542209    .2765192
                    18  |   .2209578   .0330479     6.69   0.000     .1561799    .2857358
                    19  |   .2122778   .0348976     6.08   0.000     .1438742    .2806814
                    20  |     .22309   .0378633     5.89   0.000     .1488731    .2973069
                    25  |   .2454602   .0436654     5.62   0.000     .1598704    .3310499
                    30  |   .2462885     .06108     4.03   0.000     .1265641    .3660129
                    40  |   .2309883   .0683945     3.38   0.001     .0969264    .3650502
                    50  |   .1725047   .0722007     2.39   0.017     .0309823    .3140271
                        |
                  _cons |   .2007159   .0149945    13.39   0.000     .1713247     .230107
------------------------+----------------------------------------------------------------
                sigma_u |  .38806557
                sigma_e |  .28677877
                    rho |  .64678259   (fraction of variance due to u_i)
-----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.0479                         Obs per group: min =         1
       between = 0.0768                                        avg =       9.0
       overall = 0.0613                                        max =        25

                                                F(82,14660)        =     26.35
corr(u_i, Xb)  = 0.1073                         Prob > F           =    0.0000

                                                (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------------
                             |               Robust
                    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------------+----------------------------------------------------------------
                     foreign |   .0188178   .0119689     1.57   0.116    -.0046428    .0422784
             during_domestic |  -.0081352   .0047445    -1.71   0.086    -.0174349    .0011646
              after_domestic |  -.0256943   .0071093    -3.61   0.000    -.0396295    -.011759
                during_expat |   .0206069   .0140637     1.47   0.143    -.0069598    .0481735
                 after_expat |    .003316   .0182167     0.18   0.856     -.032391     .039023
during_domestic_H_young_firm |   .0017715   .0059675     0.30   0.767    -.0099256    .0134686
 after_domestic_H_young_firm |    .004527   .0097861     0.46   0.644    -.0146551     .023709
   during_expat_H_young_firm |   .0078015   .0177726     0.44   0.661     -.027035    .0426381
    after_expat_H_young_firm |   .0022622   .0269862     0.08   0.933    -.0506342    .0551586
                             |
                    ind_year |
                          2  |  -.0171918    .010231    -1.68   0.093     -.037246    .0028623
                          3  |  -.0349217   .0123853    -2.82   0.005    -.0591985   -.0106449
                          4  |  -.0422724   .0133148    -3.17   0.002    -.0683712   -.0161737
                          5  |  -.0351378   .0147202    -2.39   0.017    -.0639912   -.0062843
                          6  |  -.0425148   .0158969    -2.67   0.007    -.0736747   -.0113548
                          7  |  -.0488421   .0170984    -2.86   0.004    -.0823572    -.015327
                          8  |  -.0593785   .0182523    -3.25   0.001    -.0951553   -.0236017
                          9  |  -.0622498   .0196904    -3.16   0.002    -.1008455   -.0236541
                         10  |  -.0615103   .0210068    -2.93   0.003    -.1026863   -.0203342
                         11  |  -.0699427   .0224655    -3.11   0.002     -.113978   -.0259074
                         12  |  -.0697817   .0238144    -2.93   0.003     -.116461   -.0231025
                         13  |   -.064876   .0253813    -2.56   0.011    -.1146265   -.0151254
                         14  |   -.056145   .0269586    -2.08   0.037    -.1089874   -.0033027
                         15  |  -.0455831    .028465    -1.60   0.109    -.1013782    .0102119
                         16  |  -.0323412   .0299653    -1.08   0.280     -.091077    .0263946
                         17  |  -.0173964   .0315635    -0.55   0.582    -.0792649    .0444721
                         18  |  -.0134205   .0332343    -0.40   0.686    -.0785639     .051723
                         19  |  -.0081957   .0348144    -0.24   0.814    -.0764362    .0600449
                         20  |  -.0003017    .036285    -0.01   0.993    -.0714248    .0708215
                         21  |  -.0056049   .0377055    -0.15   0.882    -.0795124    .0683027
                         22  |     .00092     .03902     0.02   0.981     -.075564     .077404
                         23  |  -.0025638   .0404075    -0.06   0.949    -.0817676    .0766399
                         24  |  -.1114022   .0418125    -2.66   0.008    -.1933599   -.0294444
                         25  |   -.146513   .0433815    -3.38   0.001    -.2315462   -.0614798
                         26  |  -.0142623   .0250956    -0.57   0.570    -.0634527    .0349282
                         27  |  -.0108129   .0221709    -0.49   0.626    -.0542705    .0326448
                         28  |   .0103835   .0214913     0.48   0.629    -.0317422    .0525092
                         29  |   .0078646   .0212372     0.37   0.711     -.033763    .0494922
                         30  |    .027573   .0211761     1.30   0.193    -.0139347    .0690808
                         31  |   .0201056   .0213644     0.94   0.347    -.0217713    .0619824
                         32  |   .0277892   .0219028     1.27   0.205    -.0151431    .0707216
                         33  |   .0179879   .0225112     0.80   0.424    -.0261369    .0621126
                         34  |   .0172209   .0234448     0.73   0.463    -.0287338    .0631756
                         35  |   .0275134    .024348     1.13   0.258    -.0202117    .0752385
                         36  |   .0285386   .0256545     1.11   0.266    -.0217473    .0788246
                         37  |   .0200598   .0268275     0.75   0.455    -.0325255     .072645
                         38  |   .0166388   .0279808     0.59   0.552     -.038207    .0714847
                         39  |   .0211524   .0294165     0.72   0.472    -.0365076    .0788125
                         40  |   .0322032   .0306102     1.05   0.293    -.0277966     .092203
                         41  |   .0481444   .0319553     1.51   0.132    -.0144921    .1107809
                         42  |   .0562387   .0333448     1.69   0.092    -.0091213    .1215986
                         43  |   .0572285   .0349302     1.64   0.101     -.011239    .1256961
                         44  |     .07756   .0365177     2.12   0.034     .0059806    .1491393
                         45  |   .0844797   .0380156     2.22   0.026     .0099642    .1589951
                         46  |   .0864168   .0396276     2.18   0.029     .0087418    .1640918
                         47  |   .0981007   .0408179     2.40   0.016     .0180925    .1781088
                         48  |    .088367   .0418694     2.11   0.035     .0062977    .1704363
                         49  |  -.1950679   .0435069    -4.48   0.000     -.280347   -.1097888
                         50  |  -.2454152   .0450954    -5.44   0.000    -.3338079   -.1570225
                             |
                     age_cat |
                          1  |   .0466945   .0068932     6.77   0.000     .0331829    .0602061
                          2  |   .0660501   .0079038     8.36   0.000     .0505577    .0815425
                          3  |    .083601   .0090371     9.25   0.000     .0658871    .1013149
                          4  |   .1057279   .0103882    10.18   0.000     .0853658    .1260901
                          5  |   .1242749   .0118024    10.53   0.000     .1011406    .1474091
                          6  |   .1365182   .0133682    10.21   0.000     .1103148    .1627215
                          7  |   .1430184   .0149475     9.57   0.000     .1137194    .1723175
                          8  |   .1594709   .0165998     9.61   0.000     .1269332    .1920085
                          9  |   .1602474   .0182382     8.79   0.000     .1244983    .1959965
                         10  |   .1650655   .0199008     8.29   0.000     .1260574    .2040736
                         11  |   .1745452   .0213132     8.19   0.000     .1327686    .2163219
                         12  |   .1772256   .0229484     7.72   0.000     .1322439    .2222072
                         13  |   .1870921   .0246601     7.59   0.000     .1387552     .235429
                         14  |   .1963702   .0263657     7.45   0.000     .1446901    .2480504
                         15  |   .2045708   .0280041     7.31   0.000     .1496793    .2594623
                         16  |   .2097402   .0296886     7.06   0.000     .1515469    .2679335
                         17  |   .2145012   .0313107     6.85   0.000     .1531282    .2758742
                         18  |   .2200195   .0331651     6.63   0.000     .1550116    .2850273
                         19  |   .2112144   .0350168     6.03   0.000     .1425771    .2798516
                         20  |   .2217747   .0379941     5.84   0.000     .1473016    .2962479
                         25  |   .2437129   .0438111     5.56   0.000     .1578376    .3295881
                         30  |   .2445184   .0611926     4.00   0.000     .1245731    .3644636
                         40  |   .2299179   .0685112     3.36   0.001     .0956273    .3642084
                         50  |   .1713158   .0722863     2.37   0.018     .0296254    .3130061
                             |
                       _cons |   .2021706    .014983    13.49   0.000      .172802    .2315393
-----------------------------+----------------------------------------------------------------
                     sigma_u |  .38778578
                     sigma_e |  .28679618
                         rho |  .64642524   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_young_firm + during_expat_H_young_firm = 0

       F(  1, 14660) =    0.11
            Prob > F =    0.7388

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0479475457455841
key: p_value
value: .7388464843925118

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.0479                                         min =          1
     between = 0.0768                                         avg =        9.0
     overall = 0.0613                                         max =         25

                                                F(82,14660)       =      26.35
corr(u_i, Xb)  = 0.1073                         Prob > F          =     0.0000

                                                (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------------
                             |               Robust
                    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------------+----------------------------------------------------------------
                     foreign |   .0188178   .0119689     1.57   0.116    -.0046428    .0422784
             during_domestic |  -.0081352   .0047445    -1.71   0.086    -.0174349    .0011646
              after_domestic |  -.0256943   .0071093    -3.61   0.000    -.0396295    -.011759
                during_expat |   .0206069   .0140637     1.47   0.143    -.0069598    .0481735
                 after_expat |    .003316   .0182167     0.18   0.856     -.032391     .039023
during_domestic_H_young_firm |   .0017715   .0059675     0.30   0.767    -.0099256    .0134686
 after_domestic_H_young_firm |    .004527   .0097861     0.46   0.644    -.0146551     .023709
   during_expat_H_young_firm |   .0078015   .0177726     0.44   0.661     -.027035    .0426381
    after_expat_H_young_firm |   .0022622   .0269862     0.08   0.933    -.0506342    .0551586
                             |
                    ind_year |
                          2  |  -.0171918    .010231    -1.68   0.093     -.037246    .0028623
                          3  |  -.0349217   .0123853    -2.82   0.005    -.0591985   -.0106449
                          4  |  -.0422724   .0133148    -3.17   0.002    -.0683712   -.0161737
                          5  |  -.0351378   .0147202    -2.39   0.017    -.0639912   -.0062843
                          6  |  -.0425148   .0158969    -2.67   0.007    -.0736747   -.0113548
                          7  |  -.0488421   .0170984    -2.86   0.004    -.0823572    -.015327
                          8  |  -.0593785   .0182523    -3.25   0.001    -.0951553   -.0236017
                          9  |  -.0622498   .0196904    -3.16   0.002    -.1008455   -.0236541
                         10  |  -.0615103   .0210068    -2.93   0.003    -.1026863   -.0203342
                         11  |  -.0699427   .0224655    -3.11   0.002     -.113978   -.0259074
                         12  |  -.0697817   .0238144    -2.93   0.003     -.116461   -.0231025
                         13  |   -.064876   .0253813    -2.56   0.011    -.1146265   -.0151254
                         14  |   -.056145   .0269586    -2.08   0.037    -.1089874   -.0033027
                         15  |  -.0455831    .028465    -1.60   0.109    -.1013782    .0102119
                         16  |  -.0323412   .0299653    -1.08   0.280     -.091077    .0263946
                         17  |  -.0173964   .0315635    -0.55   0.582    -.0792649    .0444721
                         18  |  -.0134205   .0332343    -0.40   0.686    -.0785639     .051723
                         19  |  -.0081957   .0348144    -0.24   0.814    -.0764362    .0600449
                         20  |  -.0003017    .036285    -0.01   0.993    -.0714248    .0708215
                         21  |  -.0056049   .0377055    -0.15   0.882    -.0795124    .0683027
                         22  |     .00092     .03902     0.02   0.981     -.075564     .077404
                         23  |  -.0025638   .0404075    -0.06   0.949    -.0817676    .0766399
                         24  |  -.1114022   .0418125    -2.66   0.008    -.1933599   -.0294444
                         25  |   -.146513   .0433815    -3.38   0.001    -.2315462   -.0614798
                         26  |  -.0142623   .0250956    -0.57   0.570    -.0634527    .0349282
                         27  |  -.0108129   .0221709    -0.49   0.626    -.0542705    .0326448
                         28  |   .0103835   .0214913     0.48   0.629    -.0317422    .0525092
                         29  |   .0078646   .0212372     0.37   0.711     -.033763    .0494922
                         30  |    .027573   .0211761     1.30   0.193    -.0139347    .0690808
                         31  |   .0201056   .0213644     0.94   0.347    -.0217713    .0619824
                         32  |   .0277892   .0219028     1.27   0.205    -.0151431    .0707216
                         33  |   .0179879   .0225112     0.80   0.424    -.0261369    .0621126
                         34  |   .0172209   .0234448     0.73   0.463    -.0287338    .0631756
                         35  |   .0275134    .024348     1.13   0.258    -.0202117    .0752385
                         36  |   .0285386   .0256545     1.11   0.266    -.0217473    .0788246
                         37  |   .0200598   .0268275     0.75   0.455    -.0325255     .072645
                         38  |   .0166388   .0279808     0.59   0.552     -.038207    .0714847
                         39  |   .0211524   .0294165     0.72   0.472    -.0365076    .0788125
                         40  |   .0322032   .0306102     1.05   0.293    -.0277966     .092203
                         41  |   .0481444   .0319553     1.51   0.132    -.0144921    .1107809
                         42  |   .0562387   .0333448     1.69   0.092    -.0091213    .1215986
                         43  |   .0572285   .0349302     1.64   0.101     -.011239    .1256961
                         44  |     .07756   .0365177     2.12   0.034     .0059806    .1491393
                         45  |   .0844797   .0380156     2.22   0.026     .0099642    .1589951
                         46  |   .0864168   .0396276     2.18   0.029     .0087418    .1640918
                         47  |   .0981007   .0408179     2.40   0.016     .0180925    .1781088
                         48  |    .088367   .0418694     2.11   0.035     .0062977    .1704363
                         49  |  -.1950679   .0435069    -4.48   0.000     -.280347   -.1097888
                         50  |  -.2454152   .0450954    -5.44   0.000    -.3338079   -.1570225
                             |
                     age_cat |
                          1  |   .0466945   .0068932     6.77   0.000     .0331829    .0602061
                          2  |   .0660501   .0079038     8.36   0.000     .0505577    .0815425
                          3  |    .083601   .0090371     9.25   0.000     .0658871    .1013149
                          4  |   .1057279   .0103882    10.18   0.000     .0853658    .1260901
                          5  |   .1242749   .0118024    10.53   0.000     .1011406    .1474091
                          6  |   .1365182   .0133682    10.21   0.000     .1103148    .1627215
                          7  |   .1430184   .0149475     9.57   0.000     .1137194    .1723175
                          8  |   .1594709   .0165998     9.61   0.000     .1269332    .1920085
                          9  |   .1602474   .0182382     8.79   0.000     .1244983    .1959965
                         10  |   .1650655   .0199008     8.29   0.000     .1260574    .2040736
                         11  |   .1745452   .0213132     8.19   0.000     .1327686    .2163219
                         12  |   .1772256   .0229484     7.72   0.000     .1322439    .2222072
                         13  |   .1870921   .0246601     7.59   0.000     .1387552     .235429
                         14  |   .1963702   .0263657     7.45   0.000     .1446901    .2480504
                         15  |   .2045708   .0280041     7.31   0.000     .1496793    .2594623
                         16  |   .2097402   .0296886     7.06   0.000     .1515469    .2679335
                         17  |   .2145012   .0313107     6.85   0.000     .1531282    .2758742
                         18  |   .2200195   .0331651     6.63   0.000     .1550116    .2850273
                         19  |   .2112144   .0350168     6.03   0.000     .1425771    .2798516
                         20  |   .2217747   .0379941     5.84   0.000     .1473016    .2962479
                         25  |   .2437129   .0438111     5.56   0.000     .1578376    .3295881
                         30  |   .2445184   .0611926     4.00   0.000     .1245731    .3644636
                         40  |   .2299179   .0685112     3.36   0.001     .0956273    .3642084
                         50  |   .1713158   .0722863     2.37   0.018     .0296254    .3130061
                             |
                       _cons |   .2021706    .014983    13.49   0.000      .172802    .2315393
-----------------------------+----------------------------------------------------------------
                     sigma_u |  .38778578
                     sigma_e |  .28679618
                         rho |  .64642524   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.2320                         Obs per group: min =         1
       between = 0.1448                                        avg =       9.0
       overall = 0.1266                                        max =        25

                                                F(82,14660)        =    115.28
corr(u_i, Xb)  = 0.0232                         Prob > F           =    0.0000

                                         (Std. Err. adjusted for 14,661 clusters in id)
---------------------------------------------------------------------------------------
                      |               Robust
                 lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------------+----------------------------------------------------------------
              foreign |   .0616595   .0253896     2.43   0.015     .0118927    .1114264
      during_domestic |  -.0086731    .011933    -0.73   0.467    -.0320633    .0147172
       after_domestic |    -.04142   .0229738    -1.80   0.071    -.0864514    .0036115
         during_expat |   .1697724   .0528492     3.21   0.001     .0661813    .2733636
          after_expat |   .1692051   .0688873     2.46   0.014     .0341773    .3042328
during_domestic_H_lnL |   .0866121   .0151773     5.71   0.000     .0568627    .1163614
 after_domestic_H_lnL |    .180098    .028232     6.38   0.000     .1247597    .2354364
   during_expat_H_lnL |  -.0053362   .0618238    -0.09   0.931    -.1265186    .1158462
    after_expat_H_lnL |   .1447684   .0799298     1.81   0.070    -.0119041    .3014409
                      |
             ind_year |
                   2  |   .0970499   .0210924     4.60   0.000     .0557061    .1383937
                   3  |   .2849211   .0256377    11.11   0.000      .234668    .3351742
                   4  |    .480966   .0272772    17.63   0.000     .4274992    .5344328
                   5  |   .6434971   .0300758    21.40   0.000     .5845447    .7024495
                   6  |   .8282317   .0333304    24.85   0.000        .7629    .8935634
                   7  |   .9538477   .0359364    26.54   0.000     .8834079    1.024288
                   8  |   1.022545   .0386552    26.45   0.000      .946776    1.098314
                   9  |   1.145292   .0414346    27.64   0.000     1.064075    1.226509
                  10  |    1.25789   .0447186    28.13   0.000     1.170236    1.345544
                  11  |   1.321264   .0477924    27.65   0.000     1.227585    1.414943
                  12  |   1.348852   .0509923    26.45   0.000     1.248901    1.448803
                  13  |   1.393981   .0540675    25.78   0.000     1.288002     1.49996
                  14  |    1.43334   .0570914    25.11   0.000     1.321434    1.545247
                  15  |   1.502625    .060623    24.79   0.000     1.383796    1.621453
                  16  |   1.539823   .0632119    24.36   0.000     1.415919    1.663726
                  17  |   1.593237   .0665752    23.93   0.000     1.462741    1.723733
                  18  |   1.524331    .069743    21.86   0.000     1.387626    1.661036
                  19  |    1.54936    .072852    21.27   0.000     1.406561    1.692159
                  20  |   1.593388   .0759153    20.99   0.000     1.444585    1.742192
                  21  |   1.611832   .0787572    20.47   0.000     1.457458    1.766206
                  22  |   1.665376   .0814244    20.45   0.000     1.505774    1.824978
                  23  |   1.717425   .0840261    20.44   0.000     1.552724    1.882127
                  24  |    1.74822   .0869747    20.10   0.000     1.577739    1.918701
                  25  |   1.739135   .0895703    19.42   0.000     1.563566    1.914704
                  26  |   -.263033   .0472539    -5.57   0.000    -.3556565   -.1704094
                  27  |  -.1253405   .0446926    -2.80   0.005    -.2129436   -.0377374
                  28  |   .0443794   .0430014     1.03   0.302    -.0399087    .1286676
                  29  |   .2771917   .0428744     6.47   0.000     .1931526    .3612309
                  30  |   .4567507   .0429315    10.64   0.000     .3725997    .5409018
                  31  |   .6076868   .0441286    13.77   0.000     .5211892    .6941845
                  32  |   .7565628   .0455369    16.61   0.000     .6673048    .8458209
                  33  |   .8171777   .0470914    17.35   0.000     .7248726    .9094829
                  34  |    .970615   .0491597    19.74   0.000     .8742557    1.066974
                  35  |   1.059308   .0509605    20.79   0.000     .9594195    1.159197
                  36  |   1.108712   .0535367    20.71   0.000     1.003773     1.21365
                  37  |   1.171523   .0561208    20.88   0.000     1.061519    1.281527
                  38  |    1.25104     .05874    21.30   0.000     1.135903    1.366178
                  39  |   1.289948   .0615238    20.97   0.000     1.169353    1.410542
                  40  |   1.384841   .0650512    21.29   0.000     1.257332    1.512349
                  41  |    1.45894   .0672978    21.68   0.000     1.327028    1.590852
                  42  |   1.537071   .0700341    21.95   0.000     1.399795    1.674346
                  43  |     1.5111   .0731805    20.65   0.000     1.367657    1.654543
                  44  |   1.549606   .0762956    20.31   0.000     1.400057    1.699155
                  45  |    1.61768   .0792152    20.42   0.000     1.462408    1.772952
                  46  |   1.619042   .0820926    19.72   0.000      1.45813    1.779954
                  47  |   1.645367   .0843419    19.51   0.000     1.480046    1.810687
                  48  |   1.702275   .0867333    19.63   0.000     1.532267    1.872283
                  49  |   1.709771   .0899707    19.00   0.000     1.533417    1.886125
                  50  |   1.746249   .0925116    18.88   0.000     1.564915    1.927583
                      |
              age_cat |
                   1  |   .2611119   .0174257    14.98   0.000     .2269554    .2952684
                   2  |   .2653907   .0193816    13.69   0.000     .2274003    .3033811
                   3  |   .2466146   .0216559    11.39   0.000     .2041663    .2890628
                   4  |   .2365024   .0239752     9.86   0.000      .189508    .2834968
                   5  |   .2304917   .0266128     8.66   0.000     .1783272    .2826561
                   6  |   .2169862   .0295442     7.34   0.000     .1590757    .2748966
                   7  |   .2275589   .0326147     6.98   0.000     .1636299    .2914878
                   8  |   .2171558   .0357395     6.08   0.000     .1471018    .2872098
                   9  |   .2121478   .0388802     5.46   0.000     .1359377    .2883578
                  10  |   .2005845   .0421189     4.76   0.000     .1180261    .2831429
                  11  |   .2042194   .0454521     4.49   0.000     .1151275    .2933113
                  12  |   .1986134   .0487718     4.07   0.000     .1030145    .2942122
                  13  |   .1901112    .052028     3.65   0.000     .0881299    .2920926
                  14  |    .192873   .0553937     3.48   0.000     .0842944    .3014515
                  15  |   .1909632   .0587492     3.25   0.001     .0758074     .306119
                  16  |   .1895908   .0621042     3.05   0.002     .0678588    .3113229
                  17  |   .1786255   .0656365     2.72   0.007     .0499696    .3072813
                  18  |   .1785364   .0690441     2.59   0.010     .0432012    .3138716
                  19  |   .1582421   .0727949     2.17   0.030     .0155549    .3009292
                  20  |   .1303939    .079522     1.64   0.101    -.0254791     .286267
                  25  |   .0990775   .0905913     1.09   0.274    -.0784928    .2766478
                  30  |   .1003373   .1187677     0.84   0.398    -.1324623    .3331369
                  40  |   .1303867   .1328097     0.98   0.326    -.1299371    .3907105
                  50  |   .1189222   .1454763     0.82   0.414    -.1662298    .4040741
                      |
                _cons |   7.516007   .0333581   225.31   0.000     7.450621    7.581393
----------------------+----------------------------------------------------------------
              sigma_u |  1.1577248
              sigma_e |  .53483858
                  rho |  .82411706   (fraction of variance due to u_i)
---------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnL + during_expat_H_lnL = 0

       F(  1, 14660) =    2.13
            Prob > F =    0.1446

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2320229857925955
key: p_value
value: .1446139958582553

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.2320                                         min =          1
     between = 0.1448                                         avg =        9.0
     overall = 0.1266                                         max =         25

                                                F(82,14660)       =     115.28
corr(u_i, Xb)  = 0.0232                         Prob > F          =     0.0000

                                         (Std. Err. adjusted for 14,661 clusters in id)
---------------------------------------------------------------------------------------
                      |               Robust
                 lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------------+----------------------------------------------------------------
              foreign |   .0616595   .0253896     2.43   0.015     .0118927    .1114264
      during_domestic |  -.0086731    .011933    -0.73   0.467    -.0320633    .0147172
       after_domestic |    -.04142   .0229738    -1.80   0.071    -.0864514    .0036115
         during_expat |   .1697724   .0528492     3.21   0.001     .0661813    .2733636
          after_expat |   .1692051   .0688873     2.46   0.014     .0341773    .3042328
during_domestic_H_lnL |   .0866121   .0151773     5.71   0.000     .0568627    .1163614
 after_domestic_H_lnL |    .180098    .028232     6.38   0.000     .1247597    .2354364
   during_expat_H_lnL |  -.0053362   .0618238    -0.09   0.931    -.1265186    .1158462
    after_expat_H_lnL |   .1447684   .0799298     1.81   0.070    -.0119041    .3014409
                      |
             ind_year |
                   2  |   .0970499   .0210924     4.60   0.000     .0557061    .1383937
                   3  |   .2849211   .0256377    11.11   0.000      .234668    .3351742
                   4  |    .480966   .0272772    17.63   0.000     .4274992    .5344328
                   5  |   .6434971   .0300758    21.40   0.000     .5845447    .7024495
                   6  |   .8282317   .0333304    24.85   0.000        .7629    .8935634
                   7  |   .9538477   .0359364    26.54   0.000     .8834079    1.024288
                   8  |   1.022545   .0386552    26.45   0.000      .946776    1.098314
                   9  |   1.145292   .0414346    27.64   0.000     1.064075    1.226509
                  10  |    1.25789   .0447186    28.13   0.000     1.170236    1.345544
                  11  |   1.321264   .0477924    27.65   0.000     1.227585    1.414943
                  12  |   1.348852   .0509923    26.45   0.000     1.248901    1.448803
                  13  |   1.393981   .0540675    25.78   0.000     1.288002     1.49996
                  14  |    1.43334   .0570914    25.11   0.000     1.321434    1.545247
                  15  |   1.502625    .060623    24.79   0.000     1.383796    1.621453
                  16  |   1.539823   .0632119    24.36   0.000     1.415919    1.663726
                  17  |   1.593237   .0665752    23.93   0.000     1.462741    1.723733
                  18  |   1.524331    .069743    21.86   0.000     1.387626    1.661036
                  19  |    1.54936    .072852    21.27   0.000     1.406561    1.692159
                  20  |   1.593388   .0759153    20.99   0.000     1.444585    1.742192
                  21  |   1.611832   .0787572    20.47   0.000     1.457458    1.766206
                  22  |   1.665376   .0814244    20.45   0.000     1.505774    1.824978
                  23  |   1.717425   .0840261    20.44   0.000     1.552724    1.882127
                  24  |    1.74822   .0869747    20.10   0.000     1.577739    1.918701
                  25  |   1.739135   .0895703    19.42   0.000     1.563566    1.914704
                  26  |   -.263033   .0472539    -5.57   0.000    -.3556565   -.1704094
                  27  |  -.1253405   .0446926    -2.80   0.005    -.2129436   -.0377374
                  28  |   .0443794   .0430014     1.03   0.302    -.0399087    .1286676
                  29  |   .2771917   .0428744     6.47   0.000     .1931526    .3612309
                  30  |   .4567507   .0429315    10.64   0.000     .3725997    .5409018
                  31  |   .6076868   .0441286    13.77   0.000     .5211892    .6941845
                  32  |   .7565628   .0455369    16.61   0.000     .6673048    .8458209
                  33  |   .8171777   .0470914    17.35   0.000     .7248726    .9094829
                  34  |    .970615   .0491597    19.74   0.000     .8742557    1.066974
                  35  |   1.059308   .0509605    20.79   0.000     .9594195    1.159197
                  36  |   1.108712   .0535367    20.71   0.000     1.003773     1.21365
                  37  |   1.171523   .0561208    20.88   0.000     1.061519    1.281527
                  38  |    1.25104     .05874    21.30   0.000     1.135903    1.366178
                  39  |   1.289948   .0615238    20.97   0.000     1.169353    1.410542
                  40  |   1.384841   .0650512    21.29   0.000     1.257332    1.512349
                  41  |    1.45894   .0672978    21.68   0.000     1.327028    1.590852
                  42  |   1.537071   .0700341    21.95   0.000     1.399795    1.674346
                  43  |     1.5111   .0731805    20.65   0.000     1.367657    1.654543
                  44  |   1.549606   .0762956    20.31   0.000     1.400057    1.699155
                  45  |    1.61768   .0792152    20.42   0.000     1.462408    1.772952
                  46  |   1.619042   .0820926    19.72   0.000      1.45813    1.779954
                  47  |   1.645367   .0843419    19.51   0.000     1.480046    1.810687
                  48  |   1.702275   .0867333    19.63   0.000     1.532267    1.872283
                  49  |   1.709771   .0899707    19.00   0.000     1.533417    1.886125
                  50  |   1.746249   .0925116    18.88   0.000     1.564915    1.927583
                      |
              age_cat |
                   1  |   .2611119   .0174257    14.98   0.000     .2269554    .2952684
                   2  |   .2653907   .0193816    13.69   0.000     .2274003    .3033811
                   3  |   .2466146   .0216559    11.39   0.000     .2041663    .2890628
                   4  |   .2365024   .0239752     9.86   0.000      .189508    .2834968
                   5  |   .2304917   .0266128     8.66   0.000     .1783272    .2826561
                   6  |   .2169862   .0295442     7.34   0.000     .1590757    .2748966
                   7  |   .2275589   .0326147     6.98   0.000     .1636299    .2914878
                   8  |   .2171558   .0357395     6.08   0.000     .1471018    .2872098
                   9  |   .2121478   .0388802     5.46   0.000     .1359377    .2883578
                  10  |   .2005845   .0421189     4.76   0.000     .1180261    .2831429
                  11  |   .2042194   .0454521     4.49   0.000     .1151275    .2933113
                  12  |   .1986134   .0487718     4.07   0.000     .1030145    .2942122
                  13  |   .1901112    .052028     3.65   0.000     .0881299    .2920926
                  14  |    .192873   .0553937     3.48   0.000     .0842944    .3014515
                  15  |   .1909632   .0587492     3.25   0.001     .0758074     .306119
                  16  |   .1895908   .0621042     3.05   0.002     .0678588    .3113229
                  17  |   .1786255   .0656365     2.72   0.007     .0499696    .3072813
                  18  |   .1785364   .0690441     2.59   0.010     .0432012    .3138716
                  19  |   .1582421   .0727949     2.17   0.030     .0155549    .3009292
                  20  |   .1303939    .079522     1.64   0.101    -.0254791     .286267
                  25  |   .0990775   .0905913     1.09   0.274    -.0784928    .2766478
                  30  |   .1003373   .1187677     0.84   0.398    -.1324623    .3331369
                  40  |   .1303867   .1328097     0.98   0.326    -.1299371    .3907105
                  50  |   .1189222   .1454763     0.82   0.414    -.1662298    .4040741
                      |
                _cons |   7.516007   .0333581   225.31   0.000     7.450621    7.581393
----------------------+----------------------------------------------------------------
              sigma_u |  1.1577248
              sigma_e |  .53483858
                  rho |  .82411706   (fraction of variance due to u_i)
---------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.2315                         Obs per group: min =         1
       between = 0.1403                                        avg =       9.0
       overall = 0.1234                                        max =        25

                                                F(82,14660)        =    111.43
corr(u_i, Xb)  = 0.0137                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0631157   .0254543     2.48   0.013      .013222    .1130094
       during_domestic |     .05938   .0118184     5.02   0.000     .0362144    .0825455
        after_domestic |   .1136404   .0214747     5.29   0.000     .0715473    .1557336
          during_expat |   .1890179   .0495452     3.82   0.000     .0919032    .2861327
           after_expat |   .2848454   .0614856     4.63   0.000     .1643259     .405365
during_domestic_H_lnKL |  -.0419685   .0152501    -2.75   0.006    -.0718605   -.0120765
 after_domestic_H_lnKL |  -.0809101   .0273336    -2.96   0.003    -.1344873   -.0273328
   during_expat_H_lnKL |  -.0396901    .059019    -0.67   0.501    -.1553748    .0759946
    after_expat_H_lnKL |  -.0264355   .0744951    -0.35   0.723    -.1724553    .1195843
                       |
              ind_year |
                    2  |   .0998659   .0210867     4.74   0.000     .0585333    .1411986
                    3  |   .2903157   .0256253    11.33   0.000     .2400869    .3405446
                    4  |   .4892006   .0272578    17.95   0.000     .4357719    .5426294
                    5  |   .6546335    .030045    21.79   0.000     .5957415    .7135254
                    6  |   .8419005   .0332901    25.29   0.000     .7766478    .9071532
                    7  |   .9702197   .0358835    27.04   0.000     .8998834    1.040556
                    8  |   1.041336   .0385822    26.99   0.000     .9657101    1.116962
                    9  |   1.166349   .0413475    28.21   0.000     1.085303    1.247395
                   10  |   1.281241    .044601    28.73   0.000     1.193818    1.368665
                   11  |   1.347195   .0476535    28.27   0.000     1.253788    1.440602
                   12  |   1.377324   .0508236    27.10   0.000     1.277704    1.476945
                   13  |   1.424813   .0538855    26.44   0.000      1.31919    1.530435
                   14  |   1.466456   .0568994    25.77   0.000     1.354926    1.577986
                   15  |   1.538506    .060407    25.47   0.000     1.420101    1.656911
                   16  |   1.577959   .0630113    25.04   0.000     1.454449    1.701469
                   17  |   1.634569   .0663793    24.62   0.000     1.504457    1.764681
                   18  |   1.568414   .0695386    22.55   0.000      1.43211    1.704719
                   19  |   1.596206   .0726447    21.97   0.000     1.453813    1.738598
                   20  |   1.642727   .0756932    21.70   0.000     1.494359    1.791096
                   21  |   1.663449     .07854    21.18   0.000     1.509501    1.817397
                   22  |   1.719313   .0811908    21.18   0.000     1.560169    1.878457
                   23  |   1.773259    .083823    21.15   0.000     1.608955    1.937563
                   24  |   1.806481    .086801    20.81   0.000     1.636341    1.976622
                   25  |   1.799667   .0893994    20.13   0.000     1.624433    1.974901
                   26  |  -.2646788   .0473074    -5.59   0.000    -.3574073   -.1719503
                   27  |  -.1241452   .0447302    -2.78   0.006     -.211822   -.0364684
                   28  |   .0481885   .0430334     1.12   0.263    -.0361624    .1325394
                   29  |   .2841951   .0428891     6.63   0.000      .200127    .3682631
                   30  |   .4664411   .0429199    10.87   0.000     .3823127    .5505695
                   31  |    .620248   .0441018    14.06   0.000     .5338029     .706693
                   32  |   .7717705   .0454905    16.97   0.000     .6826034    .8609375
                   33  |   .8347297    .047014    17.75   0.000     .7425763    .9268831
                   34  |   .9904654   .0490632    20.19   0.000     .8942954    1.086636
                   35  |    1.08135   .0508459    21.27   0.000     .9816856    1.181014
                   36  |   1.133425   .0533997    21.23   0.000     1.028754    1.238095
                   37  |   1.199199   .0559598    21.43   0.000      1.08951    1.308887
                   38  |   1.281487    .058556    21.88   0.000     1.166709    1.396264
                   39  |   1.323198    .061324    21.58   0.000     1.202995    1.443401
                   40  |   1.420561   .0648635    21.90   0.000      1.29342    1.547701
                   41  |   1.496867    .067078    22.32   0.000     1.365386    1.628348
                   42  |   1.577037   .0698024    22.59   0.000     1.440216    1.713859
                   43  |   1.553445   .0729378    21.30   0.000     1.410478    1.696413
                   44  |   1.594383   .0760569    20.96   0.000     1.445302    1.743464
                   45  |   1.664753   .0789556    21.08   0.000      1.50999    1.819516
                   46  |   1.668171   .0818516    20.38   0.000     1.507731     1.82861
                   47  |   1.696242   .0841086    20.17   0.000     1.531378    1.861105
                   48  |   1.755409   .0865086    20.29   0.000     1.585841    1.924977
                   49  |    1.76483   .0897173    19.67   0.000     1.588973    1.940688
                   50  |   1.803717   .0922615    19.55   0.000     1.622873    1.984562
                       |
               age_cat |
                    1  |   .2572682   .0174198    14.77   0.000     .2231232    .2914131
                    2  |   .2582051   .0193618    13.34   0.000     .2202535    .2961567
                    3  |   .2361318   .0216341    10.91   0.000     .1937262    .2785374
                    4  |   .2230179   .0239508     9.31   0.000     .1760713    .2699645
                    5  |   .2141984   .0265819     8.06   0.000     .1620945    .2663022
                    6  |   .1976972   .0295181     6.70   0.000     .1398379    .2555564
                    7  |     .20567   .0325681     6.32   0.000     .1418323    .2695076
                    8  |   .1926141   .0356844     5.40   0.000     .1226681      .26256
                    9  |   .1848197   .0388251     4.76   0.000     .1087176    .2609218
                   10  |    .170704   .0420254     4.06   0.000      .088329     .253079
                   11  |   .1717382   .0453484     3.79   0.000     .0828496    .2606269
                   12  |    .163517   .0486641     3.36   0.001     .0681292    .2589049
                   13  |   .1526673    .051923     2.94   0.003     .0508917    .2544429
                   14  |   .1527063    .055277     2.76   0.006     .0443565    .2610561
                   15  |   .1485591   .0586202     2.53   0.011     .0336561    .2634621
                   16  |   .1448411   .0619452     2.34   0.019     .0234207    .2662615
                   17  |   .1312253   .0654792     2.00   0.045     .0028778    .2595728
                   18  |   .1287241   .0689307     1.87   0.062    -.0063888    .2638369
                   19  |   .1061966   .0726763     1.46   0.144    -.0362581    .2486514
                   20  |   .0730677   .0794099     0.92   0.358    -.0825857    .2287211
                   25  |   .0355264   .0904823     0.39   0.695    -.1418302    .2128831
                   30  |   .0391914   .1188895     0.33   0.742    -.1938469    .2722298
                   40  |   .0734484   .1328781     0.55   0.580    -.1870094    .3339062
                   50  |   .0638637   .1454289     0.44   0.661    -.2211953    .3489227
                       |
                 _cons |   7.514761   .0333564   225.29   0.000     7.449378    7.580144
-----------------------+----------------------------------------------------------------
               sigma_u |  1.1600997
               sigma_e |  .53501919
                   rho |  .82461272   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnKL + during_expat_H_lnKL = 0

       F(  1, 14660) =    0.00
            Prob > F =    0.9698

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2315042190963938
key: p_value
value: .9698404609513512

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.2315                                         min =          1
     between = 0.1403                                         avg =        9.0
     overall = 0.1234                                         max =         25

                                                F(82,14660)       =     111.43
corr(u_i, Xb)  = 0.0137                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0631157   .0254543     2.48   0.013      .013222    .1130094
       during_domestic |     .05938   .0118184     5.02   0.000     .0362144    .0825455
        after_domestic |   .1136404   .0214747     5.29   0.000     .0715473    .1557336
          during_expat |   .1890179   .0495452     3.82   0.000     .0919032    .2861327
           after_expat |   .2848454   .0614856     4.63   0.000     .1643259     .405365
during_domestic_H_lnKL |  -.0419685   .0152501    -2.75   0.006    -.0718605   -.0120765
 after_domestic_H_lnKL |  -.0809101   .0273336    -2.96   0.003    -.1344873   -.0273328
   during_expat_H_lnKL |  -.0396901    .059019    -0.67   0.501    -.1553748    .0759946
    after_expat_H_lnKL |  -.0264355   .0744951    -0.35   0.723    -.1724553    .1195843
                       |
              ind_year |
                    2  |   .0998659   .0210867     4.74   0.000     .0585333    .1411986
                    3  |   .2903157   .0256253    11.33   0.000     .2400869    .3405446
                    4  |   .4892006   .0272578    17.95   0.000     .4357719    .5426294
                    5  |   .6546335    .030045    21.79   0.000     .5957415    .7135254
                    6  |   .8419005   .0332901    25.29   0.000     .7766478    .9071532
                    7  |   .9702197   .0358835    27.04   0.000     .8998834    1.040556
                    8  |   1.041336   .0385822    26.99   0.000     .9657101    1.116962
                    9  |   1.166349   .0413475    28.21   0.000     1.085303    1.247395
                   10  |   1.281241    .044601    28.73   0.000     1.193818    1.368665
                   11  |   1.347195   .0476535    28.27   0.000     1.253788    1.440602
                   12  |   1.377324   .0508236    27.10   0.000     1.277704    1.476945
                   13  |   1.424813   .0538855    26.44   0.000      1.31919    1.530435
                   14  |   1.466456   .0568994    25.77   0.000     1.354926    1.577986
                   15  |   1.538506    .060407    25.47   0.000     1.420101    1.656911
                   16  |   1.577959   .0630113    25.04   0.000     1.454449    1.701469
                   17  |   1.634569   .0663793    24.62   0.000     1.504457    1.764681
                   18  |   1.568414   .0695386    22.55   0.000      1.43211    1.704719
                   19  |   1.596206   .0726447    21.97   0.000     1.453813    1.738598
                   20  |   1.642727   .0756932    21.70   0.000     1.494359    1.791096
                   21  |   1.663449     .07854    21.18   0.000     1.509501    1.817397
                   22  |   1.719313   .0811908    21.18   0.000     1.560169    1.878457
                   23  |   1.773259    .083823    21.15   0.000     1.608955    1.937563
                   24  |   1.806481    .086801    20.81   0.000     1.636341    1.976622
                   25  |   1.799667   .0893994    20.13   0.000     1.624433    1.974901
                   26  |  -.2646788   .0473074    -5.59   0.000    -.3574073   -.1719503
                   27  |  -.1241452   .0447302    -2.78   0.006     -.211822   -.0364684
                   28  |   .0481885   .0430334     1.12   0.263    -.0361624    .1325394
                   29  |   .2841951   .0428891     6.63   0.000      .200127    .3682631
                   30  |   .4664411   .0429199    10.87   0.000     .3823127    .5505695
                   31  |    .620248   .0441018    14.06   0.000     .5338029     .706693
                   32  |   .7717705   .0454905    16.97   0.000     .6826034    .8609375
                   33  |   .8347297    .047014    17.75   0.000     .7425763    .9268831
                   34  |   .9904654   .0490632    20.19   0.000     .8942954    1.086636
                   35  |    1.08135   .0508459    21.27   0.000     .9816856    1.181014
                   36  |   1.133425   .0533997    21.23   0.000     1.028754    1.238095
                   37  |   1.199199   .0559598    21.43   0.000      1.08951    1.308887
                   38  |   1.281487    .058556    21.88   0.000     1.166709    1.396264
                   39  |   1.323198    .061324    21.58   0.000     1.202995    1.443401
                   40  |   1.420561   .0648635    21.90   0.000      1.29342    1.547701
                   41  |   1.496867    .067078    22.32   0.000     1.365386    1.628348
                   42  |   1.577037   .0698024    22.59   0.000     1.440216    1.713859
                   43  |   1.553445   .0729378    21.30   0.000     1.410478    1.696413
                   44  |   1.594383   .0760569    20.96   0.000     1.445302    1.743464
                   45  |   1.664753   .0789556    21.08   0.000      1.50999    1.819516
                   46  |   1.668171   .0818516    20.38   0.000     1.507731     1.82861
                   47  |   1.696242   .0841086    20.17   0.000     1.531378    1.861105
                   48  |   1.755409   .0865086    20.29   0.000     1.585841    1.924977
                   49  |    1.76483   .0897173    19.67   0.000     1.588973    1.940688
                   50  |   1.803717   .0922615    19.55   0.000     1.622873    1.984562
                       |
               age_cat |
                    1  |   .2572682   .0174198    14.77   0.000     .2231232    .2914131
                    2  |   .2582051   .0193618    13.34   0.000     .2202535    .2961567
                    3  |   .2361318   .0216341    10.91   0.000     .1937262    .2785374
                    4  |   .2230179   .0239508     9.31   0.000     .1760713    .2699645
                    5  |   .2141984   .0265819     8.06   0.000     .1620945    .2663022
                    6  |   .1976972   .0295181     6.70   0.000     .1398379    .2555564
                    7  |     .20567   .0325681     6.32   0.000     .1418323    .2695076
                    8  |   .1926141   .0356844     5.40   0.000     .1226681      .26256
                    9  |   .1848197   .0388251     4.76   0.000     .1087176    .2609218
                   10  |    .170704   .0420254     4.06   0.000      .088329     .253079
                   11  |   .1717382   .0453484     3.79   0.000     .0828496    .2606269
                   12  |    .163517   .0486641     3.36   0.001     .0681292    .2589049
                   13  |   .1526673    .051923     2.94   0.003     .0508917    .2544429
                   14  |   .1527063    .055277     2.76   0.006     .0443565    .2610561
                   15  |   .1485591   .0586202     2.53   0.011     .0336561    .2634621
                   16  |   .1448411   .0619452     2.34   0.019     .0234207    .2662615
                   17  |   .1312253   .0654792     2.00   0.045     .0028778    .2595728
                   18  |   .1287241   .0689307     1.87   0.062    -.0063888    .2638369
                   19  |   .1061966   .0726763     1.46   0.144    -.0362581    .2486514
                   20  |   .0730677   .0794099     0.92   0.358    -.0825857    .2287211
                   25  |   .0355264   .0904823     0.39   0.695    -.1418302    .2128831
                   30  |   .0391914   .1188895     0.33   0.742    -.1938469    .2722298
                   40  |   .0734484   .1328781     0.55   0.580    -.1870094    .3339062
                   50  |   .0638637   .1454289     0.44   0.661    -.2211953    .3489227
                       |
                 _cons |   7.514761   .0333564   225.29   0.000     7.449378    7.580144
-----------------------+----------------------------------------------------------------
               sigma_u |  1.1600997
               sigma_e |  .53501919
                   rho |  .82461272   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.2328                         Obs per group: min =         1
       between = 0.1295                                        avg =       9.0
       overall = 0.1130                                        max =        25

                                                F(82,14660)        =    113.76
corr(u_i, Xb)  = -0.0056                        Prob > F           =    0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0619991   .0253755     2.44   0.015       .01226    .1117382
       during_domestic |   .1217859   .0121529    10.02   0.000     .0979648     .145607
        after_domestic |   .2019809   .0217829     9.27   0.000     .1592837    .2446781
          during_expat |   .2911438     .04421     6.59   0.000     .2044867    .3778009
           after_expat |    .418469   .0561819     7.45   0.000     .3083453    .5285926
during_domestic_H_lnQL |  -.1474495   .0153679    -9.59   0.000    -.1775724   -.1173266
 after_domestic_H_lnQL |  -.2291131   .0272899    -8.40   0.000    -.2826046   -.1756215
   during_expat_H_lnQL |   -.218193   .0558147    -3.91   0.000    -.3275968   -.1087892
    after_expat_H_lnQL |  -.2633576   .0713199    -3.69   0.000    -.4031535   -.1235617
                       |
              ind_year |
                    2  |    .098901   .0210873     4.69   0.000     .0575671    .1402348
                    3  |    .289045   .0256353    11.28   0.000     .2387965    .3392934
                    4  |   .4876143   .0272767    17.88   0.000     .4341487      .54108
                    5  |   .6533227   .0300545    21.74   0.000      .594412    .7122334
                    6  |   .8403753   .0333084    25.23   0.000     .7750867    .9056639
                    7  |   .9689942   .0359028    26.99   0.000     .8986201    1.039368
                    8  |   1.040479   .0386037    26.95   0.000     .9648111    1.116147
                    9  |    1.16486   .0413799    28.15   0.000      1.08375    1.245969
                   10  |   1.279896   .0446419    28.67   0.000     1.192392      1.3674
                   11  |    1.34603   .0476997    28.22   0.000     1.252533    1.439528
                   12  |   1.376517    .050876    27.06   0.000     1.276793     1.47624
                   13  |   1.424055   .0539473    26.40   0.000     1.318312    1.529799
                   14  |   1.466266   .0569631    25.74   0.000     1.354611    1.577921
                   15  |   1.539013   .0604708    25.45   0.000     1.420483    1.657544
                   16  |    1.57902   .0630826    25.03   0.000      1.45537     1.70267
                   17  |    1.63662   .0664505    24.63   0.000     1.506369    1.766871
                   18  |   1.571506   .0696042    22.58   0.000     1.435073    1.707939
                   19  |   1.600281   .0727157    22.01   0.000     1.457749    1.742813
                   20  |   1.647706   .0757745    21.74   0.000     1.499179    1.796234
                   21  |    1.66945    .078628    21.23   0.000     1.515329    1.823571
                   22  |   1.726062   .0812803    21.24   0.000     1.566742    1.885381
                   23  |   1.781063   .0839097    21.23   0.000      1.61659    1.945537
                   24  |   1.815617   .0868957    20.89   0.000     1.645291    1.985944
                   25  |   1.810226   .0894987    20.23   0.000     1.634798    1.985655
                   26  |  -.2625826   .0472689    -5.56   0.000    -.3552355   -.1699296
                   27  |   -.123221    .044685    -2.76   0.006    -.2108093   -.0356327
                   28  |   .0486676   .0429823     1.13   0.258    -.0355832    .1329184
                   29  |   .2851016   .0428413     6.65   0.000     .2011272     .369076
                   30  |   .4668943   .0428704    10.89   0.000     .3828629    .5509256
                   31  |   .6203111   .0440634    14.08   0.000     .5339413    .7066808
                   32  |   .7712579   .0454631    16.96   0.000     .6821446    .8603713
                   33  |   .8337484   .0469998    17.74   0.000      .741623    .9258739
                   34  |   .9891136   .0490522    20.16   0.000     .8929651    1.085262
                   35  |   1.079442   .0508528    21.23   0.000     .9797638     1.17912
                   36  |   1.131722   .0534175    21.19   0.000     1.027017    1.236427
                   37  |   1.198133   .0559817    21.40   0.000     1.088402    1.307864
                   38  |   1.280939   .0585735    21.87   0.000     1.166127     1.39575
                   39  |    1.32315   .0613505    21.57   0.000     1.202895    1.443404
                   40  |   1.421069   .0648906    21.90   0.000     1.293875    1.548263
                   41  |   1.498295   .0671087    22.33   0.000     1.366753    1.629836
                   42  |   1.579286   .0698353    22.61   0.000       1.4424    1.716172
                   43  |   1.556558   .0729855    21.33   0.000     1.413498    1.699619
                   44  |   1.598403   .0761127    21.00   0.000     1.449212    1.747593
                   45  |   1.669801   .0790169    21.13   0.000     1.514918    1.824684
                   46  |   1.674259   .0819015    20.44   0.000     1.513721    1.834796
                   47  |   1.702933   .0841658    20.23   0.000     1.537957    1.867909
                   48  |   1.762957   .0865714    20.36   0.000     1.593266    1.932648
                   49  |   1.773667   .0897932    19.75   0.000     1.597661    1.949673
                   50  |   1.813961   .0923327    19.65   0.000     1.632978    1.994945
                       |
               age_cat |
                    1  |   .2552348   .0173725    14.69   0.000     .2211826    .2892871
                    2  |   .2554739   .0193108    13.23   0.000     .2176224    .2933254
                    3  |    .232789    .021581    10.79   0.000     .1904874    .2750905
                    4  |   .2191886   .0238951     9.17   0.000     .1723511    .2660261
                    5  |   .2099261   .0265315     7.91   0.000      .157921    .2619313
                    6  |   .1930367   .0294713     6.55   0.000     .1352693    .2508041
                    7  |   .2005223   .0325232     6.17   0.000     .1367727    .2642718
                    8  |   .1871911   .0356541     5.25   0.000     .1173045    .2570777
                    9  |   .1790799   .0388069     4.61   0.000     .1030134    .2551463
                   10  |   .1647005   .0420162     3.92   0.000     .0823435    .2470574
                   11  |   .1651843   .0453463     3.64   0.000     .0762999    .2540688
                   12  |   .1565104   .0486692     3.22   0.001     .0611127    .2519081
                   13  |   .1451536   .0519404     2.79   0.005     .0433438    .2469633
                   14  |    .144681   .0553102     2.62   0.009     .0362661    .2530959
                   15  |    .139686   .0586676     2.38   0.017     .0246902    .2546818
                   16  |   .1352341   .0619973     2.18   0.029     .0137115    .2567567
                   17  |   .1208775   .0655448     1.84   0.065    -.0075985    .2493534
                   18  |   .1178596    .068995     1.71   0.088    -.0173793    .2530984
                   19  |   .0946995   .0727503     1.30   0.193    -.0479002    .2372991
                   20  |   .0595945   .0795076     0.75   0.454    -.0962505    .2154394
                   25  |   .0198796   .0906509     0.22   0.826    -.1578075    .1975668
                   30  |   .0259634   .1190495     0.22   0.827    -.2073887    .2593154
                   40  |   .0627122   .1330963     0.47   0.638    -.1981733    .3235977
                   50  |   .0531884   .1456951     0.37   0.715    -.2323924    .3387692
                       |
                 _cons |   7.522526   .0333938   225.27   0.000      7.45707    7.587982
-----------------------+----------------------------------------------------------------
               sigma_u |  1.1668839
               sigma_e |  .53457049
                   rho |  .82653367   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnQL + during_expat_H_lnQL = 0

       F(  1, 14660) =    1.53
            Prob > F =    0.2167

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2327926762904458
key: p_value
value: .2166665442423128

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.2328                                         min =          1
     between = 0.1295                                         avg =        9.0
     overall = 0.1130                                         max =         25

                                                F(82,14660)       =     113.76
corr(u_i, Xb)  = -0.0056                        Prob > F          =     0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0619991   .0253755     2.44   0.015       .01226    .1117382
       during_domestic |   .1217859   .0121529    10.02   0.000     .0979648     .145607
        after_domestic |   .2019809   .0217829     9.27   0.000     .1592837    .2446781
          during_expat |   .2911438     .04421     6.59   0.000     .2044867    .3778009
           after_expat |    .418469   .0561819     7.45   0.000     .3083453    .5285926
during_domestic_H_lnQL |  -.1474495   .0153679    -9.59   0.000    -.1775724   -.1173266
 after_domestic_H_lnQL |  -.2291131   .0272899    -8.40   0.000    -.2826046   -.1756215
   during_expat_H_lnQL |   -.218193   .0558147    -3.91   0.000    -.3275968   -.1087892
    after_expat_H_lnQL |  -.2633576   .0713199    -3.69   0.000    -.4031535   -.1235617
                       |
              ind_year |
                    2  |    .098901   .0210873     4.69   0.000     .0575671    .1402348
                    3  |    .289045   .0256353    11.28   0.000     .2387965    .3392934
                    4  |   .4876143   .0272767    17.88   0.000     .4341487      .54108
                    5  |   .6533227   .0300545    21.74   0.000      .594412    .7122334
                    6  |   .8403753   .0333084    25.23   0.000     .7750867    .9056639
                    7  |   .9689942   .0359028    26.99   0.000     .8986201    1.039368
                    8  |   1.040479   .0386037    26.95   0.000     .9648111    1.116147
                    9  |    1.16486   .0413799    28.15   0.000      1.08375    1.245969
                   10  |   1.279896   .0446419    28.67   0.000     1.192392      1.3674
                   11  |    1.34603   .0476997    28.22   0.000     1.252533    1.439528
                   12  |   1.376517    .050876    27.06   0.000     1.276793     1.47624
                   13  |   1.424055   .0539473    26.40   0.000     1.318312    1.529799
                   14  |   1.466266   .0569631    25.74   0.000     1.354611    1.577921
                   15  |   1.539013   .0604708    25.45   0.000     1.420483    1.657544
                   16  |    1.57902   .0630826    25.03   0.000      1.45537     1.70267
                   17  |    1.63662   .0664505    24.63   0.000     1.506369    1.766871
                   18  |   1.571506   .0696042    22.58   0.000     1.435073    1.707939
                   19  |   1.600281   .0727157    22.01   0.000     1.457749    1.742813
                   20  |   1.647706   .0757745    21.74   0.000     1.499179    1.796234
                   21  |    1.66945    .078628    21.23   0.000     1.515329    1.823571
                   22  |   1.726062   .0812803    21.24   0.000     1.566742    1.885381
                   23  |   1.781063   .0839097    21.23   0.000      1.61659    1.945537
                   24  |   1.815617   .0868957    20.89   0.000     1.645291    1.985944
                   25  |   1.810226   .0894987    20.23   0.000     1.634798    1.985655
                   26  |  -.2625826   .0472689    -5.56   0.000    -.3552355   -.1699296
                   27  |   -.123221    .044685    -2.76   0.006    -.2108093   -.0356327
                   28  |   .0486676   .0429823     1.13   0.258    -.0355832    .1329184
                   29  |   .2851016   .0428413     6.65   0.000     .2011272     .369076
                   30  |   .4668943   .0428704    10.89   0.000     .3828629    .5509256
                   31  |   .6203111   .0440634    14.08   0.000     .5339413    .7066808
                   32  |   .7712579   .0454631    16.96   0.000     .6821446    .8603713
                   33  |   .8337484   .0469998    17.74   0.000      .741623    .9258739
                   34  |   .9891136   .0490522    20.16   0.000     .8929651    1.085262
                   35  |   1.079442   .0508528    21.23   0.000     .9797638     1.17912
                   36  |   1.131722   .0534175    21.19   0.000     1.027017    1.236427
                   37  |   1.198133   .0559817    21.40   0.000     1.088402    1.307864
                   38  |   1.280939   .0585735    21.87   0.000     1.166127     1.39575
                   39  |    1.32315   .0613505    21.57   0.000     1.202895    1.443404
                   40  |   1.421069   .0648906    21.90   0.000     1.293875    1.548263
                   41  |   1.498295   .0671087    22.33   0.000     1.366753    1.629836
                   42  |   1.579286   .0698353    22.61   0.000       1.4424    1.716172
                   43  |   1.556558   .0729855    21.33   0.000     1.413498    1.699619
                   44  |   1.598403   .0761127    21.00   0.000     1.449212    1.747593
                   45  |   1.669801   .0790169    21.13   0.000     1.514918    1.824684
                   46  |   1.674259   .0819015    20.44   0.000     1.513721    1.834796
                   47  |   1.702933   .0841658    20.23   0.000     1.537957    1.867909
                   48  |   1.762957   .0865714    20.36   0.000     1.593266    1.932648
                   49  |   1.773667   .0897932    19.75   0.000     1.597661    1.949673
                   50  |   1.813961   .0923327    19.65   0.000     1.632978    1.994945
                       |
               age_cat |
                    1  |   .2552348   .0173725    14.69   0.000     .2211826    .2892871
                    2  |   .2554739   .0193108    13.23   0.000     .2176224    .2933254
                    3  |    .232789    .021581    10.79   0.000     .1904874    .2750905
                    4  |   .2191886   .0238951     9.17   0.000     .1723511    .2660261
                    5  |   .2099261   .0265315     7.91   0.000      .157921    .2619313
                    6  |   .1930367   .0294713     6.55   0.000     .1352693    .2508041
                    7  |   .2005223   .0325232     6.17   0.000     .1367727    .2642718
                    8  |   .1871911   .0356541     5.25   0.000     .1173045    .2570777
                    9  |   .1790799   .0388069     4.61   0.000     .1030134    .2551463
                   10  |   .1647005   .0420162     3.92   0.000     .0823435    .2470574
                   11  |   .1651843   .0453463     3.64   0.000     .0762999    .2540688
                   12  |   .1565104   .0486692     3.22   0.001     .0611127    .2519081
                   13  |   .1451536   .0519404     2.79   0.005     .0433438    .2469633
                   14  |    .144681   .0553102     2.62   0.009     .0362661    .2530959
                   15  |    .139686   .0586676     2.38   0.017     .0246902    .2546818
                   16  |   .1352341   .0619973     2.18   0.029     .0137115    .2567567
                   17  |   .1208775   .0655448     1.84   0.065    -.0075985    .2493534
                   18  |   .1178596    .068995     1.71   0.088    -.0173793    .2530984
                   19  |   .0946995   .0727503     1.30   0.193    -.0479002    .2372991
                   20  |   .0595945   .0795076     0.75   0.454    -.0962505    .2154394
                   25  |   .0198796   .0906509     0.22   0.826    -.1578075    .1975668
                   30  |   .0259634   .1190495     0.22   0.827    -.2073887    .2593154
                   40  |   .0627122   .1330963     0.47   0.638    -.1981733    .3235977
                   50  |   .0531884   .1456951     0.37   0.715    -.2323924    .3387692
                       |
                 _cons |   7.522526   .0333938   225.27   0.000      7.45707    7.587982
-----------------------+----------------------------------------------------------------
               sigma_u |  1.1668839
               sigma_e |  .53457049
                   rho |  .82653367   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.2314                         Obs per group: min =         1
       between = 0.1421                                        avg =       9.0
       overall = 0.1249                                        max =        25

                                                F(82,14660)        =    111.89
corr(u_i, Xb)  = 0.0162                         Prob > F           =    0.0000

                                              (Std. Err. adjusted for 14,661 clusters in id)
--------------------------------------------------------------------------------------------
                           |               Robust
                      lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------------------+----------------------------------------------------------------
                   foreign |   .0632986   .0254585     2.49   0.013     .0133968    .1132004
           during_domestic |   .0479342   .0101332     4.73   0.000     .0280718    .0677965
            after_domestic |   .0565021   .0194373     2.91   0.004     .0184026    .0946017
              during_expat |   .1974404   .0551567     3.58   0.000     .0893263    .3055546
               after_expat |   .2404335   .0714707     3.36   0.001     .1003419    .3805251
during_domestic_H_exporter |  -.0265044   .0148931    -1.78   0.075    -.0556967     .002688
 after_domestic_H_exporter |   .0140903   .0270171     0.52   0.602    -.0388666    .0670472
   during_expat_H_exporter |   -.046647   .0634246    -0.74   0.462    -.1709671    .0776732
    after_expat_H_exporter |   .0393357   .0819775     0.48   0.631    -.1213505    .2000218
                           |
                  ind_year |
                        2  |   .0998753   .0210894     4.74   0.000     .0585374    .1412133
                        3  |   .2903907   .0256227    11.33   0.000     .2401671    .3406143
                        4  |   .4893121   .0272662    17.95   0.000     .4358668    .5427573
                        5  |   .6544327   .0300624    21.77   0.000     .5955065    .7133588
                        6  |   .8417478   .0333205    25.26   0.000     .7764355    .9070601
                        7  |   .9699268   .0359252    27.00   0.000      .899509    1.040345
                        8  |   1.040877   .0386474    26.93   0.000     .9651237    1.116631
                        9  |    1.16587   .0414439    28.13   0.000     1.084635    1.247105
                       10  |   1.280622   .0447074    28.64   0.000     1.192989    1.368254
                       11  |   1.346322   .0477767    28.18   0.000     1.252674    1.439971
                       12  |    1.37611   .0509754    27.00   0.000     1.276192    1.476028
                       13  |   1.423251   .0540625    26.33   0.000     1.317282     1.52922
                       14  |   1.464461   .0571052    25.64   0.000     1.352528    1.576395
                       15  |   1.535886   .0606192    25.34   0.000     1.417065    1.654707
                       16  |   1.574844   .0632298    24.91   0.000     1.450906    1.698783
                       17  |   1.630649   .0665964    24.49   0.000     1.500112    1.761186
                       18  |   1.563763   .0697704    22.41   0.000     1.427004    1.700522
                       19  |   1.590866   .0728837    21.83   0.000     1.448004    1.733727
                       20  |   1.636811   .0759527    21.55   0.000     1.487934    1.785688
                       21  |   1.657087   .0787904    21.03   0.000     1.502647    1.811526
                       22  |   1.712463   .0814392    21.03   0.000     1.552832    1.872094
                       23  |   1.765941   .0840737    21.00   0.000     1.601146    1.930736
                       24  |   1.798547   .0870407    20.66   0.000     1.627936    1.969158
                       25  |   1.791195    .089647    19.98   0.000     1.615476    1.966915
                       26  |  -.2660007   .0473674    -5.62   0.000    -.3588469   -.1731545
                       27  |  -.1251917   .0447644    -2.80   0.005    -.2129356   -.0374479
                       28  |   .0471126   .0430426     1.09   0.274    -.0372564    .1314816
                       29  |   .2828945   .0428836     6.60   0.000     .1988372    .3669518
                       30  |   .4651914   .0429138    10.84   0.000     .3810749    .5493079
                       31  |   .6188193   .0440971    14.03   0.000     .5323834    .7052552
                       32  |   .7703197   .0454956    16.93   0.000     .6811426    .8594968
                       33  |   .8331875    .047025    17.72   0.000     .7410125    .9253624
                       34  |    .988857   .0490861    20.15   0.000      .892642    1.085072
                       35  |   1.079689   .0509101    21.21   0.000     .9798985    1.179479
                       36  |   1.131713     .05349    21.16   0.000     1.026866     1.23656
                       37  |   1.197096   .0560747    21.35   0.000     1.087183     1.30701
                       38  |   1.279318   .0586977    21.80   0.000     1.164263    1.394372
                       39  |   1.320534   .0614549    21.49   0.000     1.200075    1.440993
                       40  |   1.417489   .0650185    21.80   0.000     1.290045    1.544934
                       41  |   1.493363   .0672584    22.20   0.000     1.361528    1.625198
                       42  |   1.573346   .0700018    22.48   0.000     1.436134    1.710559
                       43  |   1.549386   .0731643    21.18   0.000     1.405975    1.692797
                       44  |   1.589889   .0763229    20.83   0.000     1.440287    1.739492
                       45  |   1.659781   .0792341    20.95   0.000     1.504472     1.81509
                       46  |   1.662767   .0821297    20.25   0.000     1.501782    1.823751
                       47  |   1.690308    .084392    20.03   0.000     1.524889    1.855727
                       48  |   1.748866   .0868068    20.15   0.000     1.578713    1.919018
                       49  |   1.757778   .0900629    19.52   0.000     1.581243    1.934313
                       50  |   1.796274   .0925977    19.40   0.000     1.614771    1.977777
                           |
                   age_cat |
                        1  |   .2574795   .0174252    14.78   0.000      .223324     .291635
                        2  |   .2587717    .019391    13.34   0.000     .2207629    .2967806
                        3  |   .2371124   .0216892    10.93   0.000     .1945988    .2796259
                        4  |   .2243563   .0240334     9.34   0.000     .1772479    .2714647
                        5  |   .2158696   .0266883     8.09   0.000     .1635571    .2681821
                        6  |   .1997626   .0296482     6.74   0.000     .1416485    .2578768
                        7  |   .2079599   .0327195     6.36   0.000     .1438254    .2720943
                        8  |   .1951448   .0358502     5.44   0.000      .124874    .2654157
                        9  |   .1877163   .0390166     4.81   0.000      .111239    .2641937
                       10  |   .1737727   .0422508     4.11   0.000     .0909558    .2565897
                       11  |   .1751397   .0455893     3.84   0.000     .0857789    .2645006
                       12  |   .1672854    .048899     3.42   0.001     .0714372    .2631335
                       13  |   .1568216   .0521861     3.01   0.003     .0545302    .2591131
                       14  |   .1572942   .0555731     2.83   0.005      .048364    .2662244
                       15  |   .1535474   .0589315     2.61   0.009     .0380343    .2690606
                       16  |   .1502604   .0622886     2.41   0.016     .0281668     .272354
                       17  |   .1371772   .0658063     2.08   0.037     .0081886    .2661659
                       18  |   .1352653   .0692361     1.95   0.051    -.0004462    .2709768
                       19  |   .1131464   .0729745     1.55   0.121    -.0298929    .2561856
                       20  |    .081193   .0797136     1.02   0.308    -.0750556    .2374416
                       25  |   .0451659   .0908218     0.50   0.619    -.1328563    .2231881
                       30  |   .0480165   .1191529     0.40   0.687    -.1855381    .2815711
                       40  |   .0813519   .1328046     0.61   0.540    -.1789618    .3416655
                       50  |    .071564   .1452303     0.49   0.622    -.2131057    .3562336
                           |
                     _cons |   7.514007   .0333672   225.19   0.000     7.448603    7.579411
---------------------------+----------------------------------------------------------------
                   sigma_u |  1.1589897
                   sigma_e |  .53504813
                       rho |  .82431999   (fraction of variance due to u_i)
--------------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_exporter + during_expat_H_exporter = 0

       F(  1, 14660) =    0.10
            Prob > F =    0.7548

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2314210848088397
key: p_value
value: .7548123478276441

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.2314                                         min =          1
     between = 0.1421                                         avg =        9.0
     overall = 0.1249                                         max =         25

                                                F(82,14660)       =     111.89
corr(u_i, Xb)  = 0.0162                         Prob > F          =     0.0000

                                              (Std. Err. adjusted for 14,661 clusters in id)
--------------------------------------------------------------------------------------------
                           |               Robust
                      lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------------------+----------------------------------------------------------------
                   foreign |   .0632986   .0254585     2.49   0.013     .0133968    .1132004
           during_domestic |   .0479342   .0101332     4.73   0.000     .0280718    .0677965
            after_domestic |   .0565021   .0194373     2.91   0.004     .0184026    .0946017
              during_expat |   .1974404   .0551567     3.58   0.000     .0893263    .3055546
               after_expat |   .2404335   .0714707     3.36   0.001     .1003419    .3805251
during_domestic_H_exporter |  -.0265044   .0148931    -1.78   0.075    -.0556967     .002688
 after_domestic_H_exporter |   .0140903   .0270171     0.52   0.602    -.0388666    .0670472
   during_expat_H_exporter |   -.046647   .0634246    -0.74   0.462    -.1709671    .0776732
    after_expat_H_exporter |   .0393357   .0819775     0.48   0.631    -.1213505    .2000218
                           |
                  ind_year |
                        2  |   .0998753   .0210894     4.74   0.000     .0585374    .1412133
                        3  |   .2903907   .0256227    11.33   0.000     .2401671    .3406143
                        4  |   .4893121   .0272662    17.95   0.000     .4358668    .5427573
                        5  |   .6544327   .0300624    21.77   0.000     .5955065    .7133588
                        6  |   .8417478   .0333205    25.26   0.000     .7764355    .9070601
                        7  |   .9699268   .0359252    27.00   0.000      .899509    1.040345
                        8  |   1.040877   .0386474    26.93   0.000     .9651237    1.116631
                        9  |    1.16587   .0414439    28.13   0.000     1.084635    1.247105
                       10  |   1.280622   .0447074    28.64   0.000     1.192989    1.368254
                       11  |   1.346322   .0477767    28.18   0.000     1.252674    1.439971
                       12  |    1.37611   .0509754    27.00   0.000     1.276192    1.476028
                       13  |   1.423251   .0540625    26.33   0.000     1.317282     1.52922
                       14  |   1.464461   .0571052    25.64   0.000     1.352528    1.576395
                       15  |   1.535886   .0606192    25.34   0.000     1.417065    1.654707
                       16  |   1.574844   .0632298    24.91   0.000     1.450906    1.698783
                       17  |   1.630649   .0665964    24.49   0.000     1.500112    1.761186
                       18  |   1.563763   .0697704    22.41   0.000     1.427004    1.700522
                       19  |   1.590866   .0728837    21.83   0.000     1.448004    1.733727
                       20  |   1.636811   .0759527    21.55   0.000     1.487934    1.785688
                       21  |   1.657087   .0787904    21.03   0.000     1.502647    1.811526
                       22  |   1.712463   .0814392    21.03   0.000     1.552832    1.872094
                       23  |   1.765941   .0840737    21.00   0.000     1.601146    1.930736
                       24  |   1.798547   .0870407    20.66   0.000     1.627936    1.969158
                       25  |   1.791195    .089647    19.98   0.000     1.615476    1.966915
                       26  |  -.2660007   .0473674    -5.62   0.000    -.3588469   -.1731545
                       27  |  -.1251917   .0447644    -2.80   0.005    -.2129356   -.0374479
                       28  |   .0471126   .0430426     1.09   0.274    -.0372564    .1314816
                       29  |   .2828945   .0428836     6.60   0.000     .1988372    .3669518
                       30  |   .4651914   .0429138    10.84   0.000     .3810749    .5493079
                       31  |   .6188193   .0440971    14.03   0.000     .5323834    .7052552
                       32  |   .7703197   .0454956    16.93   0.000     .6811426    .8594968
                       33  |   .8331875    .047025    17.72   0.000     .7410125    .9253624
                       34  |    .988857   .0490861    20.15   0.000      .892642    1.085072
                       35  |   1.079689   .0509101    21.21   0.000     .9798985    1.179479
                       36  |   1.131713     .05349    21.16   0.000     1.026866     1.23656
                       37  |   1.197096   .0560747    21.35   0.000     1.087183     1.30701
                       38  |   1.279318   .0586977    21.80   0.000     1.164263    1.394372
                       39  |   1.320534   .0614549    21.49   0.000     1.200075    1.440993
                       40  |   1.417489   .0650185    21.80   0.000     1.290045    1.544934
                       41  |   1.493363   .0672584    22.20   0.000     1.361528    1.625198
                       42  |   1.573346   .0700018    22.48   0.000     1.436134    1.710559
                       43  |   1.549386   .0731643    21.18   0.000     1.405975    1.692797
                       44  |   1.589889   .0763229    20.83   0.000     1.440287    1.739492
                       45  |   1.659781   .0792341    20.95   0.000     1.504472     1.81509
                       46  |   1.662767   .0821297    20.25   0.000     1.501782    1.823751
                       47  |   1.690308    .084392    20.03   0.000     1.524889    1.855727
                       48  |   1.748866   .0868068    20.15   0.000     1.578713    1.919018
                       49  |   1.757778   .0900629    19.52   0.000     1.581243    1.934313
                       50  |   1.796274   .0925977    19.40   0.000     1.614771    1.977777
                           |
                   age_cat |
                        1  |   .2574795   .0174252    14.78   0.000      .223324     .291635
                        2  |   .2587717    .019391    13.34   0.000     .2207629    .2967806
                        3  |   .2371124   .0216892    10.93   0.000     .1945988    .2796259
                        4  |   .2243563   .0240334     9.34   0.000     .1772479    .2714647
                        5  |   .2158696   .0266883     8.09   0.000     .1635571    .2681821
                        6  |   .1997626   .0296482     6.74   0.000     .1416485    .2578768
                        7  |   .2079599   .0327195     6.36   0.000     .1438254    .2720943
                        8  |   .1951448   .0358502     5.44   0.000      .124874    .2654157
                        9  |   .1877163   .0390166     4.81   0.000      .111239    .2641937
                       10  |   .1737727   .0422508     4.11   0.000     .0909558    .2565897
                       11  |   .1751397   .0455893     3.84   0.000     .0857789    .2645006
                       12  |   .1672854    .048899     3.42   0.001     .0714372    .2631335
                       13  |   .1568216   .0521861     3.01   0.003     .0545302    .2591131
                       14  |   .1572942   .0555731     2.83   0.005      .048364    .2662244
                       15  |   .1535474   .0589315     2.61   0.009     .0380343    .2690606
                       16  |   .1502604   .0622886     2.41   0.016     .0281668     .272354
                       17  |   .1371772   .0658063     2.08   0.037     .0081886    .2661659
                       18  |   .1352653   .0692361     1.95   0.051    -.0004462    .2709768
                       19  |   .1131464   .0729745     1.55   0.121    -.0298929    .2561856
                       20  |    .081193   .0797136     1.02   0.308    -.0750556    .2374416
                       25  |   .0451659   .0908218     0.50   0.619    -.1328563    .2231881
                       30  |   .0480165   .1191529     0.40   0.687    -.1855381    .2815711
                       40  |   .0813519   .1328046     0.61   0.540    -.1789618    .3416655
                       50  |    .071564   .1452303     0.49   0.622    -.2131057    .3562336
                           |
                     _cons |   7.514007   .0333672   225.19   0.000     7.448603    7.579411
---------------------------+----------------------------------------------------------------
                   sigma_u |  1.1589897
                   sigma_e |  .53504813
                       rho |  .82431999   (fraction of variance due to u_i)
--------------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.2314                         Obs per group: min =         1
       between = 0.1425                                        avg =       9.0
       overall = 0.1250                                        max =        25

                                                F(82,14660)        =    112.25
corr(u_i, Xb)  = 0.0172                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0636306   .0254802     2.50   0.013     .0136861     .113575
       during_domestic |   .0149516   .0124294     1.20   0.229    -.0094115    .0393148
        after_domestic |   .0493384   .0216938     2.27   0.023     .0068157     .091861
          during_expat |   .1394818   .0424662     3.28   0.001     .0562426    .2227209
           after_expat |   .2322619   .0550956     4.22   0.000     .1242675    .3402562
during_domestic_H_slow |   .0355465     .01565     2.27   0.023     .0048705    .0662226
 after_domestic_H_slow |   .0296934     .02751     1.08   0.280    -.0242296    .0836164
   during_expat_H_slow |   .0474718   .0557396     0.85   0.394    -.0617849    .1567285
    after_expat_H_slow |   .0701318   .0714181     0.98   0.326    -.0698567    .2101203
                       |
              ind_year |
                    2  |   .0993861   .0210939     4.71   0.000     .0580395    .1407327
                    3  |   .2894101   .0256266    11.29   0.000     .2391787    .3396415
                    4  |   .4877871   .0272567    17.90   0.000     .4343606    .5412136
                    5  |   .6523943   .0300579    21.70   0.000     .5934771    .7113114
                    6  |   .8392529   .0333187    25.19   0.000     .7739441    .9045618
                    7  |   .9669133   .0359298    26.91   0.000     .8964864     1.03734
                    8  |   1.037369   .0386385    26.85   0.000     .9616324    1.113105
                    9  |    1.16213   .0414011    28.07   0.000     1.080978    1.243281
                   10  |   1.276492   .0446598    28.58   0.000     1.188953    1.364031
                   11  |   1.341825   .0477215    28.12   0.000     1.248285    1.435365
                   12  |    1.37126   .0508795    26.95   0.000      1.27153    1.470991
                   13  |   1.418008   .0539705    26.27   0.000     1.312219    1.523797
                   14  |   1.458872   .0570071    25.59   0.000     1.347131    1.570613
                   15  |   1.529895   .0605291    25.28   0.000     1.411251     1.64854
                   16  |   1.568451   .0631366    24.84   0.000     1.444696    1.692207
                   17  |   1.623696   .0664897    24.42   0.000     1.493368    1.754024
                   18  |   1.556371   .0696672    22.34   0.000     1.419815    1.692927
                   19  |   1.583062   .0727634    21.76   0.000     1.440437    1.725688
                   20  |   1.628714   .0758081    21.48   0.000     1.480121    1.777308
                   21  |   1.648551   .0786351    20.96   0.000     1.494416    1.802686
                   22  |   1.703548   .0813044    20.95   0.000     1.544181    1.862915
                   23  |   1.756656   .0839275    20.93   0.000     1.592148    1.921165
                   24  |    1.78905   .0869163    20.58   0.000     1.618683    1.959417
                   25  |   1.781465   .0895358    19.90   0.000     1.605963    1.956966
                   26  |  -.2651171   .0472859    -5.61   0.000    -.3578034   -.1724308
                   27  |  -.1251356   .0447205    -2.80   0.005    -.2127933   -.0374779
                   28  |   .0465675   .0430299     1.08   0.279    -.0377764    .1309115
                   29  |   .2817031   .0429027     6.57   0.000     .1976085    .3657977
                   30  |   .4634831   .0429382    10.79   0.000     .3793187    .5476475
                   31  |   .6165121   .0441361    13.97   0.000     .5299997    .7030244
                   32  |     .76754   .0455232    16.86   0.000     .6783088    .8567711
                   33  |   .8300554   .0470679    17.64   0.000     .7377964    .9223144
                   34  |   .9853192   .0491373    20.05   0.000     .8890038    1.081635
                   35  |   1.075778   .0509351    21.12   0.000     .9759393    1.175618
                   36  |   1.127306   .0534831    21.08   0.000     1.022472    1.232139
                   37  |   1.192228   .0560632    21.27   0.000     1.082337    1.302119
                   38  |    1.27405   .0586538    21.72   0.000     1.159082    1.389019
                   39  |   1.314989   .0614099    21.41   0.000     1.194617     1.43536
                   40  |   1.411563   .0649684    21.73   0.000     1.284217     1.53891
                   41  |   1.487206   .0671657    22.14   0.000     1.355553    1.618859
                   42  |   1.566727   .0698989    22.41   0.000     1.429716    1.703738
                   43  |   1.542261   .0730272    21.12   0.000     1.399118    1.685403
                   44  |    1.58231    .076155    20.78   0.000     1.433037    1.731584
                   45  |   1.651879   .0790578    20.89   0.000     1.496916    1.806842
                   46  |   1.654536   .0819401    20.19   0.000     1.493923    1.815149
                   47  |    1.68179   .0841986    19.97   0.000      1.51675    1.846829
                   48  |   1.740197   .0865886    20.10   0.000     1.570472    1.909921
                   49  |   1.748819   .0898135    19.47   0.000     1.572773    1.924865
                   50  |   1.786811   .0923377    19.35   0.000     1.605817    1.967804
                       |
               age_cat |
                    1  |   .2582677   .0174223    14.82   0.000     .2241178    .2924176
                    2  |    .260361   .0193586    13.45   0.000     .2224158    .2983063
                    3  |   .2393337   .0216377    11.06   0.000     .1969212    .2817463
                    4  |   .2271178   .0239533     9.48   0.000     .1801664    .2740692
                    5  |   .2191834   .0265926     8.24   0.000     .1670585    .2713082
                    6  |   .2035108     .02953     6.89   0.000     .1456283    .2613933
                    7  |   .2121975    .032576     6.51   0.000     .1483444    .2760507
                    8  |   .1998298   .0356914     5.60   0.000     .1298702    .2697894
                    9  |   .1927357   .0388411     4.96   0.000     .1166023    .2688691
                   10  |   .1792678   .0420449     4.26   0.000     .0968546    .2616811
                   11  |   .1810346   .0453615     3.99   0.000     .0921205    .2699488
                   12  |   .1735971   .0486783     3.57   0.000     .0781814    .2690127
                   13  |   .1635637   .0519333     3.15   0.002     .0617679    .2653595
                   14  |   .1644216   .0552923     2.97   0.003     .0560418    .2728014
                   15  |   .1610216   .0586459     2.75   0.006     .0460683    .2759749
                   16  |   .1581131   .0619727     2.55   0.011     .0366389    .2795873
                   17  |   .1452973   .0655126     2.22   0.027     .0168844    .2737102
                   18  |   .1436565   .0689489     2.08   0.037      .008508     .278805
                   19  |   .1219487   .0726745     1.68   0.093    -.0205025       .2644
                   20  |   .0907647   .0794217     1.14   0.253    -.0649118    .2464411
                   25  |   .0553672   .0905218     0.61   0.541    -.1220669    .2328013
                   30  |   .0581207   .1188892     0.49   0.625     -.174917    .2911585
                   40  |   .0905232   .1327705     0.68   0.495    -.1697237      .35077
                   50  |   .0809271   .1452743     0.56   0.577    -.2038289    .3656831
                       |
                 _cons |   7.512512   .0333552   225.23   0.000     7.447132    7.577893
-----------------------+----------------------------------------------------------------
               sigma_u |   1.158849
               sigma_e |  .53504591
                   rho |  .82428601   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_slow + during_expat_H_slow = 0

       F(  1, 14660) =    0.04
            Prob > F =    0.8350

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2314274391100239
key: p_value
value: .8350240182185547

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.2314                                         min =          1
     between = 0.1425                                         avg =        9.0
     overall = 0.1250                                         max =         25

                                                F(82,14660)       =     112.25
corr(u_i, Xb)  = 0.0172                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0636306   .0254802     2.50   0.013     .0136861     .113575
       during_domestic |   .0149516   .0124294     1.20   0.229    -.0094115    .0393148
        after_domestic |   .0493384   .0216938     2.27   0.023     .0068157     .091861
          during_expat |   .1394818   .0424662     3.28   0.001     .0562426    .2227209
           after_expat |   .2322619   .0550956     4.22   0.000     .1242675    .3402562
during_domestic_H_slow |   .0355465     .01565     2.27   0.023     .0048705    .0662226
 after_domestic_H_slow |   .0296934     .02751     1.08   0.280    -.0242296    .0836164
   during_expat_H_slow |   .0474718   .0557396     0.85   0.394    -.0617849    .1567285
    after_expat_H_slow |   .0701318   .0714181     0.98   0.326    -.0698567    .2101203
                       |
              ind_year |
                    2  |   .0993861   .0210939     4.71   0.000     .0580395    .1407327
                    3  |   .2894101   .0256266    11.29   0.000     .2391787    .3396415
                    4  |   .4877871   .0272567    17.90   0.000     .4343606    .5412136
                    5  |   .6523943   .0300579    21.70   0.000     .5934771    .7113114
                    6  |   .8392529   .0333187    25.19   0.000     .7739441    .9045618
                    7  |   .9669133   .0359298    26.91   0.000     .8964864     1.03734
                    8  |   1.037369   .0386385    26.85   0.000     .9616324    1.113105
                    9  |    1.16213   .0414011    28.07   0.000     1.080978    1.243281
                   10  |   1.276492   .0446598    28.58   0.000     1.188953    1.364031
                   11  |   1.341825   .0477215    28.12   0.000     1.248285    1.435365
                   12  |    1.37126   .0508795    26.95   0.000      1.27153    1.470991
                   13  |   1.418008   .0539705    26.27   0.000     1.312219    1.523797
                   14  |   1.458872   .0570071    25.59   0.000     1.347131    1.570613
                   15  |   1.529895   .0605291    25.28   0.000     1.411251     1.64854
                   16  |   1.568451   .0631366    24.84   0.000     1.444696    1.692207
                   17  |   1.623696   .0664897    24.42   0.000     1.493368    1.754024
                   18  |   1.556371   .0696672    22.34   0.000     1.419815    1.692927
                   19  |   1.583062   .0727634    21.76   0.000     1.440437    1.725688
                   20  |   1.628714   .0758081    21.48   0.000     1.480121    1.777308
                   21  |   1.648551   .0786351    20.96   0.000     1.494416    1.802686
                   22  |   1.703548   .0813044    20.95   0.000     1.544181    1.862915
                   23  |   1.756656   .0839275    20.93   0.000     1.592148    1.921165
                   24  |    1.78905   .0869163    20.58   0.000     1.618683    1.959417
                   25  |   1.781465   .0895358    19.90   0.000     1.605963    1.956966
                   26  |  -.2651171   .0472859    -5.61   0.000    -.3578034   -.1724308
                   27  |  -.1251356   .0447205    -2.80   0.005    -.2127933   -.0374779
                   28  |   .0465675   .0430299     1.08   0.279    -.0377764    .1309115
                   29  |   .2817031   .0429027     6.57   0.000     .1976085    .3657977
                   30  |   .4634831   .0429382    10.79   0.000     .3793187    .5476475
                   31  |   .6165121   .0441361    13.97   0.000     .5299997    .7030244
                   32  |     .76754   .0455232    16.86   0.000     .6783088    .8567711
                   33  |   .8300554   .0470679    17.64   0.000     .7377964    .9223144
                   34  |   .9853192   .0491373    20.05   0.000     .8890038    1.081635
                   35  |   1.075778   .0509351    21.12   0.000     .9759393    1.175618
                   36  |   1.127306   .0534831    21.08   0.000     1.022472    1.232139
                   37  |   1.192228   .0560632    21.27   0.000     1.082337    1.302119
                   38  |    1.27405   .0586538    21.72   0.000     1.159082    1.389019
                   39  |   1.314989   .0614099    21.41   0.000     1.194617     1.43536
                   40  |   1.411563   .0649684    21.73   0.000     1.284217     1.53891
                   41  |   1.487206   .0671657    22.14   0.000     1.355553    1.618859
                   42  |   1.566727   .0698989    22.41   0.000     1.429716    1.703738
                   43  |   1.542261   .0730272    21.12   0.000     1.399118    1.685403
                   44  |    1.58231    .076155    20.78   0.000     1.433037    1.731584
                   45  |   1.651879   .0790578    20.89   0.000     1.496916    1.806842
                   46  |   1.654536   .0819401    20.19   0.000     1.493923    1.815149
                   47  |    1.68179   .0841986    19.97   0.000      1.51675    1.846829
                   48  |   1.740197   .0865886    20.10   0.000     1.570472    1.909921
                   49  |   1.748819   .0898135    19.47   0.000     1.572773    1.924865
                   50  |   1.786811   .0923377    19.35   0.000     1.605817    1.967804
                       |
               age_cat |
                    1  |   .2582677   .0174223    14.82   0.000     .2241178    .2924176
                    2  |    .260361   .0193586    13.45   0.000     .2224158    .2983063
                    3  |   .2393337   .0216377    11.06   0.000     .1969212    .2817463
                    4  |   .2271178   .0239533     9.48   0.000     .1801664    .2740692
                    5  |   .2191834   .0265926     8.24   0.000     .1670585    .2713082
                    6  |   .2035108     .02953     6.89   0.000     .1456283    .2613933
                    7  |   .2121975    .032576     6.51   0.000     .1483444    .2760507
                    8  |   .1998298   .0356914     5.60   0.000     .1298702    .2697894
                    9  |   .1927357   .0388411     4.96   0.000     .1166023    .2688691
                   10  |   .1792678   .0420449     4.26   0.000     .0968546    .2616811
                   11  |   .1810346   .0453615     3.99   0.000     .0921205    .2699488
                   12  |   .1735971   .0486783     3.57   0.000     .0781814    .2690127
                   13  |   .1635637   .0519333     3.15   0.002     .0617679    .2653595
                   14  |   .1644216   .0552923     2.97   0.003     .0560418    .2728014
                   15  |   .1610216   .0586459     2.75   0.006     .0460683    .2759749
                   16  |   .1581131   .0619727     2.55   0.011     .0366389    .2795873
                   17  |   .1452973   .0655126     2.22   0.027     .0168844    .2737102
                   18  |   .1436565   .0689489     2.08   0.037      .008508     .278805
                   19  |   .1219487   .0726745     1.68   0.093    -.0205025       .2644
                   20  |   .0907647   .0794217     1.14   0.253    -.0649118    .2464411
                   25  |   .0553672   .0905218     0.61   0.541    -.1220669    .2328013
                   30  |   .0581207   .1188892     0.49   0.625     -.174917    .2911585
                   40  |   .0905232   .1327705     0.68   0.495    -.1697237      .35077
                   50  |   .0809271   .1452743     0.56   0.577    -.2038289    .3656831
                       |
                 _cons |   7.512512   .0333552   225.23   0.000     7.447132    7.577893
-----------------------+----------------------------------------------------------------
               sigma_u |   1.158849
               sigma_e |  .53504591
                   rho |  .82428601   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.2314                         Obs per group: min =         1
       between = 0.1425                                        avg =       9.0
       overall = 0.1255                                        max =        25

                                                F(82,14660)        =    111.74
corr(u_i, Xb)  = 0.0207                         Prob > F           =    0.0000

                                           (Std. Err. adjusted for 14,661 clusters in id)
-----------------------------------------------------------------------------------------
                        |               Robust
                   lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                foreign |   .0629447   .0254899     2.47   0.014     .0129812    .1129081
        during_domestic |   .0312837   .0081191     3.85   0.000     .0153693    .0471982
         after_domestic |   .0492731   .0151755     3.25   0.001     .0195272     .079019
           during_expat |   .1434235   .0336134     4.27   0.000     .0775371      .20931
            after_expat |    .241599   .0427449     5.65   0.000     .1578137    .3253844
during_domestic_H_early |   .0330313   .0199736     1.65   0.098    -.0061195    .0721822
 after_domestic_H_early |   .0740334   .0294191     2.52   0.012     .0163683    .1316986
   during_expat_H_early |   .0789288   .0576239     1.37   0.171    -.0340213    .1918789
    after_expat_H_early |   .0873799   .0699534     1.25   0.212    -.0497377    .2244974
                        |
               ind_year |
                     2  |   .0989988   .0210948     4.69   0.000     .0576503    .1403473
                     3  |    .288985   .0256344    11.27   0.000     .2387384    .3392316
                     4  |   .4873501   .0272735    17.87   0.000     .4338907    .5408095
                     5  |   .6515888   .0300611    21.68   0.000     .5926653    .7105123
                     6  |   .8378803   .0333249    25.14   0.000     .7725593    .9032012
                     7  |   .9649601   .0359302    26.86   0.000     .8945325    1.035388
                     8  |   1.034592   .0386601    26.76   0.000     .9588133    1.110371
                     9  |   1.158243   .0414155    27.97   0.000     1.077063    1.239422
                    10  |   1.272851   .0446599    28.50   0.000     1.185312     1.36039
                    11  |   1.338704   .0477036    28.06   0.000     1.245199    1.432209
                    12  |   1.368604   .0508705    26.90   0.000     1.268891    1.468316
                    13  |   1.415985   .0539074    26.27   0.000      1.31032     1.52165
                    14  |   1.457664   .0569062    25.62   0.000      1.34612    1.569207
                    15  |   1.529459    .060391    25.33   0.000     1.411085    1.647833
                    16  |   1.568796   .0629758    24.91   0.000     1.445355    1.692236
                    17  |   1.625073    .066321    24.50   0.000     1.495075     1.75507
                    18  |   1.558505    .069456    22.44   0.000     1.422363    1.694648
                    19  |   1.586023   .0725398    21.86   0.000     1.443836     1.72821
                    20  |   1.632413   .0755715    21.60   0.000     1.484283    1.780543
                    21  |    1.65309    .078406    21.08   0.000     1.499404    1.806775
                    22  |   1.708894   .0810331    21.09   0.000     1.550059    1.867729
                    23  |   1.762662   .0836466    21.07   0.000     1.598704     1.92662
                    24  |   1.795772   .0866289    20.73   0.000     1.625969    1.965576
                    25  |   1.788835   .0892181    20.05   0.000     1.613956    1.963714
                    26  |  -.2642201   .0473073    -5.59   0.000    -.3569485   -.1714918
                    27  |  -.1243847   .0447135    -2.78   0.005    -.2120287   -.0367407
                    28  |   .0470039    .043016     1.09   0.275    -.0373128    .1313207
                    29  |   .2820706   .0428802     6.58   0.000     .1980199    .3661212
                    30  |   .4631379     .04291    10.79   0.000     .3790289    .5472469
                    31  |    .615454   .0441015    13.96   0.000     .5290094    .7018985
                    32  |   .7657177   .0455006    16.83   0.000     .6765309    .8549045
                    33  |   .8272658   .0470487    17.58   0.000     .7350443    .9194872
                    34  |   .9814878   .0491117    19.98   0.000     .8852228    1.077753
                    35  |   1.072314   .0508872    21.07   0.000     .9725683    1.172059
                    36  |   1.124458   .0534584    21.03   0.000     1.019673    1.229244
                    37  |    1.18997   .0560094    21.25   0.000     1.080185    1.299756
                    38  |   1.272311   .0585904    21.72   0.000     1.157466    1.387156
                    39  |   1.313847   .0613365    21.42   0.000     1.193619    1.434074
                    40  |   1.411189   .0648654    21.76   0.000     1.284044    1.538333
                    41  |   1.487359     .06706    22.18   0.000     1.355913    1.618805
                    42  |   1.567623   .0697621    22.47   0.000     1.430881    1.704366
                    43  |   1.543849   .0728901    21.18   0.000     1.400975    1.686723
                    44  |   1.584582   .0759935    20.85   0.000     1.435626    1.733539
                    45  |   1.654851   .0788819    20.98   0.000     1.500233     1.80947
                    46  |   1.658216    .081756    20.28   0.000     1.497964    1.818468
                    47  |   1.686129   .0839966    20.07   0.000     1.521485    1.850773
                    48  |    1.74505   .0863872    20.20   0.000      1.57572     1.91438
                    49  |   1.754294   .0896003    19.58   0.000     1.578666    1.929922
                    50  |   1.793021   .0921169    19.46   0.000     1.612461    1.973582
                        |
                age_cat |
                     1  |   .2576743   .0174196    14.79   0.000     .2235296     .291819
                     2  |   .2590521   .0193573    13.38   0.000     .2211093    .2969948
                     3  |   .2374431   .0216245    10.98   0.000     .1950563    .2798298
                     4  |   .2247744   .0239293     9.39   0.000     .1778699    .2716789
                     5  |   .2163092     .02655     8.15   0.000     .1642678    .2683506
                     6  |   .2001515   .0294788     6.79   0.000     .1423694    .2579336
                     7  |   .2083899   .0325189     6.41   0.000     .1446487     .272131
                     8  |   .1955636   .0356304     5.49   0.000     .1257235    .2654038
                     9  |   .1880359   .0387619     4.85   0.000     .1120576    .2640141
                    10  |   .1740627   .0419527     4.15   0.000     .0918301    .2562952
                    11  |    .175316   .0452653     3.87   0.000     .0865902    .2640417
                    12  |   .1673648   .0485727     3.45   0.001     .0721562    .2625733
                    13  |   .1568664   .0518177     3.03   0.002     .0552972    .2584357
                    14  |   .1572233   .0551646     2.85   0.004     .0490938    .2653529
                    15  |   .1533915   .0585011     2.62   0.009     .0387219    .2680611
                    16  |   .1500287   .0618223     2.43   0.015     .0288492    .2712081
                    17  |   .1367395   .0653431     2.09   0.036     .0086588    .2648202
                    18  |   .1346572   .0687661     1.96   0.050     -.000133    .2694474
                    19  |   .1124147   .0725064     1.55   0.121    -.0297071    .2545364
                    20  |   .0802322    .079206     1.01   0.311    -.0750215    .2354859
                    25  |   .0435414   .0902675     0.48   0.630    -.1333943    .2204771
                    30  |   .0464518   .1186597     0.39   0.695    -.1861361    .2790397
                    40  |   .0805392   .1327327     0.61   0.544    -.1796336    .3407119
                    50  |   .0703764   .1452935     0.48   0.628    -.2144171    .3551699
                        |
                  _cons |   7.516188   .0334051   225.00   0.000      7.45071    7.581666
------------------------+----------------------------------------------------------------
                sigma_u |  1.1589769
                sigma_e |  .53504086
                    rho |  .82432072   (fraction of variance due to u_i)
-----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_early + during_expat_H_early = 0

       F(  1, 14660) =    0.59
            Prob > F =    0.4420

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2314419648486151
key: p_value
value: .4419782941702778

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.2314                                         min =          1
     between = 0.1425                                         avg =        9.0
     overall = 0.1255                                         max =         25

                                                F(82,14660)       =     111.74
corr(u_i, Xb)  = 0.0207                         Prob > F          =     0.0000

                                           (Std. Err. adjusted for 14,661 clusters in id)
-----------------------------------------------------------------------------------------
                        |               Robust
                   lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                foreign |   .0629447   .0254899     2.47   0.014     .0129812    .1129081
        during_domestic |   .0312837   .0081191     3.85   0.000     .0153693    .0471982
         after_domestic |   .0492731   .0151755     3.25   0.001     .0195272     .079019
           during_expat |   .1434235   .0336134     4.27   0.000     .0775371      .20931
            after_expat |    .241599   .0427449     5.65   0.000     .1578137    .3253844
during_domestic_H_early |   .0330313   .0199736     1.65   0.098    -.0061195    .0721822
 after_domestic_H_early |   .0740334   .0294191     2.52   0.012     .0163683    .1316986
   during_expat_H_early |   .0789288   .0576239     1.37   0.171    -.0340213    .1918789
    after_expat_H_early |   .0873799   .0699534     1.25   0.212    -.0497377    .2244974
                        |
               ind_year |
                     2  |   .0989988   .0210948     4.69   0.000     .0576503    .1403473
                     3  |    .288985   .0256344    11.27   0.000     .2387384    .3392316
                     4  |   .4873501   .0272735    17.87   0.000     .4338907    .5408095
                     5  |   .6515888   .0300611    21.68   0.000     .5926653    .7105123
                     6  |   .8378803   .0333249    25.14   0.000     .7725593    .9032012
                     7  |   .9649601   .0359302    26.86   0.000     .8945325    1.035388
                     8  |   1.034592   .0386601    26.76   0.000     .9588133    1.110371
                     9  |   1.158243   .0414155    27.97   0.000     1.077063    1.239422
                    10  |   1.272851   .0446599    28.50   0.000     1.185312     1.36039
                    11  |   1.338704   .0477036    28.06   0.000     1.245199    1.432209
                    12  |   1.368604   .0508705    26.90   0.000     1.268891    1.468316
                    13  |   1.415985   .0539074    26.27   0.000      1.31032     1.52165
                    14  |   1.457664   .0569062    25.62   0.000      1.34612    1.569207
                    15  |   1.529459    .060391    25.33   0.000     1.411085    1.647833
                    16  |   1.568796   .0629758    24.91   0.000     1.445355    1.692236
                    17  |   1.625073    .066321    24.50   0.000     1.495075     1.75507
                    18  |   1.558505    .069456    22.44   0.000     1.422363    1.694648
                    19  |   1.586023   .0725398    21.86   0.000     1.443836     1.72821
                    20  |   1.632413   .0755715    21.60   0.000     1.484283    1.780543
                    21  |    1.65309    .078406    21.08   0.000     1.499404    1.806775
                    22  |   1.708894   .0810331    21.09   0.000     1.550059    1.867729
                    23  |   1.762662   .0836466    21.07   0.000     1.598704     1.92662
                    24  |   1.795772   .0866289    20.73   0.000     1.625969    1.965576
                    25  |   1.788835   .0892181    20.05   0.000     1.613956    1.963714
                    26  |  -.2642201   .0473073    -5.59   0.000    -.3569485   -.1714918
                    27  |  -.1243847   .0447135    -2.78   0.005    -.2120287   -.0367407
                    28  |   .0470039    .043016     1.09   0.275    -.0373128    .1313207
                    29  |   .2820706   .0428802     6.58   0.000     .1980199    .3661212
                    30  |   .4631379     .04291    10.79   0.000     .3790289    .5472469
                    31  |    .615454   .0441015    13.96   0.000     .5290094    .7018985
                    32  |   .7657177   .0455006    16.83   0.000     .6765309    .8549045
                    33  |   .8272658   .0470487    17.58   0.000     .7350443    .9194872
                    34  |   .9814878   .0491117    19.98   0.000     .8852228    1.077753
                    35  |   1.072314   .0508872    21.07   0.000     .9725683    1.172059
                    36  |   1.124458   .0534584    21.03   0.000     1.019673    1.229244
                    37  |    1.18997   .0560094    21.25   0.000     1.080185    1.299756
                    38  |   1.272311   .0585904    21.72   0.000     1.157466    1.387156
                    39  |   1.313847   .0613365    21.42   0.000     1.193619    1.434074
                    40  |   1.411189   .0648654    21.76   0.000     1.284044    1.538333
                    41  |   1.487359     .06706    22.18   0.000     1.355913    1.618805
                    42  |   1.567623   .0697621    22.47   0.000     1.430881    1.704366
                    43  |   1.543849   .0728901    21.18   0.000     1.400975    1.686723
                    44  |   1.584582   .0759935    20.85   0.000     1.435626    1.733539
                    45  |   1.654851   .0788819    20.98   0.000     1.500233     1.80947
                    46  |   1.658216    .081756    20.28   0.000     1.497964    1.818468
                    47  |   1.686129   .0839966    20.07   0.000     1.521485    1.850773
                    48  |    1.74505   .0863872    20.20   0.000      1.57572     1.91438
                    49  |   1.754294   .0896003    19.58   0.000     1.578666    1.929922
                    50  |   1.793021   .0921169    19.46   0.000     1.612461    1.973582
                        |
                age_cat |
                     1  |   .2576743   .0174196    14.79   0.000     .2235296     .291819
                     2  |   .2590521   .0193573    13.38   0.000     .2211093    .2969948
                     3  |   .2374431   .0216245    10.98   0.000     .1950563    .2798298
                     4  |   .2247744   .0239293     9.39   0.000     .1778699    .2716789
                     5  |   .2163092     .02655     8.15   0.000     .1642678    .2683506
                     6  |   .2001515   .0294788     6.79   0.000     .1423694    .2579336
                     7  |   .2083899   .0325189     6.41   0.000     .1446487     .272131
                     8  |   .1955636   .0356304     5.49   0.000     .1257235    .2654038
                     9  |   .1880359   .0387619     4.85   0.000     .1120576    .2640141
                    10  |   .1740627   .0419527     4.15   0.000     .0918301    .2562952
                    11  |    .175316   .0452653     3.87   0.000     .0865902    .2640417
                    12  |   .1673648   .0485727     3.45   0.001     .0721562    .2625733
                    13  |   .1568664   .0518177     3.03   0.002     .0552972    .2584357
                    14  |   .1572233   .0551646     2.85   0.004     .0490938    .2653529
                    15  |   .1533915   .0585011     2.62   0.009     .0387219    .2680611
                    16  |   .1500287   .0618223     2.43   0.015     .0288492    .2712081
                    17  |   .1367395   .0653431     2.09   0.036     .0086588    .2648202
                    18  |   .1346572   .0687661     1.96   0.050     -.000133    .2694474
                    19  |   .1124147   .0725064     1.55   0.121    -.0297071    .2545364
                    20  |   .0802322    .079206     1.01   0.311    -.0750215    .2354859
                    25  |   .0435414   .0902675     0.48   0.630    -.1333943    .2204771
                    30  |   .0464518   .1186597     0.39   0.695    -.1861361    .2790397
                    40  |   .0805392   .1327327     0.61   0.544    -.1796336    .3407119
                    50  |   .0703764   .1452935     0.48   0.628    -.2144171    .3551699
                        |
                  _cons |   7.516188   .0334051   225.00   0.000      7.45071    7.581666
------------------------+----------------------------------------------------------------
                sigma_u |  1.1589769
                sigma_e |  .53504086
                    rho |  .82432072   (fraction of variance due to u_i)
-----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    361557
Group variable: firm_person                     Number of groups   =     40338

R-sq:  within  = 0.2314                         Obs per group: min =         1
       between = 0.1431                                        avg =       9.0
       overall = 0.1258                                        max =        25

                                                F(82,14660)        =    112.39
corr(u_i, Xb)  = 0.0179                         Prob > F           =    0.0000

                                                (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------------
                             |               Robust
                        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------------+----------------------------------------------------------------
                     foreign |   .0632908   .0254726     2.48   0.013     .0133614    .1132203
             during_domestic |    .037089   .0094397     3.93   0.000     .0185861     .055592
              after_domestic |   .0711964   .0156539     4.55   0.000     .0405128    .1018799
                during_expat |   .1880477   .0337087     5.58   0.000     .1219743     .254121
                 after_expat |   .2713868   .0382093     7.10   0.000     .1964917    .3462819
during_domestic_H_young_firm |  -.0011146   .0115551    -0.10   0.923     -.023764    .0215348
 after_domestic_H_young_firm |  -.0181125   .0222154    -0.82   0.415    -.0616575    .0254326
   during_expat_H_young_firm |  -.0620626   .0461635    -1.34   0.179     -.152549    .0284237
    after_expat_H_young_firm |  -.0244806   .0583425    -0.42   0.675    -.1388392    .0898781
                             |
                    ind_year |
                          2  |   .0997138   .0210871     4.73   0.000     .0583804    .1410471
                          3  |   .2899999    .025626    11.32   0.000     .2397698      .34023
                          4  |   .4887054   .0272648    17.92   0.000      .435263    .5421479
                          5  |   .6536761   .0300673    21.74   0.000     .5947404    .7126119
                          6  |    .840812   .0333312    25.23   0.000     .7754787    .9061453
                          7  |   .9687585   .0359534    26.94   0.000     .8982853    1.039232
                          8  |   1.039477   .0386686    26.88   0.000     .9636813    1.115272
                          9  |   1.164292   .0414533    28.09   0.000     1.083038    1.245545
                         10  |   1.278855   .0447094    28.60   0.000     1.191219    1.366491
                         11  |   1.344412   .0477781    28.14   0.000     1.250761    1.438063
                         12  |    1.37404   .0509515    26.97   0.000     1.274169    1.473911
                         13  |   1.421013   .0540191    26.31   0.000     1.315129    1.526897
                         14  |    1.46215     .05705    25.63   0.000     1.350324    1.573975
                         15  |   1.533453   .0605636    25.32   0.000     1.414741    1.652165
                         16  |   1.572294   .0631693    24.89   0.000     1.448474    1.696114
                         17  |    1.62793   .0665343    24.47   0.000     1.497515    1.758346
                         18  |   1.560869   .0697098    22.39   0.000     1.424229    1.697509
                         19  |   1.587785   .0728274    21.80   0.000     1.445034    1.730536
                         20  |    1.63351   .0758829    21.53   0.000      1.48477     1.78225
                         21  |    1.65358   .0787379    21.00   0.000     1.499243    1.807916
                         22  |    1.70873   .0813976    20.99   0.000     1.549181     1.86828
                         23  |   1.761965   .0840258    20.97   0.000     1.597264    1.926666
                         24  |   1.794526   .0870317    20.62   0.000     1.623933    1.965119
                         25  |   1.787031   .0896297    19.94   0.000     1.611346    1.962717
                         26  |  -.2652548   .0473106    -5.61   0.000    -.3579895   -.1725202
                         27  |     -.1247   .0447372    -2.79   0.005    -.2123906   -.0370094
                         28  |   .0474402   .0430435     1.10   0.270    -.0369305     .131811
                         29  |   .2831171   .0429118     6.60   0.000     .1990046    .3672296
                         30  |   .4650416   .0429607    10.82   0.000     .3808332    .5492499
                         31  |   .6184417   .0441682    14.00   0.000     .5318664    .7050169
                         32  |   .7697845   .0455747    16.89   0.000     .6804524    .8591166
                         33  |   .8324736   .0471132    17.67   0.000     .7401258    .9248214
                         34  |   .9878835   .0491807    20.09   0.000     .8914833    1.084284
                         35  |   1.078506   .0509742    21.16   0.000     .9785906    1.178422
                         36  |    1.13023   .0535312    21.11   0.000     1.025302    1.235158
                         37  |    1.19532    .056105    21.31   0.000     1.085347    1.305293
                         38  |   1.277174   .0587136    21.75   0.000     1.162088     1.39226
                         39  |   1.318195   .0614979    21.43   0.000     1.197652    1.438739
                         40  |   1.415047   .0650519    21.75   0.000     1.287537    1.542557
                         41  |   1.490797   .0672614    22.16   0.000     1.358957    1.622638
                         42  |   1.570536   .0699861    22.44   0.000     1.433354    1.707717
                         43  |   1.546267   .0731267    21.15   0.000     1.402929    1.689605
                         44  |   1.586514   .0762506    20.81   0.000     1.437053    1.735974
                         45  |   1.656201    .079172    20.92   0.000     1.501014    1.811388
                         46  |   1.658891    .082074    20.21   0.000     1.498015    1.819766
                         47  |    1.68633   .0843373    20.00   0.000     1.521018    1.851641
                         48  |   1.744735   .0867506    20.11   0.000     1.574693    1.914777
                         49  |   1.753396   .0900035    19.48   0.000     1.576978    1.929814
                         50  |   1.791589   .0925296    19.36   0.000     1.610219    1.972958
                             |
                     age_cat |
                          1  |   .2579974   .0174288    14.80   0.000     .2238349      .29216
                          2  |   .2598081   .0193906    13.40   0.000     .2218001    .2978161
                          3  |   .2386344   .0216936    11.00   0.000     .1961122    .2811567
                          4  |    .226302   .0240338     9.42   0.000     .1791928    .2734113
                          5  |    .218241   .0266892     8.18   0.000     .1659269    .2705552
                          6  |   .2025168   .0296597     6.83   0.000       .14438    .2606536
                          7  |   .2110956   .0327555     6.44   0.000     .1468906    .2753006
                          8  |   .1986809   .0358955     5.53   0.000     .1283213    .2690405
                          9  |   .1916161    .039084     4.90   0.000     .1150065    .2682258
                         10  |    .178122    .042353     4.21   0.000     .0951049    .2611391
                         11  |   .1779977   .0453744     3.92   0.000     .0890582    .2669372
                         12  |   .1704022   .0486882     3.50   0.000     .0749672    .2658372
                         13  |   .1601718   .0519425     3.08   0.002      .058358    .2619855
                         14  |   .1608245   .0553019     2.91   0.004     .0524259    .2692231
                         15  |   .1572191    .058644     2.68   0.007     .0422695    .2721687
                         16  |   .1540548   .0619726     2.49   0.013     .0325807    .2755289
                         17  |    .141042   .0654852     2.15   0.031     .0126828    .2694011
                         18  |   .1391759   .0689118     2.02   0.043        .0041    .2742517
                         19  |   .1172601   .0726499     1.61   0.107    -.0251427     .259663
                         20  |   .0856525   .0793659     1.08   0.281    -.0699146    .2412196
                         25  |   .0497766    .090459     0.55   0.582    -.1275344    .2270877
                         30  |   .0525991   .1188307     0.44   0.658     -.180324    .2855221
                         40  |   .0851655   .1328845     0.64   0.522    -.1753048    .3456358
                         50  |   .0753869   .1454284     0.52   0.604     -.209671    .3604449
                             |
                       _cons |   7.512558   .0333544   225.23   0.000     7.447179    7.577937
-----------------------------+----------------------------------------------------------------
                     sigma_u |  1.1584449
                     sigma_e |  .53506103
                         rho |  .82417676   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_young_firm + during_expat_H_young_firm = 0

       F(  1, 14660) =    1.70
            Prob > F =    0.1927

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2313839983416495
key: p_value
value: .1926618150123741

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    361,557
Group variable: firm_person                     Number of groups  =     40,338

R-sq:                                           Obs per group:
     within  = 0.2314                                         min =          1
     between = 0.1431                                         avg =        9.0
     overall = 0.1258                                         max =         25

                                                F(82,14660)       =     112.39
corr(u_i, Xb)  = 0.0179                         Prob > F          =     0.0000

                                                (Std. Err. adjusted for 14,661 clusters in id)
----------------------------------------------------------------------------------------------
                             |               Robust
                        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------------+----------------------------------------------------------------
                     foreign |   .0632908   .0254726     2.48   0.013     .0133614    .1132203
             during_domestic |    .037089   .0094397     3.93   0.000     .0185861     .055592
              after_domestic |   .0711964   .0156539     4.55   0.000     .0405128    .1018799
                during_expat |   .1880477   .0337087     5.58   0.000     .1219743     .254121
                 after_expat |   .2713868   .0382093     7.10   0.000     .1964917    .3462819
during_domestic_H_young_firm |  -.0011146   .0115551    -0.10   0.923     -.023764    .0215348
 after_domestic_H_young_firm |  -.0181125   .0222154    -0.82   0.415    -.0616575    .0254326
   during_expat_H_young_firm |  -.0620626   .0461635    -1.34   0.179     -.152549    .0284237
    after_expat_H_young_firm |  -.0244806   .0583425    -0.42   0.675    -.1388392    .0898781
                             |
                    ind_year |
                          2  |   .0997138   .0210871     4.73   0.000     .0583804    .1410471
                          3  |   .2899999    .025626    11.32   0.000     .2397698      .34023
                          4  |   .4887054   .0272648    17.92   0.000      .435263    .5421479
                          5  |   .6536761   .0300673    21.74   0.000     .5947404    .7126119
                          6  |    .840812   .0333312    25.23   0.000     .7754787    .9061453
                          7  |   .9687585   .0359534    26.94   0.000     .8982853    1.039232
                          8  |   1.039477   .0386686    26.88   0.000     .9636813    1.115272
                          9  |   1.164292   .0414533    28.09   0.000     1.083038    1.245545
                         10  |   1.278855   .0447094    28.60   0.000     1.191219    1.366491
                         11  |   1.344412   .0477781    28.14   0.000     1.250761    1.438063
                         12  |    1.37404   .0509515    26.97   0.000     1.274169    1.473911
                         13  |   1.421013   .0540191    26.31   0.000     1.315129    1.526897
                         14  |    1.46215     .05705    25.63   0.000     1.350324    1.573975
                         15  |   1.533453   .0605636    25.32   0.000     1.414741    1.652165
                         16  |   1.572294   .0631693    24.89   0.000     1.448474    1.696114
                         17  |    1.62793   .0665343    24.47   0.000     1.497515    1.758346
                         18  |   1.560869   .0697098    22.39   0.000     1.424229    1.697509
                         19  |   1.587785   .0728274    21.80   0.000     1.445034    1.730536
                         20  |    1.63351   .0758829    21.53   0.000      1.48477     1.78225
                         21  |    1.65358   .0787379    21.00   0.000     1.499243    1.807916
                         22  |    1.70873   .0813976    20.99   0.000     1.549181     1.86828
                         23  |   1.761965   .0840258    20.97   0.000     1.597264    1.926666
                         24  |   1.794526   .0870317    20.62   0.000     1.623933    1.965119
                         25  |   1.787031   .0896297    19.94   0.000     1.611346    1.962717
                         26  |  -.2652548   .0473106    -5.61   0.000    -.3579895   -.1725202
                         27  |     -.1247   .0447372    -2.79   0.005    -.2123906   -.0370094
                         28  |   .0474402   .0430435     1.10   0.270    -.0369305     .131811
                         29  |   .2831171   .0429118     6.60   0.000     .1990046    .3672296
                         30  |   .4650416   .0429607    10.82   0.000     .3808332    .5492499
                         31  |   .6184417   .0441682    14.00   0.000     .5318664    .7050169
                         32  |   .7697845   .0455747    16.89   0.000     .6804524    .8591166
                         33  |   .8324736   .0471132    17.67   0.000     .7401258    .9248214
                         34  |   .9878835   .0491807    20.09   0.000     .8914833    1.084284
                         35  |   1.078506   .0509742    21.16   0.000     .9785906    1.178422
                         36  |    1.13023   .0535312    21.11   0.000     1.025302    1.235158
                         37  |    1.19532    .056105    21.31   0.000     1.085347    1.305293
                         38  |   1.277174   .0587136    21.75   0.000     1.162088     1.39226
                         39  |   1.318195   .0614979    21.43   0.000     1.197652    1.438739
                         40  |   1.415047   .0650519    21.75   0.000     1.287537    1.542557
                         41  |   1.490797   .0672614    22.16   0.000     1.358957    1.622638
                         42  |   1.570536   .0699861    22.44   0.000     1.433354    1.707717
                         43  |   1.546267   .0731267    21.15   0.000     1.402929    1.689605
                         44  |   1.586514   .0762506    20.81   0.000     1.437053    1.735974
                         45  |   1.656201    .079172    20.92   0.000     1.501014    1.811388
                         46  |   1.658891    .082074    20.21   0.000     1.498015    1.819766
                         47  |    1.68633   .0843373    20.00   0.000     1.521018    1.851641
                         48  |   1.744735   .0867506    20.11   0.000     1.574693    1.914777
                         49  |   1.753396   .0900035    19.48   0.000     1.576978    1.929814
                         50  |   1.791589   .0925296    19.36   0.000     1.610219    1.972958
                             |
                     age_cat |
                          1  |   .2579974   .0174288    14.80   0.000     .2238349      .29216
                          2  |   .2598081   .0193906    13.40   0.000     .2218001    .2978161
                          3  |   .2386344   .0216936    11.00   0.000     .1961122    .2811567
                          4  |    .226302   .0240338     9.42   0.000     .1791928    .2734113
                          5  |    .218241   .0266892     8.18   0.000     .1659269    .2705552
                          6  |   .2025168   .0296597     6.83   0.000       .14438    .2606536
                          7  |   .2110956   .0327555     6.44   0.000     .1468906    .2753006
                          8  |   .1986809   .0358955     5.53   0.000     .1283213    .2690405
                          9  |   .1916161    .039084     4.90   0.000     .1150065    .2682258
                         10  |    .178122    .042353     4.21   0.000     .0951049    .2611391
                         11  |   .1779977   .0453744     3.92   0.000     .0890582    .2669372
                         12  |   .1704022   .0486882     3.50   0.000     .0749672    .2658372
                         13  |   .1601718   .0519425     3.08   0.002      .058358    .2619855
                         14  |   .1608245   .0553019     2.91   0.004     .0524259    .2692231
                         15  |   .1572191    .058644     2.68   0.007     .0422695    .2721687
                         16  |   .1540548   .0619726     2.49   0.013     .0325807    .2755289
                         17  |    .141042   .0654852     2.15   0.031     .0126828    .2694011
                         18  |   .1391759   .0689118     2.02   0.043        .0041    .2742517
                         19  |   .1172601   .0726499     1.61   0.107    -.0251427     .259663
                         20  |   .0856525   .0793659     1.08   0.281    -.0699146    .2412196
                         25  |   .0497766    .090459     0.55   0.582    -.1275344    .2270877
                         30  |   .0525991   .1188307     0.44   0.658     -.180324    .2855221
                         40  |   .0851655   .1328845     0.64   0.522    -.1753048    .3456358
                         50  |   .0753869   .1454284     0.52   0.604     -.209671    .3604449
                             |
                       _cons |   7.512558   .0333544   225.23   0.000     7.447179    7.577937
-----------------------------+----------------------------------------------------------------
                     sigma_u |  1.1584449
                     sigma_e |  .53506103
                         rho |  .82417676   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. *Szelekció az akvicíziós mintában
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. areg f1.expat `outcomes' if ever_foreign==1&greenfield!=1, a(industry_year) cluster(frame_id)

Linear regression, absorbing indicators         Number of obs     =    108,066
Absorbed variable: industry_year                No. of categories =      1,677
                                                F(   4,   1591)   =      12.80
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0634
                                                Adj R-squared     =     0.0486
                                                Root MSE          =     0.4484

                           (Std. Err. adjusted for 1,592 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |   .0070686   .0054643     1.29   0.196    -.0036493    .0177865
        lnKL |   .0060695   .0043688     1.39   0.165    -.0024997    .0146387
        lnQL |   .0176374    .007367     2.39   0.017     .0031874    .0320874
    exporter |    .067978   .0127077     5.35   0.000     .0430523    .0929037
       _cons |   .0239992   .0705189     0.34   0.734    -.1143206     .162319
------------------------------------------------------------------------------

. do regram output/regression/selection 1 1

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression, absorbing indicators         Number of obs     =    108,066
Absorbed variable: industry_year                No. of categories =      1,677
                                                F(   4,   1591)   =      12.80
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0634
                                                Adj R-squared     =     0.0486
                                                Root MSE          =     0.4484

                           (Std. Err. adjusted for 1,592 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |   .0070686   .0054643     1.29   0.196    -.0036493    .0177865
        lnKL |   .0060695   .0043688     1.39   0.165    -.0024997    .0146387
        lnQL |   .0176374    .007367     2.39   0.017     .0031874    .0320874
    exporter |    .067978   .0127077     5.35   0.000     .0430523    .0929037
       _cons |   .0239992   .0705189     0.34   0.734    -.1143206     .162319
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. keep if ever_foreign==1
(389,573 observations deleted)

. 
. foreach X in outcomes sample_acquisitions {
  2.         global `X' ``X''
  3. }

. do event_study

. local N = Tbefore+Tduring+2

. 
. local T1 = Tbefore 

. local T2 = Tduring

. 
. foreach X in domestic expat {
  2.         * founders do not enter event study sample, only as controls
.         replace `X' = 0 if founder==1
  3.         gen byte `X'_p_0 = tenure==0 & (`X'==1)
  4.         forval t=1/`T1' {
  5.                 gen byte `X'_m_`t' = tenure== -`t' & (`X'==1)
  6.         }
  7.         forval t=1/`T2' {
  8.                 gen byte `X'_p_`t' = tenure== `t' & (`X'==1)
  9.         }
 10. }
(48,754 real changes made)
(55,432 real changes made)

. local X foreign

. gen byte `X'_p_0 = tenure_`X'==0

. forval t=1/`T1' {
  2.         gen byte `X'_m_`t' = tenure_`X'== -`t'
  3. }

. forval t=1/`T2' {
  2.         gen byte `X'_p_`t' = tenure_`X'== `t'
  3. }

. sort frame_id year

. 
. * illustrate window overlap and recoding
. l manager_id expat year tenure* if frame_id=="ft10072219"

        +----------------------------------------------------------------------------------------------------------------------+
  2634. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2006 |       -5 |     -7 |       -7 |       -7 |       -7 |       -7 |       -7 |       -7 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -7 |       -7  |       -7  |       -7  |       -7  |       -7  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2635. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2006 |       -5 |      0 |        0 |        0 |        0 |        0 |        0 |        0 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2636. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2006 |       -5 |     57 |       57 |       57 |       57 |       57 |       57 |       57 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       57 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2637. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2006 |       -5 |     -7 |       -7 |       -7 |       -7 |       -7 |       -7 |       -7 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2638. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2006 |       -5 |     -6 |       -6 |       -6 |       -6 |       -6 |       -6 |       -6 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -6 |       -6  |       -6  |       -6  |       -6  |       -6  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2639. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2007 |       -4 |      1 |        1 |        1 |        1 |        1 |        1 |        1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        1 |        1  |        1  |        1  |        1  |        1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2640. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2007 |       -4 |     -6 |       -6 |       -6 |       -6 |       -6 |       -6 |       -6 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -6 |       -6  |       -6  |       -6  |       -6  |       -6  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2641. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2007 |       -4 |     -5 |       -5 |       -5 |       -5 |       -5 |       -5 |       -5 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -5 |       -5  |       -5  |       -5  |       -5  |       -5  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2642. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2007 |       -4 |     58 |       58 |       58 |       58 |       58 |       58 |       58 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       58 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2643. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2007 |       -4 |     -6 |       -6 |       -6 |       -6 |       -6 |       -6 |       -6 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2644. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2008 |       -3 |     -5 |       -5 |       -5 |       -5 |       -5 |       -5 |       -5 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -5 |       -5  |       -5  |       -5  |       -5  |       -5  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2645. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2008 |       -3 |     59 |       59 |       59 |       59 |       59 |       59 |       59 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       59 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2646. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2008 |       -3 |     -4 |       -4 |       -4 |       -4 |       -4 |       -4 |       -4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -4 |       -4  |       -4  |       -4  |       -4  |       -4  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2647. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2008 |       -3 |      2 |        2 |        2 |        2 |        2 |        2 |        2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        2 |        2  |        2  |        2  |        2  |        2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2648. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2008 |       -3 |     -5 |       -5 |       -5 |       -5 |       -5 |       -5 |       -5 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2649. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2009 |       -2 |      3 |        3 |        3 |        3 |        3 |        3 |        3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        3 |        3  |        3  |        3  |        3  |        3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2650. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2009 |       -2 |     -4 |       -4 |       -4 |       -4 |       -4 |       -4 |       -4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2651. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2009 |       -2 |     -4 |       -4 |       -4 |       -4 |       -4 |       -4 |       -4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -4 |       -4  |       -4  |       -4  |       -4  |       -4  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2652. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2009 |       -2 |     -3 |       -3 |       -3 |       -3 |       -3 |       -3 |       -3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -3 |       -3  |       -3  |       -3  |       -3  |       -3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2653. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2009 |       -2 |     60 |       60 |       60 |       60 |       60 |       60 |       60 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       60 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2654. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2010 |       -1 |     61 |       61 |       61 |       61 |       61 |       61 |       61 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       61 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2655. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2010 |       -1 |      4 |        4 |        4 |        4 |        4 |        4 |        4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        4 |        4  |        4  |        4  |        4  |        4  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2656. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2010 |       -1 |     -2 |       -2 |       -2 |       -2 |       -2 |       -2 |       -2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -2 |       -2  |       -2  |       -2  |       -2  |       -2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2657. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2010 |       -1 |     -3 |       -3 |       -3 |       -3 |       -3 |       -3 |       -3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2658. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2010 |       -1 |     -3 |       -3 |       -3 |       -3 |       -3 |       -3 |       -3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -3 |       -3  |       -3  |       -3  |       -3  |       -3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2659. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2011 |        0 |     -1 |       -1 |       -1 |       -1 |       -1 |       -1 |       -1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -1 |       -1  |       -1  |       -1  |       -1  |       -1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2660. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2011 |        0 |     -2 |       -2 |       -2 |       -2 |       -2 |       -2 |       -2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -2 |       -2  |       -2  |       -2  |       -2  |       -2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2661. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2011 |        0 |     -2 |       -2 |       -2 |       -2 |       -2 |       -2 |       -2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2662. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2011 |        0 |     62 |       62 |       62 |       62 |       62 |       62 |       62 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       62 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2663. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2011 |        0 |      5 |        5 |        5 |        5 |        5 |        5 |        5 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        5 |        5  |        5  |        5  |        5  |        5  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2664. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2012 |        1 |     -1 |       -1 |       -1 |       -1 |       -1 |       -1 |       -1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -1 |       -1  |       -1  |       -1  |       -1  |       -1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2665. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2012 |        1 |     -1 |       -1 |       -1 |       -1 |       -1 |       -1 |       -1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2666. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2012 |        1 |      0 |        0 |        0 |        0 |        0 |        0 |        0 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2667. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2012 |        1 |      6 |        6 |        6 |        6 |        6 |        6 |        6 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        6 |        6  |        6  |        6  |        6  |        6  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2668. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2012 |        1 |     63 |       63 |       63 |       63 |       63 |       63 |       63 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       63 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2669. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2013 |        2 |      7 |        7 |        7 |        7 |        7 |        7 |        7 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        7 |        7  |        7  |        7  |        7  |        7  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2670. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2013 |        2 |     64 |       64 |       64 |       64 |       64 |       64 |       64 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       64 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2671. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2013 |        2 |      1 |        1 |        1 |        1 |        1 |        1 |        1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        1 |        1  |        1  |        1  |        1  |        1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2672. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2013 |        2 |      0 |        0 |        0 |        0 |        0 |        0 |        0 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2673. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2013 |        2 |      0 |        0 |        0 |        0 |        0 |        0 |        0 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2674. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2014 |        3 |     65 |       65 |       65 |       65 |       65 |       65 |       65 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       65 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2675. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2014 |        3 |      1 |        1 |        1 |        1 |        1 |        1 |        1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2676. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2014 |        3 |      8 |        8 |        8 |        8 |        8 |        8 |        8 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        8 |        8  |        8  |        8  |        8  |        8  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2677. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2014 |        3 |      2 |        2 |        2 |        2 |        2 |        2 |        2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        2 |        2  |        2  |        2  |        2  |        2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2678. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2014 |        3 |      1 |        1 |        1 |        1 |        1 |        1 |        1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        1 |        1  |        1  |        1  |        1  |        1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2679. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2015 |        4 |     66 |       66 |       66 |       66 |       66 |       66 |       66 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       66 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2680. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2015 |        4 |      3 |        3 |        3 |        3 |        3 |        3 |        3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        3 |        3  |        3  |        3  |        3  |        3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2681. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2015 |        4 |      9 |        9 |        9 |        9 |        9 |        9 |        9 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        9 |        9  |        9  |        9  |        9  |        9  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2682. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2015 |        4 |      2 |        2 |        2 |        2 |        2 |        2 |        2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2683. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2015 |        4 |      2 |        2 |        2 |        2 |        2 |        2 |        2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        2 |        2  |        2  |        2  |        2  |        2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2684. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2016 |        5 |      4 |        4 |        4 |        4 |        4 |        4 |        4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        4 |        4  |        4  |        4  |        4  |        4  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2685. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2016 |        5 |      3 |        3 |        3 |        3 |        3 |        3 |        3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        3 |        3  |        3  |        3  |        3  |        3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2686. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2016 |        5 |     67 |       67 |       67 |       67 |       67 |       67 |       67 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       67 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2687. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2016 |        5 |      3 |        3 |        3 |        3 |        3 |        3 |        3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2688. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2016 |        5 |     10 |       10 |       10 |       10 |       10 |       10 |       10 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       10 |       10  |       10  |       10  |       10  |       10  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

. 
. local Tbefore = Tbefore

. local Tafter = Tduring

. 
. * keep post event and after observations for estimation of fixed effects, but dummy these out
. gen byte post = (after==0) & tenure>Tduring

. gen byte post_expat = post & expat

. 
. foreach Y of var $outcomes {
  2.         * with firm FE, controls are years more than Tbefore before any event happens
.         xtreg `Y' *_m_* *_p_* i.ind_year i.age_cat if $sample_acquisitions & tenure<=Tduring [aw=inverse_weight], i(firm_perso
> n) fe vce(cluster id)
  3.         local title : variable label `e(depvar)'
  4. 
.         preserve
  5.         clear
  6.         set obs `N'
  7.         gen t = _n-2-`Tbefore'
  8.         label var t "Time since new manager (year)"
  9. 
.         gen expat_lower = 0
 10.         gen expat_upper = 0
 11.         label var expat_upper "95% CI of difference"
 12.         label var expat_lower "95% CI of difference"
 13.         foreach X in foreign domestic expat  {
 14.                 gen `X'_beta=0
 15.                 forval t=-`Tbefore'/`Tafter' {
 16.                         local tag "`t'"
 17.                         if (`t'<0) {
 18.                                 local tag = -`t'
 19.                                 local tag  _m_`tag'
 20.                         }
 21.                         else {
 22.                                 local tag  _p_`t'
 23.                         }
 24.                         replace `X'_beta = _b[`X'`tag'] if t==`t'
 25.                         matrix V = e(V)
 26.                         matrix V_diff = V["expat`tag'", "expat`tag'"] + V["domestic`tag'", "domestic`tag'"] - 2*V["expat`ta
> g'", "domestic`tag'"]
 27.                         scalar se_diff = sqrt(V_diff[1,1])
 28.                         replace expat_lower = `X'_beta-1.96*se_diff if t==`t'
 29.                         replace expat_upper = `X'_beta+1.96*se_diff if t==`t'
 30.                 }
 31.                 label var `X'_beta "`Y'"
 32. 
.         }
 33.         label var foreign_beta "Foreign owner"
 34.         label var expat_beta "Expat manager"
 35.         label var domestic_beta "Domestic manager"
 36. 
.         tw      (rarea expat_lower expat_upper  t if t>=-Tbefore-1 & t<=Tduring, fintensity(inten10) pstyle(p2)) ///
>                 (line domestic_beta  t if t>=-Tbefore-1 & t<=Tduring, sort pstyle(p1) lwidth(thick)) ///
>                 (line expat_beta  t if t>=-Tbefore-1 & t<=Tduring, sort pstyle(p2) lwidth(thick)) ///
>                 , scheme(538w) title(`title') xline(-0.5) aspect(.5) plotregion(style(none)) xsize(16) ysize(10)
 37.         graph export output/figure/`Y'_event_study.png, replace width(1600)
 38.         
.         restore
 39. 
. }

Fixed-effects (within) regression               Number of obs      =     56915
Group variable: firm_person                     Number of groups   =      7664

R-sq:  within  = 0.1200                         Obs per group: min =         1
       between = 0.1129                                        avg =       7.4
       overall = 0.1242                                        max =        12

                                                F(106,1609)        =      5.53
corr(u_i, Xb)  = -0.0851                        Prob > F           =    0.0000

                                 (Std. Err. adjusted for 1,610 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
domestic_m_1 |  -.1167503   .0451329    -2.59   0.010    -.2052757   -.0282249
domestic_m_2 |  -.0769164   .0368132    -2.09   0.037    -.1491232   -.0047095
domestic_m_3 |  -.0384815   .0277909    -1.38   0.166    -.0929917    .0160287
domestic_m_4 |  -.0073659   .0182719    -0.40   0.687    -.0432051    .0284733
   expat_m_1 |   .0176146   .0553269     0.32   0.750    -.0909058    .1261351
   expat_m_2 |   .0121346   .0442797     0.27   0.784    -.0747173    .0989865
   expat_m_3 |   -.003897   .0366753    -0.11   0.915    -.0758333    .0680393
   expat_m_4 |   .0021749   .0266572     0.08   0.935    -.0501116    .0544614
 foreign_m_1 |   -.031092   .0433796    -0.72   0.474    -.1161785    .0539945
 foreign_m_2 |  -.0266512   .0454763    -0.59   0.558    -.1158503    .0625478
 foreign_m_3 |  -.0203252   .0419885    -0.48   0.628     -.102683    .0620327
 foreign_m_4 |   .0026624    .036339     0.07   0.942    -.0686144    .0739393
domestic_p_0 |  -.1599229   .0551577    -2.90   0.004    -.2681113   -.0517345
domestic_p_1 |  -.1844941    .064011    -2.88   0.004    -.3100478   -.0589404
domestic_p_2 |  -.2256622   .0741511    -3.04   0.002     -.371105   -.0802193
domestic_p_3 |   -.236844   .0848514    -2.79   0.005    -.4032749   -.0704131
domestic_p_4 |  -.2551395   .0958683    -2.66   0.008    -.4431794   -.0670996
domestic_p_5 |  -.2306929   .1075692    -2.14   0.032    -.4416835   -.0197024
domestic_p_6 |   -.185833   .1185897    -1.57   0.117    -.4184396    .0467735
   expat_p_0 |  -.0605268   .0692244    -0.87   0.382    -.1963062    .0752526
   expat_p_1 |  -.0817473   .0767142    -1.07   0.287    -.2322175    .0687229
   expat_p_2 |  -.1162217   .0876526    -1.33   0.185     -.288147    .0557036
   expat_p_3 |  -.1391957   .0975104    -1.43   0.154    -.3304563     .052065
   expat_p_4 |  -.1417887   .1058797    -1.34   0.181    -.3494652    .0658879
   expat_p_5 |  -.1402066   .1197786    -1.17   0.242     -.375145    .0947318
   expat_p_6 |  -.1272207   .1283914    -0.99   0.322    -.3790527    .1246113
 foreign_p_0 |  -.0340158   .0447034    -0.76   0.447    -.1216987    .0536671
 foreign_p_1 |  -.0121376   .0439353    -0.28   0.782     -.098314    .0740387
 foreign_p_2 |  -.0311622   .0438523    -0.71   0.477    -.1171758    .0548514
 foreign_p_3 |   -.026557   .0413804    -0.64   0.521    -.1077222    .0546081
 foreign_p_4 |  -.0448918   .0397567    -1.13   0.259    -.1228722    .0330885
 foreign_p_5 |  -.0079714   .0365398    -0.22   0.827    -.0796421    .0636993
 foreign_p_6 |  -.0138746   .0319269    -0.43   0.664    -.0764973    .0487481
             |
    ind_year |
          2  |  -.1269178   .0603758    -2.10   0.036    -.2453412   -.0084944
          3  |  -.2600347   .0835042    -3.11   0.002    -.4238232   -.0962462
          4  |   -.370802   .1006797    -3.68   0.000    -.5682791   -.1733248
          5  |  -.4579084   .1159681    -3.95   0.000    -.6853728   -.2304441
          6  |  -.5552388   .1353564    -4.10   0.000    -.8207321   -.2897454
          7  |  -.6226618   .1517794    -4.10   0.000    -.9203679   -.3249556
          8  |  -.6378733   .1713348    -3.72   0.000    -.9739361   -.3018105
          9  |  -.7029646   .1898938    -3.70   0.000     -1.07543   -.3304993
         10  |  -.7421287    .206687    -3.59   0.000    -1.147533   -.3367246
         11  |  -.8133146   .2244752    -3.62   0.000    -1.253609   -.3730201
         12  |  -.8668221   .2421432    -3.58   0.000    -1.341771   -.3918729
         13  |  -.9052351   .2627086    -3.45   0.001    -1.420522    -.389948
         14  |  -.9329413   .2804132    -3.33   0.001    -1.482955   -.3829278
         15  |  -.9030809   .2981554    -3.03   0.002    -1.487895    -.318267
         16  |  -.8826933    .313919    -2.81   0.005    -1.498426   -.2669603
         17  |  -.9259961   .3294752    -2.81   0.005    -1.572242   -.2797505
         18  |  -.9978805   .3440626    -2.90   0.004    -1.672738   -.3230225
         19  |  -.9787265   .3578084    -2.74   0.006    -1.680546    -.276907
         20  |  -.9893907   .3721966    -2.66   0.008    -1.719432   -.2593496
         21  |  -1.056273   .3874486    -2.73   0.006     -1.81623   -.2963156
         22  |  -1.133073   .4027066    -2.81   0.005    -1.922957    -.343188
         23  |  -1.142492   .4180803    -2.73   0.006    -1.962531   -.3224528
         24  |  -1.128548   .4363917    -2.59   0.010    -1.984504   -.2725917
         25  |  -1.118624   .4536442    -2.47   0.014    -2.008419   -.2288281
         26  |    1.27454   .1736576     7.34   0.000     .9339208    1.615158
         27  |   1.033268   .1671091     6.18   0.000     .7054937    1.361042
         28  |   .8550929   .1674526     5.11   0.000     .5266448    1.183541
         29  |   .6648387   .1679074     3.96   0.000     .3354985    .9941789
         30  |   .4988744   .1760363     2.83   0.005       .15359    .8441589
         31  |   .3899596    .185005     2.11   0.035     .0270835    .7528358
         32  |   .2679123   .1978653     1.35   0.176    -.1201885     .656013
         33  |   .1882592    .212826     0.88   0.377     -.229186    .6057045
         34  |   .1729698   .2283725     0.76   0.449     -.274969    .6209085
         35  |   .0823835   .2432455     0.34   0.735    -.3947278    .5594947
         36  |   .0041074   .2555773     0.02   0.987     -.497192    .5054068
         37  |  -.0906742   .2693082    -0.34   0.736     -.618906    .4375576
         38  |  -.1805051    .280601    -0.64   0.520     -.730887    .3698767
         39  |  -.2279234   .2986601    -0.76   0.445     -.813727    .3578803
         40  |  -.2366534   .3109712    -0.76   0.447    -.8466045    .3732977
         41  |  -.2810558   .3256825    -0.86   0.388    -.9198623    .3577506
         42  |  -.3378575   .3407983    -0.99   0.322    -1.006313    .3305977
         43  |  -.4133328   .3567895    -1.16   0.247    -1.113154    .2864882
         44  |  -.4395985   .3723983    -1.18   0.238    -1.170035    .2908382
         45  |  -.5415995   .3860347    -1.40   0.161    -1.298783    .2155842
         46  |   -.478436   .4012748    -1.19   0.233    -1.265512    .3086402
         47  |  -.4495429   .4120848    -1.09   0.275    -1.257822    .3587366
         48  |  -.4407868   .4249485    -1.04   0.300    -1.274298    .3927239
         49  |  -.4844703   .4410712    -1.10   0.272    -1.349605    .3806642
         50  |  -.4344953   .4538241    -0.96   0.339    -1.324644    .4556532
             |
     age_cat |
          1  |   .4915384   .0640606     7.67   0.000     .3658874    .6171895
          2  |   .7921579    .077553    10.21   0.000     .6400425    .9442733
          3  |   .9932033    .091264    10.88   0.000     .8141945    1.172212
          4  |   1.214905   .1060759    11.45   0.000     1.006843    1.422966
          5  |   1.365768    .122245    11.17   0.000     1.125991    1.605544
          6  |   1.524462   .1358207    11.22   0.000     1.258058    1.790866
          7  |   1.658589   .1492798    11.11   0.000     1.365786    1.951392
          8  |   1.740326   .1625963    10.70   0.000     1.421404    2.059249
          9  |    1.80024   .1758872    10.24   0.000     1.455248    2.145232
         10  |   1.862752   .1886888     9.87   0.000      1.49265    2.232854
         11  |     1.9556   .2011794     9.72   0.000     1.560999    2.350202
         12  |   1.986146   .2148767     9.24   0.000     1.564678    2.407614
         13  |   2.019077   .2285154     8.84   0.000     1.570858    2.467296
         14  |   2.027842    .240954     8.42   0.000     1.555226    2.500459
         15  |   2.043193    .254596     8.03   0.000     1.543819    2.542568
         16  |   2.017326   .2690057     7.50   0.000     1.489688    2.544964
         17  |   2.035332   .2822596     7.21   0.000     1.481697    2.588967
         18  |   2.031903   .2955255     6.88   0.000     1.452248    2.611558
         19  |   2.025186   .3090119     6.55   0.000     1.419078    2.631294
         20  |   2.055632   .3294783     6.24   0.000     1.409381    2.701884
         25  |     2.0425   .3643788     5.61   0.000     1.327793    2.757206
         30  |   2.052831   .4598064     4.46   0.000     1.150949    2.954713
         40  |   2.105847   .5161068     4.08   0.000     1.093535    3.118159
         50  |   2.175035   .5731551     3.79   0.000     1.050826    3.299244
             |
       _cons |   2.997826   .1273017    23.55   0.000     2.748131     3.24752
-------------+----------------------------------------------------------------
     sigma_u |  1.2111404
     sigma_e |  .63382499
         rho |  .78500741   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 12
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =     56915
Group variable: firm_person                     Number of groups   =      7664

R-sq:  within  = 0.0945                         Obs per group: min =         1
       between = 0.0598                                        avg =       7.4
       overall = 0.0725                                        max =        12

                                                F(106,1609)        =      6.63
corr(u_i, Xb)  = -0.0517                        Prob > F           =    0.0000

                                 (Std. Err. adjusted for 1,610 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
domestic_m_1 |   .0484781     .06315     0.77   0.443    -.0753868     .172343
domestic_m_2 |     .01343   .0503226     0.27   0.790    -.0852746    .1121347
domestic_m_3 |   .0286159   .0371382     0.77   0.441    -.0442285    .1014603
domestic_m_4 |   .0331813   .0253286     1.31   0.190    -.0164992    .0828618
   expat_m_1 |  -.0360659   .0792463    -0.46   0.649    -.1915028    .1193709
   expat_m_2 |  -.0213204   .0643675    -0.33   0.741    -.1475733    .1049325
   expat_m_3 |  -.0308684   .0533524    -0.58   0.563    -.1355159     .073779
   expat_m_4 |   .0038978    .036198     0.11   0.914    -.0671024    .0748981
 foreign_m_1 |    .051589   .0572379     0.90   0.368    -.0606797    .1638576
 foreign_m_2 |   .0079888   .0564184     0.14   0.887    -.1026724      .11865
 foreign_m_3 |  -.0010947   .0549018    -0.02   0.984    -.1087814    .1065919
 foreign_m_4 |   .0166867   .0473826     0.35   0.725    -.0762514    .1096248
domestic_p_0 |   .0482489   .0759385     0.64   0.525    -.1006998    .1971976
domestic_p_1 |   .0335283   .0890049     0.38   0.706    -.1410494    .2081059
domestic_p_2 |   .0295516   .1040949     0.28   0.777    -.1746242    .2337275
domestic_p_3 |   .0515544   .1183477     0.44   0.663    -.1805774    .2836862
domestic_p_4 |   .0500131   .1362303     0.37   0.714    -.2171944    .3172206
domestic_p_5 |   .0761642   .1478619     0.52   0.607    -.2138579    .3661863
domestic_p_6 |   .1033363   .1632882     0.63   0.527    -.2169436    .4236162
   expat_p_0 |  -.0051249   .0945477    -0.05   0.957    -.1905745    .1803247
   expat_p_1 |   .0209386    .107967     0.19   0.846    -.1908322    .2327094
   expat_p_2 |   .0314132   .1215646     0.26   0.796    -.2070284    .2698548
   expat_p_3 |    .039815   .1347952     0.30   0.768    -.2245776    .3042076
   expat_p_4 |    .036197   .1483069     0.24   0.807     -.254698     .327092
   expat_p_5 |   .0253645     .16742     0.15   0.880    -.3030197    .3537487
   expat_p_6 |  -.0053353   .1861055    -0.03   0.977    -.3703699    .3596993
 foreign_p_0 |   .0472403   .0569648     0.83   0.407    -.0644927    .1589733
 foreign_p_1 |   .0976193    .055616     1.76   0.079    -.0114681    .2067067
 foreign_p_2 |   .0706444   .0543303     1.30   0.194    -.0359212    .1772101
 foreign_p_3 |    .090853   .0535134     1.70   0.090    -.0141103    .1958162
 foreign_p_4 |   .0746705   .0503862     1.48   0.139     -.024159       .1735
 foreign_p_5 |   .0071694   .0533218     0.13   0.893    -.0974181    .1117569
 foreign_p_6 |   .0135232   .0466837     0.29   0.772    -.0780442    .1050905
             |
    ind_year |
          2  |   .1187647   .0967568     1.23   0.220    -.0710179    .3085473
          3  |   .8559335   .1254682     6.82   0.000     .6098353    1.102032
          4  |   1.061985   .1483128     7.16   0.000     .7710783    1.352891
          5  |   1.273217   .1690202     7.53   0.000      .941694     1.60474
          6  |   1.422781   .1945293     7.31   0.000     1.041223    1.804338
          7  |   1.696659   .2211982     7.67   0.000     1.262792    2.130525
          8  |   1.879225   .2415069     7.78   0.000     1.405524    2.352927
          9  |   2.027116   .2664353     7.61   0.000      1.50452    2.549713
         10  |   2.136091   .2920016     7.32   0.000     1.563348    2.708835
         11  |   2.302007   .3175718     7.25   0.000     1.679109    2.924905
         12  |   2.334055   .3428299     6.81   0.000     1.661615    3.006495
         13  |   2.388853   .3706621     6.44   0.000     1.661821    3.115884
         14  |   2.462175   .3953519     6.23   0.000     1.686716    3.237634
         15  |   2.408351   .4210228     5.72   0.000     1.582541    3.234162
         16  |   2.451807   .4443778     5.52   0.000     1.580187    3.323427
         17  |    2.49285   .4684545     5.32   0.000     1.574004    3.411695
         18  |   2.572409    .486609     5.29   0.000     1.617955    3.526863
         19  |   2.521855   .5070397     4.97   0.000     1.527327    3.516382
         20  |   2.453465   .5309336     4.62   0.000     1.412071    3.494859
         21  |   2.452923   .5520902     4.44   0.000     1.370031    3.535814
         22  |   2.429084   .5716183     4.25   0.000      1.30789    3.550279
         23  |   2.492727   .5889497     4.23   0.000     1.337538    3.647916
         24  |   2.057729   .6164122     3.34   0.001     .8486739    3.266784
         25  |   2.024247   .6427116     3.15   0.002     .7636068    3.284887
         26  |   .5947022   .1983287     3.00   0.003     .2056924     .983712
         27  |   .6068717   .1967427     3.08   0.002     .2209729    .9927705
         28  |   .8220785   .1945089     4.23   0.000      .440561    1.203596
         29  |   1.048364   .2002095     5.24   0.000     .6556653    1.441063
         30  |   1.132903   .2109673     5.37   0.000     .7191037    1.546703
         31  |   1.297056   .2273252     5.71   0.000     .8511712     1.74294
         32  |   1.535451   .2424543     6.33   0.000     1.059891     2.01101
         33  |   1.643321   .2613976     6.29   0.000     1.130606    2.156037
         34  |   1.748138   .2811583     6.22   0.000     1.196663    2.299613
         35  |   1.857654   .3003011     6.19   0.000     1.268632    2.446677
         36  |   1.934414   .3237853     5.97   0.000     1.299328    2.569499
         37  |   2.085302   .3497731     5.96   0.000     1.399243     2.77136
         38  |   2.142801   .3748305     5.72   0.000     1.407594    2.878009
         39  |   2.201977   .3934041     5.60   0.000     1.430339    2.973616
         40  |   2.324216   .4142451     5.61   0.000       1.5117    3.136733
         41  |   2.342421   .4355115     5.38   0.000     1.488192     3.19665
         42  |   2.431166   .4591484     5.29   0.000     1.530574    3.331758
         43  |     2.5624    .478341     5.36   0.000     1.624163    3.500637
         44  |   2.467064   .5017739     4.92   0.000     1.482864    3.451263
         45  |   2.681582   .5220498     5.14   0.000     1.657612    3.705551
         46  |   2.642315   .5431256     4.87   0.000     1.577007    3.707623
         47  |   2.618105   .5600593     4.67   0.000     1.519582    3.716627
         48  |    2.55685   .5811828     4.40   0.000     1.416895    3.696805
         49  |   2.418989   .6032777     4.01   0.000     1.235696    3.602281
         50  |   2.409346   .6249667     3.86   0.000     1.183512     3.63518
             |
     age_cat |
          1  |  -.0911046   .1022025    -0.89   0.373    -.2915687    .1093595
          2  |  -.0692118   .1182766    -0.59   0.559    -.3012041    .1627805
          3  |  -.0936581    .137657    -0.68   0.496     -.363664    .1763478
          4  |  -.1009724   .1581322    -0.64   0.523    -.4111392    .2091943
          5  |  -.1512777   .1792655    -0.84   0.399    -.5028961    .2003407
          6  |  -.2178485   .2002172    -1.09   0.277    -.6105624    .1748654
          7  |  -.2058937    .219315    -0.94   0.348    -.6360668    .2242795
          8  |  -.2310413   .2377168    -0.97   0.331    -.6973083    .2352258
          9  |  -.2809637   .2582604    -1.09   0.277    -.7875258    .2255983
         10  |  -.3104957   .2769366    -1.12   0.262      -.85369    .2326986
         11  |  -.2855277   .2941721    -0.97   0.332    -.8625284     .291473
         12  |  -.3201612   .3120334    -1.03   0.305    -.9321959    .2918735
         13  |  -.3983989   .3327169    -1.20   0.231    -1.051003    .2542052
         14  |  -.4004752   .3508952    -1.14   0.254    -1.088735    .2877845
         15  |  -.4666373   .3699927    -1.26   0.207    -1.192356    .2590809
         16  |  -.5151858    .390467    -1.32   0.187    -1.281063    .2506915
         17  |  -.4832514   .4082055    -1.18   0.237    -1.283922     .317419
         18  |  -.4736001   .4264746    -1.11   0.267    -1.310104     .362904
         19  |  -.5150365   .4442801    -1.16   0.247    -1.386465    .3563919
         20  |  -.5408989   .4776122    -1.13   0.258    -1.477706    .3959086
         25  |  -.5494814   .5375288    -1.02   0.307    -1.603812    .5048489
         30  |  -.2437481   .6560764    -0.37   0.710    -1.530602    1.043106
         40  |  -.5044364   .7719559    -0.65   0.514    -2.018581    1.009708
         50  |  -.0602041   .8839856    -0.07   0.946    -1.794088     1.67368
             |
       _cons |    4.76288   .1739658    27.38   0.000     4.421657    5.104104
-------------+----------------------------------------------------------------
     sigma_u |  1.6128048
     sigma_e |  .90151392
         rho |  .76193348   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 12
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnKL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =     56915
Group variable: firm_person                     Number of groups   =      7664

R-sq:  within  = 0.2049                         Obs per group: min =         1
       between = 0.2190                                        avg =       7.4
       overall = 0.2111                                        max =        12

                                                F(106,1609)        =     21.79
corr(u_i, Xb)  = -0.0554                        Prob > F           =    0.0000

                                 (Std. Err. adjusted for 1,610 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
domestic_m_1 |  -.0304464   .0359619    -0.85   0.397    -.1009835    .0400907
domestic_m_2 |   .0072028   .0293863     0.25   0.806    -.0504367    .0648422
domestic_m_3 |   .0295595   .0228518     1.29   0.196     -.015263     .074382
domestic_m_4 |   .0274006   .0152282     1.80   0.072    -.0024685    .0572697
   expat_m_1 |   .0361089   .0438949     0.82   0.411    -.0499882    .1222061
   expat_m_2 |   .0233075   .0438134     0.53   0.595    -.0626298    .1092448
   expat_m_3 |   .0733598   .0332274     2.21   0.027     .0081862    .1385334
   expat_m_4 |   .0478353   .0298896     1.60   0.110    -.0107914     .106462
 foreign_m_1 |    .001691   .0330796     0.05   0.959    -.0631927    .0665747
 foreign_m_2 |  -.0209493   .0339873    -0.62   0.538    -.0876134    .0457149
 foreign_m_3 |  -.0122049   .0359214    -0.34   0.734    -.0826626    .0582528
 foreign_m_4 |   -.041133   .0296922    -1.39   0.166    -.0993726    .0171065
domestic_p_0 |   .0037202   .0435236     0.09   0.932    -.0816487    .0890891
domestic_p_1 |   .0281545   .0508387     0.55   0.580    -.0715626    .1278716
domestic_p_2 |   .0446026   .0583714     0.76   0.445    -.0698893    .1590944
domestic_p_3 |   .0681444   .0645538     1.06   0.291    -.0584739    .1947626
domestic_p_4 |   .0524248   .0758322     0.69   0.489    -.0963154     .201165
domestic_p_5 |   .0619613   .0819171     0.76   0.450    -.0987141    .2226367
domestic_p_6 |   .0385225   .0901504     0.43   0.669     -.138302     .215347
   expat_p_0 |   .0910353   .0513909     1.77   0.077    -.0097648    .1918353
   expat_p_1 |   .1519662   .0587118     2.59   0.010     .0368065    .2671259
   expat_p_2 |   .1479591   .0674507     2.19   0.028     .0156587    .2802595
   expat_p_3 |    .180592   .0768711     2.35   0.019      .029814      .33137
   expat_p_4 |   .1989544    .081623     2.44   0.015     .0388558    .3590531
   expat_p_5 |   .2460535   .0900168     2.73   0.006      .069491    .4226159
   expat_p_6 |   .2564966    .099988     2.57   0.010     .0603761    .4526171
 foreign_p_0 |  -.0024018   .0343898    -0.07   0.944    -.0698553    .0650517
 foreign_p_1 |   .0360049   .0334039     1.08   0.281    -.0295149    .1015247
 foreign_p_2 |   .0142245   .0341111     0.42   0.677    -.0526823    .0811313
 foreign_p_3 |   .0342752   .0316232     1.08   0.279    -.0277518    .0963022
 foreign_p_4 |   .0267706   .0326668     0.82   0.413    -.0373033    .0908446
 foreign_p_5 |   .0112224   .0322588     0.35   0.728    -.0520513     .074496
 foreign_p_6 |   .0130395   .0302567     0.43   0.667    -.0463071    .0723861
             |
    ind_year |
          2  |   .1579639   .0585776     2.70   0.007     .0430674    .2728604
          3  |   .4199486   .0686192     6.12   0.000     .2853561     .554541
          4  |   .6402249   .0775273     8.26   0.000     .4881598    .7922899
          5  |   .8424708   .0913701     9.22   0.000     .6632539    1.021688
          6  |   1.044159   .1082961     9.64   0.000     .8317432    1.256575
          7  |   1.203063   .1209327     9.95   0.000     .9658604    1.440265
          8  |   1.284078   .1344065     9.55   0.000     1.020448    1.547708
          9  |   1.474939   .1495797     9.86   0.000     1.181547     1.76833
         10  |    1.61471   .1648478     9.80   0.000     1.291371    1.938049
         11  |   1.710649   .1794663     9.53   0.000     1.358637    2.062661
         12  |   1.817753   .1952633     9.31   0.000     1.434756     2.20075
         13  |   1.918335   .2122636     9.04   0.000     1.501992    2.334677
         14  |   2.005133   .2258172     8.88   0.000     1.562206    2.448059
         15  |   2.023565   .2429135     8.33   0.000     1.547104    2.500025
         16  |   2.064893   .2559535     8.07   0.000     1.562855     2.56693
         17  |   2.173046   .2716118     8.00   0.000     1.640296    2.705796
         18  |   2.138645   .2865829     7.46   0.000      1.57653     2.70076
         19  |   2.178026   .2981721     7.30   0.000      1.59318    2.762873
         20  |   2.182209   .3113463     7.01   0.000     1.571522    2.792896
         21  |    2.19045   .3266845     6.71   0.000     1.549678    2.831222
         22  |   2.350244   .3367108     6.98   0.000     1.689807    3.010682
         23  |   2.426759   .3509422     6.91   0.000     1.738407    3.115111
         24  |   2.462172   .3699562     6.66   0.000     1.736525    3.187818
         25  |   2.425453   .3816509     6.36   0.000     1.676868    3.174038
         26  |  -.7927289   .1270086    -6.24   0.000    -1.041849   -.5436091
         27  |  -.4989557   .1248896    -4.00   0.000    -.7439192   -.2539923
         28  |  -.2597425   .1307932    -1.99   0.047    -.5162854   -.0031997
         29  |   .0638148   .1290243     0.49   0.621    -.1892587    .3168882
         30  |   .2495147   .1340574     1.86   0.063    -.0134307    .5124602
         31  |   .4300087   .1412384     3.04   0.002     .1529782    .7070392
         32  |   .6753977   .1514247     4.46   0.000     .3783873     .972408
         33  |   .8120953   .1575284     5.16   0.000     .5031128    1.121078
         34  |   1.040237   .1667114     6.24   0.000     .7132426    1.367231
         35  |    1.16613   .1753382     6.65   0.000     .8222149    1.510046
         36  |   1.219023    .189967     6.42   0.000     .8464146    1.591632
         37  |   1.376676   .1998252     6.89   0.000     .9847311    1.768621
         38  |   1.474213   .2067031     7.13   0.000     1.068778    1.879649
         39  |   1.567774   .2256422     6.95   0.000      1.12519    2.010357
         40  |   1.751123    .238602     7.34   0.000      1.28312    2.219127
         41  |   1.885798   .2508814     7.52   0.000      1.39371    2.377887
         42  |   1.965226   .2649526     7.42   0.000     1.445538    2.484914
         43  |   1.930872   .2799955     6.90   0.000     1.381678    2.480066
         44  |   1.954447   .2935988     6.66   0.000     1.378571    2.530323
         45  |   2.117483   .3041435     6.96   0.000     1.520924    2.714042
         46  |   2.078417   .3197701     6.50   0.000     1.451207    2.705627
         47  |   2.180502   .3261556     6.69   0.000     1.540768    2.820237
         48  |   2.157914   .3395238     6.36   0.000     1.491959    2.823869
         49  |   2.233088   .3537522     6.31   0.000     1.539225    2.926952
         50  |   2.157889   .3638427     5.93   0.000     1.444233    2.871544
             |
     age_cat |
          1  |   .3147598   .0665475     4.73   0.000     .1842309    .4452887
          2  |   .2831343   .0741104     3.82   0.000     .1377712    .4284974
          3  |   .2570948   .0846146     3.04   0.002     .0911284    .4230611
          4  |   .2296235   .0941624     2.44   0.015     .0449297    .4143172
          5  |   .1873164   .1062302     1.76   0.078    -.0210477    .3956805
          6  |   .1060416   .1176328     0.90   0.367    -.1246881    .3367713
          7  |   .0980781   .1290653     0.76   0.447    -.1550756    .3512319
          8  |   .0739876   .1406975     0.53   0.599     -.201982    .3499572
          9  |   .0314764   .1528723     0.21   0.837    -.2683735    .3313262
         10  |   -.014785      .1639    -0.09   0.928    -.3362649    .3066949
         11  |     .00061   .1766036     0.00   0.997    -.3457872    .3470073
         12  |   .0177134   .1892242     0.09   0.925    -.3534385    .3888653
         13  |  -.0499467   .2035287    -0.25   0.806     -.449156    .3492625
         14  |   -.120942   .2155688    -0.56   0.575    -.5437671    .3018831
         15  |  -.1217498   .2283904    -0.53   0.594    -.5697237    .3262242
         16  |  -.1631938   .2430626    -0.67   0.502    -.6399463    .3135587
         17  |  -.2046273   .2547306    -0.80   0.422    -.7042659    .2950113
         18  |  -.1807947   .2687789    -0.67   0.501    -.7079881    .3463988
         19  |  -.2443976   .2799414    -0.87   0.383    -.7934858    .3046906
         20  |  -.2820778   .3016637    -0.94   0.350    -.8737729    .3096174
         25  |  -.3248303   .3388489    -0.96   0.338    -.9894618    .3398012
         30  |  -.1790715   .4170202    -0.43   0.668    -.9970314    .6388884
         40  |  -.5324752   .4971596    -1.07   0.284    -1.507624    .4426734
         50  |   -.556623   .5536514    -1.01   0.315    -1.642577    .5293306
             |
       _cons |   7.870906   .1037714    75.85   0.000     7.667364    8.074447
-------------+----------------------------------------------------------------
     sigma_u |   1.113722
     sigma_e |  .58131605
         rho |  .78589162   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 12
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnQL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =     56915
Group variable: firm_person                     Number of groups   =      7664

R-sq:  within  = 0.0324                         Obs per group: min =         1
       between = 0.1099                                        avg =       7.4
       overall = 0.0805                                        max =        12

                                                F(106,1609)        =      2.75
corr(u_i, Xb)  = 0.0691                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 1,610 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
domestic_m_1 |  -.0036936   .0188725    -0.20   0.845    -.0407109    .0333238
domestic_m_2 |   .0078087   .0156033     0.50   0.617    -.0227962    .0384136
domestic_m_3 |  -.0021075   .0129415    -0.16   0.871    -.0274915    .0232764
domestic_m_4 |  -.0036591   .0094714    -0.39   0.699    -.0222367    .0149186
   expat_m_1 |   .0166859   .0246031     0.68   0.498    -.0315716    .0649434
   expat_m_2 |   .0096111   .0203955     0.47   0.638    -.0303935    .0496157
   expat_m_3 |   .0242964   .0178297     1.36   0.173    -.0106754    .0592682
   expat_m_4 |   .0145885   .0142658     1.02   0.307    -.0133929      .04257
 foreign_m_1 |  -.0155132   .0147889    -1.05   0.294    -.0445208    .0134944
 foreign_m_2 |  -.0047742   .0149357    -0.32   0.749    -.0340696    .0245212
 foreign_m_3 |  -.0044947   .0152631    -0.29   0.768    -.0344324     .025443
 foreign_m_4 |  -.0140196   .0143029    -0.98   0.327    -.0420739    .0140347
domestic_p_0 |  -.0009633   .0217329    -0.04   0.965    -.0435911    .0416646
domestic_p_1 |   .0073625   .0247218     0.30   0.766    -.0411279    .0558528
domestic_p_2 |  -.0024674   .0284762    -0.09   0.931    -.0583218    .0533869
domestic_p_3 |   .0011301   .0320993     0.04   0.972    -.0618308     .064091
domestic_p_4 |  -.0008258    .035841    -0.02   0.982    -.0711257    .0694742
domestic_p_5 |  -.0053624   .0395835    -0.14   0.892    -.0830031    .0722782
domestic_p_6 |   .0013626   .0442712     0.03   0.975    -.0854727    .0881979
   expat_p_0 |   .0290071   .0270366     1.07   0.283    -.0240235    .0820377
   expat_p_1 |    .033575   .0300759     1.12   0.264    -.0254171     .092567
   expat_p_2 |   .0307854   .0338468     0.91   0.363    -.0356029    .0971738
   expat_p_3 |    .041147   .0371781     1.11   0.269    -.0317756    .1140696
   expat_p_4 |   .0438749   .0408222     1.07   0.283    -.0361953    .1239451
   expat_p_5 |   .0318394   .0443377     0.72   0.473    -.0551264    .1188051
   expat_p_6 |   .0188923   .0482273     0.39   0.695    -.0757027    .1134873
 foreign_p_0 |   .0195074   .0147632     1.32   0.187    -.0094497    .0484646
 foreign_p_1 |   .0193024   .0155406     1.24   0.214    -.0111795    .0497843
 foreign_p_2 |   .0098425    .016098     0.61   0.541    -.0217326    .0414177
 foreign_p_3 |   .0084754   .0164587     0.51   0.607    -.0238074    .0407582
 foreign_p_4 |   .0164274   .0156139     1.05   0.293    -.0141982    .0470531
 foreign_p_5 |   .0083178   .0159551     0.52   0.602    -.0229771    .0396127
 foreign_p_6 |   .0160797   .0140716     1.14   0.253    -.0115209    .0436803
             |
    ind_year |
          2  |   .0042692   .0304456     0.14   0.889     -.055448    .0639864
          3  |   -.076062   .0330884    -2.30   0.022    -.1409629   -.0111611
          4  |  -.0752961    .039408    -1.91   0.056    -.1525925    .0020003
          5  |  -.0840069   .0428755    -1.96   0.050    -.1681046    .0000909
          6  |  -.0969489    .048242    -2.01   0.045    -.1915727   -.0023251
          7  |  -.1122431   .0506788    -2.21   0.027    -.2116464   -.0128397
          8  |  -.1118658   .0560216    -2.00   0.046    -.2217488   -.0019828
          9  |  -.1326628   .0603504    -2.20   0.028    -.2510366   -.0142891
         10  |  -.1531694   .0648649    -2.36   0.018    -.2803981   -.0259408
         11  |  -.1723282   .0695105    -2.48   0.013    -.3086688   -.0359876
         12  |  -.1560428   .0742688    -2.10   0.036    -.3017165   -.0103691
         13  |  -.1722248   .0788877    -2.18   0.029    -.3269583   -.0174912
         14  |  -.1367089   .0838276    -1.63   0.103    -.3011318    .0277139
         15  |  -.1229376   .0882627    -1.39   0.164    -.2960594    .0501843
         16  |  -.1312088   .0925256    -1.42   0.156    -.3126921    .0502745
         17  |  -.1069732   .0971633    -1.10   0.271    -.2975531    .0836067
         18  |  -.1040806   .1026612    -1.01   0.311    -.3054444    .0972831
         19  |  -.0955736    .107184    -0.89   0.373    -.3058085    .1146613
         20  |  -.0387884   .1116476    -0.35   0.728    -.2577785    .1802016
         21  |  -.1028256    .116014    -0.89   0.376      -.33038    .1247287
         22  |  -.0861059   .1192602    -0.72   0.470    -.3200275    .1478157
         23  |  -.0842875   .1244177    -0.68   0.498    -.3283253    .1597504
         24  |  -.1666687   .1291565    -1.29   0.197    -.4200014     .086664
         25  |   -.211493   .1347794    -1.57   0.117    -.4758547    .0528687
         26  |   .1038973    .059584     1.74   0.081     -.012973    .2207677
         27  |   .0848585   .0561191     1.51   0.131    -.0252158    .1949327
         28  |   .0957919   .0573236     1.67   0.095    -.0166448    .2082287
         29  |   .0901457   .0594689     1.52   0.130    -.0264991    .2067904
         30  |   .0987894   .0590677     1.67   0.095    -.0170682     .214647
         31  |   .0780442   .0622977     1.25   0.210    -.0441489    .2002373
         32  |   .0801342   .0639038     1.25   0.210    -.0452092    .2054776
         33  |   .0304713   .0663559     0.46   0.646    -.0996818    .1606244
         34  |   .0132398   .0696632     0.19   0.849    -.1234003    .1498799
         35  |   .0122347   .0731343     0.17   0.867    -.1312139    .1556833
         36  |  -.0171474   .0783543    -0.22   0.827    -.1708347    .1365398
         37  |   .0017664   .0804983     0.02   0.982    -.1561261    .1596589
         38  |     -.0012   .0841693    -0.01   0.989     -.166293     .163893
         39  |    .026713   .0883568     0.30   0.762    -.1465936    .2000195
         40  |   .0394284   .0922209     0.43   0.669    -.1414573    .2203142
         41  |   .0387296   .0955635     0.41   0.685    -.1487125    .2261716
         42  |   .0313717   .1001353     0.31   0.754    -.1650376    .2277809
         43  |    .033397   .1052389     0.32   0.751    -.1730226    .2398167
         44  |  -.0151102   .1117977    -0.14   0.893    -.2343947    .2041742
         45  |  -.0038382   .1154554    -0.03   0.973    -.2302969    .2226206
         46  |   .0133632    .119114     0.11   0.911    -.2202718    .2469981
         47  |   .0486892    .124443     0.39   0.696    -.1953982    .2927766
         48  |   .0364203    .131044     0.28   0.781    -.2206146    .2934553
         49  |  -.1027408   .1346405    -0.76   0.446      -.36683    .1613484
         50  |  -.1250581   .1396964    -0.90   0.371    -.3990642     .148948
             |
     age_cat |
          1  |   .0896878   .0267227     3.36   0.001     .0372728    .1421028
          2  |   .0853528   .0280396     3.04   0.002     .0303549    .1403507
          3  |   .1289819   .0316984     4.07   0.000     .0668074    .1911564
          4  |   .1689537   .0349478     4.83   0.000     .1004058    .2375017
          5  |   .1665439   .0382191     4.36   0.000     .0915794    .2415084
          6  |   .1919087   .0411101     4.67   0.000     .1112738    .2725436
          7  |    .192939   .0439086     4.39   0.000      .106815     .279063
          8  |   .2210372   .0455549     4.85   0.000      .131684    .3103904
          9  |   .2298523   .0488767     4.70   0.000     .1339836    .3257209
         10  |   .2603815   .0526885     4.94   0.000     .1570363    .3637268
         11  |   .2728436   .0559941     4.87   0.000     .1630146    .3826725
         12  |    .282355    .059714     4.73   0.000     .1652297    .3994803
         13  |   .2568448   .0627295     4.09   0.000     .1338047    .3798849
         14  |   .2576267   .0663538     3.88   0.000     .1274778    .3877756
         15  |   .2628446   .0695831     3.78   0.000     .1263615    .3993276
         16  |   .2503441   .0727025     3.44   0.001     .1077425    .3929457
         17  |   .2795026   .0768423     3.64   0.000      .128781    .4302241
         18  |   .2581602   .0808785     3.19   0.001     .0995219    .4167986
         19  |    .254636   .0849617     3.00   0.003     .0879886    .4212833
         20  |   .2560914   .0893865     2.86   0.004     .0807652    .4314175
         25  |   .3155642   .1016756     3.10   0.002     .1161336    .5149948
         30  |   .3683907   .1669946     2.21   0.028     .0408409    .6959406
         40  |    .446242   .1802535     2.48   0.013     .0926858    .7997983
         50  |   .4396883   .2029557     2.17   0.030     .0416029    .8377737
             |
       _cons |   .3803958   .0498301     7.63   0.000      .282657    .4781346
-------------+----------------------------------------------------------------
     sigma_u |  .40020309
     sigma_e |  .28411551
         rho |  .66489441   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 12
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/exporter_event_study.png written in PNG format)

. 
end of do-file

. 
. log close
      name:  <unnamed>
       log:  /Users/koren/Google Drive/Research/expat/research_design/talk/output/estimate.log
  log type:  text
 closed on:   4 Dec 2018, 15:04:43
--------------------------------------------------------------------------------------------------------------------------------
