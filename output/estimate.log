-----------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Tresors/Data3/projects/expat-analysis/output/estimate.log
  log type:  text
 opened on:  20 Nov 2018, 19:56:09

. 
. use temp/analysis_sample

. 
. local sample_baseline expat!=.

. local sample_manufacturing `sample_baseline' & manufacturing==1

. local sample_acquisitions `sample_baseline' & ever_foreign==1

. 
. local samples baseline manufacturing acquisitions

. 
. local scale lnL lnK lnQ

. local intensity lnKL lnQL exporter inv

. 
. egen person_tag = tag(frame_id manager_id)

. egen N = sum(person_tag), by(frame_id)

. gen inverse_weight = 1/N

. 
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. foreach sample in `samples' {
  2.         foreach group in scale intensity {
  3.                 foreach X of var ``group'' {
  4.                         xtreg `X' foreign during_domestic after_domestic during_expat afte
> r_expat i.ind_year i.age_cat if `sample_`sample'' [aw=inverse_weight], i(id ) fe vce(cluster 
> id)
  5.                         local r2_w = `e(r2_w)'
  6.                         do regram output/regression/`sample'_`group' `X' `X' R2_within "`r
> 2_w'"
  7.                 }
  8.         }
  9. }
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.1178                                         min =          1
     between = 0.0403                                         avg =       52.1
     overall = 0.0831                                         max =      4,150

                                                F(59,13202)       =      74.99
corr(u_i, Xb)  = -0.0260                        Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0208582   .0343426    -0.61   0.544    -.0881746    .0464583
during_domestic |  -.1047729   .0089017   -11.77   0.000    -.1222216   -.0873242
 after_domestic |  -.1947029   .0122424   -15.90   0.000    -.2186998   -.1707059
   during_expat |   .0087013   .0136449     0.64   0.524    -.0180447    .0354472
    after_expat |   .0319833   .0161437     1.98   0.048     .0003392    .0636273
                |
       ind_year |
             2  |   -.144209   .0173521    -8.31   0.000    -.1782216   -.1101965
             3  |  -.2771524     .02188   -12.67   0.000    -.3200403   -.2342646
             4  |  -.3814614   .0242507   -15.73   0.000    -.4289963   -.3339265
             5  |  -.4777944   .0266549   -17.93   0.000    -.5300419   -.4255469
             6  |  -.5642223   .0285386   -19.77   0.000     -.620162   -.5082825
             7  |  -.6248271   .0303731   -20.57   0.000    -.6843628   -.5652914
             8  |  -.6884238   .0323446   -21.28   0.000    -.7518239   -.6250236
             9  |  -.7563874   .0344605   -21.95   0.000     -.823935   -.6888398
            10  |  -.8086618   .0362402   -22.31   0.000    -.8796978   -.7376259
            11  |   -.880747    .037646   -23.40   0.000    -.9545386   -.8069554
            12  |  -.9081111   .0387051   -23.46   0.000    -.9839786   -.8322435
            13  |  -.9347392   .0395434   -23.64   0.000     -1.01225   -.8572285
            14  |  -.9540454   .0405624   -23.52   0.000    -1.033553   -.8745373
            15  |  -.9518574    .041475   -22.95   0.000    -1.033154   -.8705605
            16  |  -.9561148   .0422729   -22.62   0.000    -1.038976   -.8732539
            17  |   -.972131   .0431345   -22.54   0.000    -1.056681   -.8875812
            18  |  -1.015975   .0436005   -23.30   0.000    -1.101438   -.9305113
            19  |  -1.039647   .0441762   -23.53   0.000    -1.126239   -.9530556
            20  |  -1.063672   .0445834   -23.86   0.000    -1.151062   -.9762824
            21  |  -1.097542   .0451332   -24.32   0.000    -1.186009   -1.009074
            22  |  -1.122737   .0458582   -24.48   0.000    -1.212625   -1.032848
            23  |  -1.134715   .0463342   -24.49   0.000    -1.225537   -1.043894
            24  |  -1.138138    .047098   -24.17   0.000    -1.230457   -1.045819
            25  |  -1.117786   .0475365   -23.51   0.000    -1.210964   -1.024608
            26  |   .5577822   .0604852     9.22   0.000     .4392226    .6763418
            27  |   .3768354   .0590288     6.38   0.000     .2611303    .4925404
            28  |   .2773952   .0574769     4.83   0.000     .1647322    .3900582
            29  |   .1753376   .0564902     3.10   0.002     .0646087    .2860664
            30  |   .1047933   .0552965     1.90   0.058    -.0035958    .2131823
            31  |   .0403551   .0550225     0.73   0.463    -.0674968    .1482071
            32  |  -.0121434   .0543749    -0.22   0.823    -.1187261    .0944393
            33  |  -.0862844   .0542453    -1.59   0.112    -.1926129    .0200442
            34  |  -.1337075   .0542137    -2.47   0.014    -.2399742   -.0274408
            35  |  -.1866897   .0545892    -3.42   0.001    -.2936925    -.079687
            36  |  -.2628585   .0550717    -4.77   0.000     -.370807   -.1549101
            37  |  -.2986922   .0550848    -5.42   0.000    -.4066663   -.1907182
            38  |  -.3526272   .0555836    -6.34   0.000    -.4615791   -.2436754
            39  |  -.3757284   .0559798    -6.71   0.000    -.4854569       -.266
            40  |  -.3939793   .0564919    -6.97   0.000    -.5047115   -.2832471
            41  |  -.3934437   .0567013    -6.94   0.000    -.5045864    -.282301
            42  |  -.4016118   .0572742    -7.01   0.000    -.5138774   -.2893462
            43  |  -.5180217   .0580787    -8.92   0.000    -.6318643    -.404179
            44  |  -.5366969   .0589471    -9.10   0.000    -.6522416   -.4211522
            45  |  -.5082549   .0592998    -8.57   0.000    -.6244911   -.3920187
            46  |  -.5127517   .0599552    -8.55   0.000    -.6302726   -.3952308
            47  |  -.5069016   .0603795    -8.40   0.000     -.625254   -.3885491
            48  |  -.4980914   .0607609    -8.20   0.000    -.6171915   -.3789913
            49  |  -.4705351   .0615486    -7.64   0.000    -.5911791    -.349891
            50  |  -.4401006   .0613562    -7.17   0.000    -.5603676   -.3198337
                |
        age_cat |
             2  |   .4065406   .0168898    24.07   0.000     .3734342     .439647
             3  |   .7212244   .0191084    37.74   0.000     .6837692    .7586796
             4  |   1.097071   .0220713    49.71   0.000     1.053808    1.140334
             5  |    1.46257   .0266604    54.86   0.000     1.410312    1.514829
             6  |   1.768026   .0324415    54.50   0.000     1.704436    1.831616
                |
          _cons |   3.097398   .0359586    86.14   0.000     3.026914    3.167881
----------------+----------------------------------------------------------------
        sigma_u |  1.0149777
        sigma_e |  .77860657
            rho |  .62953725   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1177959547415514

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.1178                                         min =          1
     between = 0.0403                                         avg =       52.1
     overall = 0.0831                                         max =      4,150

                                                F(59,13202)       =      74.99
corr(u_i, Xb)  = -0.0260                        Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0208582   .0343426    -0.61   0.544    -.0881746    .0464583
during_domestic |  -.1047729   .0089017   -11.77   0.000    -.1222216   -.0873242
 after_domestic |  -.1947029   .0122424   -15.90   0.000    -.2186998   -.1707059
   during_expat |   .0087013   .0136449     0.64   0.524    -.0180447    .0354472
    after_expat |   .0319833   .0161437     1.98   0.048     .0003392    .0636273
                |
       ind_year |
             2  |   -.144209   .0173521    -8.31   0.000    -.1782216   -.1101965
             3  |  -.2771524     .02188   -12.67   0.000    -.3200403   -.2342646
             4  |  -.3814614   .0242507   -15.73   0.000    -.4289963   -.3339265
             5  |  -.4777944   .0266549   -17.93   0.000    -.5300419   -.4255469
             6  |  -.5642223   .0285386   -19.77   0.000     -.620162   -.5082825
             7  |  -.6248271   .0303731   -20.57   0.000    -.6843628   -.5652914
             8  |  -.6884238   .0323446   -21.28   0.000    -.7518239   -.6250236
             9  |  -.7563874   .0344605   -21.95   0.000     -.823935   -.6888398
            10  |  -.8086618   .0362402   -22.31   0.000    -.8796978   -.7376259
            11  |   -.880747    .037646   -23.40   0.000    -.9545386   -.8069554
            12  |  -.9081111   .0387051   -23.46   0.000    -.9839786   -.8322435
            13  |  -.9347392   .0395434   -23.64   0.000     -1.01225   -.8572285
            14  |  -.9540454   .0405624   -23.52   0.000    -1.033553   -.8745373
            15  |  -.9518574    .041475   -22.95   0.000    -1.033154   -.8705605
            16  |  -.9561148   .0422729   -22.62   0.000    -1.038976   -.8732539
            17  |   -.972131   .0431345   -22.54   0.000    -1.056681   -.8875812
            18  |  -1.015975   .0436005   -23.30   0.000    -1.101438   -.9305113
            19  |  -1.039647   .0441762   -23.53   0.000    -1.126239   -.9530556
            20  |  -1.063672   .0445834   -23.86   0.000    -1.151062   -.9762824
            21  |  -1.097542   .0451332   -24.32   0.000    -1.186009   -1.009074
            22  |  -1.122737   .0458582   -24.48   0.000    -1.212625   -1.032848
            23  |  -1.134715   .0463342   -24.49   0.000    -1.225537   -1.043894
            24  |  -1.138138    .047098   -24.17   0.000    -1.230457   -1.045819
            25  |  -1.117786   .0475365   -23.51   0.000    -1.210964   -1.024608
            26  |   .5577822   .0604852     9.22   0.000     .4392226    .6763418
            27  |   .3768354   .0590288     6.38   0.000     .2611303    .4925404
            28  |   .2773952   .0574769     4.83   0.000     .1647322    .3900582
            29  |   .1753376   .0564902     3.10   0.002     .0646087    .2860664
            30  |   .1047933   .0552965     1.90   0.058    -.0035958    .2131823
            31  |   .0403551   .0550225     0.73   0.463    -.0674968    .1482071
            32  |  -.0121434   .0543749    -0.22   0.823    -.1187261    .0944393
            33  |  -.0862844   .0542453    -1.59   0.112    -.1926129    .0200442
            34  |  -.1337075   .0542137    -2.47   0.014    -.2399742   -.0274408
            35  |  -.1866897   .0545892    -3.42   0.001    -.2936925    -.079687
            36  |  -.2628585   .0550717    -4.77   0.000     -.370807   -.1549101
            37  |  -.2986922   .0550848    -5.42   0.000    -.4066663   -.1907182
            38  |  -.3526272   .0555836    -6.34   0.000    -.4615791   -.2436754
            39  |  -.3757284   .0559798    -6.71   0.000    -.4854569       -.266
            40  |  -.3939793   .0564919    -6.97   0.000    -.5047115   -.2832471
            41  |  -.3934437   .0567013    -6.94   0.000    -.5045864    -.282301
            42  |  -.4016118   .0572742    -7.01   0.000    -.5138774   -.2893462
            43  |  -.5180217   .0580787    -8.92   0.000    -.6318643    -.404179
            44  |  -.5366969   .0589471    -9.10   0.000    -.6522416   -.4211522
            45  |  -.5082549   .0592998    -8.57   0.000    -.6244911   -.3920187
            46  |  -.5127517   .0599552    -8.55   0.000    -.6302726   -.3952308
            47  |  -.5069016   .0603795    -8.40   0.000     -.625254   -.3885491
            48  |  -.4980914   .0607609    -8.20   0.000    -.6171915   -.3789913
            49  |  -.4705351   .0615486    -7.64   0.000    -.5911791    -.349891
            50  |  -.4401006   .0613562    -7.17   0.000    -.5603676   -.3198337
                |
        age_cat |
             2  |   .4065406   .0168898    24.07   0.000     .3734342     .439647
             3  |   .7212244   .0191084    37.74   0.000     .6837692    .7586796
             4  |   1.097071   .0220713    49.71   0.000     1.053808    1.140334
             5  |    1.46257   .0266604    54.86   0.000     1.410312    1.514829
             6  |   1.768026   .0324415    54.50   0.000     1.704436    1.831616
                |
          _cons |   3.097398   .0359586    86.14   0.000     3.026914    3.167881
----------------+----------------------------------------------------------------
        sigma_u |  1.0149777
        sigma_e |  .77860657
            rho |  .62953725   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    633,552
Group variable: id                              Number of groups  =     12,830

R-sq:                                           Obs per group:
     within  = 0.1971                                         min =          1
     between = 0.1260                                         avg =       49.4
     overall = 0.1004                                         max =      3,984

                                                F(59,12829)       =     127.30
corr(u_i, Xb)  = 0.0924                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,830 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0931893   .0500073     1.86   0.062    -.0048325    .1912111
during_domestic |  -.0802389    .012016    -6.68   0.000     -.103792   -.0566858
 after_domestic |   -.159048   .0158767   -10.02   0.000    -.1901688   -.1279273
   during_expat |  -.1151695   .0193442    -5.95   0.000     -.153087   -.0772521
    after_expat |  -.2103934    .020884   -10.07   0.000     -.251329   -.1694577
                |
       ind_year |
             2  |  -.0831175   .0285163    -2.91   0.004    -.1390136   -.0272214
             3  |   .3078649   .0346252     8.89   0.000     .2399944    .3757355
             4  |    .359773   .0377844     9.52   0.000     .2857099     .433836
             5  |    .435807   .0410095    10.63   0.000     .3554223    .5161918
             6  |   .5780224   .0433485    13.33   0.000      .493053    .6629918
             7  |   .7363894   .0458164    16.07   0.000     .6465824    .8261965
             8  |   .8268637   .0483111    17.12   0.000     .7321667    .9215607
             9  |   .9006134   .0506627    17.78   0.000      .801307    .9999198
            10  |   .9676673   .0526991    18.36   0.000     .8643692    1.070965
            11  |   1.025479   .0545287    18.81   0.000     .9185949    1.132364
            12  |   1.065047   .0563457    18.90   0.000      .954601    1.175493
            13  |   1.114988   .0576554    19.34   0.000     1.001975    1.228001
            14  |   1.130884   .0588081    19.23   0.000     1.015611    1.246156
            15  |   1.109998   .0599357    18.52   0.000     .9925154    1.227481
            16  |   1.145638   .0612358    18.71   0.000     1.025607    1.265669
            17  |   1.168883   .0620109    18.85   0.000     1.047332    1.290434
            18  |   1.145464   .0630517    18.17   0.000     1.021873    1.269054
            19  |   1.081074   .0636863    16.97   0.000     .9562396    1.205909
            20  |   1.053709    .064489    16.34   0.000     .9273007    1.180117
            21  |   1.060253   .0652582    16.25   0.000     .9323377    1.188169
            22  |   1.066072   .0664703    16.04   0.000     .9357802    1.196364
            23  |    1.13993   .0675004    16.89   0.000     1.007619     1.27224
            24  |   .7153666   .0730779     9.79   0.000      .572123    .8586103
            25  |   .7746041   .0790666     9.80   0.000     .6196219    .9295864
            26  |   .8783701   .0829378    10.59   0.000     .7157996    1.040941
            27  |    .806424   .0780166    10.34   0.000     .6534999    .9593481
            28  |   .9574865   .0737123    12.99   0.000     .8129993    1.101974
            29  |   .9711968   .0728382    13.33   0.000     .8284232     1.11397
            30  |   1.018779   .0723168    14.09   0.000     .8770277    1.160531
            31  |   1.093484   .0721628    15.15   0.000     .9520344    1.234934
            32  |   1.265615   .0713626    17.73   0.000     1.125734    1.405496
            33  |   1.320988   .0715617    18.46   0.000     1.180716     1.46126
            34  |   1.377871   .0720024    19.14   0.000     1.236735    1.519006
            35  |   1.419766   .0728496    19.49   0.000      1.27697    1.562562
            36  |   1.459781   .0739328    19.74   0.000     1.314861      1.6047
            37  |   1.511758   .0743073    20.34   0.000     1.366105    1.657411
            38  |   1.528895   .0751116    20.35   0.000     1.381665    1.676125
            39  |   1.540464   .0758384    20.31   0.000     1.391809    1.689118
            40  |   1.550637   .0766814    20.22   0.000     1.400331    1.700944
            41  |   1.604774   .0775728    20.69   0.000     1.452719    1.756828
            42  |   1.654745   .0783366    21.12   0.000     1.501193    1.808296
            43  |   1.603368   .0792985    20.22   0.000     1.447932    1.758805
            44  |   1.572082   .0800342    19.64   0.000     1.415203    1.728961
            45  |   1.645421   .0803425    20.48   0.000     1.487937    1.802904
            46  |   1.641931   .0811205    20.24   0.000     1.482923    1.800939
            47  |   1.700438   .0819216    20.76   0.000      1.53986    1.861017
            48  |   1.770999   .0825559    21.45   0.000     1.609177    1.932821
            49  |   1.685165   .0863872    19.51   0.000     1.515834    1.854497
            50  |   1.794257   .0895282    20.04   0.000     1.618769    1.969746
                |
        age_cat |
             2  |   .4705718   .0279479    16.84   0.000     .4157897    .5253539
             3  |   .7915971   .0307783    25.72   0.000     .7312671    .8519272
             4  |   1.166461   .0340666    34.24   0.000     1.099685    1.233236
             5  |   1.468327   .0398568    36.84   0.000     1.390202    1.546453
             6  |   1.706504   .0475673    35.88   0.000     1.613265    1.799743
                |
          _cons |   7.825888   .0532929   146.85   0.000     7.721426     7.93035
----------------+----------------------------------------------------------------
        sigma_u |  1.8540647
        sigma_e |  1.0660272
            rho |  .75154756   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1970622822342626

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    633,552
Group variable: id                              Number of groups  =     12,830

R-sq:                                           Obs per group:
     within  = 0.1971                                         min =          1
     between = 0.1260                                         avg =       49.4
     overall = 0.1004                                         max =      3,984

                                                F(59,12829)       =     127.30
corr(u_i, Xb)  = 0.0924                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,830 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0931893   .0500073     1.86   0.062    -.0048325    .1912111
during_domestic |  -.0802389    .012016    -6.68   0.000     -.103792   -.0566858
 after_domestic |   -.159048   .0158767   -10.02   0.000    -.1901688   -.1279273
   during_expat |  -.1151695   .0193442    -5.95   0.000     -.153087   -.0772521
    after_expat |  -.2103934    .020884   -10.07   0.000     -.251329   -.1694577
                |
       ind_year |
             2  |  -.0831175   .0285163    -2.91   0.004    -.1390136   -.0272214
             3  |   .3078649   .0346252     8.89   0.000     .2399944    .3757355
             4  |    .359773   .0377844     9.52   0.000     .2857099     .433836
             5  |    .435807   .0410095    10.63   0.000     .3554223    .5161918
             6  |   .5780224   .0433485    13.33   0.000      .493053    .6629918
             7  |   .7363894   .0458164    16.07   0.000     .6465824    .8261965
             8  |   .8268637   .0483111    17.12   0.000     .7321667    .9215607
             9  |   .9006134   .0506627    17.78   0.000      .801307    .9999198
            10  |   .9676673   .0526991    18.36   0.000     .8643692    1.070965
            11  |   1.025479   .0545287    18.81   0.000     .9185949    1.132364
            12  |   1.065047   .0563457    18.90   0.000      .954601    1.175493
            13  |   1.114988   .0576554    19.34   0.000     1.001975    1.228001
            14  |   1.130884   .0588081    19.23   0.000     1.015611    1.246156
            15  |   1.109998   .0599357    18.52   0.000     .9925154    1.227481
            16  |   1.145638   .0612358    18.71   0.000     1.025607    1.265669
            17  |   1.168883   .0620109    18.85   0.000     1.047332    1.290434
            18  |   1.145464   .0630517    18.17   0.000     1.021873    1.269054
            19  |   1.081074   .0636863    16.97   0.000     .9562396    1.205909
            20  |   1.053709    .064489    16.34   0.000     .9273007    1.180117
            21  |   1.060253   .0652582    16.25   0.000     .9323377    1.188169
            22  |   1.066072   .0664703    16.04   0.000     .9357802    1.196364
            23  |    1.13993   .0675004    16.89   0.000     1.007619     1.27224
            24  |   .7153666   .0730779     9.79   0.000      .572123    .8586103
            25  |   .7746041   .0790666     9.80   0.000     .6196219    .9295864
            26  |   .8783701   .0829378    10.59   0.000     .7157996    1.040941
            27  |    .806424   .0780166    10.34   0.000     .6534999    .9593481
            28  |   .9574865   .0737123    12.99   0.000     .8129993    1.101974
            29  |   .9711968   .0728382    13.33   0.000     .8284232     1.11397
            30  |   1.018779   .0723168    14.09   0.000     .8770277    1.160531
            31  |   1.093484   .0721628    15.15   0.000     .9520344    1.234934
            32  |   1.265615   .0713626    17.73   0.000     1.125734    1.405496
            33  |   1.320988   .0715617    18.46   0.000     1.180716     1.46126
            34  |   1.377871   .0720024    19.14   0.000     1.236735    1.519006
            35  |   1.419766   .0728496    19.49   0.000      1.27697    1.562562
            36  |   1.459781   .0739328    19.74   0.000     1.314861      1.6047
            37  |   1.511758   .0743073    20.34   0.000     1.366105    1.657411
            38  |   1.528895   .0751116    20.35   0.000     1.381665    1.676125
            39  |   1.540464   .0758384    20.31   0.000     1.391809    1.689118
            40  |   1.550637   .0766814    20.22   0.000     1.400331    1.700944
            41  |   1.604774   .0775728    20.69   0.000     1.452719    1.756828
            42  |   1.654745   .0783366    21.12   0.000     1.501193    1.808296
            43  |   1.603368   .0792985    20.22   0.000     1.447932    1.758805
            44  |   1.572082   .0800342    19.64   0.000     1.415203    1.728961
            45  |   1.645421   .0803425    20.48   0.000     1.487937    1.802904
            46  |   1.641931   .0811205    20.24   0.000     1.482923    1.800939
            47  |   1.700438   .0819216    20.76   0.000      1.53986    1.861017
            48  |   1.770999   .0825559    21.45   0.000     1.609177    1.932821
            49  |   1.685165   .0863872    19.51   0.000     1.515834    1.854497
            50  |   1.794257   .0895282    20.04   0.000     1.618769    1.969746
                |
        age_cat |
             2  |   .4705718   .0279479    16.84   0.000     .4157897    .5253539
             3  |   .7915971   .0307783    25.72   0.000     .7312671    .8519272
             4  |   1.166461   .0340666    34.24   0.000     1.099685    1.233236
             5  |   1.468327   .0398568    36.84   0.000     1.390202    1.546453
             6  |   1.706504   .0475673    35.88   0.000     1.613265    1.799743
                |
          _cons |   7.825888   .0532929   146.85   0.000     7.721426     7.93035
----------------+----------------------------------------------------------------
        sigma_u |  1.8540647
        sigma_e |  1.0660272
            rho |  .75154756   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.2960                                         min =          1
     between = 0.0926                                         avg =       52.1
     overall = 0.1278                                         max =      4,150

                                                F(59,13202)       =     236.63
corr(u_i, Xb)  = 0.0505                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .062621   .0361207     1.73   0.083    -.0081809    .1334228
during_domestic |  -.1316475   .0100158   -13.14   0.000    -.1512799    -.112015
 after_domestic |    -.20326    .013216   -15.38   0.000    -.2291652   -.1773547
   during_expat |   .0501229   .0150899     3.32   0.001     .0205444    .0797013
    after_expat |   .0802107   .0176238     4.55   0.000     .0456656    .1147558
                |
       ind_year |
             2  |   .0019847   .0207258     0.10   0.924    -.0386408    .0426101
             3  |   .0591545   .0247294     2.39   0.017     .0106813    .1076278
             4  |   .1458565   .0274988     5.30   0.000     .0919549    .1997581
             5  |   .2294089   .0299948     7.65   0.000     .1706148     .288203
             6  |   .3285524   .0319847    10.27   0.000     .2658577    .3912471
             7  |   .4020156   .0339778    11.83   0.000     .3354142    .4686171
             8  |   .4253546   .0361822    11.76   0.000     .3544322     .496277
             9  |   .4803817   .0382838    12.55   0.000     .4053399    .5554235
            10  |    .541661   .0402878    13.44   0.000     .4626911    .6206309
            11  |   .5498114   .0417362    13.17   0.000     .4680026    .6316203
            12  |   .5539982   .0431825    12.83   0.000     .4693543    .6386421
            13  |   .5898402   .0439872    13.41   0.000     .5036189    .6760615
            14  |   .6138552   .0451943    13.58   0.000     .5252678    .7024426
            15  |   .6781203   .0462929    14.65   0.000     .5873796    .7688609
            16  |   .7009716   .0473755    14.80   0.000     .6081088    .7938344
            17  |   .7366926   .0484268    15.21   0.000     .6417691    .8316161
            18  |   .6415497   .0490055    13.09   0.000      .545492    .7376075
            19  |    .651295   .0498768    13.06   0.000     .5535293    .7490606
            20  |   .6726961   .0502409    13.39   0.000     .5742168    .7711755
            21  |   .6548811   .0508726    12.87   0.000     .5551634    .7545988
            22  |   .6853274   .0518505    13.22   0.000      .583693    .7869619
            23  |    .725362   .0525664    13.80   0.000     .6223243    .8283996
            24  |   .7475822   .0530282    14.10   0.000     .6436393    .8515251
            25  |   .7640662   .0535848    14.26   0.000     .6590323    .8691002
            26  |   .2101421   .0650811     3.23   0.001     .0825738    .3377103
            27  |   .1676527   .0617267     2.72   0.007     .0466596    .2886459
            28  |   .2903287   .0590753     4.91   0.000     .1745325    .4061249
            29  |   .4331353   .0579123     7.48   0.000     .3196188    .5466518
            30  |   .5538965   .0568027     9.75   0.000      .442555    .6652379
            31  |   .6631347   .0566991    11.70   0.000     .5519964     .774273
            32  |   .7740157   .0562209    13.77   0.000     .6638146    .8842168
            33  |   .7983645   .0567151    14.08   0.000     .6871946    .9095343
            34  |   .8990156   .0566097    15.88   0.000     .7880525    1.009979
            35  |   .9338191   .0571995    16.33   0.000     .8216998    1.045938
            36  |   .9233389   .0575437    16.05   0.000      .810545    1.036133
            37  |   .9648509   .0576449    16.74   0.000     .8518586    1.077843
            38  |   .9909096   .0585214    16.93   0.000     .8761993     1.10562
            39  |   1.038867   .0590759    17.59   0.000     .9230701    1.154665
            40  |   1.126093   .0600672    18.75   0.000     1.008353    1.243833
            41  |   1.198066   .0601001    19.93   0.000     1.080261    1.315871
            42  |   1.249119   .0606267    20.60   0.000     1.130282    1.367956
            43  |   1.114303   .0615717    18.10   0.000     .9936134    1.234992
            44  |   1.154198    .062869    18.36   0.000     1.030966    1.277431
            45  |   1.260726   .0634442    19.87   0.000     1.136366    1.385086
            46  |   1.270558   .0644482    19.71   0.000      1.14423    1.396886
            47  |   1.310844   .0648511    20.21   0.000     1.183726    1.437961
            48  |   1.359022   .0656555    20.70   0.000     1.230327    1.487716
            49  |   1.382383   .0665878    20.76   0.000     1.251861    1.512905
            50  |   1.439035   .0662101    21.73   0.000     1.309254    1.568817
                |
        age_cat |
             2  |   1.033514   .0240016    43.06   0.000     .9864675    1.080561
             3  |   1.417623   .0255065    55.58   0.000     1.367627     1.46762
             4  |   1.802722   .0280428    64.28   0.000     1.747754     1.85769
             5  |   2.144095   .0325221    65.93   0.000     2.080347    2.207843
             6  |   2.430067   .0389215    62.44   0.000     2.353775    2.506359
                |
          _cons |   10.24264   .0414447   247.14   0.000      10.1614    10.32388
----------------+----------------------------------------------------------------
        sigma_u |  1.5455136
        sigma_e |   .9042321
            rho |  .74498677   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .296003224030948

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.2960                                         min =          1
     between = 0.0926                                         avg =       52.1
     overall = 0.1278                                         max =      4,150

                                                F(59,13202)       =     236.63
corr(u_i, Xb)  = 0.0505                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .062621   .0361207     1.73   0.083    -.0081809    .1334228
during_domestic |  -.1316475   .0100158   -13.14   0.000    -.1512799    -.112015
 after_domestic |    -.20326    .013216   -15.38   0.000    -.2291652   -.1773547
   during_expat |   .0501229   .0150899     3.32   0.001     .0205444    .0797013
    after_expat |   .0802107   .0176238     4.55   0.000     .0456656    .1147558
                |
       ind_year |
             2  |   .0019847   .0207258     0.10   0.924    -.0386408    .0426101
             3  |   .0591545   .0247294     2.39   0.017     .0106813    .1076278
             4  |   .1458565   .0274988     5.30   0.000     .0919549    .1997581
             5  |   .2294089   .0299948     7.65   0.000     .1706148     .288203
             6  |   .3285524   .0319847    10.27   0.000     .2658577    .3912471
             7  |   .4020156   .0339778    11.83   0.000     .3354142    .4686171
             8  |   .4253546   .0361822    11.76   0.000     .3544322     .496277
             9  |   .4803817   .0382838    12.55   0.000     .4053399    .5554235
            10  |    .541661   .0402878    13.44   0.000     .4626911    .6206309
            11  |   .5498114   .0417362    13.17   0.000     .4680026    .6316203
            12  |   .5539982   .0431825    12.83   0.000     .4693543    .6386421
            13  |   .5898402   .0439872    13.41   0.000     .5036189    .6760615
            14  |   .6138552   .0451943    13.58   0.000     .5252678    .7024426
            15  |   .6781203   .0462929    14.65   0.000     .5873796    .7688609
            16  |   .7009716   .0473755    14.80   0.000     .6081088    .7938344
            17  |   .7366926   .0484268    15.21   0.000     .6417691    .8316161
            18  |   .6415497   .0490055    13.09   0.000      .545492    .7376075
            19  |    .651295   .0498768    13.06   0.000     .5535293    .7490606
            20  |   .6726961   .0502409    13.39   0.000     .5742168    .7711755
            21  |   .6548811   .0508726    12.87   0.000     .5551634    .7545988
            22  |   .6853274   .0518505    13.22   0.000      .583693    .7869619
            23  |    .725362   .0525664    13.80   0.000     .6223243    .8283996
            24  |   .7475822   .0530282    14.10   0.000     .6436393    .8515251
            25  |   .7640662   .0535848    14.26   0.000     .6590323    .8691002
            26  |   .2101421   .0650811     3.23   0.001     .0825738    .3377103
            27  |   .1676527   .0617267     2.72   0.007     .0466596    .2886459
            28  |   .2903287   .0590753     4.91   0.000     .1745325    .4061249
            29  |   .4331353   .0579123     7.48   0.000     .3196188    .5466518
            30  |   .5538965   .0568027     9.75   0.000      .442555    .6652379
            31  |   .6631347   .0566991    11.70   0.000     .5519964     .774273
            32  |   .7740157   .0562209    13.77   0.000     .6638146    .8842168
            33  |   .7983645   .0567151    14.08   0.000     .6871946    .9095343
            34  |   .8990156   .0566097    15.88   0.000     .7880525    1.009979
            35  |   .9338191   .0571995    16.33   0.000     .8216998    1.045938
            36  |   .9233389   .0575437    16.05   0.000      .810545    1.036133
            37  |   .9648509   .0576449    16.74   0.000     .8518586    1.077843
            38  |   .9909096   .0585214    16.93   0.000     .8761993     1.10562
            39  |   1.038867   .0590759    17.59   0.000     .9230701    1.154665
            40  |   1.126093   .0600672    18.75   0.000     1.008353    1.243833
            41  |   1.198066   .0601001    19.93   0.000     1.080261    1.315871
            42  |   1.249119   .0606267    20.60   0.000     1.130282    1.367956
            43  |   1.114303   .0615717    18.10   0.000     .9936134    1.234992
            44  |   1.154198    .062869    18.36   0.000     1.030966    1.277431
            45  |   1.260726   .0634442    19.87   0.000     1.136366    1.385086
            46  |   1.270558   .0644482    19.71   0.000      1.14423    1.396886
            47  |   1.310844   .0648511    20.21   0.000     1.183726    1.437961
            48  |   1.359022   .0656555    20.70   0.000     1.230327    1.487716
            49  |   1.382383   .0665878    20.76   0.000     1.251861    1.512905
            50  |   1.439035   .0662101    21.73   0.000     1.309254    1.568817
                |
        age_cat |
             2  |   1.033514   .0240016    43.06   0.000     .9864675    1.080561
             3  |   1.417623   .0255065    55.58   0.000     1.367627     1.46762
             4  |   1.802722   .0280428    64.28   0.000     1.747754     1.85769
             5  |   2.144095   .0325221    65.93   0.000     2.080347    2.207843
             6  |   2.430067   .0389215    62.44   0.000     2.353775    2.506359
                |
          _cons |   10.24264   .0414447   247.14   0.000      10.1614    10.32388
----------------+----------------------------------------------------------------
        sigma_u |  1.5455136
        sigma_e |   .9042321
            rho |  .74498677   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    633,552
Group variable: id                              Number of groups  =     12,830

R-sq:                                           Obs per group:
     within  = 0.1973                                         min =          1
     between = 0.0630                                         avg =       49.4
     overall = 0.0965                                         max =      3,984

                                                F(59,12829)       =     137.60
corr(u_i, Xb)  = 0.0215                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,830 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .1117282   .0402641     2.77   0.006     .0328046    .1906518
during_domestic |   .0236036   .0099482     2.37   0.018     .0041036    .0431036
 after_domestic |     .02123    .012607     1.68   0.092    -.0034816    .0459416
   during_expat |   -.133892   .0160497    -8.34   0.000    -.1653519   -.1024321
    after_expat |  -.2614021   .0166771   -15.67   0.000    -.2940917   -.2287125
                |
       ind_year |
             2  |   .0919022   .0241862     3.80   0.000     .0444937    .1393108
             3  |   .6210602   .0282834    21.96   0.000     .5656206    .6764998
             4  |   .7724654   .0301964    25.58   0.000      .713276    .8316547
             5  |    .945085   .0320772    29.46   0.000      .882209    1.007961
             6  |   1.178582   .0335098    35.17   0.000     1.112897    1.244266
             7  |   1.398418   .0347587    40.23   0.000     1.330286     1.46655
             8  |   1.545957   .0365428    42.31   0.000     1.474327    1.617586
             9  |   1.678059   .0377901    44.40   0.000     1.603985    1.752133
            10  |   1.796174   .0389104    46.16   0.000     1.719904    1.872444
            11  |    1.92652   .0398289    48.37   0.000     1.848449    2.004591
            12  |   1.985858   .0410149    48.42   0.000     1.905463    2.066253
            13  |    2.06003   .0419295    49.13   0.000     1.977842    2.142219
            14  |   2.085709   .0426161    48.94   0.000     2.002175    2.169243
            15  |   2.057319   .0435826    47.21   0.000     1.971891    2.142748
            16  |   2.093585   .0445547    46.99   0.000     2.006252    2.180919
            17  |   2.131019   .0452897    47.05   0.000     2.042244    2.219793
            18  |    2.15876    .046441    46.48   0.000     2.067728    2.249791
            19  |   2.112802   .0468705    45.08   0.000     2.020928    2.204675
            20  |    2.09639   .0478293    43.83   0.000     2.002638    2.190143
            21  |   2.129377   .0488221    43.62   0.000     2.033678    2.225076
            22  |   2.157045   .0497443    43.36   0.000     2.059539    2.254551
            23  |   2.225351   .0508725    43.74   0.000     2.125634    2.325069
            24  |   1.648644   .0587733    28.05   0.000      1.53344    1.763849
            25  |   1.692251    .065236    25.94   0.000     1.564379    1.820124
            26  |   .3853492   .0618451     6.23   0.000     .2641236    .5065747
            27  |   .4967429   .0573868     8.66   0.000     .3842563    .6092295
            28  |   .7501762   .0545519    13.75   0.000     .6432463    .8571062
            29  |   .8693714   .0538951    16.13   0.000     .7637289    .9750139
            30  |   .9849577   .0533702    18.46   0.000     .8803442    1.089571
            31  |   1.114242   .0535744    20.80   0.000     1.009228    1.219256
            32  |   1.345319   .0528043    25.48   0.000     1.241815    1.448824
            33  |   1.470377   .0531201    27.68   0.000     1.366254      1.5745
            34  |    1.57488   .0534989    29.44   0.000     1.470014    1.679746
            35  |   1.662537   .0539511    30.82   0.000     1.556785     1.76829
            36  |   1.776533   .0545707    32.55   0.000     1.669566      1.8835
            37  |   1.865942   .0549884    33.93   0.000     1.758157    1.973728
            38  |   1.926336   .0554119    34.76   0.000     1.817721    2.034952
            39  |   1.960777   .0559929    35.02   0.000     1.851022    2.070531
            40  |   1.987474   .0564347    35.22   0.000     1.876854    2.098094
            41  |   2.032337   .0567599    35.81   0.000     1.921079    2.143595
            42  |   2.089314   .0571888    36.53   0.000     1.977215    2.201412
            43  |   2.151679   .0580616    37.06   0.000     2.037869    2.265488
            44  |   2.133198   .0583947    36.53   0.000     2.018736    2.247661
            45  |   2.174925   .0586903    37.06   0.000     2.059883    2.289966
            46  |   2.178202   .0591027    36.85   0.000     2.062352    2.294052
            47  |   2.225729   .0599975    37.10   0.000     2.108125    2.343334
            48  |   2.273893   .0602052    37.77   0.000     2.155882    2.391904
            49  |   2.035572   .0630214    32.30   0.000      1.91204    2.159103
            50  |   2.110874   .0663111    31.83   0.000     1.980895    2.240854
                |
        age_cat |
             2  |   .0930347   .0258866     3.59   0.000     .0422932    .1437763
             3  |   .1228044   .0278923     4.40   0.000     .0681314    .1774773
             4  |   .1470149   .0298042     4.93   0.000     .0885942    .2054356
             5  |    .102624   .0339685     3.02   0.003     .0360406    .1692073
             6  |   .0578079   .0395255     1.46   0.144    -.0196679    .1352837
                |
          _cons |   4.574827   .0417119   109.68   0.000     4.493065    4.656588
----------------+----------------------------------------------------------------
        sigma_u |  1.6022054
        sigma_e |  .92402382
            rho |   .7504094   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1973219199867534

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    633,552
Group variable: id                              Number of groups  =     12,830

R-sq:                                           Obs per group:
     within  = 0.1973                                         min =          1
     between = 0.0630                                         avg =       49.4
     overall = 0.0965                                         max =      3,984

                                                F(59,12829)       =     137.60
corr(u_i, Xb)  = 0.0215                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,830 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .1117282   .0402641     2.77   0.006     .0328046    .1906518
during_domestic |   .0236036   .0099482     2.37   0.018     .0041036    .0431036
 after_domestic |     .02123    .012607     1.68   0.092    -.0034816    .0459416
   during_expat |   -.133892   .0160497    -8.34   0.000    -.1653519   -.1024321
    after_expat |  -.2614021   .0166771   -15.67   0.000    -.2940917   -.2287125
                |
       ind_year |
             2  |   .0919022   .0241862     3.80   0.000     .0444937    .1393108
             3  |   .6210602   .0282834    21.96   0.000     .5656206    .6764998
             4  |   .7724654   .0301964    25.58   0.000      .713276    .8316547
             5  |    .945085   .0320772    29.46   0.000      .882209    1.007961
             6  |   1.178582   .0335098    35.17   0.000     1.112897    1.244266
             7  |   1.398418   .0347587    40.23   0.000     1.330286     1.46655
             8  |   1.545957   .0365428    42.31   0.000     1.474327    1.617586
             9  |   1.678059   .0377901    44.40   0.000     1.603985    1.752133
            10  |   1.796174   .0389104    46.16   0.000     1.719904    1.872444
            11  |    1.92652   .0398289    48.37   0.000     1.848449    2.004591
            12  |   1.985858   .0410149    48.42   0.000     1.905463    2.066253
            13  |    2.06003   .0419295    49.13   0.000     1.977842    2.142219
            14  |   2.085709   .0426161    48.94   0.000     2.002175    2.169243
            15  |   2.057319   .0435826    47.21   0.000     1.971891    2.142748
            16  |   2.093585   .0445547    46.99   0.000     2.006252    2.180919
            17  |   2.131019   .0452897    47.05   0.000     2.042244    2.219793
            18  |    2.15876    .046441    46.48   0.000     2.067728    2.249791
            19  |   2.112802   .0468705    45.08   0.000     2.020928    2.204675
            20  |    2.09639   .0478293    43.83   0.000     2.002638    2.190143
            21  |   2.129377   .0488221    43.62   0.000     2.033678    2.225076
            22  |   2.157045   .0497443    43.36   0.000     2.059539    2.254551
            23  |   2.225351   .0508725    43.74   0.000     2.125634    2.325069
            24  |   1.648644   .0587733    28.05   0.000      1.53344    1.763849
            25  |   1.692251    .065236    25.94   0.000     1.564379    1.820124
            26  |   .3853492   .0618451     6.23   0.000     .2641236    .5065747
            27  |   .4967429   .0573868     8.66   0.000     .3842563    .6092295
            28  |   .7501762   .0545519    13.75   0.000     .6432463    .8571062
            29  |   .8693714   .0538951    16.13   0.000     .7637289    .9750139
            30  |   .9849577   .0533702    18.46   0.000     .8803442    1.089571
            31  |   1.114242   .0535744    20.80   0.000     1.009228    1.219256
            32  |   1.345319   .0528043    25.48   0.000     1.241815    1.448824
            33  |   1.470377   .0531201    27.68   0.000     1.366254      1.5745
            34  |    1.57488   .0534989    29.44   0.000     1.470014    1.679746
            35  |   1.662537   .0539511    30.82   0.000     1.556785     1.76829
            36  |   1.776533   .0545707    32.55   0.000     1.669566      1.8835
            37  |   1.865942   .0549884    33.93   0.000     1.758157    1.973728
            38  |   1.926336   .0554119    34.76   0.000     1.817721    2.034952
            39  |   1.960777   .0559929    35.02   0.000     1.851022    2.070531
            40  |   1.987474   .0564347    35.22   0.000     1.876854    2.098094
            41  |   2.032337   .0567599    35.81   0.000     1.921079    2.143595
            42  |   2.089314   .0571888    36.53   0.000     1.977215    2.201412
            43  |   2.151679   .0580616    37.06   0.000     2.037869    2.265488
            44  |   2.133198   .0583947    36.53   0.000     2.018736    2.247661
            45  |   2.174925   .0586903    37.06   0.000     2.059883    2.289966
            46  |   2.178202   .0591027    36.85   0.000     2.062352    2.294052
            47  |   2.225729   .0599975    37.10   0.000     2.108125    2.343334
            48  |   2.273893   .0602052    37.77   0.000     2.155882    2.391904
            49  |   2.035572   .0630214    32.30   0.000      1.91204    2.159103
            50  |   2.110874   .0663111    31.83   0.000     1.980895    2.240854
                |
        age_cat |
             2  |   .0930347   .0258866     3.59   0.000     .0422932    .1437763
             3  |   .1228044   .0278923     4.40   0.000     .0681314    .1774773
             4  |   .1470149   .0298042     4.93   0.000     .0885942    .2054356
             5  |    .102624   .0339685     3.02   0.003     .0360406    .1692073
             6  |   .0578079   .0395255     1.46   0.144    -.0196679    .1352837
                |
          _cons |   4.574827   .0417119   109.68   0.000     4.493065    4.656588
----------------+----------------------------------------------------------------
        sigma_u |  1.6022054
        sigma_e |  .92402382
            rho |   .7504094   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.3697                                         min =          1
     between = 0.1641                                         avg =       52.1
     overall = 0.2026                                         max =      4,150

                                                F(59,13202)       =     351.02
corr(u_i, Xb)  = 0.0560                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0834791   .0230195     3.63   0.000     .0383576    .1286007
during_domestic |  -.0268746   .0061267    -4.39   0.000    -.0388839   -.0148653
 after_domestic |  -.0085571   .0077684    -1.10   0.271    -.0237843    .0066701
   during_expat |   .0414216   .0094392     4.39   0.000     .0229195    .0599237
    after_expat |   .0482274   .0108812     4.43   0.000     .0268987    .0695562
                |
       ind_year |
             2  |   .1461937   .0150686     9.70   0.000      .116657    .1757304
             3  |    .336307    .017153    19.61   0.000     .3026846    .3699294
             4  |   .5273179    .018664    28.25   0.000     .4907339    .5639019
             5  |   .7072034   .0195769    36.12   0.000     .6688298    .7455769
             6  |   .8927747    .020602    43.33   0.000     .8523919    .9331575
             7  |   1.026843   .0213653    48.06   0.000     .9849637    1.068722
             8  |   1.113778   .0222006    50.17   0.000     1.070262    1.157295
             9  |   1.236769    .023007    53.76   0.000     1.191672    1.281866
            10  |   1.350323   .0240207    56.22   0.000     1.303239    1.397407
            11  |   1.430558   .0246576    58.02   0.000     1.382226    1.478891
            12  |   1.462109   .0252939    57.80   0.000      1.41253    1.511689
            13  |   1.524579   .0259658    58.71   0.000     1.473683    1.575476
            14  |   1.567901   .0264921    59.18   0.000     1.515972    1.619829
            15  |   1.629978   .0269022    60.59   0.000     1.577245     1.68271
            16  |   1.657086   .0276006    60.04   0.000     1.602985    1.711187
            17  |   1.708824   .0283145    60.35   0.000     1.653323    1.764324
            18  |   1.657524   .0285846    57.99   0.000     1.601495    1.713554
            19  |   1.690942   .0293909    57.53   0.000     1.633332    1.748553
            20  |   1.736368   .0300122    57.86   0.000      1.67754    1.795197
            21  |   1.752423   .0308204    56.86   0.000     1.692011    1.812835
            22  |   1.808064   .0312881    57.79   0.000     1.746735    1.869393
            23  |   1.860077   .0318059    58.48   0.000     1.797733    1.922422
            24  |    1.88572   .0317685    59.36   0.000      1.82345    1.947991
            25  |   1.881852   .0321341    58.56   0.000     1.818865     1.94484
            26  |  -.3476402   .0374192    -9.29   0.000    -.4209871   -.2742932
            27  |  -.2091826   .0365625    -5.72   0.000    -.2808503   -.1375149
            28  |   .0129335   .0351475     0.37   0.713    -.0559606    .0818276
            29  |   .2577977   .0345892     7.45   0.000     .1899978    .3255976
            30  |   .4491032   .0339066    13.25   0.000     .3826413    .5155651
            31  |   .6227795   .0340744    18.28   0.000     .5559887    .6895703
            32  |   .7861591   .0339471    23.16   0.000     .7196179    .8527003
            33  |   .8846489   .0339725    26.04   0.000     .8180578    .9512399
            34  |   1.032723   .0340657    30.32   0.000     .9659495    1.099497
            35  |   1.120509   .0340533    32.90   0.000     1.053759    1.187258
            36  |   1.186197   .0341531    34.73   0.000     1.119252    1.253142
            37  |   1.263543   .0343672    36.77   0.000     1.196179    1.330908
            38  |   1.343537   .0348985    38.50   0.000     1.275131    1.411943
            39  |   1.414596   .0351232    40.28   0.000     1.345749    1.483442
            40  |   1.520072   .0356795    42.60   0.000     1.450135    1.590009
            41  |    1.59151   .0355186    44.81   0.000     1.521888    1.661131
            42  |    1.65073   .0356451    46.31   0.000     1.580861      1.7206
            43  |   1.632324   .0361934    45.10   0.000      1.56138    1.703269
            44  |   1.690895   .0367807    45.97   0.000       1.6188    1.762991
            45  |   1.768981   .0369654    47.86   0.000     1.696523    1.841438
            46  |   1.783309   .0373747    47.71   0.000      1.71005    1.856569
            47  |   1.817745   .0372913    48.74   0.000     1.744649    1.890842
            48  |   1.857113   .0376311    49.35   0.000     1.783351    1.930875
            49  |   1.852918   .0385681    48.04   0.000     1.777319    1.928517
            50  |   1.879136   .0381723    49.23   0.000     1.804313    1.953959
                |
        age_cat |
             2  |   .6269734   .0190483    32.91   0.000      .589636    .6643109
             3  |    .696399   .0198109    35.15   0.000     .6575667    .7352312
             4  |   .7056508   .0208367    33.87   0.000      .664808    .7464937
             5  |   .6815243    .022954    29.69   0.000     .6365311    .7265175
             6  |   .6620416   .0260389    25.43   0.000     .6110017    .7130815
                |
          _cons |   7.145242   .0274213   260.57   0.000     7.091493    7.198992
----------------+----------------------------------------------------------------
        sigma_u |  1.1862269
        sigma_e |  .62443625
            rho |  .78302242   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3696823539100557

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.3697                                         min =          1
     between = 0.1641                                         avg =       52.1
     overall = 0.2026                                         max =      4,150

                                                F(59,13202)       =     351.02
corr(u_i, Xb)  = 0.0560                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0834791   .0230195     3.63   0.000     .0383576    .1286007
during_domestic |  -.0268746   .0061267    -4.39   0.000    -.0388839   -.0148653
 after_domestic |  -.0085571   .0077684    -1.10   0.271    -.0237843    .0066701
   during_expat |   .0414216   .0094392     4.39   0.000     .0229195    .0599237
    after_expat |   .0482274   .0108812     4.43   0.000     .0268987    .0695562
                |
       ind_year |
             2  |   .1461937   .0150686     9.70   0.000      .116657    .1757304
             3  |    .336307    .017153    19.61   0.000     .3026846    .3699294
             4  |   .5273179    .018664    28.25   0.000     .4907339    .5639019
             5  |   .7072034   .0195769    36.12   0.000     .6688298    .7455769
             6  |   .8927747    .020602    43.33   0.000     .8523919    .9331575
             7  |   1.026843   .0213653    48.06   0.000     .9849637    1.068722
             8  |   1.113778   .0222006    50.17   0.000     1.070262    1.157295
             9  |   1.236769    .023007    53.76   0.000     1.191672    1.281866
            10  |   1.350323   .0240207    56.22   0.000     1.303239    1.397407
            11  |   1.430558   .0246576    58.02   0.000     1.382226    1.478891
            12  |   1.462109   .0252939    57.80   0.000      1.41253    1.511689
            13  |   1.524579   .0259658    58.71   0.000     1.473683    1.575476
            14  |   1.567901   .0264921    59.18   0.000     1.515972    1.619829
            15  |   1.629978   .0269022    60.59   0.000     1.577245     1.68271
            16  |   1.657086   .0276006    60.04   0.000     1.602985    1.711187
            17  |   1.708824   .0283145    60.35   0.000     1.653323    1.764324
            18  |   1.657524   .0285846    57.99   0.000     1.601495    1.713554
            19  |   1.690942   .0293909    57.53   0.000     1.633332    1.748553
            20  |   1.736368   .0300122    57.86   0.000      1.67754    1.795197
            21  |   1.752423   .0308204    56.86   0.000     1.692011    1.812835
            22  |   1.808064   .0312881    57.79   0.000     1.746735    1.869393
            23  |   1.860077   .0318059    58.48   0.000     1.797733    1.922422
            24  |    1.88572   .0317685    59.36   0.000      1.82345    1.947991
            25  |   1.881852   .0321341    58.56   0.000     1.818865     1.94484
            26  |  -.3476402   .0374192    -9.29   0.000    -.4209871   -.2742932
            27  |  -.2091826   .0365625    -5.72   0.000    -.2808503   -.1375149
            28  |   .0129335   .0351475     0.37   0.713    -.0559606    .0818276
            29  |   .2577977   .0345892     7.45   0.000     .1899978    .3255976
            30  |   .4491032   .0339066    13.25   0.000     .3826413    .5155651
            31  |   .6227795   .0340744    18.28   0.000     .5559887    .6895703
            32  |   .7861591   .0339471    23.16   0.000     .7196179    .8527003
            33  |   .8846489   .0339725    26.04   0.000     .8180578    .9512399
            34  |   1.032723   .0340657    30.32   0.000     .9659495    1.099497
            35  |   1.120509   .0340533    32.90   0.000     1.053759    1.187258
            36  |   1.186197   .0341531    34.73   0.000     1.119252    1.253142
            37  |   1.263543   .0343672    36.77   0.000     1.196179    1.330908
            38  |   1.343537   .0348985    38.50   0.000     1.275131    1.411943
            39  |   1.414596   .0351232    40.28   0.000     1.345749    1.483442
            40  |   1.520072   .0356795    42.60   0.000     1.450135    1.590009
            41  |    1.59151   .0355186    44.81   0.000     1.521888    1.661131
            42  |    1.65073   .0356451    46.31   0.000     1.580861      1.7206
            43  |   1.632324   .0361934    45.10   0.000      1.56138    1.703269
            44  |   1.690895   .0367807    45.97   0.000       1.6188    1.762991
            45  |   1.768981   .0369654    47.86   0.000     1.696523    1.841438
            46  |   1.783309   .0373747    47.71   0.000      1.71005    1.856569
            47  |   1.817745   .0372913    48.74   0.000     1.744649    1.890842
            48  |   1.857113   .0376311    49.35   0.000     1.783351    1.930875
            49  |   1.852918   .0385681    48.04   0.000     1.777319    1.928517
            50  |   1.879136   .0381723    49.23   0.000     1.804313    1.953959
                |
        age_cat |
             2  |   .6269734   .0190483    32.91   0.000      .589636    .6643109
             3  |    .696399   .0198109    35.15   0.000     .6575667    .7352312
             4  |   .7056508   .0208367    33.87   0.000      .664808    .7464937
             5  |   .6815243    .022954    29.69   0.000     .6365311    .7265175
             6  |   .6620416   .0260389    25.43   0.000     .6110017    .7130815
                |
          _cons |   7.145242   .0274213   260.57   0.000     7.091493    7.198992
----------------+----------------------------------------------------------------
        sigma_u |  1.1862269
        sigma_e |  .62443625
            rho |  .78302242   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.0327                                         min =          1
     between = 0.1954                                         avg =       52.1
     overall = 0.1013                                         max =      4,150

                                                F(59,13202)       =      35.50
corr(u_i, Xb)  = 0.2429                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0192078   .0104893     1.83   0.067    -.0013527    .0397684
during_domestic |  -.0135859   .0027478    -4.94   0.000    -.0189719   -.0081999
 after_domestic |  -.0243643   .0034898    -6.98   0.000    -.0312048   -.0175238
   during_expat |  -.0025181    .004132    -0.61   0.542    -.0106173    .0055812
    after_expat |  -.0124947   .0042525    -2.94   0.003    -.0208302   -.0041592
                |
       ind_year |
             2  |  -.0136238   .0067958    -2.00   0.045    -.0269445   -.0003031
             3  |  -.0276477   .0076669    -3.61   0.000    -.0426759   -.0126195
             4  |  -.0391668   .0082525    -4.75   0.000     -.055343   -.0229907
             5  |  -.0406988   .0085625    -4.75   0.000    -.0574824   -.0239151
             6  |  -.0507702   .0088644    -5.73   0.000    -.0681457   -.0333947
             7  |  -.0485619   .0090146    -5.39   0.000    -.0662319    -.030892
             8  |  -.0664089   .0092114    -7.21   0.000    -.0844646   -.0483532
             9  |  -.0628806   .0094569    -6.65   0.000    -.0814174   -.0443438
            10  |  -.0612091   .0097037    -6.31   0.000    -.0802297   -.0421884
            11  |  -.0683226   .0100911    -6.77   0.000    -.0881027   -.0485425
            12  |  -.0693607   .0101893    -6.81   0.000    -.0893332   -.0493881
            13  |  -.0620986   .0103885    -5.98   0.000    -.0824615   -.0417357
            14  |  -.0478492   .0106939    -4.47   0.000    -.0688108   -.0268876
            15  |  -.0386324   .0108993    -3.54   0.000    -.0599966   -.0172681
            16  |  -.0145701   .0112195    -1.30   0.194     -.036562    .0074218
            17  |   .0033712   .0114185     0.30   0.768    -.0190107    .0257531
            18  |   .0113215    .011745     0.96   0.335    -.0117004    .0343433
            19  |   .0122615   .0117763     1.04   0.298    -.0108217    .0353448
            20  |   .0262927   .0120663     2.18   0.029      .002641    .0499444
            21  |   .0280264   .0122264     2.29   0.022     .0040609     .051992
            22  |     .03713   .0124246     2.99   0.003      .012776    .0614839
            23  |   .0249065   .0125286     1.99   0.047     .0003487    .0494643
            24  |  -.0403711   .0126495    -3.19   0.001     -.065166   -.0155762
            25  |  -.0664326   .0127781    -5.20   0.000    -.0914795   -.0413858
            26  |   .0877551   .0162673     5.39   0.000     .0558689    .1196413
            27  |   .0635065   .0153241     4.14   0.000     .0334691    .0935439
            28  |    .072866   .0145703     5.00   0.000     .0443061     .101426
            29  |   .0732776   .0142249     5.15   0.000     .0453947    .1011605
            30  |     .08245   .0140732     5.86   0.000     .0548645    .1100355
            31  |   .0679454   .0138853     4.89   0.000     .0407281    .0951626
            32  |   .0644396    .013802     4.67   0.000     .0373857    .0914934
            33  |   .0579574   .0137133     4.23   0.000     .0310774    .0848374
            34  |   .0554399   .0137184     4.04   0.000     .0285498      .08233
            35  |   .0583392    .013711     4.25   0.000     .0314637    .0852147
            36  |   .0532972   .0138743     3.84   0.000     .0261016    .0804927
            37  |   .0567357   .0139011     4.08   0.000     .0294875     .083984
            38  |   .0633138   .0139722     4.53   0.000     .0359263    .0907013
            39  |   .0632856   .0141157     4.48   0.000     .0356168    .0909544
            40  |   .0630283   .0142109     4.44   0.000     .0351729    .0908837
            41  |   .0776661   .0143871     5.40   0.000     .0494654    .1058668
            42  |   .0802553   .0145772     5.51   0.000     .0516818    .1088288
            43  |   .0892037   .0148681     6.00   0.000     .0600602    .1183473
            44  |   .0981864   .0150491     6.52   0.000      .068688    .1276848
            45  |   .1090096   .0150494     7.24   0.000     .0795105    .1385086
            46  |   .1152375   .0152726     7.55   0.000      .085301    .1451739
            47  |   .1210996   .0154906     7.82   0.000     .0907358    .1514633
            48  |   .1127759    .015644     7.21   0.000     .0821114    .1434404
            49  |  -.0625948   .0163302    -3.83   0.000    -.0946043   -.0305853
            50  |  -.1001195     .01646    -6.08   0.000    -.1323835   -.0678555
                |
        age_cat |
             2  |   .0576683   .0054371    10.61   0.000     .0470108    .0683258
             3  |   .0850463   .0058798    14.46   0.000     .0735211    .0965715
             4  |   .1214072   .0062613    19.39   0.000     .1091343    .1336802
             5  |   .1527782   .0073727    20.72   0.000     .1383266    .1672299
             6  |   .1738009   .0087847    19.78   0.000     .1565815    .1910202
                |
          _cons |   .2874109   .0098189    29.27   0.000     .2681646    .3066573
----------------+----------------------------------------------------------------
        sigma_u |  .38534859
        sigma_e |  .28813809
            rho |  .64139339   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .03267338031541

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.0327                                         min =          1
     between = 0.1954                                         avg =       52.1
     overall = 0.1013                                         max =      4,150

                                                F(59,13202)       =      35.50
corr(u_i, Xb)  = 0.2429                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0192078   .0104893     1.83   0.067    -.0013527    .0397684
during_domestic |  -.0135859   .0027478    -4.94   0.000    -.0189719   -.0081999
 after_domestic |  -.0243643   .0034898    -6.98   0.000    -.0312048   -.0175238
   during_expat |  -.0025181    .004132    -0.61   0.542    -.0106173    .0055812
    after_expat |  -.0124947   .0042525    -2.94   0.003    -.0208302   -.0041592
                |
       ind_year |
             2  |  -.0136238   .0067958    -2.00   0.045    -.0269445   -.0003031
             3  |  -.0276477   .0076669    -3.61   0.000    -.0426759   -.0126195
             4  |  -.0391668   .0082525    -4.75   0.000     -.055343   -.0229907
             5  |  -.0406988   .0085625    -4.75   0.000    -.0574824   -.0239151
             6  |  -.0507702   .0088644    -5.73   0.000    -.0681457   -.0333947
             7  |  -.0485619   .0090146    -5.39   0.000    -.0662319    -.030892
             8  |  -.0664089   .0092114    -7.21   0.000    -.0844646   -.0483532
             9  |  -.0628806   .0094569    -6.65   0.000    -.0814174   -.0443438
            10  |  -.0612091   .0097037    -6.31   0.000    -.0802297   -.0421884
            11  |  -.0683226   .0100911    -6.77   0.000    -.0881027   -.0485425
            12  |  -.0693607   .0101893    -6.81   0.000    -.0893332   -.0493881
            13  |  -.0620986   .0103885    -5.98   0.000    -.0824615   -.0417357
            14  |  -.0478492   .0106939    -4.47   0.000    -.0688108   -.0268876
            15  |  -.0386324   .0108993    -3.54   0.000    -.0599966   -.0172681
            16  |  -.0145701   .0112195    -1.30   0.194     -.036562    .0074218
            17  |   .0033712   .0114185     0.30   0.768    -.0190107    .0257531
            18  |   .0113215    .011745     0.96   0.335    -.0117004    .0343433
            19  |   .0122615   .0117763     1.04   0.298    -.0108217    .0353448
            20  |   .0262927   .0120663     2.18   0.029      .002641    .0499444
            21  |   .0280264   .0122264     2.29   0.022     .0040609     .051992
            22  |     .03713   .0124246     2.99   0.003      .012776    .0614839
            23  |   .0249065   .0125286     1.99   0.047     .0003487    .0494643
            24  |  -.0403711   .0126495    -3.19   0.001     -.065166   -.0155762
            25  |  -.0664326   .0127781    -5.20   0.000    -.0914795   -.0413858
            26  |   .0877551   .0162673     5.39   0.000     .0558689    .1196413
            27  |   .0635065   .0153241     4.14   0.000     .0334691    .0935439
            28  |    .072866   .0145703     5.00   0.000     .0443061     .101426
            29  |   .0732776   .0142249     5.15   0.000     .0453947    .1011605
            30  |     .08245   .0140732     5.86   0.000     .0548645    .1100355
            31  |   .0679454   .0138853     4.89   0.000     .0407281    .0951626
            32  |   .0644396    .013802     4.67   0.000     .0373857    .0914934
            33  |   .0579574   .0137133     4.23   0.000     .0310774    .0848374
            34  |   .0554399   .0137184     4.04   0.000     .0285498      .08233
            35  |   .0583392    .013711     4.25   0.000     .0314637    .0852147
            36  |   .0532972   .0138743     3.84   0.000     .0261016    .0804927
            37  |   .0567357   .0139011     4.08   0.000     .0294875     .083984
            38  |   .0633138   .0139722     4.53   0.000     .0359263    .0907013
            39  |   .0632856   .0141157     4.48   0.000     .0356168    .0909544
            40  |   .0630283   .0142109     4.44   0.000     .0351729    .0908837
            41  |   .0776661   .0143871     5.40   0.000     .0494654    .1058668
            42  |   .0802553   .0145772     5.51   0.000     .0516818    .1088288
            43  |   .0892037   .0148681     6.00   0.000     .0600602    .1183473
            44  |   .0981864   .0150491     6.52   0.000      .068688    .1276848
            45  |   .1090096   .0150494     7.24   0.000     .0795105    .1385086
            46  |   .1152375   .0152726     7.55   0.000      .085301    .1451739
            47  |   .1210996   .0154906     7.82   0.000     .0907358    .1514633
            48  |   .1127759    .015644     7.21   0.000     .0821114    .1434404
            49  |  -.0625948   .0163302    -3.83   0.000    -.0946043   -.0305853
            50  |  -.1001195     .01646    -6.08   0.000    -.1323835   -.0678555
                |
        age_cat |
             2  |   .0576683   .0054371    10.61   0.000     .0470108    .0683258
             3  |   .0850463   .0058798    14.46   0.000     .0735211    .0965715
             4  |   .1214072   .0062613    19.39   0.000     .1091343    .1336802
             5  |   .1527782   .0073727    20.72   0.000     .1383266    .1672299
             6  |   .1738009   .0087847    19.78   0.000     .1565815    .1910202
                |
          _cons |   .2874109   .0098189    29.27   0.000     .2681646    .3066573
----------------+----------------------------------------------------------------
        sigma_u |  .38534859
        sigma_e |  .28813809
            rho |  .64139339   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    574,978
Group variable: id                              Number of groups  =     12,444

R-sq:                                           Obs per group:
     within  = 0.0333                                         min =          1
     between = 0.0027                                         avg =       46.2
     overall = 0.0236                                         max =      3,652

                                                F(56,12443)       =      95.75
corr(u_i, Xb)  = -0.1175                        Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,444 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0043132   .0203005     0.21   0.832    -.0354789    .0441054
during_domestic |  -.0101811   .0056604    -1.80   0.072    -.0212763    .0009141
 after_domestic |  -.0128692   .0060661    -2.12   0.034    -.0247597   -.0009787
   during_expat |  -.0221309   .0086065    -2.57   0.010     -.039001   -.0052609
    after_expat |  -.0062155   .0072561    -0.86   0.392    -.0204387    .0080077
                |
       ind_year |
             3  |  -.0510085    .024892    -2.05   0.040    -.0998006   -.0022164
             4  |  -.0192709   .0246049    -0.78   0.434    -.0675004    .0289586
             5  |  -.0057595   .0248723    -0.23   0.817    -.0545131    .0429942
             6  |  -.0138805    .024762    -0.56   0.575    -.0624178    .0346568
             7  |   .0851308    .024656     3.45   0.001     .0368013    .1334604
             8  |  -.0217781   .0249509    -0.87   0.383    -.0706857    .0271296
             9  |  -.0011883   .0250887    -0.05   0.962     -.050366    .0479894
            10  |  -.0402434   .0246197    -1.63   0.102    -.0885017    .0080149
            11  |   .0185749    .025088     0.74   0.459    -.0306015    .0677513
            12  |   .0005397   .0252636     0.02   0.983    -.0489809    .0500603
            13  |  -.1019776   .0254204    -4.01   0.000    -.1518055   -.0521496
            14  |  -.1894724   .0252101    -7.52   0.000    -.2388882   -.1400566
            15  |  -.0828789   .0253479    -3.27   0.001    -.1325647   -.0331931
            16  |  -.0777193    .026062    -2.98   0.003    -.1288049   -.0266337
            17  |  -.1033944   .0262924    -3.93   0.000    -.1549316   -.0518571
            18  |  -.0666176   .0260133    -2.56   0.010    -.1176076   -.0156276
            19  |   -.122142   .0261666    -4.67   0.000    -.1734325   -.0708515
            20  |  -.0461243     .02618    -1.76   0.078    -.0974411    .0051925
            21  |  -.1778351   .0263896    -6.74   0.000    -.2295628   -.1261074
            22  |   .1364474   .0269381     5.07   0.000     .0836446    .1892501
            23  |  -.1587929    .027444    -5.79   0.000    -.2125874   -.1049984
            24  |  -.5037552   .0289337   -17.41   0.000    -.5604697   -.4470406
            25  |  -.1285055   .0345554    -3.72   0.000    -.1962394   -.0607716
            27  |  -.0337212   .0361998    -0.93   0.352    -.1046784     .037236
            28  |  -.2673526   .0338339    -7.90   0.000    -.3336723   -.2010329
            29  |  -.0950603   .0323214    -2.94   0.003    -.1584153   -.0317052
            30  |  -.2146602   .0318649    -6.74   0.000    -.2771202   -.1522001
            31  |  -.0780189   .0315105    -2.48   0.013    -.1397845   -.0162534
            32  |  -.1869413   .0314305    -5.95   0.000      -.24855   -.1253326
            33  |   -.057192   .0309675    -1.85   0.065    -.1178932    .0035091
            34  |  -.1822951   .0307613    -5.93   0.000     -.242592   -.1219982
            35  |  -.1225768   .0309146    -3.97   0.000    -.1831742   -.0619795
            36  |  -.1292931    .031046    -4.16   0.000     -.190148   -.0684382
            37  |  -.1958485   .0312522    -6.27   0.000    -.2571076   -.1345895
            38  |  -.1360578   .0312666    -4.35   0.000    -.1973453   -.0747704
            39  |  -.2360985   .0312827    -7.55   0.000    -.2974173   -.1747796
            40  |  -.1876415   .0314013    -5.98   0.000    -.2491928   -.1260902
            41  |  -.2249863   .0321747    -6.99   0.000    -.2880537   -.1619189
            42  |  -.1739839   .0324223    -5.37   0.000    -.2375366   -.1104312
            43  |  -.0877246    .032017    -2.74   0.006     -.150483   -.0249663
            44  |  -.1423935   .0324732    -4.38   0.000    -.2060459   -.0787411
            45  |  -.3638199   .0322231   -11.29   0.000    -.4269822   -.3006576
            46  |  -.2170042   .0324228    -6.69   0.000     -.280558   -.1534504
            47  |  -.0223986    .033585    -0.67   0.505    -.0882305    .0434333
            48  |  -.3421225   .0332912   -10.28   0.000    -.4073784   -.2768666
            49  |   -.814696   .0332558   -24.50   0.000    -.8798826   -.7495095
            50  |   -.255323   .0419616    -6.08   0.000    -.3375743   -.1730717
                |
        age_cat |
             3  |  -.1260417   .0190147    -6.63   0.000    -.1633135   -.0887699
             4  |  -.2958784   .0175164   -16.89   0.000    -.3302132   -.2615435
             5  |  -.3867083   .0182548   -21.18   0.000    -.4224906    -.350926
             6  |  -.4442051   .0194744   -22.81   0.000    -.4823779   -.4060323
                |
          _cons |   .3760048   .0265217    14.18   0.000     .3240182    .4279914
----------------+----------------------------------------------------------------
        sigma_u |  .40645404
        sigma_e |  .84205171
            rho |  .18896627   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0332512697785416

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    574,978
Group variable: id                              Number of groups  =     12,444

R-sq:                                           Obs per group:
     within  = 0.0333                                         min =          1
     between = 0.0027                                         avg =       46.2
     overall = 0.0236                                         max =      3,652

                                                F(56,12443)       =      95.75
corr(u_i, Xb)  = -0.1175                        Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,444 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0043132   .0203005     0.21   0.832    -.0354789    .0441054
during_domestic |  -.0101811   .0056604    -1.80   0.072    -.0212763    .0009141
 after_domestic |  -.0128692   .0060661    -2.12   0.034    -.0247597   -.0009787
   during_expat |  -.0221309   .0086065    -2.57   0.010     -.039001   -.0052609
    after_expat |  -.0062155   .0072561    -0.86   0.392    -.0204387    .0080077
                |
       ind_year |
             3  |  -.0510085    .024892    -2.05   0.040    -.0998006   -.0022164
             4  |  -.0192709   .0246049    -0.78   0.434    -.0675004    .0289586
             5  |  -.0057595   .0248723    -0.23   0.817    -.0545131    .0429942
             6  |  -.0138805    .024762    -0.56   0.575    -.0624178    .0346568
             7  |   .0851308    .024656     3.45   0.001     .0368013    .1334604
             8  |  -.0217781   .0249509    -0.87   0.383    -.0706857    .0271296
             9  |  -.0011883   .0250887    -0.05   0.962     -.050366    .0479894
            10  |  -.0402434   .0246197    -1.63   0.102    -.0885017    .0080149
            11  |   .0185749    .025088     0.74   0.459    -.0306015    .0677513
            12  |   .0005397   .0252636     0.02   0.983    -.0489809    .0500603
            13  |  -.1019776   .0254204    -4.01   0.000    -.1518055   -.0521496
            14  |  -.1894724   .0252101    -7.52   0.000    -.2388882   -.1400566
            15  |  -.0828789   .0253479    -3.27   0.001    -.1325647   -.0331931
            16  |  -.0777193    .026062    -2.98   0.003    -.1288049   -.0266337
            17  |  -.1033944   .0262924    -3.93   0.000    -.1549316   -.0518571
            18  |  -.0666176   .0260133    -2.56   0.010    -.1176076   -.0156276
            19  |   -.122142   .0261666    -4.67   0.000    -.1734325   -.0708515
            20  |  -.0461243     .02618    -1.76   0.078    -.0974411    .0051925
            21  |  -.1778351   .0263896    -6.74   0.000    -.2295628   -.1261074
            22  |   .1364474   .0269381     5.07   0.000     .0836446    .1892501
            23  |  -.1587929    .027444    -5.79   0.000    -.2125874   -.1049984
            24  |  -.5037552   .0289337   -17.41   0.000    -.5604697   -.4470406
            25  |  -.1285055   .0345554    -3.72   0.000    -.1962394   -.0607716
            27  |  -.0337212   .0361998    -0.93   0.352    -.1046784     .037236
            28  |  -.2673526   .0338339    -7.90   0.000    -.3336723   -.2010329
            29  |  -.0950603   .0323214    -2.94   0.003    -.1584153   -.0317052
            30  |  -.2146602   .0318649    -6.74   0.000    -.2771202   -.1522001
            31  |  -.0780189   .0315105    -2.48   0.013    -.1397845   -.0162534
            32  |  -.1869413   .0314305    -5.95   0.000      -.24855   -.1253326
            33  |   -.057192   .0309675    -1.85   0.065    -.1178932    .0035091
            34  |  -.1822951   .0307613    -5.93   0.000     -.242592   -.1219982
            35  |  -.1225768   .0309146    -3.97   0.000    -.1831742   -.0619795
            36  |  -.1292931    .031046    -4.16   0.000     -.190148   -.0684382
            37  |  -.1958485   .0312522    -6.27   0.000    -.2571076   -.1345895
            38  |  -.1360578   .0312666    -4.35   0.000    -.1973453   -.0747704
            39  |  -.2360985   .0312827    -7.55   0.000    -.2974173   -.1747796
            40  |  -.1876415   .0314013    -5.98   0.000    -.2491928   -.1260902
            41  |  -.2249863   .0321747    -6.99   0.000    -.2880537   -.1619189
            42  |  -.1739839   .0324223    -5.37   0.000    -.2375366   -.1104312
            43  |  -.0877246    .032017    -2.74   0.006     -.150483   -.0249663
            44  |  -.1423935   .0324732    -4.38   0.000    -.2060459   -.0787411
            45  |  -.3638199   .0322231   -11.29   0.000    -.4269822   -.3006576
            46  |  -.2170042   .0324228    -6.69   0.000     -.280558   -.1534504
            47  |  -.0223986    .033585    -0.67   0.505    -.0882305    .0434333
            48  |  -.3421225   .0332912   -10.28   0.000    -.4073784   -.2768666
            49  |   -.814696   .0332558   -24.50   0.000    -.8798826   -.7495095
            50  |   -.255323   .0419616    -6.08   0.000    -.3375743   -.1730717
                |
        age_cat |
             3  |  -.1260417   .0190147    -6.63   0.000    -.1633135   -.0887699
             4  |  -.2958784   .0175164   -16.89   0.000    -.3302132   -.2615435
             5  |  -.3867083   .0182548   -21.18   0.000    -.4224906    -.350926
             6  |  -.4442051   .0194744   -22.81   0.000    -.4823779   -.4060323
                |
          _cons |   .3760048   .0265217    14.18   0.000     .3240182    .4279914
----------------+----------------------------------------------------------------
        sigma_u |  .40645404
        sigma_e |  .84205171
            rho |  .18896627   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.0844                                         min =          1
     between = 0.0199                                         avg =       44.4
     overall = 0.0405                                         max =      1,475

                                                F(34,4896)        =      36.96
corr(u_i, Xb)  = 0.0319                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0086864   .0473435    -0.18   0.854     -.101501    .0841282
during_domestic |  -.1241873   .0131497    -9.44   0.000    -.1499666    -.098408
 after_domestic |  -.2080704   .0192794   -10.79   0.000    -.2458667   -.1702741
   during_expat |   -.023295   .0177712    -1.31   0.190    -.0581344    .0115444
    after_expat |  -.0208469   .0207731    -1.00   0.316    -.0615714    .0198777
                |
       ind_year |
            27  |  -.1493607   .0205025    -7.29   0.000    -.1895548   -.1091666
            28  |  -.2255694    .025863    -8.72   0.000    -.2762725   -.1748663
            29  |  -.2920007   .0293924    -9.93   0.000     -.349623   -.2343784
            30  |  -.3233308   .0323808    -9.99   0.000    -.3868118   -.2598498
            31  |  -.3619595   .0356808   -10.14   0.000    -.4319098   -.2920092
            32  |  -.3773987   .0385128    -9.80   0.000    -.4529011   -.3018964
            33  |  -.4231957   .0413857   -10.23   0.000    -.5043303   -.3420611
            34  |  -.4466587   .0441315   -10.12   0.000    -.5331762   -.3601412
            35  |  -.4834238   .0464744   -10.40   0.000    -.5745346   -.3923131
            36  |  -.5390542   .0482159   -11.18   0.000    -.6335789   -.4445294
            37  |   -.558411   .0496543   -11.25   0.000    -.6557556   -.4610663
            38  |  -.6027494   .0514958   -11.70   0.000    -.7037042   -.5017946
            39  |  -.6259763   .0530104   -11.81   0.000    -.7299004   -.5220522
            40  |  -.6304135   .0546195   -11.54   0.000    -.7374922   -.5233347
            41  |  -.6127337   .0555943   -11.02   0.000    -.7217235   -.5037439
            42  |  -.6179055    .056791   -10.88   0.000    -.7292414   -.5065696
            43  |  -.7399316   .0583453   -12.68   0.000    -.8543146   -.6255486
            44  |  -.7468885   .0600795   -12.43   0.000    -.8646713   -.6291057
            45  |  -.7093817    .060768   -11.67   0.000    -.8285144   -.5902491
            46  |  -.7052019   .0617168   -11.43   0.000    -.8261944   -.5842093
            47  |  -.6867161   .0624555   -11.00   0.000    -.8091568   -.5642753
            48  |  -.6652893    .063056   -10.55   0.000    -.7889073   -.5416712
            49  |  -.6143288   .0640882    -9.59   0.000    -.7399705   -.4886871
            50  |  -.5730881   .0638363    -8.98   0.000    -.6982359   -.4479403
                |
        age_cat |
             2  |   .3175251   .0282131    11.25   0.000     .2622147    .3728355
             3  |   .6168168   .0313587    19.67   0.000     .5553397    .6782938
             4  |   .9064645   .0366689    24.72   0.000      .834577    .9783521
             5  |   1.159821   .0441344    26.28   0.000     1.073297    1.246344
             6  |   1.351567   .0521851    25.90   0.000     1.249261    1.453874
                |
          _cons |   3.641299   .0410047    88.80   0.000     3.560912    3.721687
----------------+----------------------------------------------------------------
        sigma_u |  1.1030178
        sigma_e |  .65595633
            rho |  .73873845   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0843744806764765

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.0844                                         min =          1
     between = 0.0199                                         avg =       44.4
     overall = 0.0405                                         max =      1,475

                                                F(34,4896)        =      36.96
corr(u_i, Xb)  = 0.0319                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0086864   .0473435    -0.18   0.854     -.101501    .0841282
during_domestic |  -.1241873   .0131497    -9.44   0.000    -.1499666    -.098408
 after_domestic |  -.2080704   .0192794   -10.79   0.000    -.2458667   -.1702741
   during_expat |   -.023295   .0177712    -1.31   0.190    -.0581344    .0115444
    after_expat |  -.0208469   .0207731    -1.00   0.316    -.0615714    .0198777
                |
       ind_year |
            27  |  -.1493607   .0205025    -7.29   0.000    -.1895548   -.1091666
            28  |  -.2255694    .025863    -8.72   0.000    -.2762725   -.1748663
            29  |  -.2920007   .0293924    -9.93   0.000     -.349623   -.2343784
            30  |  -.3233308   .0323808    -9.99   0.000    -.3868118   -.2598498
            31  |  -.3619595   .0356808   -10.14   0.000    -.4319098   -.2920092
            32  |  -.3773987   .0385128    -9.80   0.000    -.4529011   -.3018964
            33  |  -.4231957   .0413857   -10.23   0.000    -.5043303   -.3420611
            34  |  -.4466587   .0441315   -10.12   0.000    -.5331762   -.3601412
            35  |  -.4834238   .0464744   -10.40   0.000    -.5745346   -.3923131
            36  |  -.5390542   .0482159   -11.18   0.000    -.6335789   -.4445294
            37  |   -.558411   .0496543   -11.25   0.000    -.6557556   -.4610663
            38  |  -.6027494   .0514958   -11.70   0.000    -.7037042   -.5017946
            39  |  -.6259763   .0530104   -11.81   0.000    -.7299004   -.5220522
            40  |  -.6304135   .0546195   -11.54   0.000    -.7374922   -.5233347
            41  |  -.6127337   .0555943   -11.02   0.000    -.7217235   -.5037439
            42  |  -.6179055    .056791   -10.88   0.000    -.7292414   -.5065696
            43  |  -.7399316   .0583453   -12.68   0.000    -.8543146   -.6255486
            44  |  -.7468885   .0600795   -12.43   0.000    -.8646713   -.6291057
            45  |  -.7093817    .060768   -11.67   0.000    -.8285144   -.5902491
            46  |  -.7052019   .0617168   -11.43   0.000    -.8261944   -.5842093
            47  |  -.6867161   .0624555   -11.00   0.000    -.8091568   -.5642753
            48  |  -.6652893    .063056   -10.55   0.000    -.7889073   -.5416712
            49  |  -.6143288   .0640882    -9.59   0.000    -.7399705   -.4886871
            50  |  -.5730881   .0638363    -8.98   0.000    -.6982359   -.4479403
                |
        age_cat |
             2  |   .3175251   .0282131    11.25   0.000     .2622147    .3728355
             3  |   .6168168   .0313587    19.67   0.000     .5553397    .6782938
             4  |   .9064645   .0366689    24.72   0.000      .834577    .9783521
             5  |   1.159821   .0441344    26.28   0.000     1.073297    1.246344
             6  |   1.351567   .0521851    25.90   0.000     1.249261    1.453874
                |
          _cons |   3.641299   .0410047    88.80   0.000     3.560912    3.721687
----------------+----------------------------------------------------------------
        sigma_u |  1.1030178
        sigma_e |  .65595633
            rho |  .73873845   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    204,053
Group variable: id                              Number of groups  =      4,769

R-sq:                                           Obs per group:
     within  = 0.1824                                         min =          1
     between = 0.0830                                         avg =       42.8
     overall = 0.0688                                         max =      1,416

                                                F(34,4768)        =      62.01
corr(u_i, Xb)  = 0.0690                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,769 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0654462   .0743611     0.88   0.379    -.0803359    .2112283
during_domestic |  -.1168707   .0204389    -5.72   0.000    -.1569403    -.076801
 after_domestic |  -.1902221   .0260652    -7.30   0.000    -.2413219   -.1391224
   during_expat |  -.0881882   .0259454    -3.40   0.001    -.1390531   -.0373232
    after_expat |  -.1562671   .0283215    -5.52   0.000    -.2117903    -.100744
                |
       ind_year |
            27  |  -.0541031   .0362756    -1.49   0.136    -.1252199    .0170138
            28  |   .0881339   .0432425     2.04   0.042     .0033587    .1729091
            29  |   .1160425    .048771     2.38   0.017     .0204288    .2116563
            30  |   .1775552   .0536688     3.31   0.001     .0723396    .2827708
            31  |   .2685557   .0582341     4.61   0.000     .1543899    .3827215
            32  |   .4574069   .0622884     7.34   0.000     .3352929     .579521
            33  |   .5228439   .0665291     7.86   0.000     .3924161    .6532716
            34  |   .5859202    .070245     8.34   0.000     .4482076    .7236328
            35  |   .6308481   .0734514     8.59   0.000     .4868495    .7748466
            36  |   .6773713   .0767599     8.82   0.000     .5268864    .8278561
            37  |   .7255829   .0790668     9.18   0.000     .5705754    .8805904
            38  |   .7425389   .0812819     9.14   0.000     .5831889     .901889
            39  |   .7543651   .0828088     9.11   0.000     .5920215    .9167086
            40  |   .7598694    .084847     8.96   0.000       .59353    .9262088
            41  |   .8234259   .0866683     9.50   0.000      .653516    .9933358
            42  |   .8728523   .0882991     9.89   0.000     .6997453    1.045959
            43  |   .8136278   .0901532     9.02   0.000     .6368859    .9903697
            44  |   .7921901   .0921282     8.60   0.000     .6115763    .9728039
            45  |   .8706406   .0929688     9.36   0.000     .6883789    1.052902
            46  |    .873682   .0939613     9.30   0.000     .6894744     1.05789
            47  |     .95992   .0951934    10.08   0.000      .773297    1.146543
            48  |   1.033559   .0961372    10.75   0.000     .8450861    1.222032
            49  |   .9600884   .0992806     9.67   0.000     .7654527    1.154724
            50  |   1.078038   .1014289    10.63   0.000     .8791907    1.276886
                |
        age_cat |
             2  |   .4411497   .0481435     9.16   0.000     .3467662    .5355331
             3  |   .7881811   .0533416    14.78   0.000      .683607    .8927553
             4  |   1.130577   .0597151    18.93   0.000     1.013507    1.247646
             5  |   1.363128   .0701527    19.43   0.000     1.225597     1.50066
             6  |   1.537272   .0819367    18.76   0.000     1.376639    1.697906
                |
          _cons |   8.841499   .0689671   128.20   0.000     8.706292    8.976707
----------------+----------------------------------------------------------------
        sigma_u |  2.0344116
        sigma_e |  .97219516
            rho |  .81409038   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1823787586095686

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    204,053
Group variable: id                              Number of groups  =      4,769

R-sq:                                           Obs per group:
     within  = 0.1824                                         min =          1
     between = 0.0830                                         avg =       42.8
     overall = 0.0688                                         max =      1,416

                                                F(34,4768)        =      62.01
corr(u_i, Xb)  = 0.0690                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,769 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0654462   .0743611     0.88   0.379    -.0803359    .2112283
during_domestic |  -.1168707   .0204389    -5.72   0.000    -.1569403    -.076801
 after_domestic |  -.1902221   .0260652    -7.30   0.000    -.2413219   -.1391224
   during_expat |  -.0881882   .0259454    -3.40   0.001    -.1390531   -.0373232
    after_expat |  -.1562671   .0283215    -5.52   0.000    -.2117903    -.100744
                |
       ind_year |
            27  |  -.0541031   .0362756    -1.49   0.136    -.1252199    .0170138
            28  |   .0881339   .0432425     2.04   0.042     .0033587    .1729091
            29  |   .1160425    .048771     2.38   0.017     .0204288    .2116563
            30  |   .1775552   .0536688     3.31   0.001     .0723396    .2827708
            31  |   .2685557   .0582341     4.61   0.000     .1543899    .3827215
            32  |   .4574069   .0622884     7.34   0.000     .3352929     .579521
            33  |   .5228439   .0665291     7.86   0.000     .3924161    .6532716
            34  |   .5859202    .070245     8.34   0.000     .4482076    .7236328
            35  |   .6308481   .0734514     8.59   0.000     .4868495    .7748466
            36  |   .6773713   .0767599     8.82   0.000     .5268864    .8278561
            37  |   .7255829   .0790668     9.18   0.000     .5705754    .8805904
            38  |   .7425389   .0812819     9.14   0.000     .5831889     .901889
            39  |   .7543651   .0828088     9.11   0.000     .5920215    .9167086
            40  |   .7598694    .084847     8.96   0.000       .59353    .9262088
            41  |   .8234259   .0866683     9.50   0.000      .653516    .9933358
            42  |   .8728523   .0882991     9.89   0.000     .6997453    1.045959
            43  |   .8136278   .0901532     9.02   0.000     .6368859    .9903697
            44  |   .7921901   .0921282     8.60   0.000     .6115763    .9728039
            45  |   .8706406   .0929688     9.36   0.000     .6883789    1.052902
            46  |    .873682   .0939613     9.30   0.000     .6894744     1.05789
            47  |     .95992   .0951934    10.08   0.000      .773297    1.146543
            48  |   1.033559   .0961372    10.75   0.000     .8450861    1.222032
            49  |   .9600884   .0992806     9.67   0.000     .7654527    1.154724
            50  |   1.078038   .1014289    10.63   0.000     .8791907    1.276886
                |
        age_cat |
             2  |   .4411497   .0481435     9.16   0.000     .3467662    .5355331
             3  |   .7881811   .0533416    14.78   0.000      .683607    .8927553
             4  |   1.130577   .0597151    18.93   0.000     1.013507    1.247646
             5  |   1.363128   .0701527    19.43   0.000     1.225597     1.50066
             6  |   1.537272   .0819367    18.76   0.000     1.376639    1.697906
                |
          _cons |   8.841499   .0689671   128.20   0.000     8.706292    8.976707
----------------+----------------------------------------------------------------
        sigma_u |  2.0344116
        sigma_e |  .97219516
            rho |  .81409038   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.3677                                         min =          1
     between = 0.1480                                         avg =       44.4
     overall = 0.1462                                         max =      1,475

                                                F(34,4896)        =     169.38
corr(u_i, Xb)  = 0.0651                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0583916   .0561839     1.04   0.299    -.0517541    .1685373
during_domestic |  -.1842443   .0152599   -12.07   0.000    -.2141606   -.1543279
 after_domestic |  -.2214967   .0208919   -10.60   0.000    -.2624541   -.1805392
   during_expat |   .0426651   .0201789     2.11   0.035     .0031054    .0822247
    after_expat |   .0723316    .023813     3.04   0.002     .0256474    .1190158
                |
       ind_year |
            27  |   -.009474   .0288595    -0.33   0.743    -.0660516    .0471037
            28  |   .1326332   .0332048     3.99   0.000      .067537    .1977295
            29  |   .3057808   .0372708     8.20   0.000     .2327132    .3788483
            30  |   .4455498   .0403777    11.03   0.000     .3663914    .5247082
            31  |   .5706738   .0437581    13.04   0.000     .4848883    .6564592
            32  |   .7011487   .0468416    14.97   0.000     .6093181    .7929793
            33  |   .7389003   .0501535    14.73   0.000     .6405768    .8372238
            34  |   .8585712   .0528592    16.24   0.000     .7549436    .9621989
            35  |   .9031272   .0557886    16.19   0.000     .7937564    1.012498
            36  |   .8971086   .0579554    15.48   0.000       .78349    1.010727
            37  |    .947579   .0596326    15.89   0.000     .8306723    1.064486
            38  |   .9746234   .0619952    15.72   0.000      .853085    1.096162
            39  |   1.012107   .0636155    15.91   0.000     .8873925    1.136822
            40  |   1.112312   .0659599    16.86   0.000     .9830007    1.241623
            41  |   1.191017   .0663767    17.94   0.000     1.060889    1.321145
            42  |   1.238704   .0681279    18.18   0.000     1.105143    1.372265
            43  |   1.090038   .0692367    15.74   0.000     .9543029    1.225773
            44  |    1.13963   .0715197    15.93   0.000     .9994193    1.279841
            45  |   1.262141   .0725318    17.40   0.000     1.119946    1.404336
            46  |   1.275703   .0740016    17.24   0.000     1.130626    1.420779
            47  |   1.335389    .074951    17.82   0.000     1.188452    1.482327
            48  |   1.401175   .0765923    18.29   0.000     1.251019     1.55133
            49  |   1.444119   .0777406    18.58   0.000     1.291713    1.596526
            50  |   1.519173   .0772354    19.67   0.000     1.367757    1.670589
                |
        age_cat |
             2  |   .9543586   .0421913    22.62   0.000     .8716447    1.037072
             3  |   1.356666   .0441236    30.75   0.000     1.270164    1.443168
             4  |   1.688354   .0483479    34.92   0.000     1.593571    1.783138
             5  |   1.957369   .0554225    35.32   0.000     1.848716    2.066022
             6  |    2.17532   .0643483    33.81   0.000     2.049168    2.301472
                |
          _cons |   10.34521   .0535941   193.03   0.000     10.24014    10.45028
----------------+----------------------------------------------------------------
        sigma_u |  1.5988083
        sigma_e |  .79353758
            rho |  .80234663   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .367669930249888

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.3677                                         min =          1
     between = 0.1480                                         avg =       44.4
     overall = 0.1462                                         max =      1,475

                                                F(34,4896)        =     169.38
corr(u_i, Xb)  = 0.0651                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0583916   .0561839     1.04   0.299    -.0517541    .1685373
during_domestic |  -.1842443   .0152599   -12.07   0.000    -.2141606   -.1543279
 after_domestic |  -.2214967   .0208919   -10.60   0.000    -.2624541   -.1805392
   during_expat |   .0426651   .0201789     2.11   0.035     .0031054    .0822247
    after_expat |   .0723316    .023813     3.04   0.002     .0256474    .1190158
                |
       ind_year |
            27  |   -.009474   .0288595    -0.33   0.743    -.0660516    .0471037
            28  |   .1326332   .0332048     3.99   0.000      .067537    .1977295
            29  |   .3057808   .0372708     8.20   0.000     .2327132    .3788483
            30  |   .4455498   .0403777    11.03   0.000     .3663914    .5247082
            31  |   .5706738   .0437581    13.04   0.000     .4848883    .6564592
            32  |   .7011487   .0468416    14.97   0.000     .6093181    .7929793
            33  |   .7389003   .0501535    14.73   0.000     .6405768    .8372238
            34  |   .8585712   .0528592    16.24   0.000     .7549436    .9621989
            35  |   .9031272   .0557886    16.19   0.000     .7937564    1.012498
            36  |   .8971086   .0579554    15.48   0.000       .78349    1.010727
            37  |    .947579   .0596326    15.89   0.000     .8306723    1.064486
            38  |   .9746234   .0619952    15.72   0.000      .853085    1.096162
            39  |   1.012107   .0636155    15.91   0.000     .8873925    1.136822
            40  |   1.112312   .0659599    16.86   0.000     .9830007    1.241623
            41  |   1.191017   .0663767    17.94   0.000     1.060889    1.321145
            42  |   1.238704   .0681279    18.18   0.000     1.105143    1.372265
            43  |   1.090038   .0692367    15.74   0.000     .9543029    1.225773
            44  |    1.13963   .0715197    15.93   0.000     .9994193    1.279841
            45  |   1.262141   .0725318    17.40   0.000     1.119946    1.404336
            46  |   1.275703   .0740016    17.24   0.000     1.130626    1.420779
            47  |   1.335389    .074951    17.82   0.000     1.188452    1.482327
            48  |   1.401175   .0765923    18.29   0.000     1.251019     1.55133
            49  |   1.444119   .0777406    18.58   0.000     1.291713    1.596526
            50  |   1.519173   .0772354    19.67   0.000     1.367757    1.670589
                |
        age_cat |
             2  |   .9543586   .0421913    22.62   0.000     .8716447    1.037072
             3  |   1.356666   .0441236    30.75   0.000     1.270164    1.443168
             4  |   1.688354   .0483479    34.92   0.000     1.593571    1.783138
             5  |   1.957369   .0554225    35.32   0.000     1.848716    2.066022
             6  |    2.17532   .0643483    33.81   0.000     2.049168    2.301472
                |
          _cons |   10.34521   .0535941   193.03   0.000     10.24014    10.45028
----------------+----------------------------------------------------------------
        sigma_u |  1.5988083
        sigma_e |  .79353758
            rho |  .80234663   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    204,053
Group variable: id                              Number of groups  =      4,769

R-sq:                                           Obs per group:
     within  = 0.1679                                         min =          1
     between = 0.1049                                         avg =       42.8
     overall = 0.1001                                         max =      1,416

                                                F(34,4768)        =      57.64
corr(u_i, Xb)  = 0.0671                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,769 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0471998   .0601617     0.78   0.433    -.0707449    .1651444
during_domestic |  -.0021221    .016905    -0.13   0.900    -.0352636    .0310195
 after_domestic |    .007907   .0205511     0.38   0.700    -.0323826    .0481965
   during_expat |  -.0715231   .0215811    -3.31   0.001     -.113832   -.0292142
    after_expat |  -.1469471   .0213216    -6.89   0.000    -.1887473   -.1051468
                |
       ind_year |
            27  |   .1016942   .0314368     3.23   0.001     .0400637    .1633248
            28  |   .3281424   .0365352     8.98   0.000     .2565166    .3997682
            29  |   .4307361   .0406189    10.60   0.000     .3511043    .5103679
            30  |    .518431   .0437429    11.85   0.000     .4326747    .6041872
            31  |   .6436571   .0469864    13.70   0.000     .5515422    .7357721
            32  |   .8538445   .0499231    17.10   0.000     .7559722    .9517167
            33  |   .9642363   .0529612    18.21   0.000     .8604078    1.068065
            34  |   1.051074   .0557279    18.86   0.000     .9418212    1.160326
            35  |   1.128263    .058097    19.42   0.000     1.014366     1.24216
            36  |   1.228896    .060205    20.41   0.000     1.110866    1.346926
            37  |   1.298814   .0621518    20.90   0.000     1.176968     1.42066
            38  |   1.349318   .0635262    21.24   0.000     1.224777    1.473859
            39  |   1.382769   .0646732    21.38   0.000     1.255979    1.509558
            40  |   1.392732   .0658362    21.15   0.000     1.263663    1.521801
            41  |   1.433294   .0667597    21.47   0.000     1.302414    1.564174
            42  |    1.48529   .0682307    21.77   0.000     1.351527    1.619054
            43  |    1.54844   .0700164    22.12   0.000     1.411176    1.685705
            44  |   1.527184   .0712021    21.45   0.000     1.387595    1.666773
            45  |   1.564746   .0717677    21.80   0.000     1.424048    1.705444
            46  |   1.564362   .0723081    21.63   0.000     1.422605    1.706119
            47  |   1.632184   .0730968    22.33   0.000     1.488881    1.775488
            48  |   1.668212   .0736538    22.65   0.000     1.523816    1.812607
            49  |   1.417553   .0767861    18.46   0.000     1.267016    1.568089
            50  |   1.499674   .0786946    19.06   0.000     1.345396    1.653951
                |
        age_cat |
             2  |   .1531934   .0454419     3.37   0.001     .0641064    .2422805
             3  |   .2040186   .0498183     4.10   0.000     .1063517    .3016855
             4  |   .2674412   .0533382     5.01   0.000     .1628737    .3720086
             5  |   .2521757   .0605794     4.16   0.000     .1334121    .3709394
             6  |   .2477507   .0689096     3.60   0.000      .112656    .3828453
                |
          _cons |    5.10808   .0595807    85.73   0.000     4.991274    5.224886
----------------+----------------------------------------------------------------
        sigma_u |  1.5979677
        sigma_e |  .83024746
            rho |  .78743421   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1679452878843956

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    204,053
Group variable: id                              Number of groups  =      4,769

R-sq:                                           Obs per group:
     within  = 0.1679                                         min =          1
     between = 0.1049                                         avg =       42.8
     overall = 0.1001                                         max =      1,416

                                                F(34,4768)        =      57.64
corr(u_i, Xb)  = 0.0671                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,769 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0471998   .0601617     0.78   0.433    -.0707449    .1651444
during_domestic |  -.0021221    .016905    -0.13   0.900    -.0352636    .0310195
 after_domestic |    .007907   .0205511     0.38   0.700    -.0323826    .0481965
   during_expat |  -.0715231   .0215811    -3.31   0.001     -.113832   -.0292142
    after_expat |  -.1469471   .0213216    -6.89   0.000    -.1887473   -.1051468
                |
       ind_year |
            27  |   .1016942   .0314368     3.23   0.001     .0400637    .1633248
            28  |   .3281424   .0365352     8.98   0.000     .2565166    .3997682
            29  |   .4307361   .0406189    10.60   0.000     .3511043    .5103679
            30  |    .518431   .0437429    11.85   0.000     .4326747    .6041872
            31  |   .6436571   .0469864    13.70   0.000     .5515422    .7357721
            32  |   .8538445   .0499231    17.10   0.000     .7559722    .9517167
            33  |   .9642363   .0529612    18.21   0.000     .8604078    1.068065
            34  |   1.051074   .0557279    18.86   0.000     .9418212    1.160326
            35  |   1.128263    .058097    19.42   0.000     1.014366     1.24216
            36  |   1.228896    .060205    20.41   0.000     1.110866    1.346926
            37  |   1.298814   .0621518    20.90   0.000     1.176968     1.42066
            38  |   1.349318   .0635262    21.24   0.000     1.224777    1.473859
            39  |   1.382769   .0646732    21.38   0.000     1.255979    1.509558
            40  |   1.392732   .0658362    21.15   0.000     1.263663    1.521801
            41  |   1.433294   .0667597    21.47   0.000     1.302414    1.564174
            42  |    1.48529   .0682307    21.77   0.000     1.351527    1.619054
            43  |    1.54844   .0700164    22.12   0.000     1.411176    1.685705
            44  |   1.527184   .0712021    21.45   0.000     1.387595    1.666773
            45  |   1.564746   .0717677    21.80   0.000     1.424048    1.705444
            46  |   1.564362   .0723081    21.63   0.000     1.422605    1.706119
            47  |   1.632184   .0730968    22.33   0.000     1.488881    1.775488
            48  |   1.668212   .0736538    22.65   0.000     1.523816    1.812607
            49  |   1.417553   .0767861    18.46   0.000     1.267016    1.568089
            50  |   1.499674   .0786946    19.06   0.000     1.345396    1.653951
                |
        age_cat |
             2  |   .1531934   .0454419     3.37   0.001     .0641064    .2422805
             3  |   .2040186   .0498183     4.10   0.000     .1063517    .3016855
             4  |   .2674412   .0533382     5.01   0.000     .1628737    .3720086
             5  |   .2521757   .0605794     4.16   0.000     .1334121    .3709394
             6  |   .2477507   .0689096     3.60   0.000      .112656    .3828453
                |
          _cons |    5.10808   .0595807    85.73   0.000     4.991274    5.224886
----------------+----------------------------------------------------------------
        sigma_u |  1.5979677
        sigma_e |  .83024746
            rho |  .78743421   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.4807                                         min =          1
     between = 0.2487                                         avg =       44.4
     overall = 0.2829                                         max =      1,475

                                                F(34,4896)        =     299.02
corr(u_i, Xb)  = 0.0576                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .067078   .0284481     2.36   0.018      .011307     .122849
during_domestic |   -.060057   .0089538    -6.71   0.000    -.0776104   -.0425036
 after_domestic |  -.0134262   .0116129    -1.16   0.248    -.0361927    .0093403
   during_expat |     .06596   .0119265     5.53   0.000     .0425788    .0893413
    after_expat |   .0931785   .0139006     6.70   0.000     .0659271    .1204298
                |
       ind_year |
            27  |   .1398867   .0206714     6.77   0.000     .0993615     .180412
            28  |   .3582026   .0221874    16.14   0.000     .3147054    .4016999
            29  |   .5977815   .0250649    23.85   0.000      .548643      .64692
            30  |   .7688806   .0256012    30.03   0.000     .7186908    .8190704
            31  |   .9326333    .026912    34.65   0.000     .8798737    .9853928
            32  |   1.078547   .0282845    38.13   0.000     1.023097    1.133998
            33  |   1.162096   .0291771    39.83   0.000     1.104896    1.219296
            34  |    1.30523   .0303878    42.95   0.000     1.245656    1.364804
            35  |   1.386551   .0317079    43.73   0.000     1.324389    1.448713
            36  |   1.436163    .032507    44.18   0.000     1.372434    1.499891
            37  |    1.50599   .0332712    45.26   0.000     1.440764    1.571216
            38  |   1.577373   .0348512    45.26   0.000     1.509049    1.645697
            39  |   1.638084   .0357353    45.84   0.000     1.568027    1.708141
            40  |   1.742725   .0371831    46.87   0.000      1.66983    1.815621
            41  |    1.80375   .0372557    48.42   0.000     1.730712    1.876788
            42  |    1.85661   .0382352    48.56   0.000     1.781652    1.931568
            43  |   1.829969   .0386406    47.36   0.000     1.754217    1.905722
            44  |   1.886518    .039989    47.18   0.000     1.808122    1.964915
            45  |   1.971523   .0405264    48.65   0.000     1.892073    2.050973
            46  |   1.980905   .0408518    48.49   0.000     1.900817    2.060992
            47  |   2.022105   .0413567    48.89   0.000     1.941027    2.103183
            48  |   2.066464   .0415461    49.74   0.000     1.985015    2.147913
            49  |   2.058448   .0427577    48.14   0.000     1.974624    2.142273
            50  |   2.092261   .0424349    49.31   0.000      2.00907    2.175453
                |
        age_cat |
             2  |   .6368334   .0333024    19.12   0.000     .5715458    .7021211
             3  |   .7398489   .0344055    21.50   0.000     .6723988    .8072991
             4  |   .7818899   .0361365    21.64   0.000     .7110462    .8527336
             5  |   .7975479   .0390319    20.43   0.000     .7210279     .874068
             6  |   .8237525   .0426746    19.30   0.000     .7400912    .9074138
                |
          _cons |   6.703914   .0366642   182.85   0.000     6.632035    6.775792
----------------+----------------------------------------------------------------
        sigma_u |  1.0673808
        sigma_e |  .52884151
            rho |  .80290469   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .4807273042874278

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.4807                                         min =          1
     between = 0.2487                                         avg =       44.4
     overall = 0.2829                                         max =      1,475

                                                F(34,4896)        =     299.02
corr(u_i, Xb)  = 0.0576                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .067078   .0284481     2.36   0.018      .011307     .122849
during_domestic |   -.060057   .0089538    -6.71   0.000    -.0776104   -.0425036
 after_domestic |  -.0134262   .0116129    -1.16   0.248    -.0361927    .0093403
   during_expat |     .06596   .0119265     5.53   0.000     .0425788    .0893413
    after_expat |   .0931785   .0139006     6.70   0.000     .0659271    .1204298
                |
       ind_year |
            27  |   .1398867   .0206714     6.77   0.000     .0993615     .180412
            28  |   .3582026   .0221874    16.14   0.000     .3147054    .4016999
            29  |   .5977815   .0250649    23.85   0.000      .548643      .64692
            30  |   .7688806   .0256012    30.03   0.000     .7186908    .8190704
            31  |   .9326333    .026912    34.65   0.000     .8798737    .9853928
            32  |   1.078547   .0282845    38.13   0.000     1.023097    1.133998
            33  |   1.162096   .0291771    39.83   0.000     1.104896    1.219296
            34  |    1.30523   .0303878    42.95   0.000     1.245656    1.364804
            35  |   1.386551   .0317079    43.73   0.000     1.324389    1.448713
            36  |   1.436163    .032507    44.18   0.000     1.372434    1.499891
            37  |    1.50599   .0332712    45.26   0.000     1.440764    1.571216
            38  |   1.577373   .0348512    45.26   0.000     1.509049    1.645697
            39  |   1.638084   .0357353    45.84   0.000     1.568027    1.708141
            40  |   1.742725   .0371831    46.87   0.000      1.66983    1.815621
            41  |    1.80375   .0372557    48.42   0.000     1.730712    1.876788
            42  |    1.85661   .0382352    48.56   0.000     1.781652    1.931568
            43  |   1.829969   .0386406    47.36   0.000     1.754217    1.905722
            44  |   1.886518    .039989    47.18   0.000     1.808122    1.964915
            45  |   1.971523   .0405264    48.65   0.000     1.892073    2.050973
            46  |   1.980905   .0408518    48.49   0.000     1.900817    2.060992
            47  |   2.022105   .0413567    48.89   0.000     1.941027    2.103183
            48  |   2.066464   .0415461    49.74   0.000     1.985015    2.147913
            49  |   2.058448   .0427577    48.14   0.000     1.974624    2.142273
            50  |   2.092261   .0424349    49.31   0.000      2.00907    2.175453
                |
        age_cat |
             2  |   .6368334   .0333024    19.12   0.000     .5715458    .7021211
             3  |   .7398489   .0344055    21.50   0.000     .6723988    .8072991
             4  |   .7818899   .0361365    21.64   0.000     .7110462    .8527336
             5  |   .7975479   .0390319    20.43   0.000     .7210279     .874068
             6  |   .8237525   .0426746    19.30   0.000     .7400912    .9074138
                |
          _cons |   6.703914   .0366642   182.85   0.000     6.632035    6.775792
----------------+----------------------------------------------------------------
        sigma_u |  1.0673808
        sigma_e |  .52884151
            rho |  .80290469   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.0412                                         min =          1
     between = 0.0855                                         avg =       44.4
     overall = 0.0391                                         max =      1,475

                                                F(34,4896)        =      27.37
corr(u_i, Xb)  = 0.1070                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0292462   .0174761     1.67   0.094    -.0050149    .0635072
during_domestic |  -.0203629   .0052855    -3.85   0.000    -.0307248   -.0100009
 after_domestic |  -.0311576   .0063058    -4.94   0.000    -.0435199   -.0187954
   during_expat |  -.0182949   .0052023    -3.52   0.000    -.0284936   -.0080961
    after_expat |   -.035166    .005524    -6.37   0.000    -.0459955   -.0243364
                |
       ind_year |
            27  |  -.0228861   .0097825    -2.34   0.019    -.0420642   -.0037079
            28  |  -.0120905   .0106879    -1.13   0.258    -.0330436    .0088627
            29  |  -.0134362   .0118638    -1.13   0.257    -.0366945    .0098221
            30  |  -.0002001   .0129671    -0.02   0.988    -.0256215    .0252214
            31  |  -.0150133   .0134186    -1.12   0.263    -.0413197    .0112931
            32  |  -.0175668   .0141463    -1.24   0.214    -.0452999    .0101663
            33  |  -.0240373    .014878    -1.62   0.106    -.0532049    .0051304
            34  |  -.0274535   .0155306    -1.77   0.077    -.0579004    .0029934
            35  |  -.0227143   .0162396    -1.40   0.162    -.0545512    .0091227
            36  |  -.0299837    .016651    -1.80   0.072    -.0626271    .0026598
            37  |  -.0250265   .0170874    -1.46   0.143    -.0585255    .0084725
            38  |  -.0194834   .0175177    -1.11   0.266    -.0538259    .0148591
            39  |  -.0172464   .0179208    -0.96   0.336    -.0523793    .0178864
            40  |  -.0192629   .0183273    -1.05   0.293    -.0551927    .0166668
            41  |  -.0063445   .0187707    -0.34   0.735    -.0431436    .0304545
            42  |  -.0039434   .0188992    -0.21   0.835    -.0409943    .0331074
            43  |   .0064066   .0194126     0.33   0.741    -.0316509    .0444641
            44  |   .0105053   .0197327     0.53   0.594    -.0281796    .0491901
            45  |   .0228534   .0196619     1.16   0.245    -.0156927    .0613995
            46  |   .0276449   .0201826     1.37   0.171    -.0119221     .067212
            47  |   .0348458   .0204973     1.70   0.089    -.0053381    .0750298
            48  |   .0242708   .0207509     1.17   0.242    -.0164104    .0649519
            49  |   -.163503   .0217656    -7.51   0.000    -.2061733   -.1208327
            50  |  -.2040335   .0218473    -9.34   0.000     -.246864   -.1612029
                |
        age_cat |
             2  |    .076036   .0108187     7.03   0.000     .0548266    .0972455
             3  |   .1012642    .011491     8.81   0.000     .0787368    .1237916
             4  |   .1372429   .0122072    11.24   0.000     .1133114    .1611744
             5  |   .1694196   .0143522    11.80   0.000     .1412828    .1975563
             6  |   .1993042   .0168837    11.80   0.000     .1662045    .2324039
                |
          _cons |   .5505405   .0150797    36.51   0.000     .5209775    .5801035
----------------+----------------------------------------------------------------
        sigma_u |  .37943447
        sigma_e |    .282071
            rho |  .64406377   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0412347912736541

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.0412                                         min =          1
     between = 0.0855                                         avg =       44.4
     overall = 0.0391                                         max =      1,475

                                                F(34,4896)        =      27.37
corr(u_i, Xb)  = 0.1070                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0292462   .0174761     1.67   0.094    -.0050149    .0635072
during_domestic |  -.0203629   .0052855    -3.85   0.000    -.0307248   -.0100009
 after_domestic |  -.0311576   .0063058    -4.94   0.000    -.0435199   -.0187954
   during_expat |  -.0182949   .0052023    -3.52   0.000    -.0284936   -.0080961
    after_expat |   -.035166    .005524    -6.37   0.000    -.0459955   -.0243364
                |
       ind_year |
            27  |  -.0228861   .0097825    -2.34   0.019    -.0420642   -.0037079
            28  |  -.0120905   .0106879    -1.13   0.258    -.0330436    .0088627
            29  |  -.0134362   .0118638    -1.13   0.257    -.0366945    .0098221
            30  |  -.0002001   .0129671    -0.02   0.988    -.0256215    .0252214
            31  |  -.0150133   .0134186    -1.12   0.263    -.0413197    .0112931
            32  |  -.0175668   .0141463    -1.24   0.214    -.0452999    .0101663
            33  |  -.0240373    .014878    -1.62   0.106    -.0532049    .0051304
            34  |  -.0274535   .0155306    -1.77   0.077    -.0579004    .0029934
            35  |  -.0227143   .0162396    -1.40   0.162    -.0545512    .0091227
            36  |  -.0299837    .016651    -1.80   0.072    -.0626271    .0026598
            37  |  -.0250265   .0170874    -1.46   0.143    -.0585255    .0084725
            38  |  -.0194834   .0175177    -1.11   0.266    -.0538259    .0148591
            39  |  -.0172464   .0179208    -0.96   0.336    -.0523793    .0178864
            40  |  -.0192629   .0183273    -1.05   0.293    -.0551927    .0166668
            41  |  -.0063445   .0187707    -0.34   0.735    -.0431436    .0304545
            42  |  -.0039434   .0188992    -0.21   0.835    -.0409943    .0331074
            43  |   .0064066   .0194126     0.33   0.741    -.0316509    .0444641
            44  |   .0105053   .0197327     0.53   0.594    -.0281796    .0491901
            45  |   .0228534   .0196619     1.16   0.245    -.0156927    .0613995
            46  |   .0276449   .0201826     1.37   0.171    -.0119221     .067212
            47  |   .0348458   .0204973     1.70   0.089    -.0053381    .0750298
            48  |   .0242708   .0207509     1.17   0.242    -.0164104    .0649519
            49  |   -.163503   .0217656    -7.51   0.000    -.2061733   -.1208327
            50  |  -.2040335   .0218473    -9.34   0.000     -.246864   -.1612029
                |
        age_cat |
             2  |    .076036   .0108187     7.03   0.000     .0548266    .0972455
             3  |   .1012642    .011491     8.81   0.000     .0787368    .1237916
             4  |   .1372429   .0122072    11.24   0.000     .1133114    .1611744
             5  |   .1694196   .0143522    11.80   0.000     .1412828    .1975563
             6  |   .1993042   .0168837    11.80   0.000     .1662045    .2324039
                |
          _cons |   .5505405   .0150797    36.51   0.000     .5209775    .5801035
----------------+----------------------------------------------------------------
        sigma_u |  .37943447
        sigma_e |    .282071
            rho |  .64406377   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    185,951
Group variable: id                              Number of groups  =      4,624

R-sq:                                           Obs per group:
     within  = 0.0400                                         min =          1
     between = 0.0028                                         avg =       40.2
     overall = 0.0299                                         max =      1,357

                                                F(32,4623)        =      83.97
corr(u_i, Xb)  = -0.0736                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,624 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0623977   .0372217     1.68   0.094    -.0105746    .1353699
during_domestic |  -.0211488   .0100291    -2.11   0.035    -.0408106   -.0014871
 after_domestic |   .0019408   .0110135     0.18   0.860     -.019651    .0235326
   during_expat |   .0084165   .0126721     0.66   0.507    -.0164269      .03326
    after_expat |   .0094433    .011217     0.84   0.400    -.0125473    .0314339
                |
       ind_year |
            28  |  -.2254331   .0348699    -6.46   0.000    -.2937948   -.1570714
            29  |  -.0503256    .033288    -1.51   0.131     -.115586    .0149348
            30  |  -.1896767   .0333402    -5.69   0.000    -.2550394    -.124314
            31  |  -.0292395   .0345744    -0.85   0.398    -.0970219    .0385429
            32  |   -.141582   .0338977    -4.18   0.000    -.2080377   -.0751263
            33  |  -.0218535   .0351154    -0.62   0.534    -.0906965    .0469894
            34  |  -.1511676   .0346993    -4.36   0.000    -.2191948   -.0831404
            35  |  -.1053571   .0357274    -2.95   0.003    -.1753998   -.0353143
            36  |  -.0910847   .0360085    -2.53   0.011    -.1616785   -.0204909
            37  |  -.1647296   .0357153    -4.61   0.000    -.2347486   -.0947106
            38  |  -.1201598   .0370259    -3.25   0.001    -.1927482   -.0475713
            39  |  -.2018939   .0373976    -5.40   0.000    -.2752111   -.1285767
            40  |  -.1515904   .0372611    -4.07   0.000    -.2246398   -.0785409
            41  |  -.1824737   .0383041    -4.76   0.000     -.257568   -.1073795
            42  |  -.1704962   .0392238    -4.35   0.000    -.2473936   -.0935989
            43  |  -.0778331   .0385468    -2.02   0.044    -.1534032    -.002263
            44  |  -.1531696   .0379315    -4.04   0.000    -.2275334   -.0788058
            45  |  -.3315439   .0389561    -8.51   0.000    -.4079165   -.2551714
            46  |  -.1897842   .0396691    -4.78   0.000    -.2675546   -.1120138
            47  |  -.0230048   .0402622    -0.57   0.568    -.1019378    .0559283
            48  |  -.3167838   .0411528    -7.70   0.000     -.397463   -.2361046
            49  |  -.8362181   .0396912   -21.07   0.000    -.9140319   -.7584044
            50  |  -.1738027    .049632    -3.50   0.000    -.2711052   -.0765003
                |
        age_cat |
             3  |  -.1597177   .0321371    -4.97   0.000    -.2227217   -.0967137
             4  |  -.3303145   .0292211   -11.30   0.000    -.3876018   -.2730272
             5  |  -.4378423   .0314473   -13.92   0.000     -.499494   -.3761906
             6  |  -.4677036   .0343414   -13.62   0.000     -.535029   -.4003781
                |
          _cons |   .3984527   .0386813    10.30   0.000     .3226189    .4742864
----------------+----------------------------------------------------------------
        sigma_u |  .41944436
        sigma_e |  .82654427
            rho |  .20478609   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .040020803120016

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    185,951
Group variable: id                              Number of groups  =      4,624

R-sq:                                           Obs per group:
     within  = 0.0400                                         min =          1
     between = 0.0028                                         avg =       40.2
     overall = 0.0299                                         max =      1,357

                                                F(32,4623)        =      83.97
corr(u_i, Xb)  = -0.0736                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,624 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0623977   .0372217     1.68   0.094    -.0105746    .1353699
during_domestic |  -.0211488   .0100291    -2.11   0.035    -.0408106   -.0014871
 after_domestic |   .0019408   .0110135     0.18   0.860     -.019651    .0235326
   during_expat |   .0084165   .0126721     0.66   0.507    -.0164269      .03326
    after_expat |   .0094433    .011217     0.84   0.400    -.0125473    .0314339
                |
       ind_year |
            28  |  -.2254331   .0348699    -6.46   0.000    -.2937948   -.1570714
            29  |  -.0503256    .033288    -1.51   0.131     -.115586    .0149348
            30  |  -.1896767   .0333402    -5.69   0.000    -.2550394    -.124314
            31  |  -.0292395   .0345744    -0.85   0.398    -.0970219    .0385429
            32  |   -.141582   .0338977    -4.18   0.000    -.2080377   -.0751263
            33  |  -.0218535   .0351154    -0.62   0.534    -.0906965    .0469894
            34  |  -.1511676   .0346993    -4.36   0.000    -.2191948   -.0831404
            35  |  -.1053571   .0357274    -2.95   0.003    -.1753998   -.0353143
            36  |  -.0910847   .0360085    -2.53   0.011    -.1616785   -.0204909
            37  |  -.1647296   .0357153    -4.61   0.000    -.2347486   -.0947106
            38  |  -.1201598   .0370259    -3.25   0.001    -.1927482   -.0475713
            39  |  -.2018939   .0373976    -5.40   0.000    -.2752111   -.1285767
            40  |  -.1515904   .0372611    -4.07   0.000    -.2246398   -.0785409
            41  |  -.1824737   .0383041    -4.76   0.000     -.257568   -.1073795
            42  |  -.1704962   .0392238    -4.35   0.000    -.2473936   -.0935989
            43  |  -.0778331   .0385468    -2.02   0.044    -.1534032    -.002263
            44  |  -.1531696   .0379315    -4.04   0.000    -.2275334   -.0788058
            45  |  -.3315439   .0389561    -8.51   0.000    -.4079165   -.2551714
            46  |  -.1897842   .0396691    -4.78   0.000    -.2675546   -.1120138
            47  |  -.0230048   .0402622    -0.57   0.568    -.1019378    .0559283
            48  |  -.3167838   .0411528    -7.70   0.000     -.397463   -.2361046
            49  |  -.8362181   .0396912   -21.07   0.000    -.9140319   -.7584044
            50  |  -.1738027    .049632    -3.50   0.000    -.2711052   -.0765003
                |
        age_cat |
             3  |  -.1597177   .0321371    -4.97   0.000    -.2227217   -.0967137
             4  |  -.3303145   .0292211   -11.30   0.000    -.3876018   -.2730272
             5  |  -.4378423   .0314473   -13.92   0.000     -.499494   -.3761906
             6  |  -.4677036   .0343414   -13.62   0.000     -.535029   -.4003781
                |
          _cons |   .3984527   .0386813    10.30   0.000     .3226189    .4742864
----------------+----------------------------------------------------------------
        sigma_u |  .41944436
        sigma_e |  .82654427
            rho |  .20478609   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.1419                                         min =          1
     between = 0.0872                                         avg =       75.8
     overall = 0.0944                                         max =      4,150

                                                F(59,4628)        =      38.32
corr(u_i, Xb)  = 0.0046                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0217369    .034904    -0.62   0.533    -.0901655    .0466916
during_domestic |   -.088705   .0139818    -6.34   0.000     -.116116    -.061294
 after_domestic |  -.2049089   .0175329   -11.69   0.000    -.2392817   -.1705361
   during_expat |   -.040323    .013128    -3.07   0.002    -.0660602   -.0145859
    after_expat |  -.0662805   .0140305    -4.72   0.000     -.093787    -.038774
                |
       ind_year |
             2  |  -.0521705   .0363458    -1.44   0.151    -.1234256    .0190847
             3  |  -.0685863   .0437894    -1.57   0.117    -.1544344    .0172617
             4  |   -.080954   .0488161    -1.66   0.097    -.1766568    .0147488
             5  |   -.145634   .0545147    -2.67   0.008    -.2525087   -.0387593
             6  |  -.1712016   .0576434    -2.97   0.003    -.2842102    -.058193
             7  |  -.1804213   .0604838    -2.98   0.003    -.2989984   -.0618442
             8  |  -.1772213   .0640575    -2.77   0.006    -.3028044   -.0516381
             9  |  -.1844382   .0671955    -2.74   0.006    -.3161734   -.0527029
            10  |  -.1895425   .0696686    -2.72   0.007    -.3261261   -.0529589
            11  |  -.2413721   .0724038    -3.33   0.001    -.3833181   -.0994261
            12  |  -.2465377    .074257    -3.32   0.001    -.3921168   -.1009585
            13  |  -.2548471   .0759219    -3.36   0.001    -.4036902    -.106004
            14  |  -.2134609   .0771037    -2.77   0.006    -.3646208    -.062301
            15  |   -.171363   .0786279    -2.18   0.029    -.3255112   -.0172148
            16  |  -.1266181    .079905    -1.58   0.113    -.2832701    .0300338
            17  |  -.1086619   .0814242    -1.33   0.182    -.2682922    .0509685
            18  |  -.1625098   .0824421    -1.97   0.049    -.3241355    -.000884
            19  |  -.1694634   .0832396    -2.04   0.042    -.3326527   -.0062741
            20  |  -.1864745   .0841855    -2.22   0.027    -.3515181   -.0214308
            21  |  -.2499703   .0854383    -2.93   0.003    -.4174702   -.0824705
            22  |  -.2732772   .0868806    -3.15   0.002    -.4436046   -.1029498
            23  |  -.2924788   .0888797    -3.29   0.001    -.4667255   -.1182322
            24  |  -.2698988   .0898086    -3.01   0.003    -.4459665   -.0938311
            25  |  -.2460913   .0910006    -2.70   0.007    -.4244959   -.0676868
            26  |   1.132005   .1021693    11.08   0.000     .9317048    1.332306
            27  |    .943991   .1004403     9.40   0.000       .74708    1.140902
            28  |   .8613739   .0986854     8.73   0.000     .6679036    1.054844
            29  |    .782656    .097529     8.02   0.000     .5914526    .9738594
            30  |   .7577507   .0962418     7.87   0.000     .5690709    .9464305
            31  |   .7417416   .0971457     7.64   0.000     .5512897    .9321935
            32  |    .709771   .0971045     7.31   0.000     .5193999    .9001421
            33  |   .6651456    .097349     6.83   0.000     .4742951     .855996
            34  |   .6610406   .0980736     6.74   0.000     .4687696    .8533117
            35  |   .6206738   .0986274     6.29   0.000     .4273171    .8140304
            36  |   .5508877   .0993694     5.54   0.000     .3560762    .7456991
            37  |   .5178738   .0997291     5.19   0.000     .3223572    .7133904
            38  |   .4793026   .1008468     4.75   0.000     .2815947    .6770105
            39  |   .4782687   .1018029     4.70   0.000     .2786866    .6778509
            40  |   .4663256   .1024258     4.55   0.000     .2655222    .6671291
            41  |   .4944117   .1030454     4.80   0.000     .2923937    .6964298
            42  |   .5009879   .1047375     4.78   0.000     .2956524    .7063234
            43  |   .3663929    .105921     3.46   0.001     .1587372    .5740486
            44  |   .3506613   .1071727     3.27   0.001     .1405517    .5607709
            45  |   .3968404   .1079655     3.68   0.000     .1851765    .6085043
            46  |   .4131099   .1087577     3.80   0.000     .1998931    .6263268
            47  |   .4386773   .1091724     4.02   0.000     .2246474    .6527071
            48  |   .4480191   .1100024     4.07   0.000     .2323619    .6636763
            49  |   .5103162   .1105842     4.61   0.000     .2935184     .727114
            50  |   .5625749    .110366     5.10   0.000     .3462048    .7789449
                |
        age_cat |
             2  |   .4373229   .0289736    15.09   0.000     .3805208    .4941251
             3  |   .7935615   .0321684    24.67   0.000     .7304962    .8566268
             4  |   1.154176   .0372433    30.99   0.000     1.081162    1.227191
             5  |   1.458458   .0457153    31.90   0.000     1.368834    1.548082
             6  |   1.664388   .0553345    30.08   0.000     1.555906     1.77287
                |
          _cons |   2.682736   .0729961    36.75   0.000     2.539629    2.825844
----------------+----------------------------------------------------------------
        sigma_u |   1.054164
        sigma_e |  .76646988
            rho |  .65416905   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1418526684500082

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.1419                                         min =          1
     between = 0.0872                                         avg =       75.8
     overall = 0.0944                                         max =      4,150

                                                F(59,4628)        =      38.32
corr(u_i, Xb)  = 0.0046                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0217369    .034904    -0.62   0.533    -.0901655    .0466916
during_domestic |   -.088705   .0139818    -6.34   0.000     -.116116    -.061294
 after_domestic |  -.2049089   .0175329   -11.69   0.000    -.2392817   -.1705361
   during_expat |   -.040323    .013128    -3.07   0.002    -.0660602   -.0145859
    after_expat |  -.0662805   .0140305    -4.72   0.000     -.093787    -.038774
                |
       ind_year |
             2  |  -.0521705   .0363458    -1.44   0.151    -.1234256    .0190847
             3  |  -.0685863   .0437894    -1.57   0.117    -.1544344    .0172617
             4  |   -.080954   .0488161    -1.66   0.097    -.1766568    .0147488
             5  |   -.145634   .0545147    -2.67   0.008    -.2525087   -.0387593
             6  |  -.1712016   .0576434    -2.97   0.003    -.2842102    -.058193
             7  |  -.1804213   .0604838    -2.98   0.003    -.2989984   -.0618442
             8  |  -.1772213   .0640575    -2.77   0.006    -.3028044   -.0516381
             9  |  -.1844382   .0671955    -2.74   0.006    -.3161734   -.0527029
            10  |  -.1895425   .0696686    -2.72   0.007    -.3261261   -.0529589
            11  |  -.2413721   .0724038    -3.33   0.001    -.3833181   -.0994261
            12  |  -.2465377    .074257    -3.32   0.001    -.3921168   -.1009585
            13  |  -.2548471   .0759219    -3.36   0.001    -.4036902    -.106004
            14  |  -.2134609   .0771037    -2.77   0.006    -.3646208    -.062301
            15  |   -.171363   .0786279    -2.18   0.029    -.3255112   -.0172148
            16  |  -.1266181    .079905    -1.58   0.113    -.2832701    .0300338
            17  |  -.1086619   .0814242    -1.33   0.182    -.2682922    .0509685
            18  |  -.1625098   .0824421    -1.97   0.049    -.3241355    -.000884
            19  |  -.1694634   .0832396    -2.04   0.042    -.3326527   -.0062741
            20  |  -.1864745   .0841855    -2.22   0.027    -.3515181   -.0214308
            21  |  -.2499703   .0854383    -2.93   0.003    -.4174702   -.0824705
            22  |  -.2732772   .0868806    -3.15   0.002    -.4436046   -.1029498
            23  |  -.2924788   .0888797    -3.29   0.001    -.4667255   -.1182322
            24  |  -.2698988   .0898086    -3.01   0.003    -.4459665   -.0938311
            25  |  -.2460913   .0910006    -2.70   0.007    -.4244959   -.0676868
            26  |   1.132005   .1021693    11.08   0.000     .9317048    1.332306
            27  |    .943991   .1004403     9.40   0.000       .74708    1.140902
            28  |   .8613739   .0986854     8.73   0.000     .6679036    1.054844
            29  |    .782656    .097529     8.02   0.000     .5914526    .9738594
            30  |   .7577507   .0962418     7.87   0.000     .5690709    .9464305
            31  |   .7417416   .0971457     7.64   0.000     .5512897    .9321935
            32  |    .709771   .0971045     7.31   0.000     .5193999    .9001421
            33  |   .6651456    .097349     6.83   0.000     .4742951     .855996
            34  |   .6610406   .0980736     6.74   0.000     .4687696    .8533117
            35  |   .6206738   .0986274     6.29   0.000     .4273171    .8140304
            36  |   .5508877   .0993694     5.54   0.000     .3560762    .7456991
            37  |   .5178738   .0997291     5.19   0.000     .3223572    .7133904
            38  |   .4793026   .1008468     4.75   0.000     .2815947    .6770105
            39  |   .4782687   .1018029     4.70   0.000     .2786866    .6778509
            40  |   .4663256   .1024258     4.55   0.000     .2655222    .6671291
            41  |   .4944117   .1030454     4.80   0.000     .2923937    .6964298
            42  |   .5009879   .1047375     4.78   0.000     .2956524    .7063234
            43  |   .3663929    .105921     3.46   0.001     .1587372    .5740486
            44  |   .3506613   .1071727     3.27   0.001     .1405517    .5607709
            45  |   .3968404   .1079655     3.68   0.000     .1851765    .6085043
            46  |   .4131099   .1087577     3.80   0.000     .1998931    .6263268
            47  |   .4386773   .1091724     4.02   0.000     .2246474    .6527071
            48  |   .4480191   .1100024     4.07   0.000     .2323619    .6636763
            49  |   .5103162   .1105842     4.61   0.000     .2935184     .727114
            50  |   .5625749    .110366     5.10   0.000     .3462048    .7789449
                |
        age_cat |
             2  |   .4373229   .0289736    15.09   0.000     .3805208    .4941251
             3  |   .7935615   .0321684    24.67   0.000     .7304962    .8566268
             4  |   1.154176   .0372433    30.99   0.000     1.081162    1.227191
             5  |   1.458458   .0457153    31.90   0.000     1.368834    1.548082
             6  |   1.664388   .0553345    30.08   0.000     1.555906     1.77287
                |
          _cons |   2.682736   .0729961    36.75   0.000     2.539629    2.825844
----------------+----------------------------------------------------------------
        sigma_u |   1.054164
        sigma_e |  .76646988
            rho |  .65416905   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.2002                                         min =          1
     between = 0.1288                                         avg =       71.5
     overall = 0.1045                                         max =      3,984

                                                F(59,4545)        =      53.33
corr(u_i, Xb)  = 0.0642                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,546 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0536404   .0504152     1.06   0.287    -.0451979    .1524786
during_domestic |  -.0885664   .0193042    -4.59   0.000    -.1264121   -.0507208
 after_domestic |  -.1837198    .022504    -8.16   0.000    -.2278384   -.1396011
   during_expat |  -.0741784   .0186403    -3.98   0.000    -.1107224   -.0376343
    after_expat |  -.1487632   .0186083    -7.99   0.000    -.1852445   -.1122818
                |
       ind_year |
             2  |   .1463792   .0568624     2.57   0.010     .0349013    .2578572
             3  |   .6660143   .0683031     9.75   0.000      .532107    .7999215
             4  |   .7975626   .0748978    10.65   0.000     .6507266    .9443986
             5  |   .9728177   .0803684    12.10   0.000     .8152565    1.130379
             6  |   1.129452   .0850649    13.28   0.000     .9626835    1.296221
             7  |   1.335057   .0894773    14.92   0.000     1.159638    1.510476
             8  |   1.505657   .0936482    16.08   0.000     1.322061    1.689253
             9  |   1.630058   .0972156    16.77   0.000     1.439468    1.820648
            10  |   1.712054   .0998627    17.14   0.000     1.516275    1.907834
            11  |   1.754001   .1022939    17.15   0.000     1.553455    1.954547
            12  |   1.764126   .1053926    16.74   0.000     1.557505    1.970746
            13  |   1.803421   .1066609    16.91   0.000     1.594314    2.012528
            14  |   1.850236   .1076421    17.19   0.000     1.639205    2.061266
            15  |   1.835643   .1094804    16.77   0.000     1.621008    2.050278
            16  |   1.861705   .1114482    16.70   0.000     1.643212    2.080198
            17  |   1.882892   .1125057    16.74   0.000     1.662326    2.103458
            18  |   1.818094   .1153514    15.76   0.000     1.591949    2.044239
            19  |   1.740668   .1166723    14.92   0.000     1.511933    1.969402
            20  |   1.686538   .1192612    14.14   0.000     1.452728    1.920348
            21  |   1.655375   .1205366    13.73   0.000     1.419065    1.891686
            22  |   1.615014   .1242309    13.00   0.000     1.371461    1.858567
            23  |    1.62893   .1260817    12.92   0.000     1.381749    1.876112
            24  |   .9952516   .1371389     7.26   0.000     .7263926    1.264111
            25  |   1.087998   .1471548     7.39   0.000     .7995033    1.376493
            26  |   1.477931   .1391415    10.62   0.000     1.205146    1.750716
            27  |    1.44327   .1332738    10.83   0.000     1.181988    1.704551
            28  |   1.571183   .1282808    12.25   0.000      1.31969    1.822675
            29  |   1.643093   .1280028    12.84   0.000     1.392145    1.894041
            30  |   1.749746   .1277425    13.70   0.000     1.499309    2.000184
            31  |   1.852701   .1286675    14.40   0.000     1.600451    2.104952
            32  |   2.030137    .129093    15.73   0.000     1.777052    2.283222
            33  |   2.161845   .1295701    16.68   0.000     1.907825    2.415865
            34  |   2.265054   .1304751    17.36   0.000      2.00926    2.520849
            35  |   2.331826   .1322036    17.64   0.000     2.072643     2.59101
            36  |   2.316967   .1343195    17.25   0.000     2.053636    2.580299
            37  |   2.346072   .1338993    17.52   0.000     2.083565     2.60858
            38  |   2.367161   .1364424    17.35   0.000     2.099668    2.634655
            39  |   2.422204   .1376929    17.59   0.000     2.152259    2.692149
            40  |   2.443842   .1385561    17.64   0.000     2.172205    2.715479
            41  |   2.472944   .1401037    17.65   0.000     2.198273    2.747616
            42  |   2.537697   .1412717    17.96   0.000     2.260736    2.814658
            43  |   2.496994   .1417629    17.61   0.000      2.21907    2.774919
            44  |   2.435853   .1432509    17.00   0.000     2.155011    2.716694
            45  |   2.547395   .1430707    17.81   0.000     2.266907    2.827883
            46  |   2.548357   .1445207    17.63   0.000     2.265026    2.831687
            47  |   2.623399   .1457159    18.00   0.000     2.337725    2.909073
            48  |   2.701979   .1462546    18.47   0.000     2.415249    2.988709
            49  |   2.596579   .1481941    17.52   0.000     2.306046    2.887111
            50  |    2.67652   .1523267    17.57   0.000     2.377885    2.975154
                |
        age_cat |
             2  |   .4599438   .0468389     9.82   0.000     .3681167    .5517709
             3  |   .7948187   .0504709    15.75   0.000     .6958712    .8937663
             4  |   1.084958   .0561949    19.31   0.000     .9747891    1.195128
             5  |   1.287434   .0670608    19.20   0.000     1.155962    1.418905
             6  |   1.380727   .0795528    17.36   0.000     1.224765     1.53669
                |
          _cons |    8.06709   .1046823    77.06   0.000     7.861862    8.272318
----------------+----------------------------------------------------------------
        sigma_u |  1.9500005
        sigma_e |   1.077729
            rho |  .76601544   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2001746264274185

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.2002                                         min =          1
     between = 0.1288                                         avg =       71.5
     overall = 0.1045                                         max =      3,984

                                                F(59,4545)        =      53.33
corr(u_i, Xb)  = 0.0642                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,546 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0536404   .0504152     1.06   0.287    -.0451979    .1524786
during_domestic |  -.0885664   .0193042    -4.59   0.000    -.1264121   -.0507208
 after_domestic |  -.1837198    .022504    -8.16   0.000    -.2278384   -.1396011
   during_expat |  -.0741784   .0186403    -3.98   0.000    -.1107224   -.0376343
    after_expat |  -.1487632   .0186083    -7.99   0.000    -.1852445   -.1122818
                |
       ind_year |
             2  |   .1463792   .0568624     2.57   0.010     .0349013    .2578572
             3  |   .6660143   .0683031     9.75   0.000      .532107    .7999215
             4  |   .7975626   .0748978    10.65   0.000     .6507266    .9443986
             5  |   .9728177   .0803684    12.10   0.000     .8152565    1.130379
             6  |   1.129452   .0850649    13.28   0.000     .9626835    1.296221
             7  |   1.335057   .0894773    14.92   0.000     1.159638    1.510476
             8  |   1.505657   .0936482    16.08   0.000     1.322061    1.689253
             9  |   1.630058   .0972156    16.77   0.000     1.439468    1.820648
            10  |   1.712054   .0998627    17.14   0.000     1.516275    1.907834
            11  |   1.754001   .1022939    17.15   0.000     1.553455    1.954547
            12  |   1.764126   .1053926    16.74   0.000     1.557505    1.970746
            13  |   1.803421   .1066609    16.91   0.000     1.594314    2.012528
            14  |   1.850236   .1076421    17.19   0.000     1.639205    2.061266
            15  |   1.835643   .1094804    16.77   0.000     1.621008    2.050278
            16  |   1.861705   .1114482    16.70   0.000     1.643212    2.080198
            17  |   1.882892   .1125057    16.74   0.000     1.662326    2.103458
            18  |   1.818094   .1153514    15.76   0.000     1.591949    2.044239
            19  |   1.740668   .1166723    14.92   0.000     1.511933    1.969402
            20  |   1.686538   .1192612    14.14   0.000     1.452728    1.920348
            21  |   1.655375   .1205366    13.73   0.000     1.419065    1.891686
            22  |   1.615014   .1242309    13.00   0.000     1.371461    1.858567
            23  |    1.62893   .1260817    12.92   0.000     1.381749    1.876112
            24  |   .9952516   .1371389     7.26   0.000     .7263926    1.264111
            25  |   1.087998   .1471548     7.39   0.000     .7995033    1.376493
            26  |   1.477931   .1391415    10.62   0.000     1.205146    1.750716
            27  |    1.44327   .1332738    10.83   0.000     1.181988    1.704551
            28  |   1.571183   .1282808    12.25   0.000      1.31969    1.822675
            29  |   1.643093   .1280028    12.84   0.000     1.392145    1.894041
            30  |   1.749746   .1277425    13.70   0.000     1.499309    2.000184
            31  |   1.852701   .1286675    14.40   0.000     1.600451    2.104952
            32  |   2.030137    .129093    15.73   0.000     1.777052    2.283222
            33  |   2.161845   .1295701    16.68   0.000     1.907825    2.415865
            34  |   2.265054   .1304751    17.36   0.000      2.00926    2.520849
            35  |   2.331826   .1322036    17.64   0.000     2.072643     2.59101
            36  |   2.316967   .1343195    17.25   0.000     2.053636    2.580299
            37  |   2.346072   .1338993    17.52   0.000     2.083565     2.60858
            38  |   2.367161   .1364424    17.35   0.000     2.099668    2.634655
            39  |   2.422204   .1376929    17.59   0.000     2.152259    2.692149
            40  |   2.443842   .1385561    17.64   0.000     2.172205    2.715479
            41  |   2.472944   .1401037    17.65   0.000     2.198273    2.747616
            42  |   2.537697   .1412717    17.96   0.000     2.260736    2.814658
            43  |   2.496994   .1417629    17.61   0.000      2.21907    2.774919
            44  |   2.435853   .1432509    17.00   0.000     2.155011    2.716694
            45  |   2.547395   .1430707    17.81   0.000     2.266907    2.827883
            46  |   2.548357   .1445207    17.63   0.000     2.265026    2.831687
            47  |   2.623399   .1457159    18.00   0.000     2.337725    2.909073
            48  |   2.701979   .1462546    18.47   0.000     2.415249    2.988709
            49  |   2.596579   .1481941    17.52   0.000     2.306046    2.887111
            50  |    2.67652   .1523267    17.57   0.000     2.377885    2.975154
                |
        age_cat |
             2  |   .4599438   .0468389     9.82   0.000     .3681167    .5517709
             3  |   .7948187   .0504709    15.75   0.000     .6958712    .8937663
             4  |   1.084958   .0561949    19.31   0.000     .9747891    1.195128
             5  |   1.287434   .0670608    19.20   0.000     1.155962    1.418905
             6  |   1.380727   .0795528    17.36   0.000     1.224765     1.53669
                |
          _cons |    8.06709   .1046823    77.06   0.000     7.861862    8.272318
----------------+----------------------------------------------------------------
        sigma_u |  1.9500005
        sigma_e |   1.077729
            rho |  .76601544   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.3846                                         min =          1
     between = 0.1070                                         avg =       75.8
     overall = 0.1405                                         max =      4,150

                                                F(59,4628)        =     128.92
corr(u_i, Xb)  = 0.0009                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .065228   .0373337     1.75   0.081    -.0079639    .1384198
during_domestic |  -.1162672    .016053    -7.24   0.000    -.1477387   -.0847957
 after_domestic |  -.2072967   .0188591   -10.99   0.000    -.2442694   -.1703239
   during_expat |  -.0236813    .014795    -1.60   0.110    -.0526865     .005324
    after_expat |  -.0415963   .0156803    -2.65   0.008    -.0723372   -.0108554
                |
       ind_year |
             2  |    .073335    .044214     1.66   0.097    -.0133456    .1600156
             3  |   .2302628   .0504652     4.56   0.000     .1313269    .3291987
             4  |   .4035348   .0557537     7.24   0.000      .294231    .5128386
             5  |    .570955    .060442     9.45   0.000     .4524599    .6894501
             6  |   .7107624   .0644932    11.02   0.000     .5843249    .8371999
             7  |    .852241   .0671382    12.69   0.000     .7206182    .9838638
             8  |   .9352308   .0712881    13.12   0.000     .7954722    1.074989
             9  |   1.051923   .0732429    14.36   0.000     .9083322    1.195514
            10  |   1.142024   .0750461    15.22   0.000     .9948975     1.28915
            11  |   1.166176   .0776372    15.02   0.000      1.01397    1.318381
            12  |   1.229555   .0795726    15.45   0.000     1.073554    1.385555
            13  |   1.276094   .0815462    15.65   0.000     1.116225    1.435964
            14  |   1.367315   .0824141    16.59   0.000     1.205744    1.528886
            15  |   1.441562   .0841019    17.14   0.000     1.276682    1.606441
            16  |   1.483301   .0861865    17.21   0.000     1.314335    1.652268
            17  |   1.527901   .0873529    17.49   0.000     1.356647    1.699154
            18  |   1.404424   .0895858    15.68   0.000     1.228793    1.580054
            19  |   1.431454   .0908622    15.75   0.000     1.253321    1.609587
            20  |   1.454252   .0913603    15.92   0.000     1.275143    1.633362
            21  |   1.375849   .0929693    14.80   0.000     1.193585    1.558113
            22  |   1.407449    .095384    14.76   0.000     1.220451    1.594447
            23  |   1.453029    .097822    14.85   0.000     1.261251    1.644807
            24  |   1.492619   .0981685    15.20   0.000     1.300162    1.685076
            25  |   1.499081   .1002975    14.95   0.000      1.30245    1.695712
            26  |   .5633144   .1104841     5.10   0.000     .3467129    .7799159
            27  |   .5136479   .1056139     4.86   0.000     .3065944    .7207014
            28  |   .6851968   .1030996     6.65   0.000     .4830725    .8873211
            29  |   .8943474   .1002356     8.92   0.000     .6978378    1.090857
            30  |   1.044576   .0990791    10.54   0.000     .8503341    1.238819
            31  |   1.221988   .0996275    12.27   0.000      1.02667    1.417305
            32  |   1.364146   .0998791    13.66   0.000     1.168335    1.559956
            33  |   1.436394   .1010519    14.21   0.000     1.238284    1.634503
            34  |   1.592404   .1019456    15.62   0.000     1.392542    1.792266
            35  |    1.63679   .1026515    15.95   0.000     1.435544    1.838036
            36  |   1.628428   .1039002    15.67   0.000     1.424734    1.832122
            37  |   1.697742   .1040951    16.31   0.000     1.493666    1.901818
            38  |   1.716914   .1061009    16.18   0.000     1.508906    1.924923
            39  |   1.809838   .1069977    16.91   0.000     1.600071    2.019604
            40  |   1.929619   .1084525    17.79   0.000        1.717    2.142238
            41  |   1.999847   .1087924    18.38   0.000     1.786562    2.213132
            42  |   2.056129   .1102908    18.64   0.000     1.839906    2.272351
            43  |   1.899294    .111438    17.04   0.000     1.680822    2.117765
            44  |   1.972155   .1132272    17.42   0.000     1.750175    2.194134
            45  |   2.094415   .1142904    18.33   0.000     1.870352    2.318479
            46  |   2.126698   .1156428    18.39   0.000     1.899983    2.353413
            47  |   2.205386   .1155897    19.08   0.000     1.978775    2.431996
            48  |   2.246989   .1180872    19.03   0.000     2.015481    2.478496
            49  |   2.308797   .1176181    19.63   0.000      2.07821    2.539385
            50  |   2.388621   .1176186    20.31   0.000     2.158033     2.61921
                |
        age_cat |
             2  |   1.160602   .0454235    25.55   0.000      1.07155    1.249654
             3  |   1.664951   .0468035    35.57   0.000     1.573194    1.756708
             4  |   2.071828   .0507086    40.86   0.000     1.972415    2.171241
             5  |   2.373908    .058203    40.79   0.000     2.259803    2.488014
             6  |   2.563737   .0676758    37.88   0.000      2.43106    2.696414
                |
          _cons |   10.15583   .0831191   122.18   0.000     9.992876    10.31878
----------------+----------------------------------------------------------------
        sigma_u |   1.600162
        sigma_e |  .92343544
            rho |  .75016988   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3845535652757618

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.3846                                         min =          1
     between = 0.1070                                         avg =       75.8
     overall = 0.1405                                         max =      4,150

                                                F(59,4628)        =     128.92
corr(u_i, Xb)  = 0.0009                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .065228   .0373337     1.75   0.081    -.0079639    .1384198
during_domestic |  -.1162672    .016053    -7.24   0.000    -.1477387   -.0847957
 after_domestic |  -.2072967   .0188591   -10.99   0.000    -.2442694   -.1703239
   during_expat |  -.0236813    .014795    -1.60   0.110    -.0526865     .005324
    after_expat |  -.0415963   .0156803    -2.65   0.008    -.0723372   -.0108554
                |
       ind_year |
             2  |    .073335    .044214     1.66   0.097    -.0133456    .1600156
             3  |   .2302628   .0504652     4.56   0.000     .1313269    .3291987
             4  |   .4035348   .0557537     7.24   0.000      .294231    .5128386
             5  |    .570955    .060442     9.45   0.000     .4524599    .6894501
             6  |   .7107624   .0644932    11.02   0.000     .5843249    .8371999
             7  |    .852241   .0671382    12.69   0.000     .7206182    .9838638
             8  |   .9352308   .0712881    13.12   0.000     .7954722    1.074989
             9  |   1.051923   .0732429    14.36   0.000     .9083322    1.195514
            10  |   1.142024   .0750461    15.22   0.000     .9948975     1.28915
            11  |   1.166176   .0776372    15.02   0.000      1.01397    1.318381
            12  |   1.229555   .0795726    15.45   0.000     1.073554    1.385555
            13  |   1.276094   .0815462    15.65   0.000     1.116225    1.435964
            14  |   1.367315   .0824141    16.59   0.000     1.205744    1.528886
            15  |   1.441562   .0841019    17.14   0.000     1.276682    1.606441
            16  |   1.483301   .0861865    17.21   0.000     1.314335    1.652268
            17  |   1.527901   .0873529    17.49   0.000     1.356647    1.699154
            18  |   1.404424   .0895858    15.68   0.000     1.228793    1.580054
            19  |   1.431454   .0908622    15.75   0.000     1.253321    1.609587
            20  |   1.454252   .0913603    15.92   0.000     1.275143    1.633362
            21  |   1.375849   .0929693    14.80   0.000     1.193585    1.558113
            22  |   1.407449    .095384    14.76   0.000     1.220451    1.594447
            23  |   1.453029    .097822    14.85   0.000     1.261251    1.644807
            24  |   1.492619   .0981685    15.20   0.000     1.300162    1.685076
            25  |   1.499081   .1002975    14.95   0.000      1.30245    1.695712
            26  |   .5633144   .1104841     5.10   0.000     .3467129    .7799159
            27  |   .5136479   .1056139     4.86   0.000     .3065944    .7207014
            28  |   .6851968   .1030996     6.65   0.000     .4830725    .8873211
            29  |   .8943474   .1002356     8.92   0.000     .6978378    1.090857
            30  |   1.044576   .0990791    10.54   0.000     .8503341    1.238819
            31  |   1.221988   .0996275    12.27   0.000      1.02667    1.417305
            32  |   1.364146   .0998791    13.66   0.000     1.168335    1.559956
            33  |   1.436394   .1010519    14.21   0.000     1.238284    1.634503
            34  |   1.592404   .1019456    15.62   0.000     1.392542    1.792266
            35  |    1.63679   .1026515    15.95   0.000     1.435544    1.838036
            36  |   1.628428   .1039002    15.67   0.000     1.424734    1.832122
            37  |   1.697742   .1040951    16.31   0.000     1.493666    1.901818
            38  |   1.716914   .1061009    16.18   0.000     1.508906    1.924923
            39  |   1.809838   .1069977    16.91   0.000     1.600071    2.019604
            40  |   1.929619   .1084525    17.79   0.000        1.717    2.142238
            41  |   1.999847   .1087924    18.38   0.000     1.786562    2.213132
            42  |   2.056129   .1102908    18.64   0.000     1.839906    2.272351
            43  |   1.899294    .111438    17.04   0.000     1.680822    2.117765
            44  |   1.972155   .1132272    17.42   0.000     1.750175    2.194134
            45  |   2.094415   .1142904    18.33   0.000     1.870352    2.318479
            46  |   2.126698   .1156428    18.39   0.000     1.899983    2.353413
            47  |   2.205386   .1155897    19.08   0.000     1.978775    2.431996
            48  |   2.246989   .1180872    19.03   0.000     2.015481    2.478496
            49  |   2.308797   .1176181    19.63   0.000      2.07821    2.539385
            50  |   2.388621   .1176186    20.31   0.000     2.158033     2.61921
                |
        age_cat |
             2  |   1.160602   .0454235    25.55   0.000      1.07155    1.249654
             3  |   1.664951   .0468035    35.57   0.000     1.573194    1.756708
             4  |   2.071828   .0507086    40.86   0.000     1.972415    2.171241
             5  |   2.373908    .058203    40.79   0.000     2.259803    2.488014
             6  |   2.563737   .0676758    37.88   0.000      2.43106    2.696414
                |
          _cons |   10.15583   .0831191   122.18   0.000     9.992876    10.31878
----------------+----------------------------------------------------------------
        sigma_u |   1.600162
        sigma_e |  .92343544
            rho |  .75016988   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.1421                                         min =          1
     between = 0.0359                                         avg =       71.5
     overall = 0.0757                                         max =      3,984

                                                F(59,4545)        =      37.63
corr(u_i, Xb)  = 0.0096                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,546 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0894374   .0414681     2.16   0.031     .0081398     .170735
during_domestic |  -.0009204   .0153899    -0.06   0.952    -.0310921    .0292513
 after_domestic |   .0095647    .016904     0.57   0.572    -.0235753    .0427046
   during_expat |  -.0383156   .0152083    -2.52   0.012    -.0681312   -.0085001
    after_expat |  -.0928803   .0146125    -6.36   0.000     -.121528   -.0642326
                |
       ind_year |
             2  |   .1915977   .0492498     3.89   0.000     .0950442    .2881513
             3  |   .7358611   .0586337    12.55   0.000     .6209105    .8508117
             4  |   .8764402    .063026    13.91   0.000     .7528786    1.000002
             5  |   1.098419   .0664841    16.52   0.000     .9680775     1.22876
             6  |   1.277688   .0695117    18.38   0.000     1.141411    1.413965
             7  |   1.493864   .0727923    20.52   0.000     1.351156    1.636572
             8  |   1.657602   .0753039    22.01   0.000     1.509969    1.805234
             9  |   1.782765   .0772299    23.08   0.000     1.631357    1.934173
            10  |   1.873738   .0790475    23.70   0.000     1.718767     2.02871
            11  |   1.962924   .0807298    24.31   0.000     1.804654    2.121194
            12  |   1.972577   .0824992    23.91   0.000     1.810839    2.134316
            13  |   2.023847   .0846805    23.90   0.000     1.857832    2.189862
            14  |    2.01767   .0848639    23.78   0.000     1.851295    2.184044
            15  |    1.95933   .0862979    22.70   0.000     1.790144    2.128515
            16  |   1.929754   .0881285    21.90   0.000     1.756979    2.102529
            17  |   1.932825   .0891764    21.67   0.000     1.757996    2.107654
            18  |   1.922068   .0910933    21.10   0.000     1.743481    2.100656
            19  |    1.86497   .0918317    20.31   0.000     1.684935    2.045004
            20  |   1.821052   .0937353    19.43   0.000     1.637285    2.004818
            21  |   1.823423   .0956413    19.07   0.000      1.63592    2.010926
            22  |    1.81395   .0979968    18.51   0.000     1.621828    2.006071
            23  |   1.813249    .099996    18.13   0.000     1.617208    2.009289
            24  |   1.029897   .1124161     9.16   0.000      .809507    1.250287
            25  |   1.080512   .1235438     8.75   0.000     .8383056    1.322718
            26  |   .4051071   .1034536     3.92   0.000     .2022878    .6079263
            27  |   .5702083   .0971095     5.87   0.000     .3798265    .7605901
            28  |   .7754536   .0939863     8.25   0.000     .5911948    .9597125
            29  |   .9291682    .094868     9.79   0.000     .7431807    1.115156
            30  |   1.060254   .0948299    11.18   0.000     .8743413    1.246167
            31  |    1.18509   .0953155    12.43   0.000     .9982252    1.371955
            32  |    1.39334   .0952112    14.63   0.000      1.20668        1.58
            33  |    1.56328   .0963815    16.22   0.000     1.374325    1.752234
            34  |   1.676374   .0971763    17.25   0.000     1.485861    1.866887
            35  |    1.77451   .0983475    18.04   0.000     1.581702    1.967319
            36  |   1.830805   .0996592    18.37   0.000     1.635424    2.026185
            37  |   1.892613   .1000677    18.91   0.000     1.696431    2.088794
            38  |   1.938909   .1017985    19.05   0.000     1.739334    2.138483
            39  |   1.989768   .1027576    19.36   0.000     1.788313    2.191223
            40  |   2.030153   .1032412    19.66   0.000      1.82775    2.232556
            41  |   2.016031   .1037166    19.44   0.000     1.812696    2.219366
            42  |   2.069032   .1040845    19.88   0.000     1.864976    2.273089
            43  |   2.157391   .1052916    20.49   0.000     1.950968    2.363814
            44  |   2.105337   .1060493    19.85   0.000     1.897429    2.313245
            45  |   2.167751   .1060375    20.44   0.000     1.959866    2.375636
            46  |   2.160844   .1063536    20.32   0.000      1.95234    2.369349
            47  |   2.198822   .1078316    20.39   0.000      1.98742    2.410225
            48  |   2.251663   .1079539    20.86   0.000     2.040021    2.463305
            49  |   2.024346   .1092295    18.53   0.000     1.810203    2.238489
            50  |   2.087679   .1125031    18.56   0.000     1.867118     2.30824
                |
        age_cat |
             2  |   .0524204   .0428307     1.22   0.221    -.0315485    .1363894
             3  |   .0322574   .0453251     0.71   0.477    -.0566018    .1211166
             4  |  -.0192652   .0485803    -0.40   0.692    -.1145061    .0759758
             5  |  -.1142728   .0562173    -2.03   0.042    -.2244861   -.0040596
             6  |  -.2157051   .0656447    -3.29   0.001    -.3444006   -.0870096
                |
          _cons |   5.286071    .083624    63.21   0.000     5.122127    5.450014
----------------+----------------------------------------------------------------
        sigma_u |  1.6249001
        sigma_e |  .90891804
            rho |  .76167658   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1420965136224303

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.1421                                         min =          1
     between = 0.0359                                         avg =       71.5
     overall = 0.0757                                         max =      3,984

                                                F(59,4545)        =      37.63
corr(u_i, Xb)  = 0.0096                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,546 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0894374   .0414681     2.16   0.031     .0081398     .170735
during_domestic |  -.0009204   .0153899    -0.06   0.952    -.0310921    .0292513
 after_domestic |   .0095647    .016904     0.57   0.572    -.0235753    .0427046
   during_expat |  -.0383156   .0152083    -2.52   0.012    -.0681312   -.0085001
    after_expat |  -.0928803   .0146125    -6.36   0.000     -.121528   -.0642326
                |
       ind_year |
             2  |   .1915977   .0492498     3.89   0.000     .0950442    .2881513
             3  |   .7358611   .0586337    12.55   0.000     .6209105    .8508117
             4  |   .8764402    .063026    13.91   0.000     .7528786    1.000002
             5  |   1.098419   .0664841    16.52   0.000     .9680775     1.22876
             6  |   1.277688   .0695117    18.38   0.000     1.141411    1.413965
             7  |   1.493864   .0727923    20.52   0.000     1.351156    1.636572
             8  |   1.657602   .0753039    22.01   0.000     1.509969    1.805234
             9  |   1.782765   .0772299    23.08   0.000     1.631357    1.934173
            10  |   1.873738   .0790475    23.70   0.000     1.718767     2.02871
            11  |   1.962924   .0807298    24.31   0.000     1.804654    2.121194
            12  |   1.972577   .0824992    23.91   0.000     1.810839    2.134316
            13  |   2.023847   .0846805    23.90   0.000     1.857832    2.189862
            14  |    2.01767   .0848639    23.78   0.000     1.851295    2.184044
            15  |    1.95933   .0862979    22.70   0.000     1.790144    2.128515
            16  |   1.929754   .0881285    21.90   0.000     1.756979    2.102529
            17  |   1.932825   .0891764    21.67   0.000     1.757996    2.107654
            18  |   1.922068   .0910933    21.10   0.000     1.743481    2.100656
            19  |    1.86497   .0918317    20.31   0.000     1.684935    2.045004
            20  |   1.821052   .0937353    19.43   0.000     1.637285    2.004818
            21  |   1.823423   .0956413    19.07   0.000      1.63592    2.010926
            22  |    1.81395   .0979968    18.51   0.000     1.621828    2.006071
            23  |   1.813249    .099996    18.13   0.000     1.617208    2.009289
            24  |   1.029897   .1124161     9.16   0.000      .809507    1.250287
            25  |   1.080512   .1235438     8.75   0.000     .8383056    1.322718
            26  |   .4051071   .1034536     3.92   0.000     .2022878    .6079263
            27  |   .5702083   .0971095     5.87   0.000     .3798265    .7605901
            28  |   .7754536   .0939863     8.25   0.000     .5911948    .9597125
            29  |   .9291682    .094868     9.79   0.000     .7431807    1.115156
            30  |   1.060254   .0948299    11.18   0.000     .8743413    1.246167
            31  |    1.18509   .0953155    12.43   0.000     .9982252    1.371955
            32  |    1.39334   .0952112    14.63   0.000      1.20668        1.58
            33  |    1.56328   .0963815    16.22   0.000     1.374325    1.752234
            34  |   1.676374   .0971763    17.25   0.000     1.485861    1.866887
            35  |    1.77451   .0983475    18.04   0.000     1.581702    1.967319
            36  |   1.830805   .0996592    18.37   0.000     1.635424    2.026185
            37  |   1.892613   .1000677    18.91   0.000     1.696431    2.088794
            38  |   1.938909   .1017985    19.05   0.000     1.739334    2.138483
            39  |   1.989768   .1027576    19.36   0.000     1.788313    2.191223
            40  |   2.030153   .1032412    19.66   0.000      1.82775    2.232556
            41  |   2.016031   .1037166    19.44   0.000     1.812696    2.219366
            42  |   2.069032   .1040845    19.88   0.000     1.864976    2.273089
            43  |   2.157391   .1052916    20.49   0.000     1.950968    2.363814
            44  |   2.105337   .1060493    19.85   0.000     1.897429    2.313245
            45  |   2.167751   .1060375    20.44   0.000     1.959866    2.375636
            46  |   2.160844   .1063536    20.32   0.000      1.95234    2.369349
            47  |   2.198822   .1078316    20.39   0.000      1.98742    2.410225
            48  |   2.251663   .1079539    20.86   0.000     2.040021    2.463305
            49  |   2.024346   .1092295    18.53   0.000     1.810203    2.238489
            50  |   2.087679   .1125031    18.56   0.000     1.867118     2.30824
                |
        age_cat |
             2  |   .0524204   .0428307     1.22   0.221    -.0315485    .1363894
             3  |   .0322574   .0453251     0.71   0.477    -.0566018    .1211166
             4  |  -.0192652   .0485803    -0.40   0.692    -.1145061    .0759758
             5  |  -.1142728   .0562173    -2.03   0.042    -.2244861   -.0040596
             6  |  -.2157051   .0656447    -3.29   0.001    -.3444006   -.0870096
                |
          _cons |   5.286071    .083624    63.21   0.000     5.122127    5.450014
----------------+----------------------------------------------------------------
        sigma_u |  1.6249001
        sigma_e |  .90891804
            rho |  .76167658   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.3989                                         min =          1
     between = 0.1926                                         avg =       75.8
     overall = 0.2230                                         max =      4,150

                                                F(59,4628)        =     142.76
corr(u_i, Xb)  = 0.0457                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0869649   .0235866     3.69   0.000     .0407239    .1332059
during_domestic |  -.0275622   .0098947    -2.79   0.005    -.0469607   -.0081638
 after_domestic |  -.0023878   .0113244    -0.21   0.833    -.0245891    .0198136
   during_expat |   .0166418   .0093026     1.79   0.074    -.0015957    .0348792
    after_expat |   .0246842   .0098964     2.49   0.013     .0052825    .0440859
                |
       ind_year |
             2  |   .1255055   .0342707     3.66   0.000     .0583185    .1926925
             3  |   .2988491    .037792     7.91   0.000     .2247588    .3729394
             4  |   .4844888   .0405483    11.95   0.000     .4049947    .5639829
             5  |    .716589    .041315    17.34   0.000      .635592    .7975861
             6  |    .881964   .0441055    20.00   0.000     .7954962    .9684318
             7  |   1.032662   .0460443    22.43   0.000     .9423936    1.122931
             8  |   1.112452   .0478753    23.24   0.000     1.018594     1.20631
             9  |   1.236361   .0494338    25.01   0.000     1.139447    1.333275
            10  |   1.331566   .0507468    26.24   0.000     1.232078    1.431054
            11  |   1.407548   .0518563    27.14   0.000     1.305885    1.509211
            12  |   1.476092   .0529624    27.87   0.000     1.372261    1.579924
            13  |   1.530941    .054336    28.18   0.000     1.424417    1.637466
            14  |   1.580776   .0544877    29.01   0.000     1.473954    1.687597
            15  |   1.612925   .0550353    29.31   0.000     1.505029     1.72082
            16  |   1.609919   .0565517    28.47   0.000     1.499051    1.720788
            17  |   1.636563   .0575848    28.42   0.000     1.523669    1.749456
            18  |   1.566933   .0582982    26.88   0.000     1.452641    1.681226
            19  |   1.600917   .0593446    26.98   0.000     1.484574    1.717261
            20  |   1.640727    .060016    27.34   0.000     1.523067    1.758387
            21  |   1.625819    .060812    26.74   0.000     1.506599     1.74504
            22  |   1.680726   .0621953    27.02   0.000     1.558794    1.802659
            23  |   1.745508     .06345    27.51   0.000     1.621116      1.8699
            24  |   1.762517   .0640975    27.50   0.000     1.636856    1.888179
            25  |   1.745172   .0651861    26.77   0.000     1.617377    1.872968
            26  |  -.5686909   .0662818    -8.58   0.000    -.6986348    -.438747
            27  |  -.4303431   .0647852    -6.64   0.000    -.5573529   -.3033332
            28  |  -.1761771   .0630356    -2.79   0.005     -.299757   -.0525972
            29  |   .1116914   .0627594     1.78   0.075     -.011347    .2347298
            30  |   .2868257   .0616991     4.65   0.000      .165866    .4077854
            31  |   .4802463   .0617262     7.78   0.000     .3592335    .6012591
            32  |   .6543748   .0625589    10.46   0.000     .5317295      .77702
            33  |    .771248   .0623774    12.36   0.000     .6489587    .8935374
            34  |   .9313636   .0632342    14.73   0.000     .8073943    1.055333
            35  |   1.016116   .0633896    16.03   0.000     .8918421     1.14039
            36  |    1.07754   .0638343    16.88   0.000     .9523943    1.202686
            37  |   1.179868   .0645088    18.29   0.000       1.0534    1.306336
            38  |   1.237612    .065383    18.93   0.000      1.10943    1.365794
            39  |   1.331569   .0654654    20.34   0.000     1.203226    1.459912
            40  |   1.463293   .0660779    22.14   0.000     1.333749    1.592838
            41  |   1.505435   .0667336    22.56   0.000     1.374606    1.636265
            42  |   1.555141   .0668279    23.27   0.000     1.424126    1.686155
            43  |   1.532901   .0675351    22.70   0.000       1.4005    1.665302
            44  |   1.621494    .068274    23.75   0.000     1.487644    1.755343
            45  |   1.697575   .0684926    24.78   0.000     1.563297    1.831853
            46  |   1.713588    .068667    24.96   0.000     1.578968    1.848208
            47  |   1.766708    .068299    25.87   0.000      1.63281    1.900607
            48  |   1.798969   .0691917    26.00   0.000     1.663321    1.934618
            49  |   1.798481   .0698194    25.76   0.000     1.661602     1.93536
            50  |   1.826046   .0696052    26.23   0.000     1.689587    1.962506
                |
        age_cat |
             2  |   .7232791   .0363094    19.92   0.000     .6520954    .7944628
             3  |   .8713893   .0370147    23.54   0.000     .7988228    .9439558
             4  |   .9176515   .0386712    23.73   0.000     .8418375    .9934655
             5  |     .91545   .0425279    21.53   0.000     .8320751    .9988249
             6  |   .8993484   .0479563    18.75   0.000     .8053311    .9933656
                |
          _cons |   7.473093   .0588262   127.04   0.000     7.357765     7.58842
----------------+----------------------------------------------------------------
        sigma_u |  1.1668615
        sigma_e |  .64016715
            rho |  .76864703   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3989311686734484

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.3989                                         min =          1
     between = 0.1926                                         avg =       75.8
     overall = 0.2230                                         max =      4,150

                                                F(59,4628)        =     142.76
corr(u_i, Xb)  = 0.0457                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0869649   .0235866     3.69   0.000     .0407239    .1332059
during_domestic |  -.0275622   .0098947    -2.79   0.005    -.0469607   -.0081638
 after_domestic |  -.0023878   .0113244    -0.21   0.833    -.0245891    .0198136
   during_expat |   .0166418   .0093026     1.79   0.074    -.0015957    .0348792
    after_expat |   .0246842   .0098964     2.49   0.013     .0052825    .0440859
                |
       ind_year |
             2  |   .1255055   .0342707     3.66   0.000     .0583185    .1926925
             3  |   .2988491    .037792     7.91   0.000     .2247588    .3729394
             4  |   .4844888   .0405483    11.95   0.000     .4049947    .5639829
             5  |    .716589    .041315    17.34   0.000      .635592    .7975861
             6  |    .881964   .0441055    20.00   0.000     .7954962    .9684318
             7  |   1.032662   .0460443    22.43   0.000     .9423936    1.122931
             8  |   1.112452   .0478753    23.24   0.000     1.018594     1.20631
             9  |   1.236361   .0494338    25.01   0.000     1.139447    1.333275
            10  |   1.331566   .0507468    26.24   0.000     1.232078    1.431054
            11  |   1.407548   .0518563    27.14   0.000     1.305885    1.509211
            12  |   1.476092   .0529624    27.87   0.000     1.372261    1.579924
            13  |   1.530941    .054336    28.18   0.000     1.424417    1.637466
            14  |   1.580776   .0544877    29.01   0.000     1.473954    1.687597
            15  |   1.612925   .0550353    29.31   0.000     1.505029     1.72082
            16  |   1.609919   .0565517    28.47   0.000     1.499051    1.720788
            17  |   1.636563   .0575848    28.42   0.000     1.523669    1.749456
            18  |   1.566933   .0582982    26.88   0.000     1.452641    1.681226
            19  |   1.600917   .0593446    26.98   0.000     1.484574    1.717261
            20  |   1.640727    .060016    27.34   0.000     1.523067    1.758387
            21  |   1.625819    .060812    26.74   0.000     1.506599     1.74504
            22  |   1.680726   .0621953    27.02   0.000     1.558794    1.802659
            23  |   1.745508     .06345    27.51   0.000     1.621116      1.8699
            24  |   1.762517   .0640975    27.50   0.000     1.636856    1.888179
            25  |   1.745172   .0651861    26.77   0.000     1.617377    1.872968
            26  |  -.5686909   .0662818    -8.58   0.000    -.6986348    -.438747
            27  |  -.4303431   .0647852    -6.64   0.000    -.5573529   -.3033332
            28  |  -.1761771   .0630356    -2.79   0.005     -.299757   -.0525972
            29  |   .1116914   .0627594     1.78   0.075     -.011347    .2347298
            30  |   .2868257   .0616991     4.65   0.000      .165866    .4077854
            31  |   .4802463   .0617262     7.78   0.000     .3592335    .6012591
            32  |   .6543748   .0625589    10.46   0.000     .5317295      .77702
            33  |    .771248   .0623774    12.36   0.000     .6489587    .8935374
            34  |   .9313636   .0632342    14.73   0.000     .8073943    1.055333
            35  |   1.016116   .0633896    16.03   0.000     .8918421     1.14039
            36  |    1.07754   .0638343    16.88   0.000     .9523943    1.202686
            37  |   1.179868   .0645088    18.29   0.000       1.0534    1.306336
            38  |   1.237612    .065383    18.93   0.000      1.10943    1.365794
            39  |   1.331569   .0654654    20.34   0.000     1.203226    1.459912
            40  |   1.463293   .0660779    22.14   0.000     1.333749    1.592838
            41  |   1.505435   .0667336    22.56   0.000     1.374606    1.636265
            42  |   1.555141   .0668279    23.27   0.000     1.424126    1.686155
            43  |   1.532901   .0675351    22.70   0.000       1.4005    1.665302
            44  |   1.621494    .068274    23.75   0.000     1.487644    1.755343
            45  |   1.697575   .0684926    24.78   0.000     1.563297    1.831853
            46  |   1.713588    .068667    24.96   0.000     1.578968    1.848208
            47  |   1.766708    .068299    25.87   0.000      1.63281    1.900607
            48  |   1.798969   .0691917    26.00   0.000     1.663321    1.934618
            49  |   1.798481   .0698194    25.76   0.000     1.661602     1.93536
            50  |   1.826046   .0696052    26.23   0.000     1.689587    1.962506
                |
        age_cat |
             2  |   .7232791   .0363094    19.92   0.000     .6520954    .7944628
             3  |   .8713893   .0370147    23.54   0.000     .7988228    .9439558
             4  |   .9176515   .0386712    23.73   0.000     .8418375    .9934655
             5  |     .91545   .0425279    21.53   0.000     .8320751    .9988249
             6  |   .8993484   .0479563    18.75   0.000     .8053311    .9933656
                |
          _cons |   7.473093   .0588262   127.04   0.000     7.357765     7.58842
----------------+----------------------------------------------------------------
        sigma_u |  1.1668615
        sigma_e |  .64016715
            rho |  .76864703   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.0340                                         min =          1
     between = 0.1964                                         avg =       75.8
     overall = 0.0828                                         max =      4,150

                                                F(59,4628)        =      13.76
corr(u_i, Xb)  = 0.1820                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0277377   .0107098     2.59   0.010     .0067414     .048734
during_domestic |  -.0139267   .0043276    -3.22   0.001    -.0224108   -.0054425
 after_domestic |  -.0222059   .0050424    -4.40   0.000    -.0320915   -.0123203
   during_expat |   -.004819   .0040971    -1.18   0.240    -.0128513    .0032134
    after_expat |  -.0142862   .0039593    -3.61   0.000    -.0220483    -.006524
                |
       ind_year |
             2  |   .0054004   .0158016     0.34   0.733    -.0255783     .036379
             3  |  -.0282923   .0173691    -1.63   0.103    -.0623439    .0057594
             4  |  -.0445858   .0183952    -2.42   0.015    -.0806492   -.0085225
             5  |  -.0280013   .0187077    -1.50   0.135    -.0646774    .0086748
             6  |  -.0452741   .0194339    -2.33   0.020    -.0833737   -.0071745
             7  |  -.0320351   .0195781    -1.64   0.102    -.0704175    .0063473
             8  |  -.0443626   .0202551    -2.19   0.029    -.0840723   -.0046529
             9  |  -.0492691   .0207888    -2.37   0.018    -.0900251   -.0085131
            10  |  -.0390332   .0209745    -1.86   0.063    -.0801532    .0020869
            11  |  -.0490582   .0218082    -2.25   0.025    -.0918128   -.0063037
            12  |  -.0431473   .0219393    -1.97   0.049    -.0861588   -.0001358
            13  |  -.0297657   .0221251    -1.35   0.179    -.0731415    .0136101
            14  |  -.0042644   .0222946    -0.19   0.848    -.0479724    .0394435
            15  |   .0099997   .0225476     0.44   0.657    -.0342043    .0542037
            16  |   .0227134   .0229924     0.99   0.323    -.0223627    .0677895
            17  |   .0320341   .0233726     1.37   0.171    -.0137874    .0778556
            18  |   .0387035   .0236992     1.63   0.103    -.0077582    .0851653
            19  |   .0382912   .0238144     1.61   0.108    -.0083964    .0849787
            20  |   .0620339   .0241398     2.57   0.010     .0147084    .1093594
            21  |   .0701818   .0241527     2.91   0.004     .0228309    .1175326
            22  |   .0825917   .0247503     3.34   0.001     .0340693     .131114
            23  |    .069121   .0248226     2.78   0.005     .0204568    .1177852
            24  |   .0231269   .0250999     0.92   0.357    -.0260809    .0723347
            25  |  -.0049107   .0254634    -0.19   0.847    -.0548312    .0450098
            26  |   .1309381   .0266743     4.91   0.000     .0786439    .1832324
            27  |   .1056034   .0256032     4.12   0.000     .0554089    .1557978
            28  |    .119581   .0248829     4.81   0.000     .0707986    .1683633
            29  |   .1155251   .0246158     4.69   0.000     .0672665    .1637838
            30  |   .1197221   .0244009     4.91   0.000     .0718848    .1675594
            31  |   .1162317   .0243903     4.77   0.000     .0684151    .1640484
            32  |   .1009715   .0247535     4.08   0.000     .0524428    .1495003
            33  |   .1058938   .0243492     4.35   0.000     .0581577    .1536298
            34  |   .0930973   .0245397     3.79   0.000     .0449879    .1412068
            35  |   .0925417    .024686     3.75   0.000     .0441454     .140938
            36  |   .0862969    .024925     3.46   0.001      .037432    .1351618
            37  |   .0925276   .0249828     3.70   0.000     .0435494    .1415059
            38  |   .1048754   .0251871     4.16   0.000     .0554967    .1542541
            39  |   .1125874    .025243     4.46   0.000     .0630992    .1620757
            40  |   .0993251   .0254218     3.91   0.000     .0494863    .1491639
            41  |   .1104493   .0257119     4.30   0.000     .0600418    .1608568
            42  |   .1141151   .0260048     4.39   0.000     .0631333    .1650969
            43  |   .1190413   .0265343     4.49   0.000     .0670214    .1710612
            44  |    .114646   .0267274     4.29   0.000     .0622475    .1670444
            45  |   .1200964   .0266607     4.50   0.000     .0678287     .172364
            46  |   .1306336   .0270316     4.83   0.000     .0776387    .1836284
            47  |   .1296717   .0273409     4.74   0.000     .0760706    .1832729
            48  |   .1222408   .0275115     4.44   0.000     .0683051    .1761766
            49  |   .0056274   .0284597     0.20   0.843    -.0501673    .0614221
            50  |  -.0215635   .0287233    -0.75   0.453    -.0778749    .0347479
                |
        age_cat |
             2  |   .0767953   .0105042     7.31   0.000     .0562021    .0973886
             3  |   .1122001   .0111181    10.09   0.000     .0904034    .1339968
             4  |   .1591459   .0118422    13.44   0.000     .1359296    .1823623
             5  |   .1797873   .0135418    13.28   0.000      .153239    .2063356
             6  |   .1911836    .015861    12.05   0.000     .1600884    .2222787
                |
          _cons |   .4597216   .0216464    21.24   0.000     .4172843    .5021589
----------------+----------------------------------------------------------------
        sigma_u |  .35914389
        sigma_e |  .28644955
            rho |  .61119101   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0340286586284992

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.0340                                         min =          1
     between = 0.1964                                         avg =       75.8
     overall = 0.0828                                         max =      4,150

                                                F(59,4628)        =      13.76
corr(u_i, Xb)  = 0.1820                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0277377   .0107098     2.59   0.010     .0067414     .048734
during_domestic |  -.0139267   .0043276    -3.22   0.001    -.0224108   -.0054425
 after_domestic |  -.0222059   .0050424    -4.40   0.000    -.0320915   -.0123203
   during_expat |   -.004819   .0040971    -1.18   0.240    -.0128513    .0032134
    after_expat |  -.0142862   .0039593    -3.61   0.000    -.0220483    -.006524
                |
       ind_year |
             2  |   .0054004   .0158016     0.34   0.733    -.0255783     .036379
             3  |  -.0282923   .0173691    -1.63   0.103    -.0623439    .0057594
             4  |  -.0445858   .0183952    -2.42   0.015    -.0806492   -.0085225
             5  |  -.0280013   .0187077    -1.50   0.135    -.0646774    .0086748
             6  |  -.0452741   .0194339    -2.33   0.020    -.0833737   -.0071745
             7  |  -.0320351   .0195781    -1.64   0.102    -.0704175    .0063473
             8  |  -.0443626   .0202551    -2.19   0.029    -.0840723   -.0046529
             9  |  -.0492691   .0207888    -2.37   0.018    -.0900251   -.0085131
            10  |  -.0390332   .0209745    -1.86   0.063    -.0801532    .0020869
            11  |  -.0490582   .0218082    -2.25   0.025    -.0918128   -.0063037
            12  |  -.0431473   .0219393    -1.97   0.049    -.0861588   -.0001358
            13  |  -.0297657   .0221251    -1.35   0.179    -.0731415    .0136101
            14  |  -.0042644   .0222946    -0.19   0.848    -.0479724    .0394435
            15  |   .0099997   .0225476     0.44   0.657    -.0342043    .0542037
            16  |   .0227134   .0229924     0.99   0.323    -.0223627    .0677895
            17  |   .0320341   .0233726     1.37   0.171    -.0137874    .0778556
            18  |   .0387035   .0236992     1.63   0.103    -.0077582    .0851653
            19  |   .0382912   .0238144     1.61   0.108    -.0083964    .0849787
            20  |   .0620339   .0241398     2.57   0.010     .0147084    .1093594
            21  |   .0701818   .0241527     2.91   0.004     .0228309    .1175326
            22  |   .0825917   .0247503     3.34   0.001     .0340693     .131114
            23  |    .069121   .0248226     2.78   0.005     .0204568    .1177852
            24  |   .0231269   .0250999     0.92   0.357    -.0260809    .0723347
            25  |  -.0049107   .0254634    -0.19   0.847    -.0548312    .0450098
            26  |   .1309381   .0266743     4.91   0.000     .0786439    .1832324
            27  |   .1056034   .0256032     4.12   0.000     .0554089    .1557978
            28  |    .119581   .0248829     4.81   0.000     .0707986    .1683633
            29  |   .1155251   .0246158     4.69   0.000     .0672665    .1637838
            30  |   .1197221   .0244009     4.91   0.000     .0718848    .1675594
            31  |   .1162317   .0243903     4.77   0.000     .0684151    .1640484
            32  |   .1009715   .0247535     4.08   0.000     .0524428    .1495003
            33  |   .1058938   .0243492     4.35   0.000     .0581577    .1536298
            34  |   .0930973   .0245397     3.79   0.000     .0449879    .1412068
            35  |   .0925417    .024686     3.75   0.000     .0441454     .140938
            36  |   .0862969    .024925     3.46   0.001      .037432    .1351618
            37  |   .0925276   .0249828     3.70   0.000     .0435494    .1415059
            38  |   .1048754   .0251871     4.16   0.000     .0554967    .1542541
            39  |   .1125874    .025243     4.46   0.000     .0630992    .1620757
            40  |   .0993251   .0254218     3.91   0.000     .0494863    .1491639
            41  |   .1104493   .0257119     4.30   0.000     .0600418    .1608568
            42  |   .1141151   .0260048     4.39   0.000     .0631333    .1650969
            43  |   .1190413   .0265343     4.49   0.000     .0670214    .1710612
            44  |    .114646   .0267274     4.29   0.000     .0622475    .1670444
            45  |   .1200964   .0266607     4.50   0.000     .0678287     .172364
            46  |   .1306336   .0270316     4.83   0.000     .0776387    .1836284
            47  |   .1296717   .0273409     4.74   0.000     .0760706    .1832729
            48  |   .1222408   .0275115     4.44   0.000     .0683051    .1761766
            49  |   .0056274   .0284597     0.20   0.843    -.0501673    .0614221
            50  |  -.0215635   .0287233    -0.75   0.453    -.0778749    .0347479
                |
        age_cat |
             2  |   .0767953   .0105042     7.31   0.000     .0562021    .0973886
             3  |   .1122001   .0111181    10.09   0.000     .0904034    .1339968
             4  |   .1591459   .0118422    13.44   0.000     .1359296    .1823623
             5  |   .1797873   .0135418    13.28   0.000      .153239    .2063356
             6  |   .1911836    .015861    12.05   0.000     .1600884    .2222787
                |
          _cons |   .4597216   .0216464    21.24   0.000     .4172843    .5021589
----------------+----------------------------------------------------------------
        sigma_u |  .35914389
        sigma_e |  .28644955
            rho |  .61119101   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    293,327
Group variable: id                              Number of groups  =      4,449

R-sq:                                           Obs per group:
     within  = 0.0404                                         min =          1
     between = 0.0037                                         avg =       65.9
     overall = 0.0315                                         max =      3,652

                                                F(56,4448)        =      46.71
corr(u_i, Xb)  = -0.1052                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,449 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0099494   .0205713     0.48   0.629    -.0303805    .0502793
during_domestic |  -.0219797    .008706    -2.52   0.012    -.0390477   -.0049117
 after_domestic |  -.0291293   .0084864    -3.43   0.001    -.0457667   -.0124918
   during_expat |  -.0294198   .0087558    -3.36   0.001    -.0465856    -.012254
    after_expat |  -.0177696   .0072398    -2.45   0.014    -.0319631    -.003576
                |
       ind_year |
             3  |  -.1143228     .04837    -2.36   0.018     -.209152   -.0194935
             4  |  -.0025944    .046545    -0.06   0.956    -.0938457    .0886569
             5  |  -.0482586   .0473633    -1.02   0.308    -.1411143    .0445972
             6  |  -.1201101    .048498    -2.48   0.013    -.2151903   -.0250298
             7  |   .0015526   .0477794     0.03   0.974    -.0921187     .095224
             8  |  -.1043946   .0486487    -2.15   0.032    -.1997701    -.009019
             9  |  -.1019054   .0500882    -2.03   0.042    -.2001032   -.0037076
            10  |  -.1305613   .0484769    -2.69   0.007    -.2256002   -.0355224
            11  |  -.1492515   .0499857    -2.99   0.003    -.2472484   -.0512545
            12  |   -.151822   .0506981    -2.99   0.003    -.2512156   -.0524284
            13  |  -.1969113   .0504434    -3.90   0.000    -.2958054   -.0980172
            14  |  -.2968148   .0496567    -5.98   0.000    -.3941666   -.1994631
            15  |   -.170653   .0506936    -3.37   0.001    -.2700378   -.0712682
            16  |   -.173586    .050493    -3.44   0.001    -.2725773   -.0745946
            17  |  -.2228256   .0523002    -4.26   0.000    -.3253599   -.1202913
            18  |   -.223426   .0506332    -4.41   0.000    -.3226922   -.1241599
            19  |  -.2277339   .0517797    -4.40   0.000    -.3292479     -.12622
            20  |  -.1453605    .051292    -2.83   0.005    -.2459184   -.0448025
            21  |  -.2666874   .0512693    -5.20   0.000    -.3672007   -.1661742
            22  |  -.0001233   .0523761    -0.00   0.998    -.1028066    .1025599
            23  |  -.3497886    .053373    -6.55   0.000    -.4544261    -.245151
            24  |  -.5288156   .0551027    -9.60   0.000    -.6368443   -.4207868
            25  |  -.3156975   .0637751    -4.95   0.000    -.4407285   -.1906665
            27  |  -.0813336   .0620394    -1.31   0.190    -.2029616    .0402944
            28  |  -.4017339    .057939    -6.93   0.000    -.5153231   -.2881447
            29  |  -.1683784   .0567989    -2.96   0.003    -.2797325   -.0570243
            30  |  -.2756565   .0563548    -4.89   0.000      -.38614   -.1651729
            31  |  -.1911107   .0561019    -3.41   0.001    -.3010984   -.0811231
            32  |  -.3013837   .0561735    -5.37   0.000    -.4115117   -.1912558
            33  |  -.1572974   .0557502    -2.82   0.005    -.2665955   -.0479994
            34  |  -.2752166   .0558123    -4.93   0.000    -.3846364   -.1657969
            35  |  -.2590232   .0560418    -4.62   0.000     -.368893   -.1491534
            36  |  -.3139134   .0562287    -5.58   0.000    -.4241496   -.2036772
            37  |  -.3177322   .0572977    -5.55   0.000    -.4300642   -.2054001
            38  |  -.2832481   .0575116    -4.93   0.000    -.3959995   -.1704967
            39  |  -.3715679   .0569668    -6.52   0.000    -.4832511   -.2598847
            40  |  -.2587236   .0573536    -4.51   0.000    -.3711652   -.1462819
            41  |  -.3170667   .0586096    -5.41   0.000    -.4319707   -.2021626
            42  |  -.3159167   .0587416    -5.38   0.000    -.4310795    -.200754
            43  |  -.1857101   .0585377    -3.17   0.002    -.3004731   -.0709471
            44  |  -.2114758   .0583235    -3.63   0.000    -.3258189   -.0971327
            45  |  -.3983566   .0589594    -6.76   0.000    -.5139464   -.2827669
            46  |  -.2513012   .0583002    -4.31   0.000    -.3655985   -.1370039
            47  |  -.0536028   .0606812    -0.88   0.377    -.1725682    .0653626
            48  |  -.4272903   .0593376    -7.20   0.000    -.5436216   -.3109591
            49  |   -.915066    .058353   -15.68   0.000    -1.029467    -.800665
            50  |  -.3374032   .0671536    -5.02   0.000    -.4690577   -.2057488
                |
        age_cat |
             3  |  -.1440739   .0314526    -4.58   0.000    -.2057366   -.0824113
             4  |  -.3545236   .0289536   -12.24   0.000     -.411287   -.2977602
             5  |  -.4311291   .0304241   -14.17   0.000    -.4907754   -.3714828
             6  |  -.4624232   .0333471   -13.87   0.000    -.5278001   -.3970462
                |
          _cons |      .5197   .0516628    10.06   0.000     .4184153    .6209847
----------------+----------------------------------------------------------------
        sigma_u |  .37772304
        sigma_e |  .83412644
            rho |  .17016653   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0404014170951418

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    293,327
Group variable: id                              Number of groups  =      4,449

R-sq:                                           Obs per group:
     within  = 0.0404                                         min =          1
     between = 0.0037                                         avg =       65.9
     overall = 0.0315                                         max =      3,652

                                                F(56,4448)        =      46.71
corr(u_i, Xb)  = -0.1052                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,449 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0099494   .0205713     0.48   0.629    -.0303805    .0502793
during_domestic |  -.0219797    .008706    -2.52   0.012    -.0390477   -.0049117
 after_domestic |  -.0291293   .0084864    -3.43   0.001    -.0457667   -.0124918
   during_expat |  -.0294198   .0087558    -3.36   0.001    -.0465856    -.012254
    after_expat |  -.0177696   .0072398    -2.45   0.014    -.0319631    -.003576
                |
       ind_year |
             3  |  -.1143228     .04837    -2.36   0.018     -.209152   -.0194935
             4  |  -.0025944    .046545    -0.06   0.956    -.0938457    .0886569
             5  |  -.0482586   .0473633    -1.02   0.308    -.1411143    .0445972
             6  |  -.1201101    .048498    -2.48   0.013    -.2151903   -.0250298
             7  |   .0015526   .0477794     0.03   0.974    -.0921187     .095224
             8  |  -.1043946   .0486487    -2.15   0.032    -.1997701    -.009019
             9  |  -.1019054   .0500882    -2.03   0.042    -.2001032   -.0037076
            10  |  -.1305613   .0484769    -2.69   0.007    -.2256002   -.0355224
            11  |  -.1492515   .0499857    -2.99   0.003    -.2472484   -.0512545
            12  |   -.151822   .0506981    -2.99   0.003    -.2512156   -.0524284
            13  |  -.1969113   .0504434    -3.90   0.000    -.2958054   -.0980172
            14  |  -.2968148   .0496567    -5.98   0.000    -.3941666   -.1994631
            15  |   -.170653   .0506936    -3.37   0.001    -.2700378   -.0712682
            16  |   -.173586    .050493    -3.44   0.001    -.2725773   -.0745946
            17  |  -.2228256   .0523002    -4.26   0.000    -.3253599   -.1202913
            18  |   -.223426   .0506332    -4.41   0.000    -.3226922   -.1241599
            19  |  -.2277339   .0517797    -4.40   0.000    -.3292479     -.12622
            20  |  -.1453605    .051292    -2.83   0.005    -.2459184   -.0448025
            21  |  -.2666874   .0512693    -5.20   0.000    -.3672007   -.1661742
            22  |  -.0001233   .0523761    -0.00   0.998    -.1028066    .1025599
            23  |  -.3497886    .053373    -6.55   0.000    -.4544261    -.245151
            24  |  -.5288156   .0551027    -9.60   0.000    -.6368443   -.4207868
            25  |  -.3156975   .0637751    -4.95   0.000    -.4407285   -.1906665
            27  |  -.0813336   .0620394    -1.31   0.190    -.2029616    .0402944
            28  |  -.4017339    .057939    -6.93   0.000    -.5153231   -.2881447
            29  |  -.1683784   .0567989    -2.96   0.003    -.2797325   -.0570243
            30  |  -.2756565   .0563548    -4.89   0.000      -.38614   -.1651729
            31  |  -.1911107   .0561019    -3.41   0.001    -.3010984   -.0811231
            32  |  -.3013837   .0561735    -5.37   0.000    -.4115117   -.1912558
            33  |  -.1572974   .0557502    -2.82   0.005    -.2665955   -.0479994
            34  |  -.2752166   .0558123    -4.93   0.000    -.3846364   -.1657969
            35  |  -.2590232   .0560418    -4.62   0.000     -.368893   -.1491534
            36  |  -.3139134   .0562287    -5.58   0.000    -.4241496   -.2036772
            37  |  -.3177322   .0572977    -5.55   0.000    -.4300642   -.2054001
            38  |  -.2832481   .0575116    -4.93   0.000    -.3959995   -.1704967
            39  |  -.3715679   .0569668    -6.52   0.000    -.4832511   -.2598847
            40  |  -.2587236   .0573536    -4.51   0.000    -.3711652   -.1462819
            41  |  -.3170667   .0586096    -5.41   0.000    -.4319707   -.2021626
            42  |  -.3159167   .0587416    -5.38   0.000    -.4310795    -.200754
            43  |  -.1857101   .0585377    -3.17   0.002    -.3004731   -.0709471
            44  |  -.2114758   .0583235    -3.63   0.000    -.3258189   -.0971327
            45  |  -.3983566   .0589594    -6.76   0.000    -.5139464   -.2827669
            46  |  -.2513012   .0583002    -4.31   0.000    -.3655985   -.1370039
            47  |  -.0536028   .0606812    -0.88   0.377    -.1725682    .0653626
            48  |  -.4272903   .0593376    -7.20   0.000    -.5436216   -.3109591
            49  |   -.915066    .058353   -15.68   0.000    -1.029467    -.800665
            50  |  -.3374032   .0671536    -5.02   0.000    -.4690577   -.2057488
                |
        age_cat |
             3  |  -.1440739   .0314526    -4.58   0.000    -.2057366   -.0824113
             4  |  -.3545236   .0289536   -12.24   0.000     -.411287   -.2977602
             5  |  -.4311291   .0304241   -14.17   0.000    -.4907754   -.3714828
             6  |  -.4624232   .0333471   -13.87   0.000    -.5278001   -.3970462
                |
          _cons |      .5197   .0516628    10.06   0.000     .4184153    .6209847
----------------+----------------------------------------------------------------
        sigma_u |  .37772304
        sigma_e |  .83412644
            rho |  .17016653   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. *Szelekció az akvicíziós mintában
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. areg f1.expat lnL lnQ lnK exporter if ever_foreign==1&greenfield!=1, a(industry_year) cluster
> (frame_id)

Linear regression, absorbing indicators         Number of obs     =    107,455
                                                F(   4,   1352)   =       4.68
                                                Prob > F          =     0.0009
                                                R-squared         =     0.0762
                                                Adj R-squared     =     0.0617
                                                Root MSE          =     0.4528

                           (Std. Err. adjusted for 1,353 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |  -.0238634   .0109652    -2.18   0.030    -.0453739   -.0023528
         lnQ |   .0230453   .0092428     2.49   0.013     .0049134    .0411771
         lnK |   .0023352   .0071066     0.33   0.743    -.0116059    .0162762
    exporter |   .0435343   .0187465     2.32   0.020      .006759    .0803095
       _cons |   .0464254   .0821814     0.56   0.572    -.1147916    .2076423
-------------+----------------------------------------------------------------
industry_y~r |   absorbed                                    (1653 categories)

. do regram output/regression/selection 1 1

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Linear regression, absorbing indicators         Number of obs     =    107,455
                                                F(   4,   1352)   =       4.68
                                                Prob > F          =     0.0009
                                                R-squared         =     0.0762
                                                Adj R-squared     =     0.0617
                                                Root MSE          =     0.4528

                           (Std. Err. adjusted for 1,353 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |  -.0238634   .0109652    -2.18   0.030    -.0453739   -.0023528
         lnQ |   .0230453   .0092428     2.49   0.013     .0049134    .0411771
         lnK |   .0023352   .0071066     0.33   0.743    -.0116059    .0162762
    exporter |   .0435343   .0187465     2.32   0.020      .006759    .0803095
       _cons |   .0464254   .0821814     0.56   0.572    -.1147916    .2076423
-------------+----------------------------------------------------------------
industry_y~r |   absorbed                                    (1653 categories)

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. keep if ever_foreign==1
(337,379 observations deleted)

. *Dinamika
. scalar Tbefore = 4

. scalar Tafter = 5

. 
. local N = Tbefore+Tafter+1

. 
. do event_study

. local T1 = Tbefore 

. local T2 = Tafter

. 
. foreach X in expat domestic {
  2.         gen byte `X'_p_0 = tenure==0 & (`X'==1)
  3.         forval t=1/`T1' {
  4.                 gen byte `X'_m_`t' = tenure== -`t' & (`X'==1)
  5.         }
  6.         forval t=1/`T2' {
  7.                 gen byte `X'_p_`t' = tenure== `t' & (`X'==1)
  8.         }
  9. }

. local X foreign

. gen byte `X'_p_0 = tenure_`X'==0

. forval t=1/`T1' {
  2.         gen byte `X'_m_`t' = tenure_`X'== -`t'
  3. }

. forval t=1/`T2' {
  2.         gen byte `X'_p_`t' = tenure_`X'== `t'
  3. }

. sort frame_id year

. 
. * illustrate window overlap and recoding
. l manager_id expat year tenure* if frame_id=="ft10072219"

        +--------------------------------------------------------------------------+
        |      manager_id   expat   year   tenure~n   tenure   tenure~c   tenure~t |
        |--------------------------------------------------------------------------|
  4450. | PP177715_998327       0   1992        -19      -20        -20          0 |
  4451. |         PP45376       0   1992        -19      -21        -21          0 |
  4452. |         PP18562       0   1992        -19      -21        -21          0 |
  4453. | PP177715_998327       0   1993        -18      -19        -19          0 |
  4454. |         PP18562       0   1993        -18      -20        -20          0 |
        |--------------------------------------------------------------------------|
  4455. |         PP45376       0   1993        -18      -20        -20          0 |
  4456. | PP177715_998327       0   1994        -17      -18        -18          0 |
  4457. |         PP18562       0   1994        -17      -19        -19          0 |
  4458. |         PP45376       0   1994        -17      -19        -19          0 |
  4459. | PP177715_998327       0   1995        -16      -17        -17          0 |
        |--------------------------------------------------------------------------|
  4460. |         PP45376       0   1995        -16      -18        -18          0 |
  4461. |         PP18562       0   1995        -16      -18        -18          0 |
  4462. |         PP18562       0   1996        -15      -17        -17          0 |
  4463. | PP177715_998327       0   1996        -15      -16        -16          0 |
  4464. |         PP45376       0   1996        -15      -17        -17          0 |
        |--------------------------------------------------------------------------|
  4465. | PP177715_998327       0   1997        -14      -15        -15          0 |
  4466. |         PP18562       0   1997        -14      -16        -16          0 |
  4467. |         PP45376       0   1997        -14      -16        -16          0 |
  4468. |         PP18562       0   1998        -13      -15        -15          0 |
  4469. | PP177715_998327       0   1998        -13      -14        -14          0 |
        |--------------------------------------------------------------------------|
  4470. |         PP45376       0   1998        -13      -15        -15          0 |
  4471. |         PP45376       0   1999        -12      -14        -14          0 |
  4472. |         PP18562       0   1999        -12      -14        -14          0 |
  4473. | PP177715_998327       0   1999        -12      -13        -13          0 |
  4474. |         PP45376       0   2000        -11      -13        -13          0 |
        |--------------------------------------------------------------------------|
  4475. | PP177715_998327       0   2000        -11      -12        -12          0 |
  4476. |         PP18562       0   2000        -11      -13        -13          0 |
  4477. |         PP45376       0   2001        -10      -12        -12          0 |
  4478. |         PP18562       0   2001        -10      -12        -12          0 |
  4479. | PP177715_998327       0   2001        -10      -11        -11          0 |
        |--------------------------------------------------------------------------|
  4480. | PP177715_998327       0   2002         -9      -10        -10          0 |
  4481. |         PP18562       0   2002         -9      -11        -11          0 |
  4482. |         PP45376       0   2002         -9      -11        -11          0 |
  4483. | PP177715_998327       0   2003         -8       -9         -9          0 |
  4484. |         PP45376       0   2003         -8      -10        -10          0 |
        |--------------------------------------------------------------------------|
  4485. |         PP18562       0   2003         -8      -10        -10          0 |
  4486. |         PP45376       0   2004         -7       -9         -9          0 |
  4487. |         PP18562       0   2004         -7       -9         -9          0 |
  4488. | PP177715_998327       0   2004         -7       -8         -8          0 |
  4489. | PP177715_998327       0   2005         -6       -7         -7          0 |
        |--------------------------------------------------------------------------|
  4490. |         PP45376       0   2005         -6       -8         -8          0 |
  4491. |         PP18562       0   2005         -6       -8         -8          0 |
  4492. |         PP45376       0   2006         -5       -7         -7          0 |
  4493. |         PP18562       0   2006         -5       -7         -7          0 |
  4494. | PP177715_998327       0   2006         -5       -6         -6          0 |
        |--------------------------------------------------------------------------|
  4495. |         PP18562       0   2007         -4       -6         -6          0 |
  4496. |         PP45376       0   2007         -4       -6         -6          0 |
  4497. | PP177715_998327       0   2007         -4       -5         -5          0 |
  4498. |         PP18562       0   2008         -3       -5         -5          0 |
  4499. |         PP45376       0   2008         -3       -5         -5          0 |
        |--------------------------------------------------------------------------|
  4500. | PP177715_998327       0   2008         -3       -4         -4          0 |
  4501. |         PP45376       0   2009         -2       -4         -4          0 |
  4502. | PP177715_998327       0   2009         -2       -3         -3          0 |
  4503. |         PP18562       0   2009         -2       -4         -4          0 |
  4504. | PP177715_998327       0   2010         -1       -2         -2          0 |
        |--------------------------------------------------------------------------|
  4505. |         PP18562       0   2010         -1       -3         -3          0 |
  4506. |         PP45376       0   2010         -1       -3         -3          0 |
  4507. |         PP45376       0   2011          0       -2         -2          0 |
  4508. | PP177715_998327       0   2011          0       -1         -1          0 |
  4509. |         PP18562       0   2011          0       -2         -2          0 |
        |--------------------------------------------------------------------------|
  4510. |         PP45376       0   2012          1       -1         -1          0 |
  4511. | PP177715_998327       0   2012          1        0          0          0 |
  4512. |         PP18562       0   2012          1       -1         -1          0 |
  4513. | PP177715_998327       0   2013          2        1          1          0 |
  4514. |         PP45376       0   2013          2        0          0          0 |
        |--------------------------------------------------------------------------|
  4515. |         PP18562       0   2013          2        0          0          0 |
  4516. |         PP45376       0   2014          3        1          1          0 |
  4517. | PP177715_998327       0   2014          3        2          2          0 |
  4518. |         PP18562       0   2014          3        1          1          0 |
  4519. |         PP18562       0   2015          4        2          2          0 |
        |--------------------------------------------------------------------------|
  4520. | PP177715_998327       0   2015          4        3          3          0 |
  4521. |         PP45376       0   2015          4        2          2          0 |
  4522. |         PP18562       0   2016          5        3          3          0 |
  4523. | PP177715_998327       0   2016          5        4          4          0 |
  4524. |         PP45376       0   2016          5        3          3          0 |
        +--------------------------------------------------------------------------+

. 
end of do-file

. 
. local Tbefore = Tbefore

. local Tafter = Tafter

. 
. foreach Y of var `scale' `intensity' {
  2.         * with firm FE, controls are years more than Tbefore before any event happens
.         xtreg `Y' *_m_? *_p_? i.ind_year i.age_cat if expat!=.&greenfield!=1 & ever_foreign==
> 1, i(id) fe vce(cluster id)
  3.         preserve
  4.         clear
  5.         set obs `N'
  6.         gen t = _n-1-`Tbefore'
  7.         label var t "Time since event (year)"
  8. 
.         foreach X in foreign expat domestic {
  9.                 gen `X'_beta=.
 10.                 gen `X'_lower=.
 11.                 gen `X'_upper=.
 12.                 forval t=-`Tbefore'/`Tafter' {
 13.                         local tag "`t'"
 14.                         if (`t'<0) {
 15.                                 local tag = -`t'
 16.                                 local tag  _m_`tag'
 17.                         }
 18.                         else {
 19.                                 local tag  _p_`t'
 20.                         }
 21.                         replace `X'_beta = _b[`X'`tag'] if t==`t'
 22.                         replace `X'_lower = `X'_beta-1.69*_se[`X'`tag'] if t==`t'
 23.                         replace `X'_upper = `X'_beta+1.69*_se[`X'`tag'] if t==`t'
 24.                 }
 25.                 label var `X'_beta "`Y'"
 26.                 label var `X'_upper "90% CI"
 27.                 label var `X'_lower "90% CI"
 28. 
.         }
 29.         label var foreign_beta "Foreign owner"
 30.         label var expat_beta "New expat manager"
 31.         label var domestic_beta "New domestic manager"
 32.         * omit last event year from graph, which is winsorized
.         tw (line expat_beta domestic_beta t if t>=-Tbefore & t<Tafter, sort), scheme(538w) ti
> tle(`Y') aspect(0.67)
 33.         graph export output/figure/`Y'_event_study.png, replace width(800)
 34.         
.         restore
 35. 
. }
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.1130                                         min =          2
     between = 0.1367                                         avg =       88.1
     overall = 0.0912                                         max =      4,150

                                                F(84,1368)        =       4.18
corr(u_i, Xb)  = 0.0339                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,369 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0993868   .0353409     2.81   0.005     .0300585    .1687151
   expat_m_2 |   .0978233   .0333407     2.93   0.003     .0324189    .1632277
   expat_m_3 |   .0909317   .0346687     2.62   0.009     .0229221    .1589413
   expat_m_4 |   .0669738   .0349885     1.91   0.056     -.001663    .1356106
domestic_m_1 |   .1075754   .0325506     3.30   0.001     .0437209    .1714299
domestic_m_2 |    .120683   .0297134     4.06   0.000     .0623942    .1789717
domestic_m_3 |   .1272344   .0276457     4.60   0.000      .073002    .1814669
domestic_m_4 |   .1365837   .0257858     5.30   0.000     .0859997    .1871677
 foreign_m_1 |  -.1212443   .0649982    -1.87   0.062    -.2487513    .0062627
 foreign_m_2 |  -.1109771   .0741657    -1.50   0.135    -.2564679    .0345137
 foreign_m_3 |  -.1171921   .0904837    -1.30   0.195     -.294694    .0603099
 foreign_m_4 |  -.1636584   .0835931    -1.96   0.050    -.3276428    .0003261
   expat_p_0 |   .0519702   .0366676     1.42   0.157    -.0199606     .123901
   expat_p_1 |   .0589829   .0368656     1.60   0.110    -.0133363    .1313021
   expat_p_2 |   .0580565   .0345961     1.68   0.094    -.0098107    .1259236
   expat_p_3 |   .0398358   .0334324     1.19   0.234    -.0257484    .1054201
   expat_p_4 |   .0227771   .0341555     0.67   0.505    -.0442258      .08978
   expat_p_5 |   .0017862   .0355714     0.05   0.960    -.0679942    .0715665
domestic_p_0 |   .0935159   .0334801     2.79   0.005      .027838    .1591938
domestic_p_1 |   .0717999   .0329544     2.18   0.030     .0071534    .1364464
domestic_p_2 |   .0480758   .0334114     1.44   0.150    -.0174673    .1136188
domestic_p_3 |   .0082013   .0345125     0.24   0.812    -.0595018    .0759044
domestic_p_4 |  -.0164811     .03568    -0.46   0.644    -.0864745    .0535123
domestic_p_5 |   -.028676      .0321    -0.89   0.372    -.0916466    .0342947
 foreign_p_0 |  -.1655394   .0746864    -2.22   0.027    -.3120516   -.0190272
 foreign_p_1 |  -.1265819   .0667389    -1.90   0.058    -.2575036    .0043398
 foreign_p_2 |  -.1064232   .0621042    -1.71   0.087    -.2282529    .0154066
 foreign_p_3 |  -.0804821   .0578014    -1.39   0.164    -.1938711    .0329069
 foreign_p_4 |  -.0609486   .0521971    -1.17   0.243    -.1633438    .0414465
 foreign_p_5 |  -.0684342   .0457101    -1.50   0.135    -.1581037    .0212353
             |
    ind_year |
          2  |  -.0765852   .0752191    -1.02   0.309    -.2241425    .0709721
          3  |  -.2731844   .0902495    -3.03   0.003    -.4502268    -.096142
          4  |  -.3654766   .1021021    -3.58   0.000    -.5657702    -.165183
          5  |  -.4928128   .1171785    -4.21   0.000    -.7226818   -.2629438
          6  |  -.6001259   .1301785    -4.61   0.000    -.8554971   -.3447547
          7  |  -.6531182   .1392662    -4.69   0.000    -.9263167   -.3799197
          8  |  -.7416208    .153452    -4.83   0.000    -1.042648    -.440594
          9  |  -.8738854   .1654693    -5.28   0.000    -1.198486   -.5492845
         10  |  -.9241312   .1715911    -5.39   0.000    -1.260741    -.587521
         11  |   -.986813   .1768896    -5.58   0.000    -1.333817   -.6398088
         12  |  -1.019639   .1820537    -5.60   0.000    -1.376773   -.6625039
         13  |  -1.084507   .1828488    -5.93   0.000    -1.443202   -.7258125
         14  |  -1.125663   .1901868    -5.92   0.000    -1.498753    -.752574
         15  |  -1.132362   .1887963    -6.00   0.000    -1.502723   -.7620002
         16  |  -1.140835   .1905737    -5.99   0.000    -1.514684   -.7669871
         17  |  -1.228307   .1998091    -6.15   0.000    -1.620273    -.836342
         18  |  -1.298334   .2034861    -6.38   0.000    -1.697513   -.8991557
         19  |   -1.35846   .2080477    -6.53   0.000    -1.766587   -.9503325
         20  |   -1.40999   .2113106    -6.67   0.000    -1.824518   -.9954619
         21  |  -1.472314   .2049684    -7.18   0.000    -1.874401   -1.070228
         22  |  -1.578668    .206279    -7.65   0.000    -1.983326   -1.174011
         23  |  -1.647655   .2140774    -7.70   0.000     -2.06761   -1.227699
         24  |  -1.563439   .2110392    -7.41   0.000    -1.977434   -1.149443
         25  |  -1.632256   .2175535    -7.50   0.000    -2.059031   -1.205482
         26  |   .8226184   .2625473     3.13   0.002     .3075794    1.337657
         27  |   .6617994   .2587012     2.56   0.011     .1543053    1.169294
         28  |   .5151718   .2531402     2.04   0.042     .0185867    1.011757
         29  |   .4319305   .2534078     1.70   0.089    -.0651795    .9290405
         30  |   .2997005   .2530289     1.18   0.236    -.1966662    .7960673
         31  |   .2032748   .2530445     0.80   0.422    -.2931224    .6996721
         32  |   .0578083   .2483955     0.23   0.816     -.429469    .5450857
         33  |  -.0441558   .2477696    -0.18   0.859    -.5302052    .4418937
         34  |  -.1595703   .2507542    -0.64   0.525    -.6514747    .3323342
         35  |  -.2358885   .2510569    -0.94   0.348    -.7283869    .2566098
         36  |  -.3283249   .2512967    -1.31   0.192    -.8212935    .1646437
         37  |  -.4222832   .2535376    -1.67   0.096    -.9196479    .0750815
         38  |  -.4638148   .2538327    -1.83   0.068    -.9617584    .0341287
         39  |  -.5456241   .2582745    -2.11   0.035    -1.052281   -.0389671
         40  |  -.5847242    .258019    -2.27   0.024     -1.09088   -.0785684
         41  |  -.6766356   .2621621    -2.58   0.010    -1.190919   -.1623523
         42  |  -.7256985   .2662331    -2.73   0.006    -1.247968   -.2034292
         43  |   -.791224   .2676282    -2.96   0.003     -1.31623   -.2662179
         44  |  -.8567882   .2721279    -3.15   0.002    -1.390621    -.322955
         45  |  -.8332555   .2731922    -3.05   0.002    -1.369177   -.2973344
         46  |  -.8481702   .2727535    -3.11   0.002    -1.383231   -.3131098
         47  |  -.8450478   .2740762    -3.08   0.002    -1.382703   -.3073926
         48  |   -.871749   .2743988    -3.18   0.002    -1.410037    -.333461
         49  |  -.8269001   .2736171    -3.02   0.003    -1.363655   -.2901456
         50  |  -.8541524   .2751421    -3.10   0.002    -1.393899   -.3144062
             |
     age_cat |
          2  |   .4132107   .0868658     4.76   0.000     .2428061    .5836153
          3  |   .5787134   .0969359     5.97   0.000     .3885543    .7688725
          4  |   .9621211   .1136393     8.47   0.000      .739195    1.185047
          5  |   1.348626    .138024     9.77   0.000     1.077864    1.619387
          6  |   1.592007   .1690943     9.41   0.000     1.260294    1.923719
             |
       _cons |   4.183983    .161275    25.94   0.000      3.86761    4.500356
-------------+----------------------------------------------------------------
     sigma_u |  1.0668707
     sigma_e |  .86027957
         rho |  .60598237   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    112,938
Group variable: id                              Number of groups  =      1,357

R-sq:                                           Obs per group:
     within  = 0.1589                                         min =          1
     between = 0.1495                                         avg =       83.2
     overall = 0.0701                                         max =      3,984

                                                F(84,1356)        =       8.90
corr(u_i, Xb)  = 0.0708                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,357 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0647838   .0453951     1.43   0.154    -.0242684     .153836
   expat_m_2 |   .0961429   .0450492     2.13   0.033     .0077692    .1845166
   expat_m_3 |    .078474   .0452105     1.74   0.083    -.0102161     .167164
   expat_m_4 |   .1123583   .0430039     2.61   0.009      .027997    .1967197
domestic_m_1 |   .0756677   .0387676     1.95   0.051    -.0003832    .1517187
domestic_m_2 |   .1258979   .0342386     3.68   0.000     .0587315    .1930643
domestic_m_3 |    .143002   .0314816     4.54   0.000     .0812441    .2047598
domestic_m_4 |   .1566848   .0295355     5.30   0.000     .0987446    .2146249
 foreign_m_1 |  -.0513402   .0775923    -0.66   0.508    -.2035542    .1008739
 foreign_m_2 |  -.0721954   .0822954    -0.88   0.380    -.2336355    .0892447
 foreign_m_3 |  -.1194675   .1209649    -0.99   0.324    -.3567662    .1178312
 foreign_m_4 |  -.1117537   .1241303    -0.90   0.368    -.3552621    .1317546
   expat_p_0 |   .0433126   .0497293     0.87   0.384    -.0542421    .1408673
   expat_p_1 |   .0355658   .0510953     0.70   0.487    -.0646685    .1358002
   expat_p_2 |   .0634302   .0465501     1.36   0.173    -.0278879    .1547483
   expat_p_3 |   .0552059   .0437285     1.26   0.207    -.0305771    .1409888
   expat_p_4 |   .0261993   .0446783     0.59   0.558    -.0614468    .1138454
   expat_p_5 |   .0012589     .04906     0.03   0.980    -.0949828    .0975006
domestic_p_0 |   .0648823   .0378391     1.71   0.087    -.0093472    .1391118
domestic_p_1 |   .0264392   .0379595     0.70   0.486    -.0480266    .1009049
domestic_p_2 |  -.0137238   .0395142    -0.35   0.728    -.0912394    .0637918
domestic_p_3 |  -.0119014   .0379318    -0.31   0.754    -.0863127    .0625099
domestic_p_4 |  -.0543154   .0429237    -1.27   0.206    -.1385194    .0298886
domestic_p_5 |  -.0309776   .0396293    -0.78   0.435     -.108719    .0467637
 foreign_p_0 |  -.0130582    .076792    -0.17   0.865    -.1637023    .1375858
 foreign_p_1 |   .0768431   .0739121     1.04   0.299    -.0681513    .2218376
 foreign_p_2 |   .0964598   .0792322     1.22   0.224    -.0589712    .2518908
 foreign_p_3 |   .1433889   .0675342     2.12   0.034     .0109062    .2758717
 foreign_p_4 |   .1058257   .0655238     1.62   0.107    -.0227133    .2343646
 foreign_p_5 |    .039921     .06551     0.61   0.542    -.0885909    .1684329
             |
    ind_year |
          2  |   .0784639   .1044942     0.75   0.453    -.1265239    .2834516
          3  |   .4008752   .1312479     3.05   0.002     .1434041    .6583462
          4  |   .4590778   .1466418     3.13   0.002     .1714084    .7467472
          5  |   .5530949   .1596959     3.46   0.001     .2398172    .8663727
          6  |   .6522696   .1687381     3.87   0.000     .3212536    .9832856
          7  |   .8161504   .1845051     4.42   0.000      .454204    1.178097
          8  |   .9025982   .1962731     4.60   0.000     .5175663     1.28763
          9  |   1.018696   .2045098     4.98   0.000     .6175064    1.419887
         10  |   1.121351   .2097627     5.35   0.000     .7098567    1.532846
         11  |   1.179594   .2185508     5.40   0.000     .7508601    1.608329
         12  |   1.139176   .2382226     4.78   0.000     .6718513    1.606501
         13  |   1.176608   .2201872     5.34   0.000     .7446632    1.608552
         14  |   1.139301   .2381717     4.78   0.000     .6720764    1.606526
         15  |   1.169482   .2317047     5.05   0.000     .7149433     1.62402
         16  |   1.179872   .2347228     5.03   0.000     .7194128    1.640331
         17  |   1.207002   .2495502     4.84   0.000     .7174557    1.696549
         18  |   1.051221   .2633472     3.99   0.000     .5346091    1.567833
         19  |   .8562883   .2825639     3.03   0.002     .3019784    1.410598
         20  |   .7085176   .2935878     2.41   0.016     .1325821    1.284453
         21  |   .7606118   .2722582     2.79   0.005     .2265188    1.294705
         22  |   .4855926   .3060322     1.59   0.113    -.1147553     1.08594
         23  |    .637446   .3027435     2.11   0.035     .0435495    1.231342
         24  |    .387316   .2882533     1.34   0.179    -.1781548    .9527867
         25  |    .362566   .2914755     1.24   0.214    -.2092258    .9343577
         26  |    1.13466   .3181197     3.57   0.000     .5106001     1.75872
         27  |   1.029757   .3206821     3.21   0.001     .4006703    1.658844
         28  |   1.069681   .3066751     3.49   0.001     .4680717     1.67129
         29  |   1.100311   .3160614     3.48   0.001     .4802888    1.720334
         30  |   1.117015   .3104344     3.60   0.000     .5080309    1.725998
         31  |   1.127392   .3093615     3.64   0.000     .5205128    1.734271
         32  |    1.23201   .3065825     4.02   0.000     .6305821    1.833437
         33  |   1.358827   .3047426     4.46   0.000     .7610086    1.956645
         34  |   1.421318   .3081783     4.61   0.000     .8167598    2.025876
         35  |   1.457893   .3103416     4.70   0.000     .8490914    2.066695
         36  |   1.503053   .3130628     4.80   0.000     .8889131    2.117193
         37  |   1.579627   .3156824     5.00   0.000     .9603482    2.198906
         38  |   1.554545    .320865     4.84   0.000     .9250989     2.18399
         39  |   1.629014   .3224401     5.05   0.000     .9964785     2.26155
         40  |   1.639186   .3207667     5.11   0.000     1.009933    2.268438
         41  |   1.422599   .3339876     4.26   0.000     .7674101    2.077787
         42  |   1.550834   .3363716     4.61   0.000     .8909686    2.210699
         43  |   1.557957   .3297761     4.72   0.000     .9110304    2.204884
         44  |   1.455596   .3339901     4.36   0.000     .8004028     2.11079
         45  |   1.465424   .3347627     4.38   0.000     .8087151    2.122133
         46  |   1.496371   .3372315     4.44   0.000     .8348187    2.157923
         47  |   1.441758   .3431105     4.20   0.000     .7686735    2.114843
         48  |   1.513938   .3431902     4.41   0.000     .8406962    2.187179
         49  |     1.3848   .3673801     3.77   0.000     .6641049    2.105495
         50  |   1.467528   .3531533     4.16   0.000     .7747424    2.160315
             |
     age_cat |
          2  |   .2713085   .1119794     2.42   0.016     .0516369    .4909801
          3  |   .5025601    .117054     4.29   0.000     .2729336    .7321867
          4  |    .832536    .134493     6.19   0.000     .5686991    1.096373
          5  |    1.14282    .161567     7.07   0.000     .8258713    1.459768
          6  |   1.325596    .196122     6.76   0.000     .9408605    1.710331
             |
       _cons |   9.778719   .2085139    46.90   0.000     9.369674    10.18776
-------------+----------------------------------------------------------------
     sigma_u |  1.8887221
     sigma_e |  1.1519299
         rho |  .72887525   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnK_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.2595                                         min =          2
     between = 0.0980                                         avg =       88.1
     overall = 0.0955                                         max =      4,150

                                                F(84,1368)        =      20.48
corr(u_i, Xb)  = 0.0446                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,369 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .1100534   .0412352     2.67   0.008     .0291624    .1909444
   expat_m_2 |   .0893362   .0384177     2.33   0.020     .0139723    .1647002
   expat_m_3 |   .0972072   .0390453     2.49   0.013     .0206121    .1738024
   expat_m_4 |   .0626126   .0380885     1.64   0.100    -.0121056    .1373308
domestic_m_1 |   .0301664   .0433122     0.70   0.486    -.0547992     .115132
domestic_m_2 |   .0818644   .0398865     2.05   0.040     .0036191    .1601097
domestic_m_3 |   .1082728   .0321327     3.37   0.001     .0452381    .1713076
domestic_m_4 |   .1257443   .0289547     4.34   0.000     .0689438    .1825448
 foreign_m_1 |  -.2468182    .076203    -3.24   0.001    -.3963057   -.0973308
 foreign_m_2 |  -.2904284   .0828766    -3.50   0.000    -.4530073   -.1278494
 foreign_m_3 |  -.2978353   .1193213    -2.50   0.013    -.5319078   -.0637628
 foreign_m_4 |  -.2694563   .1254754    -2.15   0.032    -.5156014   -.0233111
   expat_p_0 |   .0802599    .041621     1.93   0.054     -.001388    .1619078
   expat_p_1 |   .1077012   .0431244     2.50   0.013     .0231041    .1922984
   expat_p_2 |   .0793264   .0403397     1.97   0.049     .0001921    .1584608
   expat_p_3 |   .0796585   .0412015     1.93   0.053    -.0011665    .1604835
   expat_p_4 |   .0453953   .0416105     1.09   0.275     -.036232    .1270225
   expat_p_5 |   .0775668   .0436069     1.78   0.075    -.0079769    .1631105
domestic_p_0 |   .0404843   .0431539     0.94   0.348    -.0441707    .1251393
domestic_p_1 |     .04896   .0426706     1.15   0.251     -.034747     .132667
domestic_p_2 |   .0255914   .0467826     0.55   0.584    -.0661819    .1173648
domestic_p_3 |   .0089508   .0442579     0.20   0.840      -.07787    .0957716
domestic_p_4 |  -.0318083   .0470694    -0.68   0.499    -.1241443    .0605276
domestic_p_5 |  -.0344856   .0464638    -0.74   0.458    -.1256337    .0566625
 foreign_p_0 |  -.3244534   .1132247    -2.87   0.004    -.5465662   -.1023407
 foreign_p_1 |  -.2094606    .076042    -2.75   0.006    -.3586321   -.0602891
 foreign_p_2 |  -.1814494   .0811462    -2.24   0.026     -.340634   -.0222649
 foreign_p_3 |  -.1036487   .0610218    -1.70   0.090    -.2233551    .0160577
 foreign_p_4 |  -.0736859    .056974    -1.29   0.196    -.1854518    .0380799
 foreign_p_5 |  -.0563689   .0488837    -1.15   0.249    -.1522641    .0395263
             |
    ind_year |
          2  |   .1516393   .0897131     1.69   0.091    -.0243509    .3276295
          3  |   .1761024   .0921097     1.91   0.056    -.0045892     .356794
          4  |   .3088988   .0996792     3.10   0.002      .113358    .5044395
          5  |   .4431236   .1147872     3.86   0.000     .2179456    .6683016
          6  |   .5570916    .121609     4.58   0.000     .3185312    .7956519
          7  |   .6638587   .1308069     5.08   0.000     .4072549    .9204625
          8  |   .7248981   .1393329     5.20   0.000     .4515688    .9982275
          9  |   .7850521   .1479208     5.31   0.000     .4948759    1.075228
         10  |   .9201624   .1537651     5.98   0.000     .6185216    1.221803
         11  |   .9554054   .1572354     6.08   0.000     .6469568    1.263854
         12  |   1.004102   .1570714     6.39   0.000     .6959747    1.312228
         13  |    1.00922   .1606969     6.28   0.000     .6939812    1.324459
         14  |   1.035144   .1667765     6.21   0.000     .7079787     1.36231
         15  |   1.096905   .1645743     6.67   0.000     .7740598    1.419751
         16  |   1.125277   .1665812     6.76   0.000      .798495     1.45206
         17  |   1.084708   .1910124     5.68   0.000     .7099993    1.459417
         18  |   .8951686   .1983268     4.51   0.000      .506111    1.284226
         19  |   .8323133    .214158     3.89   0.000     .4121997    1.252427
         20  |   .8220044   .2187753     3.76   0.000      .392833    1.251176
         21  |   .7693051   .2032994     3.78   0.000     .3704927    1.168118
         22  |   .6951655   .2166814     3.21   0.001     .2701016    1.120229
         23  |   .5879764   .2708297     2.17   0.030       .05669    1.119263
         24  |   .7507718   .2189284     3.43   0.001        .3213    1.180244
         25  |    .602113   .2619837     2.30   0.022     .0881796    1.116046
         26  |   .3560116   .2433811     1.46   0.144    -.1214291    .8334523
         27  |   .3635528   .2389029     1.52   0.128    -.1051029    .8322086
         28  |   .4536644   .2389437     1.90   0.058    -.0150714    .9224001
         29  |   .7040092   .2319799     3.03   0.002     .2489344    1.159084
         30  |   .7768144   .2319384     3.35   0.001      .321821    1.231808
         31  |   .9098953   .2355857     3.86   0.000      .447747    1.372044
         32  |   .9530883   .2371648     4.02   0.000     .4878423    1.418334
         33  |    1.00621   .2393958     4.20   0.000      .536587    1.475832
         34  |   1.085517    .242883     4.47   0.000     .6090534     1.56198
         35  |   1.141634    .245259     4.65   0.000     .6605098    1.622759
         36  |   1.114529   .2472531     4.51   0.000     .6294922    1.599565
         37  |   1.169305   .2487825     4.70   0.000     .6812681    1.657341
         38  |   1.211579   .2534121     4.78   0.000     .7144611    1.708698
         39  |   1.220728   .2573785     4.74   0.000     .7158285    1.725627
         40  |   1.389833   .2563579     5.42   0.000     .8869361    1.892731
         41  |   1.394255   .2591718     5.38   0.000     .8858376    1.902672
         42  |   1.433926   .2640758     5.43   0.000     .9158889    1.951964
         43  |    1.34465   .2653975     5.07   0.000     .8240193     1.86528
         44  |   1.336705   .2736612     4.88   0.000     .7998636    1.873546
         45  |   1.372208    .275149     4.99   0.000     .8324484    1.911968
         46  |    1.40299   .2791672     5.03   0.000     .8553477    1.950632
         47  |   1.412294    .282233     5.00   0.000      .858638    1.965951
         48  |   1.409307     .29126     4.84   0.000     .8379423    1.980672
         49  |   1.472797   .2773563     5.31   0.000     .9287077    2.016887
         50  |   1.446331   .2791972     5.18   0.000     .8986298    1.994032
             |
     age_cat |
          2  |   1.027728   .0893614    11.50   0.000     .8524277    1.203028
          3  |   1.243972   .1014264    12.26   0.000     1.045004     1.44294
          4  |   1.610135   .1211698    13.29   0.000     1.372437    1.847834
          5  |   1.950824   .1446404    13.49   0.000     1.667082    2.234565
          6  |   2.149248   .1710262    12.57   0.000     1.813746     2.48475
             |
       _cons |   11.75498   .1630973    72.07   0.000     11.43503    12.07493
-------------+----------------------------------------------------------------
     sigma_u |   1.538162
     sigma_e |  1.0389307
         rho |  .68671206   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnQ_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    112,938
Group variable: id                              Number of groups  =      1,357

R-sq:                                           Obs per group:
     within  = 0.2705                                         min =          1
     between = 0.0185                                         avg =       83.2
     overall = 0.1084                                         max =      3,984

                                                F(84,1356)        =      18.28
corr(u_i, Xb)  = -0.0104                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,357 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |  -.0150935   .0340346    -0.44   0.657    -.0818596    .0516727
   expat_m_2 |   .0181145   .0350235     0.52   0.605    -.0505916    .0868207
   expat_m_3 |   .0048066   .0334261     0.14   0.886    -.0607659    .0703791
   expat_m_4 |   .0524139   .0338509     1.55   0.122    -.0139919    .1188196
domestic_m_1 |  -.0293924   .0273123    -1.08   0.282    -.0829714    .0241867
domestic_m_2 |   .0017684   .0257082     0.07   0.945    -.0486638    .0522005
domestic_m_3 |   .0101998   .0243674     0.42   0.676    -.0376021    .0580016
domestic_m_4 |   .0267351    .023011     1.16   0.246    -.0184059     .071876
 foreign_m_1 |   .0421272   .0543717     0.77   0.439    -.0645347     .148789
 foreign_m_2 |  -.0044404   .0492552    -0.09   0.928     -.101065    .0921842
 foreign_m_3 |  -.0299923   .0689705    -0.43   0.664    -.1652928    .1053082
 foreign_m_4 |      .0319   .0689619     0.46   0.644    -.1033836    .1671836
   expat_p_0 |   .0015677   .0365053     0.04   0.966    -.0700452    .0731807
   expat_p_1 |  -.0038716   .0366509    -0.11   0.916    -.0757701    .0680269
   expat_p_2 |    .011592   .0347882     0.33   0.739    -.0566526    .0798366
   expat_p_3 |   .0101063   .0336298     0.30   0.764    -.0558657    .0760784
   expat_p_4 |    .007517   .0348881     0.22   0.829    -.0609235    .0759575
   expat_p_5 |   .0057683   .0405388     0.14   0.887    -.0737572    .0852939
domestic_p_0 |   -.026138   .0267546    -0.98   0.329    -.0786228    .0263468
domestic_p_1 |  -.0281456   .0283886    -0.99   0.322     -.083836    .0275448
domestic_p_2 |  -.0472735    .031768    -1.49   0.137    -.1095932    .0150462
domestic_p_3 |  -.0218322   .0312196    -0.70   0.484    -.0830762    .0394117
domestic_p_4 |  -.0405517   .0389292    -1.04   0.298    -.1169198    .0358164
domestic_p_5 |  -.0138405    .030439    -0.45   0.649    -.0735532    .0458721
 foreign_p_0 |    .107178      .0555     1.93   0.054    -.0016972    .2160531
 foreign_p_1 |   .1751249   .0536829     3.26   0.001     .0698143    .2804355
 foreign_p_2 |   .1774353   .0546335     3.25   0.001     .0702599    .2846107
 foreign_p_3 |     .21227   .0515926     4.11   0.000     .1110601    .3134799
 foreign_p_4 |   .1416263   .0496351     2.85   0.004     .0442564    .2389961
 foreign_p_5 |   .0746294   .0516921     1.44   0.149    -.0267757    .1760345
             |
    ind_year |
          2  |   .2012497   .0764994     2.63   0.009     .0511797    .3513196
          3  |   .6788162   .0926941     7.32   0.000     .4969769    .8606556
          4  |    .829658   .0992666     8.36   0.000     .6349253    1.024391
          5  |   1.016438   .1091496     9.31   0.000     .8023173    1.230558
          6  |   1.210009   .1114545    10.86   0.000     .9913673    1.428651
          7  |   1.445972   .1225713    11.80   0.000     1.205522    1.686422
          8  |   1.621306   .1286198    12.61   0.000     1.368991    1.873621
          9  |   1.831308    .128419    14.26   0.000     1.579386    2.083229
         10  |   2.002134   .1306793    15.32   0.000     1.745778    2.258489
         11  |   2.112884   .1292879    16.34   0.000     1.859258     2.36651
         12  |   2.105837   .1407768    14.96   0.000     1.829674    2.382001
         13  |   2.184566   .1337988    16.33   0.000     1.922091    2.447041
         14  |   2.189817    .136759    16.01   0.000     1.921535    2.458099
         15  |   2.206976   .1390835    15.87   0.000     1.934133    2.479818
         16  |   2.208998    .143065    15.44   0.000     1.928346    2.489651
         17  |    2.27958   .1489055    15.31   0.000     1.987469     2.57169
         18  |      2.227   .1518185    14.67   0.000     1.929175    2.524824
         19  |   2.105795   .1656518    12.71   0.000     1.780833    2.430756
         20  |   2.012972   .1723858    11.68   0.000       1.6748    2.351144
         21  |   2.080882   .1604615    12.97   0.000     1.766103    2.395662
         22  |   1.918003   .1885788    10.17   0.000     1.548065    2.287941
         23  |   2.031715   .1810175    11.22   0.000      1.67661     2.38682
         24  |   1.580658   .1922293     8.22   0.000     1.203559    1.957757
         25  |   1.544106   .2124789     7.27   0.000     1.127283    1.960929
         26  |   .3962748   .1884732     2.10   0.036     .0265441    .7660056
         27  |   .4887241   .1865966     2.62   0.009     .1226747    .8547735
         28  |   .6715202    .184858     3.63   0.000     .3088814    1.034159
         29  |    .769103   .1851895     4.15   0.000     .4058141    1.132392
         30  |   .9029181   .1849358     4.88   0.000     .5401267    1.265709
         31  |   1.006943   .1849846     5.44   0.000     .6440556     1.36983
         32  |   1.238164   .1861862     6.65   0.000     .8729194    1.603408
         33  |   1.446666   .1878329     7.70   0.000     1.078191    1.815141
         34  |   1.618992   .1925103     8.41   0.000     1.241341    1.996642
         35  |    1.72297   .1964468     8.77   0.000     1.337598    2.108343
         36  |   1.847997   .1970213     9.38   0.000     1.461497    2.234496
         37  |   2.023986   .1974164    10.25   0.000     1.636712    2.411261
         38  |   2.026128   .2026247    10.00   0.000     1.628636     2.42362
         39  |   2.170488   .1978952    10.97   0.000     1.782274    2.558702
         40  |   2.219792   .1984326    11.19   0.000     1.830524     2.60906
         41  |   2.109611   .2043161    10.33   0.000     1.708801    2.510421
         42  |   2.265817   .2021002    11.21   0.000     1.869354     2.66228
         43  |   2.332175   .2011051    11.60   0.000     1.937665    2.726686
         44  |   2.248641   .2040594    11.02   0.000     1.848334    2.648947
         45  |   2.286498   .2042558    11.19   0.000     1.885806     2.68719
         46  |   2.321642   .2039507    11.38   0.000     1.921549    2.721735
         47  |   2.257955   .2120656    10.65   0.000     1.841943    2.673967
         48  |   2.319521   .2076128    11.17   0.000     1.912244    2.726799
         49  |   2.077882   .2352732     8.83   0.000     1.616343    2.539421
         50  |   2.203096   .2156807    10.21   0.000     1.779992      2.6262
             |
     age_cat |
          2  |  -.0658172   .0862065    -0.76   0.445    -.2349297    .1032954
          3  |  -.0162329   .0934651    -0.17   0.862    -.1995847    .1671189
          4  |   .0101919    .106226     0.10   0.924    -.1981931     .218577
          5  |  -.0331818   .1234694    -0.27   0.788    -.2753936    .2090299
          6  |  -.0507864    .147363    -0.34   0.730    -.3398706    .2382978
             |
       _cons |   5.400582   .1320521    40.90   0.000     5.141533     5.65963
-------------+----------------------------------------------------------------
     sigma_u |  1.5585414
     sigma_e |  .91443392
         rho |  .74391186   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnKL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.4912                                         min =          2
     between = 0.1427                                         avg =       88.1
     overall = 0.2539                                         max =      4,150

                                                F(84,1368)        =      43.65
corr(u_i, Xb)  = -0.0141                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,369 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0106666   .0247863     0.43   0.667    -.0379568    .0592899
   expat_m_2 |   -.008487   .0247134    -0.34   0.731    -.0569673    .0399932
   expat_m_3 |   .0062756   .0234292     0.27   0.789    -.0396855    .0522366
   expat_m_4 |  -.0043612   .0236821    -0.18   0.854    -.0508184     .042096
domestic_m_1 |   -.077409   .0240412    -3.22   0.001    -.1245707   -.0302473
domestic_m_2 |  -.0388186   .0239669    -1.62   0.106    -.0858344    .0081972
domestic_m_3 |  -.0189616   .0214951    -0.88   0.378    -.0611286    .0232054
domestic_m_4 |  -.0108394   .0214074    -0.51   0.613    -.0528342    .0311554
 foreign_m_1 |   -.125574   .0510647    -2.46   0.014    -.2257476   -.0254003
 foreign_m_2 |  -.1794512   .0536923    -3.34   0.001    -.2847794   -.0741231
 foreign_m_3 |  -.1806433    .068947    -2.62   0.009    -.3158966     -.04539
 foreign_m_4 |  -.1057979   .0671165    -1.58   0.115    -.2374604    .0258646
   expat_p_0 |   .0282897    .026439     1.07   0.285    -.0235757     .080155
   expat_p_1 |   .0487184   .0277918     1.75   0.080    -.0058008    .1032376
   expat_p_2 |     .02127   .0272084     0.78   0.435    -.0321047    .0746446
   expat_p_3 |   .0398227   .0305619     1.30   0.193    -.0201306    .0997761
   expat_p_4 |   .0226182   .0299852     0.75   0.451    -.0362037      .08144
   expat_p_5 |   .0757806   .0292003     2.60   0.010     .0184984    .1330628
domestic_p_0 |  -.0530316   .0244988    -2.16   0.031    -.1010909   -.0049722
domestic_p_1 |  -.0228399   .0241319    -0.95   0.344    -.0701794    .0244996
domestic_p_2 |  -.0224843   .0268328    -0.84   0.402    -.0751222    .0301536
domestic_p_3 |   .0007495   .0242044     0.03   0.975    -.0467322    .0482313
domestic_p_4 |  -.0153273   .0248048    -0.62   0.537    -.0639868    .0333323
domestic_p_5 |  -.0058096   .0248271    -0.23   0.815     -.054513    .0428938
 foreign_p_0 |   -.158914   .0682171    -2.33   0.020    -.2927355   -.0250925
 foreign_p_1 |  -.0828787   .0501271    -1.65   0.098    -.1812129    .0154555
 foreign_p_2 |  -.0750262   .0557537    -1.35   0.179    -.1843983    .0343458
 foreign_p_3 |  -.0231666   .0421129    -0.55   0.582    -.1057796    .0594463
 foreign_p_4 |  -.0127373   .0403693    -0.32   0.752    -.0919298    .0664552
 foreign_p_5 |   .0120653   .0360882     0.33   0.738    -.0587289    .0828595
             |
    ind_year |
          2  |   .2282244   .0551588     4.14   0.000     .1200194    .3364294
          3  |   .4492867   .0639246     7.03   0.000     .3238858    .5746876
          4  |   .6743754   .0732132     9.21   0.000      .530753    .8179977
          5  |   .9359363    .078693    11.89   0.000     .7815643    1.090308
          6  |   1.157217   .0899222    12.87   0.000      .980817    1.333618
          7  |   1.316977   .1056706    12.46   0.000     1.109683    1.524271
          8  |   1.466519   .1139867    12.87   0.000     1.242911    1.690126
          9  |   1.658938   .1158216    14.32   0.000      1.43173    1.886145
         10  |   1.844294   .1240746    14.86   0.000     1.600897    2.087691
         11  |   1.942218   .1291584    15.04   0.000     1.688848    2.195588
         12  |    2.02374   .1297317    15.60   0.000     1.769245    2.278235
         13  |   2.093727   .1313916    15.94   0.000     1.835976    2.351478
         14  |   2.160808   .1359363    15.90   0.000     1.894141    2.427474
         15  |   2.229267   .1507875    14.78   0.000     1.933467    2.525067
         16  |   2.266113   .1538336    14.73   0.000     1.964337    2.567888
         17  |   2.313016   .1639009    14.11   0.000     1.991491     2.63454
         18  |   2.193503   .1672608    13.11   0.000     1.865388    2.521618
         19  |   2.190773   .1769088    12.38   0.000     1.843731    2.537815
         20  |   2.231994   .1764717    12.65   0.000      1.88581    2.578179
         21  |   2.241619   .1667053    13.45   0.000     1.914594    2.568645
         22  |   2.273834    .169791    13.39   0.000     1.940755    2.606913
         23  |   2.235631   .1988464    11.24   0.000     1.845554    2.625708
         24  |   2.314211   .1700768    13.61   0.000     1.980571     2.64785
         25  |   2.234369   .1868073    11.96   0.000      1.86791    2.600829
         26  |  -.4666067   .1488269    -3.14   0.002    -.7585604   -.1746531
         27  |  -.2982466   .1519038    -1.96   0.050    -.5962363   -.0002569
         28  |  -.0615074   .1518823    -0.40   0.686    -.3594548      .23644
         29  |   .2720787   .1501313     1.81   0.070    -.0224339    .5665913
         30  |   .4771139   .1512015     3.16   0.002     .1805019    .7737258
         31  |   .7066205   .1517372     4.66   0.000     .4089578    1.004283
         32  |     .89528   .1587596     5.64   0.000     .5838413    1.206719
         33  |   1.050365    .158996     6.61   0.000     .7384629    1.362268
         34  |   1.245087   .1619608     7.69   0.000     .9273687    1.562806
         35  |   1.377523   .1620509     8.50   0.000     1.059628    1.695418
         36  |   1.442853   .1638445     8.81   0.000      1.12144    1.764267
         37  |   1.591588   .1644676     9.68   0.000     1.268952    1.914224
         38  |   1.675394   .1659373    10.10   0.000     1.349875    2.000913
         39  |   1.766352   .1667088    10.60   0.000     1.439319    2.093385
         40  |   1.974558   .1664617    11.86   0.000      1.64801    2.301105
         41  |   2.070891   .1678418    12.34   0.000     1.741635    2.400146
         42  |   2.159625   .1746525    12.37   0.000     1.817009    2.502241
         43  |   2.135874   .1740011    12.28   0.000     1.794536    2.477212
         44  |   2.193493   .1780908    12.32   0.000     1.844132    2.542854
         45  |   2.205464   .1833881    12.03   0.000     1.845711    2.565216
         46  |    2.25116   .1788657    12.59   0.000     1.900279    2.602041
         47  |   2.257342   .1787019    12.63   0.000     1.906783    2.607902
         48  |   2.281056   .1822232    12.52   0.000     1.923589    2.638523
         49  |   2.299698   .1804489    12.74   0.000     1.945711    2.653684
         50  |   2.300483   .1820441    12.64   0.000     1.943367    2.657599
             |
     age_cat |
          2  |   .6145172   .0710372     8.65   0.000     .4751634    .7538709
          3  |   .6652583   .0734758     9.05   0.000     .5211208    .8093958
          4  |   .6480142   .0827519     7.83   0.000     .4856798    .8103486
          5  |   .6021977   .0963671     6.25   0.000     .4131544    .7912411
          6  |    .557241    .116035     4.80   0.000     .3296151    .7848668
             |
       _cons |   7.570997   .1086524    69.68   0.000     7.357854     7.78414
-------------+----------------------------------------------------------------
     sigma_u |   1.100537
     sigma_e |  .71052739
         rho |  .70580413   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnQL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    120,620
Group variable: id                              Number of groups  =      1,369

R-sq:                                           Obs per group:
     within  = 0.0410                                         min =          2
     between = 0.1925                                         avg =       88.1
     overall = 0.0860                                         max =      4,150

                                                F(84,1368)        =       3.38
corr(u_i, Xb)  = 0.0876                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,369 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0326682    .010886     3.00   0.003     .0113133    .0540232
   expat_m_2 |   .0205343   .0102061     2.01   0.044     .0005131    .0405556
   expat_m_3 |   .0082134   .0098952     0.83   0.407    -.0111981    .0276248
   expat_m_4 |   .0065209    .010255     0.64   0.525    -.0135963    .0266381
domestic_m_1 |   .0255435    .009761     2.62   0.009     .0063954    .0446916
domestic_m_2 |   .0257042   .0089303     2.88   0.004     .0081856    .0432228
domestic_m_3 |    .019886   .0080719     2.46   0.014     .0040514    .0357206
domestic_m_4 |   .0235414   .0082672     2.85   0.004     .0073237    .0397591
 foreign_m_1 |  -.0384061   .0178532    -2.15   0.032    -.0734286   -.0033835
 foreign_m_2 |  -.0486678   .0204993    -2.37   0.018    -.0888812   -.0084543
 foreign_m_3 |  -.0362564    .022218    -1.63   0.103    -.0798414    .0073286
 foreign_m_4 |  -.0510506   .0236513    -2.16   0.031    -.0974473   -.0046539
   expat_p_0 |   .0371983   .0112689     3.30   0.001     .0150921    .0593046
   expat_p_1 |   .0351475   .0109721     3.20   0.001     .0136236    .0566714
   expat_p_2 |   .0332362   .0102083     3.26   0.001     .0132105    .0532619
   expat_p_3 |   .0344178   .0106837     3.22   0.001     .0134596     .055376
   expat_p_4 |   .0301856   .0106007     2.85   0.004     .0093902     .050981
   expat_p_5 |   .0236291   .0100868     2.34   0.019     .0038418    .0434163
domestic_p_0 |   .0208894   .0102058     2.05   0.041     .0008686    .0409102
domestic_p_1 |   .0302611   .0106933     2.83   0.005     .0092841    .0512381
domestic_p_2 |   .0207188   .0102911     2.01   0.044     .0005307    .0409069
domestic_p_3 |   .0034918   .0100957     0.35   0.729     -.016313    .0232966
domestic_p_4 |  -.0009486   .0103092    -0.09   0.927    -.0211722     .019275
domestic_p_5 |   .0003553   .0098573     0.04   0.971    -.0189818    .0196924
 foreign_p_0 |   -.024867   .0180715    -1.38   0.169    -.0603179    .0105839
 foreign_p_1 |  -.0026746   .0156234    -0.17   0.864    -.0333231    .0279738
 foreign_p_2 |  -.0099127   .0164671    -0.60   0.547    -.0422162    .0223909
 foreign_p_3 |   .0017762   .0153948     0.12   0.908    -.0284238    .0319763
 foreign_p_4 |   .0180308   .0159818     1.13   0.259    -.0133206    .0493822
 foreign_p_5 |   .0104795    .012911     0.81   0.417     -.014848     .035807
             |
    ind_year |
          2  |   .0427461   .0238643     1.79   0.073    -.0040685    .0895608
          3  |  -.0442607   .0307188    -1.44   0.150    -.1045218    .0160004
          4  |  -.0911482    .030899    -2.95   0.003    -.1517627   -.0305338
          5  |  -.0952174   .0283001    -3.36   0.001    -.1507337    -.039701
          6  |  -.1144131   .0333977    -3.43   0.001    -.1799293   -.0488968
          7  |  -.1223233   .0361839    -3.38   0.001    -.1933051   -.0513414
          8  |  -.1348599    .035471    -3.80   0.000    -.2044433   -.0652765
          9  |  -.1577263   .0367708    -4.29   0.000    -.2298596   -.0855929
         10  |  -.1779342   .0383412    -4.64   0.000    -.2531481   -.1027203
         11  |  -.1853219   .0413115    -4.49   0.000    -.2663626   -.1042812
         12  |  -.1871589   .0444424    -4.21   0.000    -.2743415   -.0999763
         13  |  -.1717638   .0437873    -3.92   0.000    -.2576613   -.0858663
         14  |  -.1477883   .0434956    -3.40   0.001    -.2331137   -.0624629
         15  |  -.1157656   .0413275    -2.80   0.005    -.1968378   -.0346934
         16  |  -.1112088   .0412549    -2.70   0.007    -.1921386   -.0302791
         17  |  -.1171459   .0437564    -2.68   0.008    -.2029829    -.031309
         18  |  -.1004619   .0458247    -2.19   0.029    -.1903561   -.0105676
         19  |  -.1134183   .0465489    -2.44   0.015    -.2047332   -.0221034
         20  |    -.08006   .0478234    -1.67   0.094    -.1738752    .0137551
         21  |  -.1076637   .0461541    -2.33   0.020    -.1982041   -.0171233
         22  |  -.1016587   .0469845    -2.16   0.031    -.1938282   -.0094892
         23  |  -.1217199    .046552    -2.61   0.009     -.213041   -.0303988
         24  |  -.1099245   .0471649    -2.33   0.020    -.2024478   -.0174012
         25  |  -.1319344   .0484422    -2.72   0.007    -.2269634   -.0369054
         26  |   .0912812   .0563965     1.62   0.106    -.0193517    .2019141
         27  |   .1174751   .0520245     2.26   0.024     .0154187    .2195315
         28  |   .1052314   .0512929     2.05   0.040       .00461    .2058527
         29  |   .0978545   .0505282     1.94   0.053    -.0012666    .1969756
         30  |   .0997166   .0502486     1.98   0.047      .001144    .1982893
         31  |   .0807458   .0510144     1.58   0.114    -.0193291    .1808207
         32  |   .0837898   .0526323     1.59   0.112     -.019459    .1870386
         33  |   .0722647   .0514041     1.41   0.160    -.0285747     .173104
         34  |   .0488311   .0528434     0.92   0.356    -.0548317     .152494
         35  |   .0795812    .051362     1.55   0.122    -.0211756     .180338
         36  |   .0620662   .0512997     1.21   0.227    -.0385685    .1627009
         37  |   .0339704   .0522804     0.65   0.516    -.0685879    .1365288
         38  |   .0378443   .0521858     0.73   0.468    -.0645287    .1402172
         39  |    .035083   .0540407     0.65   0.516    -.0709286    .1410945
         40  |   .0547763   .0540162     1.01   0.311    -.0511872    .1607398
         41  |   .0556628   .0547532     1.02   0.310    -.0517465    .1630722
         42  |   .0679446   .0552523     1.23   0.219    -.0404438     .176333
         43  |    .092317   .0581227     1.59   0.112    -.0217022    .2063362
         44  |   .0710474    .060588     1.17   0.241    -.0478081    .1899029
         45  |   .0422203   .0572685     0.74   0.461    -.0701233     .154564
         46  |   .0819015   .0604638     1.35   0.176    -.0367104    .2005133
         47  |   .1152927   .0607247     1.90   0.058     -.003831    .2344163
         48  |   .0904441   .0611442     1.48   0.139    -.0295025    .2103908
         49  |    .043948   .0606245     0.72   0.469    -.0749791    .1628752
         50  |   -.000585    .071315    -0.01   0.993    -.1404836    .1393137
             |
     age_cat |
          2  |   .0819401   .0239307     3.42   0.001     .0349953     .128885
          3  |   .0804344   .0296371     2.71   0.007     .0222954    .1385734
          4  |   .1531808   .0302607     5.06   0.000     .0938183    .2125433
          5  |   .1974416   .0336878     5.86   0.000     .1313562     .263527
          6  |   .2337172   .0386568     6.05   0.000     .1578841    .3095503
             |
       _cons |   .4647103   .0376082    12.36   0.000     .3909343    .5384862
-------------+----------------------------------------------------------------
     sigma_u |  .36190829
     sigma_e |  .29635345
         rho |  .59860981   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/exporter_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    103,133
Group variable: id                              Number of groups  =      1,336

R-sq:                                           Obs per group:
     within  = 0.0552                                         min =          1
     between = 0.0009                                         avg =       77.2
     overall = 0.0354                                         max =      3,652

                                                F(81,1335)        =       9.27
corr(u_i, Xb)  = -0.2473                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 1,336 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   -.048963   .0266061    -1.84   0.066    -.1011574    .0032314
   expat_m_2 |   .0119057   .0268201     0.44   0.657    -.0407084    .0645198
   expat_m_3 |  -.0153889   .0267622    -0.58   0.565    -.0678894    .0371116
   expat_m_4 |    -.03668   .0271189    -1.35   0.176    -.0898803    .0165204
domestic_m_1 |  -.0563102   .0199617    -2.82   0.005      -.09547   -.0171504
domestic_m_2 |  -.0038252   .0194832    -0.20   0.844    -.0420462    .0343958
domestic_m_3 |   .0032618   .0223071     0.15   0.884     -.040499    .0470226
domestic_m_4 |  -.0027711   .0204827    -0.14   0.892     -.042953    .0374107
 foreign_m_1 |   .0215301   .0529044     0.41   0.684    -.0822547    .1253148
 foreign_m_2 |   .0024903   .0461873     0.05   0.957    -.0881172    .0930979
 foreign_m_3 |  -.1100832   .0475041    -2.32   0.021     -.203274   -.0168925
 foreign_m_4 |  -.0026493   .0523879    -0.05   0.960     -.105421    .1001224
   expat_p_0 |  -.0589958   .0261788    -2.25   0.024    -.1103519   -.0076398
   expat_p_1 |  -.0562806   .0280535    -2.01   0.045    -.1113143   -.0012468
   expat_p_2 |  -.0614086   .0272294    -2.26   0.024    -.1148256   -.0079915
   expat_p_3 |  -.0271947    .028457    -0.96   0.339      -.08302    .0286307
   expat_p_4 |  -.0568874   .0291677    -1.95   0.051    -.1141069    .0003321
   expat_p_5 |  -.0199783   .0337902    -0.59   0.554    -.0862659    .0463093
domestic_p_0 |  -.0301485   .0174757    -1.73   0.085    -.0644313    .0041343
domestic_p_1 |   -.041504   .0199757    -2.08   0.038    -.0806912   -.0023168
domestic_p_2 |   -.053591   .0310615    -1.73   0.085    -.1145257    .0073437
domestic_p_3 |  -.0673502   .0210605    -3.20   0.001    -.1086655   -.0260349
domestic_p_4 |   -.041004   .0265271    -1.55   0.122    -.0930434    .0110354
domestic_p_5 |  -.0436344   .0272917    -1.60   0.110    -.0971737     .009905
 foreign_p_0 |   .0792028   .0389175     2.04   0.042     .0028567    .1555489
 foreign_p_1 |   .0610914   .0497021     1.23   0.219    -.0364114    .1585942
 foreign_p_2 |   .1070897    .054834     1.95   0.051    -.0004804    .2146598
 foreign_p_3 |   .0755329   .0524578     1.44   0.150    -.0273759    .1784417
 foreign_p_4 |   .0440933   .0569405     0.77   0.439    -.0676094     .155796
 foreign_p_5 |  -.0112373   .0413475    -0.27   0.786    -.0923506    .0698759
             |
    ind_year |
          3  |  -.1335713   .0888813    -1.50   0.133    -.3079335    .0407908
          4  |  -.2221786   .1290773    -1.72   0.085    -.4753951    .0310378
          5  |  -.1656435   .0959395    -1.73   0.084    -.3538521    .0225651
          6  |  -.1350672   .1063994    -1.27   0.205    -.3437954     .073661
          7  |   .0162728   .1037257     0.16   0.875    -.1872103    .2197559
          8  |  -.1296382   .1066931    -1.22   0.225    -.3389425    .0796662
          9  |  -.1201939   .1262917    -0.95   0.341    -.3679458     .127558
         10  |  -.1870245   .1550237    -1.21   0.228     -.491141     .117092
         11  |  -.2369718   .1535939    -1.54   0.123    -.5382834    .0643398
         12  |  -.2303071    .119517    -1.93   0.054    -.4647687    .0041546
         13  |  -.3993392   .1513143    -2.64   0.008    -.6961788   -.1024995
         14  |  -.2745835   .1040727    -2.64   0.008    -.4787473   -.0704197
         15  |  -.1721372   .1029365    -1.67   0.095    -.3740721    .0297976
         16  |  -.2349171   .1274192    -1.84   0.065    -.4848807    .0150466
         17  |  -.2871511   .1303474    -2.20   0.028    -.5428591   -.0314432
         18  |  -.3874627   .1162698    -3.33   0.001    -.6155541   -.1593712
         19  |  -.4018281   .1181134    -3.40   0.001    -.6335361     -.17012
         20  |  -.2591133   .1205404    -2.15   0.032    -.4955824   -.0226441
         21  |   -.387978   .1158635    -3.35   0.001    -.6152724   -.1606837
         22  |  -.3132551   .1572332    -1.99   0.047    -.6217061   -.0048041
         23  |  -.5119894   .1492066    -3.43   0.001    -.8046944   -.2192845
         24  |   -.833237   .1430038    -5.83   0.000    -1.113774   -.5527004
         25  |  -.5956931   .1968508    -3.03   0.003    -.9818637   -.2095225
         27  |  -.1601885   .1478261    -1.08   0.279    -.4501853    .1298083
         28  |  -.7989522   .1395205    -5.73   0.000    -1.072655   -.5252488
         29  |  -.5239907   .1403239    -3.73   0.000    -.7992701   -.2487113
         30  |  -.4764041    .138023    -3.45   0.001    -.7471697   -.2056384
         31  |  -.4958823   .1417244    -3.50   0.000     -.773909   -.2178556
         32  |  -.3260048    .141486    -2.30   0.021    -.6035639   -.0484457
         33  |  -.3051346   .1376678    -2.22   0.027    -.5752034   -.0350658
         34  |  -.4127109   .1397656    -2.95   0.003    -.6868949   -.1385268
         35  |  -.4058563    .133731    -3.03   0.002    -.6682021   -.1435104
         36  |  -.4652183   .1342911    -3.46   0.001    -.7286627   -.2017738
         37  |  -.5700722   .1361949    -4.19   0.000    -.8372515   -.3028928
         38  |  -.3678777   .1368555    -2.69   0.007     -.636353   -.0994024
         39  |   -.583722   .1304375    -4.48   0.000    -.8396068   -.3278371
         40  |  -.5438056   .1327609    -4.10   0.000    -.8042482    -.283363
         41  |  -.5894666   .1355501    -4.35   0.000    -.8553809   -.3235523
         42  |  -.4444556   .1411175    -3.15   0.002    -.7212919   -.1676193
         43  |  -.3743634   .1423779    -2.63   0.009    -.6536722   -.0950546
         44  |   -.395361   .1401021    -2.82   0.005    -.6702053   -.1205166
         45  |  -.6616825   .1352977    -4.89   0.000    -.9271017   -.3962634
         46  |  -.4795544   .1327782    -3.61   0.000     -.740031   -.2190778
         47  |  -.2114861   .1401107    -1.51   0.131    -.4863472     .063375
         48  |  -.8302321   .1334466    -6.22   0.000     -1.09202   -.5684443
         49  |  -1.096084   .1357202    -8.08   0.000    -1.362332   -.8298355
         50  |    -.67649   .1416844    -4.77   0.000    -.9544383   -.3985417
             |
     age_cat |
          3  |  -.1343635   .0776484    -1.73   0.084    -.2866896    .0179626
          4  |  -.2476398   .0721574    -3.43   0.001    -.3891939   -.1060856
          5  |  -.3336248   .0768988    -4.34   0.000    -.4844804   -.1827692
          6  |  -.3494243   .0815179    -4.29   0.000    -.5093414   -.1895071
             |
       _cons |    .547171   .1162007     4.71   0.000     .3192152    .7751268
-------------+----------------------------------------------------------------
     sigma_u |  .36924357
     sigma_e |  .81922635
         rho |  .16884884   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/inv_event_study.png written in PNG format)

. 
. 
. 
. log close
      name:  <unnamed>
       log:  /Users/koren/Tresors/Data3/projects/expat-analysis/output/estimate.log
  log type:  text
 closed on:  20 Nov 2018, 20:01:39
-----------------------------------------------------------------------------------------------
