--------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//output/firm_panel.log
  log type:  text
 opened on:  22 Apr 2021, 20:33:25

. 
. * keep only sample from balance-small - NOTE: had to restructure as we have to keep foreign which is different in years - so no collapse this time
. use "`here'/temp/balance-small-clean.dta"

. by frame_id_numeric: egen firm_birth = min(year)

. by frame_id_numeric: egen firm_death = max(year)

. keep frame_id year firm_birth firm_death foreign

. tempfile sample

. save `sample', replace
(note: file /srv/sandbox/zavecz/St3159502.000001 not found)
file /srv/sandbox/zavecz/St3159502.000001 saved

. 
. * count expats in do - asterisk used
. *use "`here'/input/ceo-panel/ceo-panel.dta", clear // QUESTION: what is owner
. *rename person_id manager_id
. *merge m:1 frame_id_numeric year using `sample', keep(match) nogen
. *bys frame_id_numeric: egen ever_expat = max(expat == 1)
. *bys frame_id_numeri: egen ever_foreign = max(foreign == 1)
. *egen firm_tag = tag(frame_id_numeric)
. *count if ever_expat == 1 & ever_foreign == 0 & firm_tag == 1
. 
. foreach type in ceo nceo {
  2.         use "`here'/input/`type'-panel/`type'-panel.dta", clear // QUESTION: what is owner
  3.         rename person_id manager_id
  4.         
.         *for descriptives (number of ceo-s and nceo-s in original data, number of ceo and nceo job-spells in original data)
.         count
  5.         egen company_manager_id = group(frame_id_numeric manager_id)
  6.         codebook manager_id
  7.         codebook company_manager_id
  8.         drop company_manager_id
  9. 
.         * only keep sample firms
.         merge m:1 frame_id_numeric year using `sample', keep(match) nogen
 10.         count if first_year_of_firm == firm_birth // QUESTION: why not the same? - same for the last year
 11. 
.         * balance panel
.         egen company_manager_id = group(frame_id manager_id)
 12.         xtset company_manager_id year
 13.         by company_manager_id: generate gap = year - year[_n-1] - 1
 14.         replace gap = 0 if missing(gap)
 15.         tabulate gap
 16. 
.         * fill in gap if only 1 or 2-year long
.         
.         *forval i = 1(1)2 {
.         *       sort company_manager_id year
.         *       expand 1 + `i' if gap == `i', generate(filled_in_`i') // FIXME OR QUESTION: maybe second year as well
.         *       replace year = year - `i' if filled_in_`i'
.         *       tab filled_in_`i'
.         *}
.         
.         *bys company_manager_id year: replace year = year + _n - 1 if filled_in_2
.         
.         expand 1 + (gap == 1), generate(filled_in)
 17.         replace year = year - 1 if filled_in
 18. 
.         * create contiguous spells
.         xtset company_manager_id year
 19.         gen change = ceo != L.ceo // intuition: should be ok in both files (possible FIXME)
 20.         bysort company_manager_id (year): gen job_spell = sum(change)
 21. 
.         * create job begin and end for each manager spell
.         bys frame_id_numeric manager_id job_spell: egen job_begin = min(year)
 22.         bys frame_id_numeric manager_id job_spell: egen job_end = max(year)
 23.         keep frame_id_numeric manager_id job_spell year job_begin job_end expat founder insider outsider firm_birth foreign country_code
 24. 
.         * if first managers arrive in year 1, extrapolate to year 0 - DROP SPELL
.         bys frame_id_numeric: egen first_cohort = min(job_begin)
 25.         replace job_begin = job_begin - 1 if (first_cohort == firm_birth + 1) & (job_begin == first_cohort)
 26. 
.         * NOTE: no collapse and expand --> there might be holes
.         sort frame_id_numeric manager_id year
 27.         count if frame_id_numeric == frame_id_numeric[_n-1] & manager_id == manager_id[_n-1] & year != (year[_n-1] + 1)
 28. 
.         * expat before 1990
.         replace expat = 0 if job_begin < 1990
 29. 
.         ***********************
.         * time invariant vars and drop entire series of firms from sample *
.         ***********************
.                 by frame_id_numeric: egen first_year_expat = min(cond(expat == 1, job_begin,.))
 30.                 by frame_id_numeric: egen first_year_foreign = min(cond(foreign == 1, year,.))
 31.                 
.                 * which of the two happened first?
.                 generate manager_after_owner = first_year_expat - first_year_foreign
 32.                 * event time relative to that
.                 generate event_time = year - first_year_expat
 33.                 
.                 * if foreign manager arrives up to 2 years before 1 year later than foreign owner, use foreign manager as arrival date. this is easier to im
> plement
.                 replace foreign = 1 if (manager_after_owner == -2) & inlist(event_time, 0, 1)
 34.                 replace foreign = 1 if (manager_after_owner == -1) & inlist(event_time, 0)
 35.                 replace foreign = 0 if (manager_after_owner == +1) & inlist(event_time, -1)
 36. 
.                 * QUESTION: order of deletions (may be fine as all are firm level)
.                 * drop firms where expat arrives earlier than 2 years before owner
.                 drop if manager_after_owner < -2
 37.                 
.                 * ever expat and foreign created after foreign changes (drops were firm level before so should not mess with ever variables)
.                 foreach X of var expat foreign {
 38.                         by frame_id_numeric: egen ever_`X'_`type' = max(`X'==1)
 39.                 }
 40. 
.                 * drop if there was an expat but was never foreign
.                 drop if ever_expat == 1 & ever_foreign == 0
 41.                 scalar dropped_do3_expat_firmyears = r(N_drop)
 42.                 
.                 * drop too many CEO-s - FIXME AND QUESTION: should be moved in the next file where spells are limited - but there cannot be created without 
> manager level data
.                 egen fp_tag = tag(frame_id_numeric manager_id) 
 43.                 by frame_id_numeric: egen n_ceo_ever = sum(fp_tag)
 44.                 drop if n_ceo > 15
 45.                 scalar dropped_too_many_CEOs = r(N_drop)
 46.                 drop fp_tag n_ceo_ever
 47.                 
.         * hired or fired ceo since last observed year of firm - * POSSIBLE FIXME: expat, owner, insider, outsider, founder - hire, fire combinations later
.         tempvar previous_year
 48.         generate previous_year = .
 49.         forval t = 1985/2018 {
 50.                 by frame_id_numeric: egen `previous_year' = max(cond(year < `t', year, .))
 51.                 replace previous_year = `previous_year' if year == `t'
 52.                 drop `previous_year'
 53.         }
 54. 
.         by frame_id_numeric: egen first_year = min(year)
 55.         bys frame_id_numeric (year): generate byte hire = cond(first_year == year, 1, (job_begin <= year) & (job_begin > previous_year))
 56. 
.         tempvar next_year
 57.         generate next_year = .
 58.         forval t = 1985/2018 {
 59.                 by frame_id_numeric: egen `next_year' = min(cond(year > `t', year, .))
 60.                 replace next_year = `next_year' if year == `t'
 61.                 drop `next_year'
 62.         }
 63. 
.         gen byte fire = ((job_end >= year) & (job_end < next_year))
 64.         tabulate hire fire 
 65. 
.         gen hire_expat_`type' = hire * expat
 66.         gen fire_expat_`type' = fire * expat
 67. 
.         * number of expats and locals
.         bys frame_id_numeric year: egen n_expat_`type' = total(cond(expat, 1, 0)) // could be in collapse but local not
 68.         bys frame_id_numeric year: egen n_local_`type' = total(cond(!expat, 1, 0))
 69.         
.         *for descriptives (number of ceo-s and nceo-s in final data, number of ceo and nceo job-spells in final data) - part I
.         *tempfile raw_`type'
.         *save `raw_`type''
.         save "`here'/temp/raw_`type'.dta", replace
 70.         
.         * create firm-year data
.         * FIXME: country_code may be different within a firm-year
.         collapse (sum) n_founder_`type' = founder n_insider_`type' = insider n_outsider_`type' = outsider (firstnm) n_expat_`type' n_local_`type' foreign_`t
> ype' = foreign ever_expat_`type' ever_foreign_`type' (count) n_`type' = expat (max) hire_`type' = hire fire_`type' = fire hire_expat_`type' fire_expat_`type
> ', by(frame_id_numeric year)
 71. 
.         * managers in first year not classified as new hires and in last year not classified as fired
.         bys frame_id_numeric (year): replace hire_`type' = 0 if (_n==1)
 72.         bys frame_id_numeric (year): replace fire_`type' = 0 if (_n==_N)
 73.         bys frame_id_numeric (year): replace hire_expat_`type' = 0 if (_n==1)
 74.         bys frame_id_numeric (year): replace fire_expat_`type' = 0 if (_n==_N)
 75.         bys frame_id_numeric (year): gen ceo_spell_`type' = sum(hire_`type' | fire_`type') + 1 // so that index start from 1
 76. 
.         * create dummies from numbers
.         foreach var in expat local founder insider outsider {
 77.                 gen has_`var'_`type' = (n_`var'_`type' > 0) & n_`var'_`type' != .
 78.         }
 79.         
.         tempfile manager_`type'
 80.         save `manager_`type''
 81. }
  12,759,450

--------------------------------------------------------------------------------------------------------------------------------------------------------------
manager_id                                                                                                                                   group(manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (long)

                 range:  [1,1429841]                  units:  1
         unique values:  1,309,823                missing .:  0/12,759,450

                  mean:    777909
              std. dev:    369594

           percentiles:        10%       25%       50%       75%       90%
                            260372    502772    781226   1.1e+06   1.3e+06

--------------------------------------------------------------------------------------------------------------------------------------------------------------
company_manager_id                                                                                                          group(frame_id_numeric manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (float)

                 range:  [1,2008275]                  units:  1
         unique values:  2,008,275                missing .:  0/12,759,450

                  mean:    975778
              std. dev:    598760

           percentiles:        10%       25%       50%       75%       90%
                            169597    438650   1.0e+06   1.5e+06   1.9e+06

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           394,349  
    -----------------------------------------
  184,398
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(62,629 missing values generated)
(62,629 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    387,588       98.29       98.29
          1 |      3,852        0.98       99.26
          2 |      1,015        0.26       99.52
          3 |        575        0.15       99.67
          4 |        354        0.09       99.76
          5 |        291        0.07       99.83
          6 |        175        0.04       99.87
          7 |        121        0.03       99.90
          8 |         90        0.02       99.93
          9 |         73        0.02       99.95
         10 |         52        0.01       99.96
         11 |         44        0.01       99.97
         12 |         31        0.01       99.98
         13 |         23        0.01       99.98
         14 |         23        0.01       99.99
         15 |         12        0.00       99.99
         16 |         11        0.00      100.00
         17 |          6        0.00      100.00
         18 |          5        0.00      100.00
         19 |          3        0.00      100.00
         20 |          3        0.00      100.00
         22 |          1        0.00      100.00
         24 |          1        0.00      100.00
------------+-----------------------------------
      Total |    394,349      100.00
(3,852 observations created)
(3,852 real changes made)
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(31,232 real changes made)
  2,909
(60 real changes made)
(359,469 missing values generated)
(346,182 missing values generated)
(369,362 missing values generated)
(359,469 missing values generated)
(192 real changes made)
(173 real changes made)
(176 real changes made)
(3,663 observations deleted)
(9,898 observations deleted)
(2,022 observations deleted)
(382,618 missing values generated)
(382,618 missing values generated)
(0 real changes made)
(382,618 missing values generated)
(0 real changes made)
(382,618 missing values generated)
(0 real changes made)
(382,618 missing values generated)
(0 real changes made)
(346,275 missing values generated)
(1,994 real changes made)
(345,104 missing values generated)
(2,088 real changes made)
(312,046 missing values generated)
(4,319 real changes made)
(279,809 missing values generated)
(6,209 real changes made)
(225,780 missing values generated)
(8,853 real changes made)
(185,503 missing values generated)
(10,413 real changes made)
(158,670 missing values generated)
(11,114 real changes made)
(140,594 missing values generated)
(11,402 real changes made)
(122,745 missing values generated)
(11,831 real changes made)
(103,084 missing values generated)
(12,541 real changes made)
(89,215 missing values generated)
(12,846 real changes made)
(79,488 missing values generated)
(12,933 real changes made)
(67,900 missing values generated)
(13,209 real changes made)
(58,053 missing values generated)
(13,485 real changes made)
(49,591 missing values generated)
(13,612 real changes made)
(43,040 missing values generated)
(13,841 real changes made)
(37,087 missing values generated)
(13,940 real changes made)
(31,945 missing values generated)
(14,003 real changes made)
(26,800 missing values generated)
(14,133 real changes made)
(23,082 missing values generated)
(14,612 real changes made)
(19,051 missing values generated)
(14,380 real changes made)
(15,594 missing values generated)
(14,210 real changes made)
(12,347 missing values generated)
(14,048 real changes made)
(9,259 missing values generated)
(13,943 real changes made)
(7,048 missing values generated)
(13,920 real changes made)
(4,761 missing values generated)
(13,665 real changes made)
(2,923 missing values generated)
(12,930 real changes made)
(1,639 missing values generated)
(12,751 real changes made)
(763 missing values generated)
(12,710 real changes made)
(214 missing values generated)
(12,499 real changes made)
(382,618 missing values generated)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(5 missing values generated)
(2,013 real changes made)
(15 missing values generated)
(2,095 real changes made)
(80 missing values generated)
(4,434 real changes made)
(736 missing values generated)
(6,426 real changes made)
(3,429 missing values generated)
(9,098 real changes made)
(6,538 missing values generated)
(10,437 real changes made)
(9,884 missing values generated)
(11,259 real changes made)
(13,211 missing values generated)
(11,482 real changes made)
(16,776 missing values generated)
(11,871 real changes made)
(20,417 missing values generated)
(12,417 real changes made)
(24,186 missing values generated)
(12,884 real changes made)
(29,410 missing values generated)
(12,805 real changes made)
(33,960 missing values generated)
(13,175 real changes made)
(38,305 missing values generated)
(13,418 real changes made)
(43,159 missing values generated)
(13,606 real changes made)
(48,646 missing values generated)
(13,590 real changes made)
(54,597 missing values generated)
(13,801 real changes made)
(60,423 missing values generated)
(13,858 real changes made)
(67,174 missing values generated)
(13,856 real changes made)
(74,042 missing values generated)
(13,885 real changes made)
(82,356 missing values generated)
(14,281 real changes made)
(90,430 missing values generated)
(14,092 real changes made)
(97,898 missing values generated)
(14,003 real changes made)
(105,379 missing values generated)
(13,904 real changes made)
(111,883 missing values generated)
(13,755 real changes made)
(120,959 missing values generated)
(13,663 real changes made)
(136,232 missing values generated)
(13,028 real changes made)
(144,714 missing values generated)
(12,694 real changes made)
(151,686 missing values generated)
(12,556 real changes made)
(160,946 missing values generated)
(12,388 real changes made)
(382,618 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |   271,142     49,307 |   320,449 
         1 |    49,307     12,862 |    62,169 
-----------+----------------------+----------
     Total |   320,449     62,169 |   382,618 
file /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//temp/raw_ceo.dta saved
(23,121 real changes made)
(23,121 real changes made)
(296 real changes made)
(649 real changes made)
file /srv/sandbox/zavecz/St3159502.000002 saved
  286,313

--------------------------------------------------------------------------------------------------------------------------------------------------------------
manager_id                                                                                                                                   group(manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (long)

                 range:  [80,1429833]                 units:  1
         unique values:  58,121                   missing .:  0/286,313

                  mean:    752598
              std. dev:    371693

           percentiles:        10%       25%       50%       75%       90%
                            229912    478618    743504   1.1e+06   1.3e+06

--------------------------------------------------------------------------------------------------------------------------------------------------------------
company_manager_id                                                                                                          group(frame_id_numeric manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (float)

                 range:  [1,68173]                    units:  1
         unique values:  68,173                   missing .:  0/286,313

                  mean:   31571.5
              std. dev:   19348.2

           percentiles:        10%       25%       50%       75%       90%
                              5709     14640     30952     47669     59363

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           116,536  
    -----------------------------------------
  30,789
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(27,265 missing values generated)
(27,265 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    114,664       98.39       98.39
          1 |        889        0.76       99.16
          2 |        336        0.29       99.44
          3 |        196        0.17       99.61
          4 |        149        0.13       99.74
          5 |         95        0.08       99.82
          6 |         57        0.05       99.87
          7 |         43        0.04       99.91
          8 |         33        0.03       99.94
          9 |         22        0.02       99.96
         10 |         18        0.02       99.97
         11 |          8        0.01       99.98
         12 |          7        0.01       99.98
         13 |          4        0.00       99.99
         14 |          3        0.00       99.99
         15 |          4        0.00       99.99
         16 |          3        0.00      100.00
         17 |          3        0.00      100.00
         22 |          1        0.00      100.00
         24 |          1        0.00      100.00
------------+-----------------------------------
      Total |    116,536      100.00
(889 observations created)
(889 real changes made)
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(7,565 real changes made)
  983
(0 real changes made)
(86,692 missing values generated)
(87,137 missing values generated)
(98,024 missing values generated)
(86,692 missing values generated)
(36 real changes made)
(16 real changes made)
(107 real changes made)
(2,482 observations deleted)
(11,332 observations deleted)
(38,185 observations deleted)
(65,426 missing values generated)
(65,426 missing values generated)
(0 real changes made)
(65,426 missing values generated)
(0 real changes made)
(65,426 missing values generated)
(0 real changes made)
(65,426 missing values generated)
(0 real changes made)
(56,922 missing values generated)
(1,000 real changes made)
(56,459 missing values generated)
(1,040 real changes made)
(52,876 missing values generated)
(1,500 real changes made)
(49,788 missing values generated)
(1,693 real changes made)
(46,036 missing values generated)
(1,308 real changes made)
(40,319 missing values generated)
(1,639 real changes made)
(36,464 missing values generated)
(1,834 real changes made)
(34,637 missing values generated)
(1,808 real changes made)
(33,696 missing values generated)
(1,656 real changes made)
(32,477 missing values generated)
(1,570 real changes made)
(31,432 missing values generated)
(1,488 real changes made)
(28,875 missing values generated)
(1,499 real changes made)
(26,575 missing values generated)
(1,529 real changes made)
(24,333 missing values generated)
(1,595 real changes made)
(22,916 missing values generated)
(1,653 real changes made)
(21,178 missing values generated)
(1,874 real changes made)
(15,290 missing values generated)
(2,400 real changes made)
(12,322 missing values generated)
(2,454 real changes made)
(10,173 missing values generated)
(2,229 real changes made)
(8,561 missing values generated)
(2,327 real changes made)
(6,795 missing values generated)
(2,539 real changes made)
(5,415 missing values generated)
(2,562 real changes made)
(4,384 missing values generated)
(2,353 real changes made)
(3,364 missing values generated)
(2,373 real changes made)
(2,723 missing values generated)
(2,351 real changes made)
(1,981 missing values generated)
(2,381 real changes made)
(1,231 missing values generated)
(1,991 real changes made)
(759 missing values generated)
(1,935 real changes made)
(307 missing values generated)
(1,980 real changes made)
(99 missing values generated)
(1,956 real changes made)
(65,426 missing values generated)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(5 missing values generated)
(1,007 real changes made)
(31 missing values generated)
(1,042 real changes made)
(108 missing values generated)
(1,535 real changes made)
(806 missing values generated)
(1,788 real changes made)
(3,782 missing values generated)
(1,419 real changes made)
(4,504 missing values generated)
(1,679 real changes made)
(5,291 missing values generated)
(1,872 real changes made)
(5,905 missing values generated)
(1,854 real changes made)
(6,918 missing values generated)
(1,734 real changes made)
(8,135 missing values generated)
(1,596 real changes made)
(9,080 missing values generated)
(1,554 real changes made)
(10,473 missing values generated)
(1,560 real changes made)
(11,758 missing values generated)
(1,546 real changes made)
(12,934 missing values generated)
(1,622 real changes made)
(13,982 missing values generated)
(1,619 real changes made)
(16,495 missing values generated)
(1,559 real changes made)
(18,826 missing values generated)
(2,294 real changes made)
(20,413 missing values generated)
(2,495 real changes made)
(22,397 missing values generated)
(2,402 real changes made)
(23,891 missing values generated)
(2,210 real changes made)
(24,966 missing values generated)
(2,399 real changes made)
(26,964 missing values generated)
(2,499 real changes made)
(29,826 missing values generated)
(2,381 real changes made)
(31,462 missing values generated)
(2,301 real changes made)
(33,044 missing values generated)
(2,328 real changes made)
(34,421 missing values generated)
(2,319 real changes made)
(40,113 missing values generated)
(1,945 real changes made)
(42,109 missing values generated)
(1,899 real changes made)
(43,739 missing values generated)
(1,925 real changes made)
(45,428 missing values generated)
(1,891 real changes made)
(65,426 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |    38,138     11,983 |    50,121 
         1 |    11,983      3,322 |    15,305 
-----------+----------------------+----------
     Total |    50,121     15,305 |    65,426 
file /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//temp/raw_nceo.dta saved
(4,618 real changes made)
(4,618 real changes made)
(83 real changes made)
(124 real changes made)
file /srv/sandbox/zavecz/St3159502.000003 saved

. 
. *for descriptives (number of ceo-s and nceo-s in final data, number of ceo and nceo job-spells in final data) - part II
. *foreach type in ceo nceo {
. *       use "`here'/temp/balance-small-clean.dta", clear
. *       merge 1:m frame_id_numeric year using `raw_`type'', nogen keep(match) keepusing(manager_id)
. *       count
. *       egen company_manager_id = group(frame_id_numeric manager_id)
. *       codebook manager_id
. *       codebook company_manager_id 
. *}
. 
. use `manager_ceo'

. 
. * merge on manager_countries
. merge 1:1 frame_id_numeric year using "`here'/temp/manager_country.dta", keep(master match) nogen

    Result                           # of obs.
    -----------------------------------------
    not matched                       269,560
        from master                   269,560  
        from using                          0  

    matched                             7,445  
    -----------------------------------------

. tabulate has_expat_ceo if missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    269,022       99.80       99.80
          1 |        538        0.20      100.00
------------+-----------------------------------
      Total |    269,560      100.00

. tabulate has_expat_ceo if !missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        584        7.84        7.84
          1 |      6,861       92.16      100.00
------------+-----------------------------------
      Total |      7,445      100.00

. rename country_list country_all_ceo

. rename language_list lang_all_ceo

. 
. merge 1:1 frame_id_numeric year using `manager_nceo', keep (1 3) nogen // 1, only 1 and 3 to not have missing cases in tab has_expat_ceo, missing in analysi
> s-sample 2, merge here to makes sure to have only ceo-s when countries are merged

    Result                           # of obs.
    -----------------------------------------
    not matched                       253,947
        from master                   253,947  
        from using                          0  

    matched                            23,058  
    -----------------------------------------

. 
. count
  277,005

. 
. compress
  variable n_expat_ceo was float now byte
  variable n_local_ceo was float now byte
  variable ever_expat_ceo was float now byte
  variable ever_foreign_ceo was float now byte
  variable n_ceo was long now byte
  variable hire_expat_ceo was float now byte
  variable fire_expat_ceo was float now byte
  variable ceo_spell_ceo was float now byte
  variable has_expat_ceo was float now byte
  variable has_local_ceo was float now byte
  variable has_founder_ceo was float now byte
  variable has_insider_ceo was float now byte
  variable has_outsider_ceo was float now byte
  variable n_expat_nceo was float now byte
  variable n_local_nceo was float now byte
  variable ever_expat_nceo was float now byte
  variable ever_foreign_nceo was float now byte
  variable n_nceo was long now byte
  variable hire_expat_nceo was float now byte
  variable fire_expat_nceo was float now byte
  variable ceo_spell_nceo was float now byte
  variable has_expat_nceo was float now byte
  variable has_local_nceo was float now byte
  variable has_founder_nceo was float now byte
  variable has_insider_nceo was float now byte
  variable has_outsider_nceo was float now byte
  variable n_founder_ceo was double now byte
  variable n_insider_ceo was double now byte
  variable n_outsider_ceo was double now byte
  variable n_founder_nceo was double now byte
  variable n_insider_nceo was double now byte
  variable n_outsider_nceo was double now byte
  variable lang_all_ceo was str9 now str6
  variable country_all_ceo was str15 now str9
  (35,733,645 bytes saved)

. *save_all_to_json
. save "`here'/temp/firm_events.dta", replace
file /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//temp/firm_events.dta saved

. log close
      name:  <unnamed>
       log:  /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//output/firm_panel.log
  log type:  text
 closed on:  22 Apr 2021, 20:34:26
--------------------------------------------------------------------------------------------------------------------------------------------------------------
