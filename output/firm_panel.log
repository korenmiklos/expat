--------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//output/firm_panel.log
  log type:  text
 opened on:  26 May 2021, 17:53:57

. 
. * keep only sample from balance-small - NOTE: had to restructure as we have to keep foreign which is different in years - so no collapse this time
. use "`here'/temp/balance-small-clean.dta"

. by frame_id_numeric: egen firm_birth = min(year)

. by frame_id_numeric: egen firm_death = max(year)

. keep frame_id year firm_birth firm_death foreign

. tempfile sample

. save `sample', replace
(note: file /srv/sandbox/zavecz/St05719.000001 not found)
file /srv/sandbox/zavecz/St05719.000001 saved

. 
. * count expats in do - asterisk used
. *use "`here'/input/ceo-panel/ceo-panel.dta", clear // QUESTION: what is owner
. *rename person_id manager_id
. *merge m:1 frame_id_numeric year using `sample', keep(match) nogen
. *bys frame_id_numeric: egen ever_expat = max(expat == 1)
. *bys frame_id_numeri: egen ever_foreign = max(foreign == 1)
. *egen firm_tag = tag(frame_id_numeric)
. *count if ever_expat == 1 & ever_foreign == 0 & firm_tag == 1
. 
. foreach type in ceo nceo {
  2.         use "`here'/input/`type'-panel/`type'-panel.dta", clear // QUESTION: what is owner
  3.         rename person_id manager_id
  4.         
.         *for descriptives (number of ceo-s and nceo-s in original data, number of ceo and nceo job-spells in original data)
.         count
  5.         egen company_manager_id = group(frame_id_numeric manager_id)
  6.         codebook manager_id
  7.         codebook company_manager_id
  8.         drop company_manager_id
  9. 
.         * only keep sample firms
.         merge m:1 frame_id_numeric year using `sample', keep(match) nogen
 10.         count if first_year_of_firm == firm_birth // QUESTION: why not the same? - same for the last year
 11. 
.         * balance panel
.         egen company_manager_id = group(frame_id manager_id)
 12.         xtset company_manager_id year
 13.         by company_manager_id: generate gap = year - year[_n-1] - 1
 14.         replace gap = 0 if missing(gap)
 15.         tabulate gap
 16. 
.         * fill in gap if only 1 or 2-year long
.         
.         *forval i = 1(1)2 {
.         *       sort company_manager_id year
.         *       expand 1 + `i' if gap == `i', generate(filled_in_`i') // FIXME OR QUESTION: maybe second year as well
.         *       replace year = year - `i' if filled_in_`i'
.         *       tab filled_in_`i'
.         *}
.         
.         *bys company_manager_id year: replace year = year + _n - 1 if filled_in_2
.         
.         expand 1 + (gap == 1), generate(filled_in)
 17.         replace year = year - 1 if filled_in
 18. 
.         * create contiguous spells
.         xtset company_manager_id year
 19.         gen change = ceo != L.ceo // intuition: should be ok in both files (possible FIXME)
 20.         bysort company_manager_id (year): gen job_spell = sum(change)
 21. 
.         * create job begin and end for each manager spell
.         bys frame_id_numeric manager_id job_spell: egen job_begin = min(year)
 22.         bys frame_id_numeric manager_id job_spell: egen job_end = max(year)
 23.         keep frame_id_numeric manager_id job_spell year job_begin job_end expat founder insider outsider firm_birth foreign country_code
 24. 
.         * if first managers arrive in year 1, extrapolate to year 0 - DROP SPELL
.         bys frame_id_numeric: egen first_cohort = min(job_begin)
 25.         replace job_begin = job_begin - 1 if (first_cohort == firm_birth + 1) & (job_begin == first_cohort)
 26. 
.         * NOTE: no collapse and expand --> there might be holes
.         sort frame_id_numeric manager_id year
 27.         count if frame_id_numeric == frame_id_numeric[_n-1] & manager_id == manager_id[_n-1] & year != (year[_n-1] + 1)
 28. 
.         * expat before 1990
.         replace expat = 0 if job_begin < 1990
 29. 
.         ***********************
.         * time invariant vars and drop entire series of firms from sample *
.         ***********************
.                 by frame_id_numeric: egen first_year_expat = min(cond(expat == 1, job_begin,.))
 30.                 by frame_id_numeric: egen first_year_foreign = min(cond(foreign == 1, year,.))
 31.                 
.                 * which of the two happened first?
.                 generate manager_after_owner = first_year_expat - first_year_foreign
 32.                 * event time relative to that
.                 generate event_time = year - first_year_expat
 33.                 
.                 * if foreign manager arrives up to 2 years before 1 year later than foreign owner, use foreign manager as arrival date. this is easier to im
> plement
.                 replace foreign = 1 if (manager_after_owner == -2) & inlist(event_time, 0, 1)
 34.                 replace foreign = 1 if (manager_after_owner == -1) & inlist(event_time, 0)
 35.                 replace foreign = 0 if (manager_after_owner == +1) & inlist(event_time, -1)
 36. 
.                 * QUESTION: order of deletions (may be fine as all are firm level)
.                 * drop firms where expat arrives earlier than 2 years before owner
.                 drop if manager_after_owner < -2
 37.                 
.                 * ever expat and foreign created after foreign changes (drops were firm level before so should not mess with ever variables)
.                 foreach X of var expat foreign {
 38.                         by frame_id_numeric: egen ever_`X'_`type' = max(`X'==1)
 39.                 }
 40. 
.                 * drop if there was an expat but was never foreign
.                 drop if ever_expat == 1 & ever_foreign == 0
 41.                 scalar dropped_do3_expat_firmyears = r(N_drop)
 42.                 
.                 * drop too many CEO-s - FIXME AND QUESTION: should be moved in the next file where spells are limited - but there cannot be created without 
> manager level data
.                 egen fp_tag = tag(frame_id_numeric manager_id) 
 43.                 by frame_id_numeric: egen n_ceo_ever = sum(fp_tag)
 44.                 drop if n_ceo > 15
 45.                 scalar dropped_too_many_CEOs = r(N_drop)
 46.                 drop fp_tag n_ceo_ever
 47.                 
.         * hired or fired ceo since last observed year of firm - * POSSIBLE FIXME: expat, owner, insider, outsider, founder - hire, fire combinations later
.         tempvar previous_year
 48.         generate previous_year = .
 49.         forval t = 1985/2018 {
 50.                 by frame_id_numeric: egen `previous_year' = max(cond(year < `t', year, .))
 51.                 replace previous_year = `previous_year' if year == `t'
 52.                 drop `previous_year'
 53.         }
 54. 
.         by frame_id_numeric: egen first_year = min(year)
 55.         bys frame_id_numeric (year): generate byte hire = cond(first_year == year, 1, (job_begin <= year) & (job_begin > previous_year))
 56. 
.         tempvar next_year
 57.         generate next_year = .
 58.         forval t = 1985/2018 {
 59.                 by frame_id_numeric: egen `next_year' = min(cond(year > `t', year, .))
 60.                 replace next_year = `next_year' if year == `t'
 61.                 drop `next_year'
 62.         }
 63. 
.         gen byte fire = ((job_end >= year) & (job_end < next_year))
 64.         tabulate hire fire 
 65. 
.         gen hire_expat_`type' = hire * expat
 66.         gen fire_expat_`type' = fire * expat
 67. 
.         * number of expats and locals
.         bys frame_id_numeric year: egen n_expat_`type' = total(cond(expat, 1, 0)) // could be in collapse but local not
 68.         bys frame_id_numeric year: egen n_local_`type' = total(cond(!expat, 1, 0))
 69.         
.         *for descriptives (number of ceo-s and nceo-s in final data, number of ceo and nceo job-spells in final data) - part I
.         *tempfile raw_`type'
.         *save `raw_`type''
.         save "`here'/temp/raw_`type'.dta", replace
 70.         
.         * create firm-year data
.         * FIXME: country_code may be different within a firm-year
.         collapse (sum) n_founder_`type' = founder n_insider_`type' = insider n_outsider_`type' = outsider (firstnm) n_expat_`type' n_local_`type' foreign_`t
> ype' = foreign ever_expat_`type' ever_foreign_`type' (count) n_`type' = expat (max) hire_`type' = hire fire_`type' = fire hire_expat_`type' fire_expat_`type
> ', by(frame_id_numeric year)
 71. 
.         * managers in first year not classified as new hires and in last year not classified as fired
.         bys frame_id_numeric (year): replace hire_`type' = 0 if (_n==1)
 72.         bys frame_id_numeric (year): replace fire_`type' = 0 if (_n==_N)
 73.         bys frame_id_numeric (year): replace hire_expat_`type' = 0 if (_n==1)
 74.         bys frame_id_numeric (year): replace fire_expat_`type' = 0 if (_n==_N)
 75.         bys frame_id_numeric (year): gen ceo_spell_`type' = sum(hire_`type' | fire_`type') + 1 // so that index start from 1
 76. 
.         * create dummies from numbers
.         foreach var in expat local founder insider outsider {
 77.                 gen has_`var'_`type' = (n_`var'_`type' > 0) & n_`var'_`type' != .
 78.         }
 79.         
.         tempfile manager_`type'
 80.         save `manager_`type''
 81. }
  12,891,181

--------------------------------------------------------------------------------------------------------------------------------------------------------------
manager_id                                                                                                                      group(manager_id manager_type)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (long)

                 range:  [1,1432995]                  units:  1
         unique values:  1,312,474                missing .:  0/12,891,181

                  mean:    779155
              std. dev:    370644

           percentiles:        10%       25%       50%       75%       90%
                            260098    502954    782515   1.1e+06   1.3e+06

--------------------------------------------------------------------------------------------------------------------------------------------------------------
company_manager_id                                                                                                          group(frame_id_numeric manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (float)

                 range:  [1,2008590]                  units:  1
         unique values:  2,008,590                missing .:  0/12,891,181

                  mean:    973247
              std. dev:    599865

           percentiles:        10%       25%       50%       75%       90%
                            167260    434736    997687   1.5e+06   1.9e+06

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           440,142  
    -----------------------------------------
  210,869
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1985 to 2018, but with gaps
                delta:  1 unit
(69,443 missing values generated)
(69,443 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    433,925       98.59       98.59
          1 |      3,437        0.78       99.37
          2 |        943        0.21       99.58
          3 |        537        0.12       99.70
          4 |        345        0.08       99.78
          5 |        271        0.06       99.84
          6 |        185        0.04       99.89
          7 |        131        0.03       99.92
          8 |         86        0.02       99.94
          9 |         81        0.02       99.95
         10 |         51        0.01       99.97
         11 |         33        0.01       99.97
         12 |         29        0.01       99.98
         13 |         28        0.01       99.99
         14 |         15        0.00       99.99
         15 |         13        0.00       99.99
         16 |         11        0.00      100.00
         17 |          8        0.00      100.00
         18 |          3        0.00      100.00
         19 |          5        0.00      100.00
         20 |          2        0.00      100.00
         21 |          1        0.00      100.00
         22 |          1        0.00      100.00
         24 |          1        0.00      100.00
------------+-----------------------------------
      Total |    440,142      100.00
(3,437 observations created)
(3,437 real changes made)
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1985 to 2018, but with gaps
                delta:  1 unit
(35,678 real changes made)
  2,780
(164 real changes made)
(378,090 missing values generated)
(363,956 missing values generated)
(388,609 missing values generated)
(378,090 missing values generated)
(55 real changes made)
(36 real changes made)
(14 real changes made)
(4,091 observations deleted)
(10,519 observations deleted)
(3,970 observations deleted)
(424,999 missing values generated)
(424,999 missing values generated)
(0 real changes made)
(381,325 missing values generated)
(2,170 real changes made)
(379,683 missing values generated)
(2,353 real changes made)
(377,626 missing values generated)
(2,579 real changes made)
(376,694 missing values generated)
(2,599 real changes made)
(373,082 missing values generated)
(2,957 real changes made)
(333,411 missing values generated)
(6,024 real changes made)
(295,003 missing values generated)
(7,681 real changes made)
(245,943 missing values generated)
(9,387 real changes made)
(205,471 missing values generated)
(10,836 real changes made)
(176,138 missing values generated)
(11,575 real changes made)
(156,233 missing values generated)
(11,956 real changes made)
(136,800 missing values generated)
(12,491 real changes made)
(115,658 missing values generated)
(13,243 real changes made)
(100,377 missing values generated)
(13,658 real changes made)
(89,375 missing values generated)
(13,809 real changes made)
(76,482 missing values generated)
(14,170 real changes made)
(65,262 missing values generated)
(14,529 real changes made)
(56,128 missing values generated)
(14,666 real changes made)
(48,974 missing values generated)
(15,012 real changes made)
(42,355 missing values generated)
(15,131 real changes made)
(36,285 missing values generated)
(15,251 real changes made)
(30,179 missing values generated)
(15,515 real changes made)
(25,578 missing values generated)
(16,017 real changes made)
(20,876 missing values generated)
(15,756 real changes made)
(16,938 missing values generated)
(15,580 real changes made)
(13,324 missing values generated)
(15,400 real changes made)
(10,027 missing values generated)
(15,298 real changes made)
(7,444 missing values generated)
(15,281 real changes made)
(5,054 missing values generated)
(14,964 real changes made)
(3,135 missing values generated)
(14,181 real changes made)
(1,766 missing values generated)
(13,949 real changes made)
(791 missing values generated)
(13,903 real changes made)
(224 missing values generated)
(13,443 real changes made)
(424,999 missing values generated)
(2,170 real changes made)
(2,354 real changes made)
(10 missing values generated)
(2,593 real changes made)
(217 missing values generated)
(2,616 real changes made)
(272 missing values generated)
(2,949 real changes made)
(1,091 missing values generated)
(6,101 real changes made)
(5,150 missing values generated)
(7,835 real changes made)
(9,645 missing values generated)
(9,692 real changes made)
(13,698 missing values generated)
(10,842 real changes made)
(17,733 missing values generated)
(11,731 real changes made)
(21,468 missing values generated)
(12,004 real changes made)
(25,402 missing values generated)
(12,503 real changes made)
(29,458 missing values generated)
(13,144 real changes made)
(33,475 missing values generated)
(13,689 real changes made)
(39,219 missing values generated)
(13,675 real changes made)
(44,101 missing values generated)
(14,114 real changes made)
(48,846 missing values generated)
(14,442 real changes made)
(54,338 missing values generated)
(14,651 real changes made)
(59,794 missing values generated)
(14,713 real changes made)
(66,141 missing values generated)
(14,994 real changes made)
(72,328 missing values generated)
(15,092 real changes made)
(79,334 missing values generated)
(15,174 real changes made)
(86,485 missing values generated)
(15,358 real changes made)
(95,095 missing values generated)
(15,729 real changes made)
(103,672 missing values generated)
(15,496 real changes made)
(111,634 missing values generated)
(15,396 real changes made)
(119,365 missing values generated)
(15,277 real changes made)
(126,021 missing values generated)
(15,183 real changes made)
(136,002 missing values generated)
(15,022 real changes made)
(152,834 missing values generated)
(14,311 real changes made)
(162,295 missing values generated)
(13,939 real changes made)
(169,966 missing values generated)
(13,779 real changes made)
(182,810 missing values generated)
(13,357 real changes made)
(424,999 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |   302,092     54,635 |   356,727 
         1 |    54,635     13,637 |    68,272 
-----------+----------------------+----------
     Total |   356,727     68,272 |   424,999 
file /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//temp/raw_ceo.dta saved
(25,400 real changes made)
(25,400 real changes made)
(1227 real changes made)
(1397 real changes made)
file /srv/sandbox/zavecz/St05719.000002 saved
  288,033

--------------------------------------------------------------------------------------------------------------------------------------------------------------
manager_id                                                                                                                                   group(manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (long)

                 range:  [80,1429833]                 units:  1
         unique values:  58,121                   missing .:  0/288,033

                  mean:    752768
              std. dev:    371598

           percentiles:        10%       25%       50%       75%       90%
                            230023    478933    743701   1.1e+06   1.3e+06

--------------------------------------------------------------------------------------------------------------------------------------------------------------
company_manager_id                                                                                                          group(frame_id_numeric manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (float)

                 range:  [1,68173]                    units:  1
         unique values:  68,173                   missing .:  0/288,033

                  mean:   31559.5
              std. dev:   19323.1

           percentiles:        10%       25%       50%       75%       90%
                              5716     14672     30905     47630     59335

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           118,348  
    -----------------------------------------
  32,950
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(27,911 missing values generated)
(27,911 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    116,612       98.53       98.53
          1 |        814        0.69       99.22
          2 |        326        0.28       99.50
          3 |        202        0.17       99.67
          4 |        112        0.09       99.76
          5 |         86        0.07       99.83
          6 |         58        0.05       99.88
          7 |         38        0.03       99.92
          8 |         30        0.03       99.94
          9 |         20        0.02       99.96
         10 |         18        0.02       99.97
         11 |          7        0.01       99.98
         12 |          7        0.01       99.98
         13 |          4        0.00       99.99
         14 |          1        0.00       99.99
         15 |          4        0.00       99.99
         16 |          3        0.00       99.99
         17 |          3        0.00      100.00
         19 |          1        0.00      100.00
         22 |          1        0.00      100.00
         24 |          1        0.00      100.00
------------+-----------------------------------
      Total |    118,348      100.00
(814 observations created)
(814 real changes made)
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(7,086 real changes made)
  922
(106 real changes made)
(87,360 missing values generated)
(84,986 missing values generated)
(97,516 missing values generated)
(87,360 missing values generated)
(40 real changes made)
(23 real changes made)
(98 real changes made)
(2,220 observations deleted)
(10,156 observations deleted)
(39,660 observations deleted)
(67,126 missing values generated)
(67,126 missing values generated)
(0 real changes made)
(67,126 missing values generated)
(0 real changes made)
(67,126 missing values generated)
(0 real changes made)
(67,126 missing values generated)
(0 real changes made)
(57,998 missing values generated)
(1,170 real changes made)
(57,317 missing values generated)
(1,258 real changes made)
(53,029 missing values generated)
(1,841 real changes made)
(49,581 missing values generated)
(1,927 real changes made)
(46,335 missing values generated)
(1,343 real changes made)
(41,222 missing values generated)
(1,603 real changes made)
(37,589 missing values generated)
(1,780 real changes made)
(35,958 missing values generated)
(1,739 real changes made)
(35,079 missing values generated)
(1,629 real changes made)
(33,901 missing values generated)
(1,524 real changes made)
(32,833 missing values generated)
(1,474 real changes made)
(30,190 missing values generated)
(1,487 real changes made)
(27,671 missing values generated)
(1,529 real changes made)
(25,210 missing values generated)
(1,607 real changes made)
(23,665 missing values generated)
(1,675 real changes made)
(21,749 missing values generated)
(1,894 real changes made)
(16,054 missing values generated)
(2,369 real changes made)
(13,186 missing values generated)
(2,403 real changes made)
(10,974 missing values generated)
(2,241 real changes made)
(9,158 missing values generated)
(2,322 real changes made)
(7,333 missing values generated)
(2,527 real changes made)
(5,787 missing values generated)
(2,559 real changes made)
(4,780 missing values generated)
(2,353 real changes made)
(3,683 missing values generated)
(2,396 real changes made)
(2,930 missing values generated)
(2,369 real changes made)
(2,108 missing values generated)
(2,388 real changes made)
(1,327 missing values generated)
(2,043 real changes made)
(806 missing values generated)
(2,016 real changes made)
(326 missing values generated)
(2,064 real changes made)
(102 missing values generated)
(2,012 real changes made)
(67,126 missing values generated)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(14 missing values generated)
(1,179 real changes made)
(51 missing values generated)
(1,260 real changes made)
(297 missing values generated)
(1,887 real changes made)
(1,636 missing values generated)
(2,020 real changes made)
(5,073 missing values generated)
(1,463 real changes made)
(5,906 missing values generated)
(1,634 real changes made)
(6,682 missing values generated)
(1,811 real changes made)
(7,292 missing values generated)
(1,786 real changes made)
(8,247 missing values generated)
(1,684 real changes made)
(9,532 missing values generated)
(1,554 real changes made)
(10,438 missing values generated)
(1,517 real changes made)
(11,810 missing values generated)
(1,553 real changes made)
(13,129 missing values generated)
(1,544 real changes made)
(14,408 missing values generated)
(1,632 real changes made)
(15,509 missing values generated)
(1,637 real changes made)
(18,035 missing values generated)
(1,602 real changes made)
(20,358 missing values generated)
(2,292 real changes made)
(21,978 missing values generated)
(2,445 real changes made)
(23,871 missing values generated)
(2,388 real changes made)
(25,316 missing values generated)
(2,246 real changes made)
(26,475 missing values generated)
(2,392 real changes made)
(28,412 missing values generated)
(2,496 real changes made)
(31,347 missing values generated)
(2,366 real changes made)
(32,922 missing values generated)
(2,319 real changes made)
(34,560 missing values generated)
(2,364 real changes made)
(35,967 missing values generated)
(2,343 real changes made)
(41,246 missing values generated)
(1,989 real changes made)
(43,310 missing values generated)
(1,974 real changes made)
(45,069 missing values generated)
(2,001 real changes made)
(46,928 missing values generated)
(1,949 real changes made)
(67,126 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |    38,664     12,453 |    51,117 
         1 |    12,453      3,556 |    16,009 
-----------+----------------------+----------
     Total |    51,117     16,009 |    67,126 
file /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//temp/raw_nceo.dta saved
(5,128 real changes made)
(5,128 real changes made)
(148 real changes made)
(188 real changes made)
file /srv/sandbox/zavecz/St05719.000003 saved

. 
. *for descriptives (number of ceo-s and nceo-s in final data, number of ceo and nceo job-spells in final data) - part II
. *foreach type in ceo nceo {
. *       use "`here'/temp/balance-small-clean.dta", clear
. *       merge 1:m frame_id_numeric year using `raw_`type'', nogen keep(match) keepusing(manager_id)
. *       count
. *       egen company_manager_id = group(frame_id_numeric manager_id)
. *       codebook manager_id
. *       codebook company_manager_id 
. *}
. 
. use `manager_ceo'

. 
. * merge on manager_countries
. merge 1:1 frame_id_numeric year using "`here'/temp/manager_country.dta", keep(master match) nogen

    Result                           # of obs.
    -----------------------------------------
    not matched                       287,013
        from master                   287,013  
        from using                          0  

    matched                            17,467  
    -----------------------------------------

. tabulate has_expat_ceo if missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    285,795       99.58       99.58
          1 |      1,218        0.42      100.00
------------+-----------------------------------
      Total |    287,013      100.00

. tabulate has_expat_ceo if !missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        649        3.72        3.72
          1 |     16,818       96.28      100.00
------------+-----------------------------------
      Total |     17,467      100.00

. rename country_list country_all_ceo

. rename language_list lang_all_ceo

. 
. merge 1:1 frame_id_numeric year using `manager_nceo', keep (1 3) nogen // 1, only 1 and 3 to not have missing cases in tab has_expat_ceo, missing in analysi
> s-sample 2, merge here to makes sure to have only ceo-s when countries are merged

    Result                           # of obs.
    -----------------------------------------
    not matched                       276,188
        from master                   276,188  
        from using                          0  

    matched                            28,292  
    -----------------------------------------

. 
. count
  304,480

. 
. compress
  variable n_expat_ceo was float now byte
  variable n_local_ceo was float now byte
  variable ever_expat_ceo was float now byte
  variable ever_foreign_ceo was float now byte
  variable n_ceo was long now byte
  variable hire_expat_ceo was float now byte
  variable fire_expat_ceo was float now byte
  variable ceo_spell_ceo was float now byte
  variable has_expat_ceo was float now byte
  variable has_local_ceo was float now byte
  variable has_founder_ceo was float now byte
  variable has_insider_ceo was float now byte
  variable has_outsider_ceo was float now byte
  variable n_expat_nceo was float now byte
  variable n_local_nceo was float now byte
  variable ever_expat_nceo was float now byte
  variable ever_foreign_nceo was float now byte
  variable n_nceo was long now byte
  variable hire_expat_nceo was float now byte
  variable fire_expat_nceo was float now byte
  variable ceo_spell_nceo was float now byte
  variable has_expat_nceo was float now byte
  variable has_local_nceo was float now byte
  variable has_founder_nceo was float now byte
  variable has_insider_nceo was float now byte
  variable has_outsider_nceo was float now byte
  variable n_founder_ceo was double now byte
  variable n_insider_ceo was double now byte
  variable n_outsider_ceo was double now byte
  variable n_founder_nceo was double now byte
  variable n_insider_nceo was double now byte
  variable n_outsider_nceo was double now byte
  variable country_all_ceo was str15 now str12
  (37,451,040 bytes saved)

. *save_all_to_json
. save "`here'/temp/firm_events.dta", replace
file /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//temp/firm_events.dta saved

. log close
      name:  <unnamed>
       log:  /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//output/firm_panel.log
  log type:  text
 closed on:  26 May 2021, 17:55:04
--------------------------------------------------------------------------------------------------------------------------------------------------------------
