--------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//output/firm_panel.log
  log type:  text
 opened on:   8 Apr 2021, 14:22:47

. 
. * keep only sample from balance-small - NOTE: had to restructure as we have to keep foreign which is different in years - so no collapse this time
. use "`here'/temp/balance-small-clean.dta"

. by frame_id_numeric: egen firm_birth = min(year)

. by frame_id_numeric: egen firm_death = max(year)

. keep frame_id year firm_birth firm_death foreign

. tempfile sample

. save `sample', replace
(note: file /srv/sandbox/zavecz/St3755182.000001 not found)
file /srv/sandbox/zavecz/St3755182.000001 saved

. 
. * count expats in do - asterisk used
. *use "`here'/input/ceo-panel/ceo-panel.dta", clear // QUESTION: what is owner
. *rename person_id manager_id
. *merge m:1 frame_id_numeric year using `sample', keep(match) nogen
. *bys frame_id_numeric: egen ever_expat = max(expat == 1)
. *bys frame_id_numeri: egen ever_foreign = max(foreign == 1)
. *egen firm_tag = tag(frame_id_numeric)
. *count if ever_expat == 1 & ever_foreign == 0 & firm_tag == 1
. 
. foreach type in ceo nceo {
  2.         use "`here'/input/`type'-panel/`type'-panel.dta", clear // QUESTION: what is owner
  3.         rename person_id manager_id
  4.         
.         *for descriptives (number of ceo-s and nceo-s in original data, number of ceo and nceo job-spells in original data)
.         count
  5.         egen company_manager_id = group(frame_id_numeric manager_id)
  6.         codebook manager_id
  7.         codebook company_manager_id
  8.         drop company_manager_id
  9. 
.         * only keep sample firms
.         merge m:1 frame_id_numeric year using `sample', keep(match) nogen
 10.         count if first_year_of_firm == firm_birth // QUESTION: why not the same? - same for the last year
 11. 
.         * balance panel
.         egen company_manager_id = group(frame_id manager_id)
 12.         xtset company_manager_id year
 13.         by company_manager_id: generate gap = year - year[_n-1] - 1
 14.         replace gap = 0 if missing(gap)
 15.         tabulate gap
 16. 
.         * fill in gap if only 1 or 2-year long
.         
.         *forval i = 1(1)2 {
.         *       sort company_manager_id year
.         *       expand 1 + `i' if gap == `i', generate(filled_in_`i') // FIXME OR QUESTION: maybe second year as well
.         *       replace year = year - `i' if filled_in_`i'
.         *       tab filled_in_`i'
.         *}
.         
.         *bys company_manager_id year: replace year = year + _n - 1 if filled_in_2
.         
.         expand 1 + (gap == 1), generate(filled_in)
 17.         replace year = year - 1 if filled_in
 18. 
.         * create contiguous spells
.         xtset company_manager_id year
 19.         gen change = ceo != L.ceo // intuition: should be ok in both files (possible FIXME)
 20.         bysort company_manager_id (year): gen job_spell = sum(change)
 21. 
.         * create job begin and end for each manager spell
.         bys frame_id_numeric manager_id job_spell: egen job_begin = min(year)
 22.         bys frame_id_numeric manager_id job_spell: egen job_end = max(year)
 23.         keep frame_id_numeric manager_id job_spell year job_begin job_end expat founder insider outsider firm_birth foreign country_code
 24. 
.         * if first managers arrive in year 1, extrapolate to year 0 - DROP SPELL
.         bys frame_id_numeric: egen first_cohort = min(job_begin)
 25.         replace job_begin = job_begin - 1 if (first_cohort == firm_birth + 1) & (job_begin == first_cohort)
 26. 
.         * NOTE: no collapse and expand --> there might be holes
.         sort frame_id_numeric manager_id year
 27.         count if frame_id_numeric == frame_id_numeric[_n-1] & manager_id == manager_id[_n-1] & year != (year[_n-1] + 1)
 28. 
.         * expat before 1990
.         replace expat = 0 if job_begin < 1990
 29. 
.         ***********************
.         * time invariant vars and drop entire series of firms from sample *
.         ***********************
.                 by frame_id_numeric: egen first_year_expat = min(cond(expat == 1, job_begin,.))
 30.                 by frame_id_numeric: egen first_year_foreign = min(cond(foreign == 1, year,.))
 31.                 
.                 * which of the two happened first?
.                 generate manager_after_owner = first_year_expat - first_year_foreign
 32.                 * event time relative to that
.                 generate event_time = year - first_year_expat
 33.                 
.                 * if foreign manager arrives up to 2 years before 1 year later than foreign owner, use foreign manager as arrival date. this is easier to im
> plement
.                 replace foreign = 1 if (manager_after_owner == -2) & inlist(event_time, 0, 1)
 34.                 replace foreign = 1 if (manager_after_owner == -1) & inlist(event_time, 0)
 35.                 replace foreign = 0 if (manager_after_owner == +1) & inlist(event_time, -1)
 36. 
.                 * QUESTION: order of deletions (may be fine as all are firm level)
.                 * drop firms where expat arrives earlier than 2 years before owner
.                 drop if manager_after_owner < -2
 37.                 
.                 * ever expat and foreign created after foreign changes (drops were firm level before so should not mess with ever variables)
.                 foreach X of var expat foreign {
 38.                         by frame_id_numeric: egen ever_`X'_`type' = max(`X'==1)
 39.                 }
 40. 
.                 * drop if there was an expat but was never foreign
.                 drop if ever_expat == 1 & ever_foreign == 0
 41.                 scalar dropped_do3_expat_firmyears = r(N_drop)
 42.                 
.                 * drop too many CEO-s - FIXME AND QUESTION: should be moved in the next file where spells are limited - but there cannot be created without 
> manager level data
.                 egen fp_tag = tag(frame_id_numeric manager_id) 
 43.                 by frame_id_numeric: egen n_ceo_ever = sum(fp_tag)
 44.                 drop if n_ceo > 15
 45.                 scalar dropped_too_many_CEOs = r(N_drop)
 46.                 drop fp_tag n_ceo_ever
 47.                 
.         * hired or fired ceo since last observed year of firm - * POSSIBLE FIXME: expat, owner, insider, outsider, founder - hire, fire combinations later
.         tempvar previous_year
 48.         generate previous_year = .
 49.         forval t = 1985/2018 {
 50.                 by frame_id_numeric: egen `previous_year' = max(cond(year < `t', year, .))
 51.                 replace previous_year = `previous_year' if year == `t'
 52.                 drop `previous_year'
 53.         }
 54. 
.         by frame_id_numeric: egen first_year = min(year)
 55.         bys frame_id_numeric (year): generate byte hire = cond(first_year == year, 1, (job_begin <= year) & (job_begin > previous_year))
 56. 
.         tempvar next_year
 57.         generate next_year = .
 58.         forval t = 1985/2018 {
 59.                 by frame_id_numeric: egen `next_year' = min(cond(year > `t', year, .))
 60.                 replace next_year = `next_year' if year == `t'
 61.                 drop `next_year'
 62.         }
 63. 
.         gen byte fire = ((job_end >= year) & (job_end < next_year))
 64.         tabulate hire fire 
 65. 
.         gen hire_expat_`type' = hire * expat
 66.         gen fire_expat_`type' = fire * expat
 67. 
.         * number of expats and locals
.         bys frame_id_numeric year: egen n_expat_`type' = total(cond(expat, 1, 0)) // could be in collapse but local not
 68.         bys frame_id_numeric year: egen n_local_`type' = total(cond(!expat, 1, 0))
 69.         
.         *for descriptives (number of ceo-s and nceo-s in final data, number of ceo and nceo job-spells in final data) - part I
.         *tempfile raw_`type'
.         *save `raw_`type''
.         save "`here'/temp/raw_`type'.dta", replace
 70.         
.         * create firm-year data
.         * FIXME: country_code may be different within a firm-year
.         collapse (sum) n_founder_`type' = founder n_insider_`type' = insider n_outsider_`type' = outsider (firstnm) n_expat_`type' n_local_`type' foreign_`t
> ype' = foreign ever_expat_`type' ever_foreign_`type' (count) n_`type' = expat (max) hire_`type' = hire fire_`type' = fire hire_expat_`type' fire_expat_`type
> ', by(frame_id_numeric year)
 71. 
.         * managers in first year not classified as new hires and in last year not classified as fired
.         bys frame_id_numeric (year): replace hire_`type' = 0 if (_n==1)
 72.         bys frame_id_numeric (year): replace fire_`type' = 0 if (_n==_N)
 73.         bys frame_id_numeric (year): replace hire_expat_`type' = 0 if (_n==1)
 74.         bys frame_id_numeric (year): replace fire_expat_`type' = 0 if (_n==_N)
 75.         bys frame_id_numeric (year): gen ceo_spell_`type' = sum(hire_`type' | fire_`type') + 1 // so that index start from 1
 76. 
.         * create dummies from numbers
.         foreach var in expat local founder insider outsider {
 77.                 gen has_`var'_`type' = (n_`var'_`type' > 0) & n_`var'_`type' != .
 78.         }
 79.         
.         tempfile manager_`type'
 80.         save `manager_`type''
 81. }
  12,759,450

--------------------------------------------------------------------------------------------------------------------------------------------------------------
manager_id                                                                                                                                   group(manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (long)

                 range:  [1,1429841]                  units:  1
         unique values:  1,309,823                missing .:  0/12,759,450

                  mean:    777909
              std. dev:    369594

           percentiles:        10%       25%       50%       75%       90%
                            260372    502772    781226   1.1e+06   1.3e+06

--------------------------------------------------------------------------------------------------------------------------------------------------------------
company_manager_id                                                                                                          group(frame_id_numeric manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (float)

                 range:  [1,2008275]                  units:  1
         unique values:  2,008,275                missing .:  0/12,759,450

                  mean:    975778
              std. dev:    598760

           percentiles:        10%       25%       50%       75%       90%
                            169597    438650   1.0e+06   1.5e+06   1.9e+06

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           484,550  
    -----------------------------------------
  235,424
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(81,097 missing values generated)
(81,097 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    476,318       98.30       98.30
          1 |      4,718        0.97       99.27
          2 |      1,238        0.26       99.53
          3 |        701        0.14       99.67
          4 |        420        0.09       99.76
          5 |        349        0.07       99.83
          6 |        210        0.04       99.88
          7 |        149        0.03       99.91
          8 |        112        0.02       99.93
          9 |         89        0.02       99.95
         10 |         63        0.01       99.96
         11 |         50        0.01       99.97
         12 |         37        0.01       99.98
         13 |         24        0.00       99.99
         14 |         25        0.01       99.99
         15 |         13        0.00       99.99
         16 |         12        0.00      100.00
         17 |          7        0.00      100.00
         18 |          6        0.00      100.00
         19 |          4        0.00      100.00
         20 |          3        0.00      100.00
         22 |          1        0.00      100.00
         24 |          1        0.00      100.00
------------+-----------------------------------
      Total |    484,550      100.00
(4,718 observations created)
(4,718 real changes made)
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(36,744 real changes made)
  3,514
(60 real changes made)
(373,409 missing values generated)
(347,822 missing values generated)
(383,603 missing values generated)
(373,409 missing values generated)
(206 real changes made)
(184 real changes made)
(326 real changes made)
(3,840 observations deleted)
(10,217 observations deleted)
(7,609 observations deleted)
(467,602 missing values generated)
(467,602 missing values generated)
(0 real changes made)
(467,602 missing values generated)
(0 real changes made)
(467,602 missing values generated)
(0 real changes made)
(467,602 missing values generated)
(0 real changes made)
(431,259 missing values generated)
(1,994 real changes made)
(430,088 missing values generated)
(2,088 real changes made)
(393,434 missing values generated)
(4,495 real changes made)
(354,181 missing values generated)
(6,711 real changes made)
(290,082 missing values generated)
(9,889 real changes made)
(242,039 missing values generated)
(11,871 real changes made)
(207,926 missing values generated)
(12,924 real changes made)
(184,892 missing values generated)
(13,423 real changes made)
(162,247 missing values generated)
(14,087 real changes made)
(137,836 missing values generated)
(15,066 real changes made)
(120,323 missing values generated)
(15,533 real changes made)
(107,101 missing values generated)
(15,771 real changes made)
(92,179 missing values generated)
(16,179 real changes made)
(79,071 missing values generated)
(16,539 real changes made)
(67,702 missing values generated)
(16,721 real changes made)
(59,487 missing values generated)
(17,018 real changes made)
(51,613 missing values generated)
(17,215 real changes made)
(44,177 missing values generated)
(17,356 real changes made)
(36,970 missing values generated)
(17,467 real changes made)
(31,051 missing values generated)
(18,123 real changes made)
(24,954 missing values generated)
(17,895 real changes made)
(20,106 missing values generated)
(17,772 real changes made)
(15,686 missing values generated)
(17,669 real changes made)
(11,749 missing values generated)
(17,569 real changes made)
(8,719 missing values generated)
(17,577 real changes made)
(5,946 missing values generated)
(17,263 real changes made)
(3,766 missing values generated)
(16,484 real changes made)
(2,150 missing values generated)
(16,279 real changes made)
(970 missing values generated)
(16,250 real changes made)
(278 missing values generated)
(15,743 real changes made)
(467,602 missing values generated)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(5 missing values generated)
(2,013 real changes made)
(15 missing values generated)
(2,095 real changes made)
(80 missing values generated)
(4,603 real changes made)
(742 missing values generated)
(6,946 real changes made)
(3,500 missing values generated)
(10,148 real changes made)
(6,703 missing values generated)
(11,882 real changes made)
(10,228 missing values generated)
(13,063 real changes made)
(13,848 missing values generated)
(13,504 real changes made)
(17,697 missing values generated)
(14,124 real changes made)
(21,678 missing values generated)
(14,911 real changes made)
(25,872 missing values generated)
(15,579 real changes made)
(31,758 missing values generated)
(15,638 real changes made)
(36,882 missing values generated)
(16,180 real changes made)
(41,968 missing values generated)
(16,503 real changes made)
(47,798 missing values generated)
(16,747 real changes made)
(54,087 missing values generated)
(16,759 real changes made)
(61,036 missing values generated)
(17,038 real changes made)
(67,936 missing values generated)
(17,176 real changes made)
(75,860 missing values generated)
(17,280 real changes made)
(84,021 missing values generated)
(17,329 real changes made)
(93,731 missing values generated)
(17,848 real changes made)
(103,027 missing values generated)
(17,654 real changes made)
(111,759 missing values generated)
(17,582 real changes made)
(120,625 missing values generated)
(17,532 real changes made)
(128,332 missing values generated)
(17,409 real changes made)
(139,082 missing values generated)
(17,289 real changes made)
(155,696 missing values generated)
(16,583 real changes made)
(165,929 missing values generated)
(16,208 real changes made)
(174,832 missing values generated)
(16,068 real changes made)
(190,261 missing values generated)
(15,611 real changes made)
(467,602 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |   325,530     62,577 |   388,107 
         1 |    62,577     16,918 |    79,495 
-----------+----------------------+----------
     Total |   388,107     79,495 |   467,602 
file /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//temp/raw_ceo.dta saved
(27,193 real changes made)
(27,193 real changes made)
(2694 real changes made)
(2810 real changes made)
file /srv/sandbox/zavecz/St3755182.000002 saved
  286,313

--------------------------------------------------------------------------------------------------------------------------------------------------------------
manager_id                                                                                                                                   group(manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (long)

                 range:  [80,1429833]                 units:  1
         unique values:  58,121                   missing .:  0/286,313

                  mean:    752598
              std. dev:    371693

           percentiles:        10%       25%       50%       75%       90%
                            229912    478618    743504   1.1e+06   1.3e+06

--------------------------------------------------------------------------------------------------------------------------------------------------------------
company_manager_id                                                                                                          group(frame_id_numeric manager_id)
--------------------------------------------------------------------------------------------------------------------------------------------------------------

                  type:  numeric (float)

                 range:  [1,68173]                    units:  1
         unique values:  68,173                   missing .:  0/286,313

                  mean:   31571.5
              std. dev:   19348.2

           percentiles:        10%       25%       50%       75%       90%
                              5709     14640     30952     47669     59363

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           134,626  
    -----------------------------------------
  39,375
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(32,152 missing values generated)
(32,152 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    132,421       98.36       98.36
          1 |      1,067        0.79       99.15
          2 |        412        0.31       99.46
          3 |        233        0.17       99.63
          4 |        161        0.12       99.75
          5 |        105        0.08       99.83
          6 |         63        0.05       99.88
          7 |         44        0.03       99.91
          8 |         34        0.03       99.94
          9 |         25        0.02       99.95
         10 |         22        0.02       99.97
         11 |          8        0.01       99.98
         12 |          8        0.01       99.98
         13 |          7        0.01       99.99
         14 |          3        0.00       99.99
         15 |          4        0.00       99.99
         16 |          3        0.00      100.00
         17 |          3        0.00      100.00
         19 |          1        0.00      100.00
         22 |          1        0.00      100.00
         24 |          1        0.00      100.00
------------+-----------------------------------
      Total |    134,626      100.00
(1,067 observations created)
(1,067 real changes made)
       panel variable:  company_manager_id (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
(8,760 real changes made)
  1,138
(0 real changes made)
(95,559 missing values generated)
(88,191 missing values generated)
(107,121 missing values generated)
(95,559 missing values generated)
(50 real changes made)
(29 real changes made)
(141 real changes made)
(2,482 observations deleted)
(11,562 observations deleted)
(44,250 observations deleted)
(77,399 missing values generated)
(77,399 missing values generated)
(0 real changes made)
(77,399 missing values generated)
(0 real changes made)
(77,399 missing values generated)
(0 real changes made)
(77,399 missing values generated)
(0 real changes made)
(68,895 missing values generated)
(1,000 real changes made)
(68,432 missing values generated)
(1,040 real changes made)
(64,722 missing values generated)
(1,511 real changes made)
(61,358 missing values generated)
(1,725 real changes made)
(57,335 missing values generated)
(1,367 real changes made)
(51,392 missing values generated)
(1,708 real changes made)
(47,225 missing values generated)
(1,911 real changes made)
(45,113 missing values generated)
(1,907 real changes made)
(44,078 missing values generated)
(1,781 real changes made)
(42,685 missing values generated)
(1,696 real changes made)
(41,401 missing values generated)
(1,618 real changes made)
(38,018 missing values generated)
(1,670 real changes made)
(34,828 missing values generated)
(1,765 real changes made)
(31,800 missing values generated)
(1,891 real changes made)
(29,610 missing values generated)
(2,006 real changes made)
(27,235 missing values generated)
(2,279 real changes made)
(20,376 missing values generated)
(2,839 real changes made)
(16,730 missing values generated)
(2,868 real changes made)
(13,864 missing values generated)
(2,681 real changes made)
(11,532 missing values generated)
(2,865 real changes made)
(9,186 missing values generated)
(3,115 real changes made)
(7,268 missing values generated)
(3,169 real changes made)
(5,750 missing values generated)
(2,952 real changes made)
(4,367 missing values generated)
(3,018 real changes made)
(3,472 missing values generated)
(2,995 real changes made)
(2,503 missing values generated)
(3,001 real changes made)
(1,584 missing values generated)
(2,625 real changes made)
(995 missing values generated)
(2,574 real changes made)
(413 missing values generated)
(2,653 real changes made)
(141 missing values generated)
(2,540 real changes made)
(77,399 missing values generated)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(5 missing values generated)
(1,007 real changes made)
(31 missing values generated)
(1,042 real changes made)
(109 missing values generated)
(1,547 real changes made)
(808 missing values generated)
(1,822 real changes made)
(3,787 missing values generated)
(1,481 real changes made)
(4,510 missing values generated)
(1,760 real changes made)
(5,324 missing values generated)
(1,952 real changes made)
(5,972 missing values generated)
(1,961 real changes made)
(6,992 missing values generated)
(1,852 real changes made)
(8,266 missing values generated)
(1,730 real changes made)
(9,282 missing values generated)
(1,688 real changes made)
(10,829 missing values generated)
(1,754 real changes made)
(12,182 missing values generated)
(1,779 real changes made)
(13,458 missing values generated)
(1,915 real changes made)
(14,592 missing values generated)
(1,966 real changes made)
(17,295 missing values generated)
(1,954 real changes made)
(19,862 missing values generated)
(2,768 real changes made)
(21,790 missing values generated)
(2,934 real changes made)
(23,922 missing values generated)
(2,873 real changes made)
(25,698 missing values generated)
(2,696 real changes made)
(26,996 missing values generated)
(2,985 real changes made)
(29,371 missing values generated)
(3,098 real changes made)
(32,663 missing values generated)
(2,978 real changes made)
(34,550 missing values generated)
(2,921 real changes made)
(36,408 missing values generated)
(2,977 real changes made)
(38,102 missing values generated)
(2,955 real changes made)
(44,240 missing values generated)
(2,551 real changes made)
(46,700 missing values generated)
(2,516 real changes made)
(48,721 missing values generated)
(2,559 real changes made)
(51,328 missing values generated)
(2,474 real changes made)
(77,399 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |    44,456     14,334 |    58,790 
         1 |    14,334      4,275 |    18,609 
-----------+----------------------+----------
     Total |    58,790     18,609 |    77,399 
file /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//temp/raw_nceo.dta saved
(5,735 real changes made)
(5,735 real changes made)
(289 real changes made)
(336 real changes made)
file /srv/sandbox/zavecz/St3755182.000003 saved

. 
. *for descriptives (number of ceo-s and nceo-s in final data, number of ceo and nceo job-spells in final data) - part II
. *foreach type in ceo nceo {
. *       use "`here'/temp/balance-small-clean.dta", clear
. *       merge 1:m frame_id_numeric year using `raw_`type'', nogen keep(match) keepusing(manager_id)
. *       count
. *       egen company_manager_id = group(frame_id_numeric manager_id)
. *       codebook manager_id
. *       codebook company_manager_id 
. *}
. 
. use `manager_ceo'

. 
. * merge on manager_countries
. merge 1:1 frame_id_numeric year using "`here'/temp/manager_country.dta", keep(master match) nogen

    Result                           # of obs.
    -----------------------------------------
    not matched                       292,558
        from master                   292,558  
        from using                          0  

    matched                            36,353  
    -----------------------------------------

. tabulate has_expat_ceo if missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    290,872       99.42       99.42
          1 |      1,686        0.58      100.00
------------+-----------------------------------
      Total |    292,558      100.00

. tabulate has_expat_ceo if !missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        682        1.88        1.88
          1 |     35,671       98.12      100.00
------------+-----------------------------------
      Total |     36,353      100.00

. rename country_list country_all_ceo

. rename language_list lang_all_ceo

. 
. merge 1:1 frame_id_numeric year using `manager_nceo', keep (1 3) nogen // 1, only 1 and 3 to not have missing cases in tab has_expat_ceo, missing in analysi
> s-sample 2, merge here to makes sure to have only ceo-s when countries are merged

    Result                           # of obs.
    -----------------------------------------
    not matched                       299,551
        from master                   299,551  
        from using                          0  

    matched                            29,360  
    -----------------------------------------

. 
. count
  328,911

. 
. compress
  variable n_expat_ceo was float now byte
  variable n_local_ceo was float now byte
  variable ever_expat_ceo was float now byte
  variable ever_foreign_ceo was float now byte
  variable n_ceo was long now byte
  variable hire_expat_ceo was float now byte
  variable fire_expat_ceo was float now byte
  variable ceo_spell_ceo was float now byte
  variable has_expat_ceo was float now byte
  variable has_local_ceo was float now byte
  variable has_founder_ceo was float now byte
  variable has_insider_ceo was float now byte
  variable has_outsider_ceo was float now byte
  variable n_expat_nceo was float now byte
  variable n_local_nceo was float now byte
  variable ever_expat_nceo was float now byte
  variable ever_foreign_nceo was float now byte
  variable n_nceo was long now byte
  variable hire_expat_nceo was float now byte
  variable fire_expat_nceo was float now byte
  variable ceo_spell_nceo was float now byte
  variable has_expat_nceo was float now byte
  variable has_local_nceo was float now byte
  variable has_founder_nceo was float now byte
  variable has_insider_nceo was float now byte
  variable has_outsider_nceo was float now byte
  variable n_founder_ceo was double now byte
  variable n_insider_ceo was double now byte
  variable n_outsider_ceo was double now byte
  variable n_founder_nceo was double now byte
  variable n_insider_nceo was double now byte
  variable n_outsider_nceo was double now byte
  variable country_all_ceo was str15 now str12
  (40,456,053 bytes saved)

. *save_all_to_json
. save "`here'/temp/firm_events.dta", replace
file /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//temp/firm_events.dta saved

. log close
      name:  <unnamed>
       log:  /srv/sandbox/zavecz/dropbox_encrypted/darthmouth/expat-analysis//output/firm_panel.log
  log type:  text
 closed on:   8 Apr 2021, 14:24:34
--------------------------------------------------------------------------------------------------------------------------------------------------------------
