-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Documents/workspace/expat//output/firm_panel.log
  log type:  text
 opened on:   6 May 2022, 17:16:09

. 
. * keep only sample from balance-small - NOTE: had to restructure as we have t
> o keep foreign which is different in years - so no collapse this time
. use "`here'/temp/balance-small-clean.dta"

. by frame_id_numeric: egen firm_birth = min(year)

. by frame_id_numeric: egen firm_death = max(year)

. keep frame_id year firm_birth firm_death foreign

. tempfile sample

. save `sample', replace
(file /var/folders/f4/7drmhl1d5kj3wp1r33jvx32m0000gn/T//St03480.000001 not
    found)
file /var/folders/f4/7drmhl1d5kj3wp1r33jvx32m0000gn/T//St03480.000001 saved
    as .dta format

. 
. * count expats in do - asterisk used
. *use "`here'/input/ceo-panel/ceo-panel.dta", clear // QUESTION: what is owner
. *rename person_id manager_id
. *merge m:1 frame_id_numeric year using `sample', keep(match) nogen
. *bys frame_id_numeric: egen ever_expat = max(expat == 1)
. *bys frame_id_numeri: egen ever_foreign = max(foreign == 1)
. *egen firm_tag = tag(frame_id_numeric)
. *count if ever_expat == 1 & ever_foreign == 0 & firm_tag == 1
. 
. foreach type in ceo nceo {
  2.         use "`here'/input/`type'-panel/`type'-panel.dta", clear // QUESTIO
> N: what is owner
  3.         rename person_id manager_id
  4.         
.         *for descriptives (number of ceo-s and nceo-s in original data, numbe
> r of ceo and nceo job-spells in original data)
.         count
  5.         egen company_manager_id = group(frame_id_numeric manager_id)
  6.         codebook manager_id
  7.         codebook company_manager_id
  8.         drop company_manager_id
  9. 
.         * only keep sample firms
.         merge m:1 frame_id_numeric year using `sample', keep(match) nogen
 10.         count if first_year_of_firm == firm_birth // QUESTION: why not the
>  same? - same for the last year
 11. 
.         * balance panel
.         egen company_manager_id = group(frame_id manager_id)
 12.         xtset company_manager_id year
 13.         by company_manager_id: generate gap = year - year[_n-1] - 1
 14.         replace gap = 0 if missing(gap)
 15.         tabulate gap
 16. 
.         * fill in gap if only 1 or 2-year long
.         
.         *forval i = 1(1)2 {
.         *       sort company_manager_id year
.         *       expand 1 + `i' if gap == `i', generate(filled_in_`i') // FIXM
> E OR QUESTION: maybe second year as well
.         *       replace year = year - `i' if filled_in_`i'
.         *       tab filled_in_`i'
.         *}
.         
.         *bys company_manager_id year: replace year = year + _n - 1 if filled_
> in_2
.         
.         expand 1 + (gap == 1), generate(filled_in)
 17.         replace year = year - 1 if filled_in
 18. 
.         * create contiguous spells
.         xtset company_manager_id year
 19.         gen change = ceo != L.ceo // intuition: should be ok in both files
>  (possible FIXME)
 20.         bysort company_manager_id (year): gen job_spell = sum(change)
 21. 
.         * create job begin and end for each manager spell
.         bys frame_id_numeric manager_id job_spell: egen job_begin = min(year)
 22.         bys frame_id_numeric manager_id job_spell: egen job_end = max(year
> )
 23.         keep frame_id_numeric manager_id job_spell year job_begin job_end 
> expat founder insider outsider firm_birth foreign country_code
 24. 
.         * if first managers arrive in year 1, extrapolate to year 0 - DROP SP
> ELL
.         bys frame_id_numeric: egen first_cohort = min(job_begin)
 25.         replace job_begin = job_begin - 1 if (first_cohort == firm_birth +
>  1) & (job_begin == first_cohort)
 26. 
.         * NOTE: no collapse and expand --> there might be holes
.         sort frame_id_numeric manager_id year
 27.         count if frame_id_numeric == frame_id_numeric[_n-1] & manager_id =
> = manager_id[_n-1] & year != (year[_n-1] + 1)
 28. 
.         * expat before 1990
.         replace expat = 0 if job_begin < 1990
 29. 
.         ***********************
.         * time invariant vars and drop entire series of firms from sample *
.         ***********************
.                 by frame_id_numeric: egen first_year_expat = min(cond(expat =
> = 1, job_begin,.))
 30.                 by frame_id_numeric: egen first_year_foreign = min(cond(fo
> reign == 1, year,.))
 31.                 
.                 * which of the two happened first?
.                 generate manager_after_owner = first_year_expat - first_year_
> foreign
 32.                 * event time relative to that
.                 generate event_time = year - first_year_expat
 33.                 
.                 * if foreign manager arrives up to 2 years before 1 year late
> r than foreign owner, use foreign manager as arrival date. this is easier to 
> implement
.                 replace foreign = 1 if (manager_after_owner == -2) & inlist(e
> vent_time, 0, 1)
 34.                 replace foreign = 1 if (manager_after_owner == -1) & inlis
> t(event_time, 0)
 35.                 replace foreign = 0 if (manager_after_owner == +1) & inlis
> t(event_time, -1)
 36. 
.                 * QUESTION: order of deletions (may be fine as all are firm l
> evel)
.                 * drop firms where expat arrives earlier than 2 years before 
> owner
.                 drop if manager_after_owner < -2
 37.                 
.                 * ever expat and foreign created after foreign changes (drops
>  were firm level before so should not mess with ever variables)
.                 foreach X of var expat foreign {
 38.                         by frame_id_numeric: egen ever_`X'_`type' = max(`X
> '==1)
 39.                 }
 40. 
.                 * drop if there was an expat but was never foreign
.                 drop if ever_expat == 1 & ever_foreign == 0
 41.                 scalar dropped_do3_expat_firmyears = r(N_drop)
 42.                 
.                 * drop too many CEO-s - FIXME AND QUESTION: should be moved i
> n the next file where spells are limited - but there cannot be created withou
> t manager level data
.                 egen fp_tag = tag(frame_id_numeric manager_id) 
 43.                 by frame_id_numeric: egen n_ceo_ever = sum(fp_tag)
 44.                 drop if n_ceo > 15
 45.                 scalar dropped_too_many_CEOs = r(N_drop)
 46.                 drop fp_tag n_ceo_ever
 47.                 
.         * hired or fired ceo since last observed year of firm - * POSSIBLE FI
> XME: expat, owner, insider, outsider, founder - hire, fire combinations later
.         tempvar previous_year
 48.         generate previous_year = .
 49.         forval t = 1985/2018 {
 50.                 by frame_id_numeric: egen `previous_year' = max(cond(year 
> < `t', year, .))
 51.                 replace previous_year = `previous_year' if year == `t'
 52.                 drop `previous_year'
 53.         }
 54. 
.         by frame_id_numeric: egen first_year = min(year)
 55.         bys frame_id_numeric (year): generate byte hire = cond(first_year 
> == year, 1, (job_begin <= year) & (job_begin > previous_year))
 56. 
.         tempvar next_year
 57.         generate next_year = .
 58.         forval t = 1985/2018 {
 59.                 by frame_id_numeric: egen `next_year' = min(cond(year > `t
> ', year, .))
 60.                 replace next_year = `next_year' if year == `t'
 61.                 drop `next_year'
 62.         }
 63. 
.         gen byte fire = ((job_end >= year) & (job_end < next_year))
 64.         tabulate hire fire 
 65. 
.         gen hire_expat_`type' = hire * expat
 66.         gen fire_expat_`type' = fire * expat
 67. 
.         * number of expats and locals
.         bys frame_id_numeric year: egen n_expat_`type' = total(cond(expat, 1,
>  0)) // could be in collapse but local not
 68.         bys frame_id_numeric year: egen n_local_`type' = total(cond(!expat
> , 1, 0))
 69.         
.         * create firm-year data
.         * FIXME: country_code may be different within a firm-year
.         collapse (sum) n_founder_`type' = founder n_insider_`type' = insider 
> n_outsider_`type' = outsider (firstnm) n_expat_`type' n_local_`type' foreign_
> `type' = foreign ever_expat_`type' ever_foreign_`type' (count) n_`type' = exp
> at (max) hire_`type' = hire fire_`type' = fire hire_expat_`type' fire_expat_`
> type', by(frame_id_numeric year)
 70. 
.         * managers in first year not classified as new hires and in last year
>  not classified as fired
.         bys frame_id_numeric (year): replace hire_`type' = 0 if (_n==1)
 71.         bys frame_id_numeric (year): replace fire_`type' = 0 if (_n==_N)
 72.         bys frame_id_numeric (year): replace hire_expat_`type' = 0 if (_n=
> =1)
 73.         bys frame_id_numeric (year): replace fire_expat_`type' = 0 if (_n=
> =_N)
 74.         bys frame_id_numeric (year): gen ceo_spell_`type' = sum(hire_`type
> ' | fire_`type') + 1 // so that index start from 1
 75. 
.         * create dummies from numbers
.         foreach var in expat local founder insider outsider {
 76.                 gen has_`var'_`type' = (n_`var'_`type' > 0) & n_`var'_`typ
> e' != .
 77.         }
 78.         
.         tempfile manager_`type'
 79.         save `manager_`type''
 80. }
  12,891,181

-------------------------------------------------------------------------------
manager_id                                       group(manager_id manager_type)
-------------------------------------------------------------------------------

                  Type: Numeric (long)

                 Range: [1,1432995]                   Units: 1
         Unique values: 1,312,474                 Missing .: 0/12,891,181

                  Mean: 779155
             Std. dev.: 370644

           Percentiles:    10%       25%       50%       75%       90%
                        260098    502954    782515   1.1e+06   1.3e+06

-------------------------------------------------------------------------------
company_manager_id                           group(frame_id_numeric manager_id)
-------------------------------------------------------------------------------

                  Type: Numeric (float)

                 Range: [1,2008590]                   Units: 1
         Unique values: 2,008,590                 Missing .: 0/12,891,181

                  Mean: 973247
             Std. dev.: 599865

           Percentiles:    10%       25%       50%       75%       90%
                        167260    434736    997687   1.5e+06   1.9e+06
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           447,192  
    -----------------------------------------
  217,130

Panel variable: company_manager_id (unbalanced)
 Time variable: year, 1985 to 2018, but with gaps
         Delta: 1 unit
(69,559 missing values generated)
(69,559 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    440,316       98.46       98.46
          1 |      3,983        0.89       99.35
          2 |        971        0.22       99.57
          3 |        555        0.12       99.69
          4 |        372        0.08       99.78
          5 |        294        0.07       99.84
          6 |        191        0.04       99.89
          7 |        122        0.03       99.91
          8 |         94        0.02       99.93
          9 |         85        0.02       99.95
         10 |         47        0.01       99.96
         11 |         33        0.01       99.97
         12 |         31        0.01       99.98
         13 |         29        0.01       99.98
         14 |         17        0.00       99.99
         15 |         18        0.00       99.99
         16 |         13        0.00      100.00
         17 |          9        0.00      100.00
         18 |          3        0.00      100.00
         19 |          4        0.00      100.00
         20 |          2        0.00      100.00
         21 |          1        0.00      100.00
         22 |          1        0.00      100.00
         24 |          1        0.00      100.00
------------+-----------------------------------
      Total |    447,192      100.00
(3,983 observations created)
(3,983 real changes made)

Panel variable: company_manager_id (unbalanced)
 Time variable: year, 1985 to 2018, but with gaps
         Delta: 1 unit
(40,515 real changes made)
  2,893
(224 real changes made)
(383,785 missing values generated)
(382,353 missing values generated)
(398,543 missing values generated)
(383,785 missing values generated)
(36 real changes made)
(50 real changes made)
(16 real changes made)
(4,410 observations deleted)
(14,758 observations deleted)
(3,544 observations deleted)
(428,463 missing values generated)
(428,463 missing values generated)
(0 real changes made)
(386,744 missing values generated)
(1,764 real changes made)
(385,653 missing values generated)
(1,858 real changes made)
(384,147 missing values generated)
(1,971 real changes made)
(383,176 missing values generated)
(2,042 real changes made)
(380,488 missing values generated)
(2,220 real changes made)
(346,278 missing values generated)
(4,483 real changes made)
(310,355 missing values generated)
(6,512 real changes made)
(250,453 missing values generated)
(9,425 real changes made)
(207,354 missing values generated)
(11,159 real changes made)
(177,356 missing values generated)
(11,980 real changes made)
(156,919 missing values generated)
(12,371 real changes made)
(137,092 missing values generated)
(12,842 real changes made)
(116,856 missing values generated)
(13,562 real changes made)
(101,195 missing values generated)
(13,999 real changes made)
(89,923 missing values generated)
(14,230 real changes made)
(76,997 missing values generated)
(14,616 real changes made)
(65,946 missing values generated)
(15,011 real changes made)
(56,503 missing values generated)
(15,202 real changes made)
(49,539 missing values generated)
(15,540 real changes made)
(42,841 missing values generated)
(15,541 real changes made)
(36,958 missing values generated)
(15,626 real changes made)
(30,791 missing values generated)
(15,935 real changes made)
(26,086 missing values generated)
(16,416 real changes made)
(20,912 missing values generated)
(16,204 real changes made)
(16,852 missing values generated)
(16,040 real changes made)
(13,390 missing values generated)
(15,825 real changes made)
(10,051 missing values generated)
(15,670 real changes made)
(7,526 missing values generated)
(15,639 real changes made)
(5,088 missing values generated)
(15,327 real changes made)
(3,173 missing values generated)
(14,483 real changes made)
(1,774 missing values generated)
(14,492 real changes made)
(797 missing values generated)
(14,435 real changes made)
(222 missing values generated)
(13,954 real changes made)
(428,463 missing values generated)
(1,764 real changes made)
(1,859 real changes made)
(1,975 real changes made)
(2,044 real changes made)
(2,228 real changes made)
(19 missing values generated)
(4,556 real changes made)
(791 missing values generated)
(6,710 real changes made)
(4,009 missing values generated)
(9,611 real changes made)
(7,379 missing values generated)
(11,167 real changes made)
(11,117 missing values generated)
(12,103 real changes made)
(14,732 missing values generated)
(12,439 real changes made)
(18,739 missing values generated)
(12,918 real changes made)
(22,690 missing values generated)
(13,441 real changes made)
(26,529 missing values generated)
(14,030 real changes made)
(31,777 missing values generated)
(14,069 real changes made)
(36,484 missing values generated)
(14,552 real changes made)
(40,718 missing values generated)
(14,909 real changes made)
(46,203 missing values generated)
(15,170 real changes made)
(51,666 missing values generated)
(15,229 real changes made)
(58,837 missing values generated)
(15,465 real changes made)
(65,128 missing values generated)
(15,498 real changes made)
(72,142 missing values generated)
(15,549 real changes made)
(79,455 missing values generated)
(15,777 real changes made)
(88,250 missing values generated)
(16,157 real changes made)
(96,452 missing values generated)
(15,972 real changes made)
(104,442 missing values generated)
(15,834 real changes made)
(112,497 missing values generated)
(15,696 real changes made)
(119,056 missing values generated)
(15,557 real changes made)
(128,575 missing values generated)
(15,430 real changes made)
(145,548 missing values generated)
(14,652 real changes made)
(153,170 missing values generated)
(14,360 real changes made)
(161,021 missing values generated)
(14,306 real changes made)
(174,161 missing values generated)
(13,871 real changes made)
(428,463 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |   306,896     54,074 |   360,970 
         1 |    54,074     13,419 |    67,493 
-----------+----------------------+----------
     Total |   360,970     67,493 |   428,463 
(24,219 real changes made)
(24,219 real changes made)
(1157 real changes made)
(1314 real changes made)
file /var/folders/f4/7drmhl1d5kj3wp1r33jvx32m0000gn/T//St03480.000002 saved
    as .dta format
  288,033

-------------------------------------------------------------------------------
manager_id                                                    group(manager_id)
-------------------------------------------------------------------------------

                  Type: Numeric (long)

                 Range: [80,1429833]                  Units: 1
         Unique values: 58,121                    Missing .: 0/288,033

                  Mean: 752768
             Std. dev.: 371598

           Percentiles:    10%       25%       50%       75%       90%
                        230023    478933    743701   1.1e+06   1.3e+06

-------------------------------------------------------------------------------
company_manager_id                           group(frame_id_numeric manager_id)
-------------------------------------------------------------------------------

                  Type: Numeric (float)

                 Range: [1,68173]                     Units: 1
         Unique values: 68,173                    Missing .: 0/288,033

                  Mean: 31559.5
             Std. dev.: 19323.1

           Percentiles:     10%       25%       50%       75%       90%
                           5716     14672     30905     47630     59335
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           122,166  
    -----------------------------------------
  34,726

Panel variable: company_manager_id (unbalanced)
 Time variable: year, 1988 to 2018, but with gaps
         Delta: 1 unit
(28,464 missing values generated)
(28,464 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    120,322       98.49       98.49
          1 |        882        0.72       99.21
          2 |        334        0.27       99.49
          3 |        202        0.17       99.65
          4 |        118        0.10       99.75
          5 |         98        0.08       99.83
          6 |         57        0.05       99.87
          7 |         44        0.04       99.91
          8 |         33        0.03       99.94
          9 |         22        0.02       99.96
         10 |         20        0.02       99.97
         11 |          7        0.01       99.98
         12 |          7        0.01       99.98
         13 |          4        0.00       99.99
         14 |          3        0.00       99.99
         15 |          4        0.00       99.99
         16 |          3        0.00      100.00
         17 |          3        0.00      100.00
         19 |          1        0.00      100.00
         22 |          1        0.00      100.00
         24 |          1        0.00      100.00
------------+-----------------------------------
      Total |    122,166      100.00
(882 observations created)
(882 real changes made)

Panel variable: company_manager_id (unbalanced)
 Time variable: year, 1988 to 2018, but with gaps
         Delta: 1 unit
(8,162 real changes made)
  962
(0 real changes made)
(90,038 missing values generated)
(94,486 missing values generated)
(103,587 missing values generated)
(90,038 missing values generated)
(28 real changes made)
(18 real changes made)
(95 real changes made)
(2,487 observations deleted)
(13,549 observations deleted)
(38,532 observations deleted)
(68,480 missing values generated)
(68,480 missing values generated)
(0 real changes made)
(68,480 missing values generated)
(0 real changes made)
(68,480 missing values generated)
(0 real changes made)
(68,480 missing values generated)
(0 real changes made)
(59,780 missing values generated)
(1,018 real changes made)
(59,220 missing values generated)
(1,058 real changes made)
(55,684 missing values generated)
(1,513 real changes made)
(52,552 missing values generated)
(1,703 real changes made)
(48,804 missing values generated)
(1,312 real changes made)
(42,996 missing values generated)
(1,658 real changes made)
(38,942 missing values generated)
(1,870 real changes made)
(37,125 missing values generated)
(1,838 real changes made)
(36,193 missing values generated)
(1,683 real changes made)
(35,017 missing values generated)
(1,596 real changes made)
(33,910 missing values generated)
(1,517 real changes made)
(31,242 missing values generated)
(1,540 real changes made)
(28,590 missing values generated)
(1,597 real changes made)
(26,343 missing values generated)
(1,683 real changes made)
(24,721 missing values generated)
(1,759 real changes made)
(22,749 missing values generated)
(1,991 real changes made)
(16,642 missing values generated)
(2,507 real changes made)
(13,520 missing values generated)
(2,554 real changes made)
(11,263 missing values generated)
(2,395 real changes made)
(9,444 missing values generated)
(2,466 real changes made)
(7,627 missing values generated)
(2,660 real changes made)
(6,058 missing values generated)
(2,674 real changes made)
(4,884 missing values generated)
(2,470 real changes made)
(3,754 missing values generated)
(2,524 real changes made)
(2,953 missing values generated)
(2,503 real changes made)
(2,157 missing values generated)
(2,545 real changes made)
(1,372 missing values generated)
(2,130 real changes made)
(830 missing values generated)
(2,107 real changes made)
(337 missing values generated)
(2,163 real changes made)
(103 missing values generated)
(2,097 real changes made)
(68,480 missing values generated)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(1,018 real changes made)
(32 missing values generated)
(1,060 real changes made)
(109 missing values generated)
(1,552 real changes made)
(785 missing values generated)
(1,807 real changes made)
(3,748 missing values generated)
(1,427 real changes made)
(4,488 missing values generated)
(1,688 real changes made)
(5,285 missing values generated)
(1,897 real changes made)
(5,894 missing values generated)
(1,900 real changes made)
(6,927 missing values generated)
(1,767 real changes made)
(8,155 missing values generated)
(1,621 real changes made)
(9,139 missing values generated)
(1,581 real changes made)
(10,483 missing values generated)
(1,611 real changes made)
(11,600 missing values generated)
(1,625 real changes made)
(12,714 missing values generated)
(1,707 real changes made)
(13,754 missing values generated)
(1,722 real changes made)
(16,509 missing values generated)
(1,669 real changes made)
(19,066 missing values generated)
(2,412 real changes made)
(20,709 missing values generated)
(2,597 real changes made)
(22,666 missing values generated)
(2,538 real changes made)
(24,305 missing values generated)
(2,375 real changes made)
(25,617 missing values generated)
(2,522 real changes made)
(27,778 missing values generated)
(2,622 real changes made)
(30,769 missing values generated)
(2,498 real changes made)
(32,315 missing values generated)
(2,444 real changes made)
(34,013 missing values generated)
(2,494 real changes made)
(35,387 missing values generated)
(2,476 real changes made)
(41,402 missing values generated)
(2,079 real changes made)
(43,533 missing values generated)
(2,048 real changes made)
(45,221 missing values generated)
(2,102 real changes made)
(47,183 missing values generated)
(2,044 real changes made)
(68,480 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |    39,894     12,544 |    52,438 
         1 |    12,544      3,498 |    16,042 
-----------+----------------------+----------
     Total |    52,438     16,042 |    68,480 
(4,950 real changes made)
(4,950 real changes made)
(139 real changes made)
(173 real changes made)
file /var/folders/f4/7drmhl1d5kj3wp1r33jvx32m0000gn/T//St03480.000003 saved
    as .dta format

. 
. use `manager_ceo'

. * merge on manager_countries
. merge 1:1 frame_id_numeric year using "`here'/temp/manager_country.dta", keep
> (master match) nogen

    Result                      Number of obs
    -----------------------------------------
    Not matched                       289,395
        from master                   289,395  
        from using                          0  

    Matched                            17,125  
    -----------------------------------------

. tabulate has_expat_ceo if missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    288,689       99.76       99.76
          1 |        706        0.24      100.00
------------+-----------------------------------
      Total |    289,395      100.00

. tabulate has_expat_ceo if !missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        351        2.05        2.05
          1 |     16,774       97.95      100.00
------------+-----------------------------------
      Total |     17,125      100.00

. rename country_list country_all_ceo

. rename language_list lang_all_ceo

. 
. merge 1:1 frame_id_numeric year using `manager_nceo', keep (1 3) nogen // 1, 
> only 1 and 3 to not have missing cases in tab has_expat_ceo, missing in analy
> sis-sample 2, merge here to makes sure to have only ceo-s when countries are 
> merged

    Result                      Number of obs
    -----------------------------------------
    Not matched                       278,371
        from master                   278,371  
        from using                          0  

    Matched                            28,149  
    -----------------------------------------

. 
. count
  306,520

. compress
  variable year was float now int
  variable n_expat_ceo was float now byte
  variable n_local_ceo was float now byte
  variable ever_expat_ceo was float now byte
  variable ever_foreign_ceo was float now byte
  variable n_ceo was long now byte
  variable hire_expat_ceo was float now byte
  variable fire_expat_ceo was float now byte
  variable ceo_spell_ceo was float now byte
  variable has_expat_ceo was float now byte
  variable has_local_ceo was float now byte
  variable has_founder_ceo was float now byte
  variable has_insider_ceo was float now byte
  variable has_outsider_ceo was float now byte
  variable n_expat_nceo was float now byte
  variable n_local_nceo was float now byte
  variable ever_expat_nceo was float now byte
  variable ever_foreign_nceo was float now byte
  variable n_nceo was long now byte
  variable hire_expat_nceo was float now byte
  variable fire_expat_nceo was float now byte
  variable ceo_spell_nceo was float now byte
  variable has_expat_nceo was float now byte
  variable has_local_nceo was float now byte
  variable has_founder_nceo was float now byte
  variable has_insider_nceo was float now byte
  variable has_outsider_nceo was float now byte
  variable n_founder_ceo was double now byte
  variable n_insider_ceo was double now byte
  variable n_outsider_ceo was double now byte
  variable n_founder_nceo was double now byte
  variable n_insider_nceo was double now byte
  variable n_outsider_nceo was double now byte
  variable country_all_ceo was str15 now str12
  (38,315,000 bytes saved)

. *save_all_to_json
. save "`here'/temp/firm_events.dta", replace
file /Users/koren/Documents/workspace/expat//temp/firm_events.dta saved

. log close
      name:  <unnamed>
       log:  /Users/koren/Documents/workspace/expat//output/firm_panel.log
  log type:  text
 closed on:   6 May 2022, 17:17:00
-------------------------------------------------------------------------------
