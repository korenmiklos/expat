-----------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Documents/workspace/expat//output/event_studies.log
  log type:  text
 opened on:  29 Sep 2021, 21:25:56

. 
. local pre 3

. local post 8

. 
. use "`here'/temp/analysis_sample.dta", clear

. keep if ever_foreign
(243,388 observations deleted)

. 
. rename ever_foreign ef

. rename ever_foreign_hire efh

. rename has_expat_ceo has_expat

. 
. count
  24,010

. count if ef & time_foreign <= 5
  15,755

. 
. generate foreign_hire_only = foreign_hire & !has_expat

. 
. foreach var in foreign_hire_only has_expat {
  2.     foreach y in lnQL lnK lnL exporter lnQ {
  3.         * do loop bc event_study_plot cannot yet do multiple equations 
.                 attgt `y' if efh, treatment(`var') aggregate(e) pre(`pre') post(`post') notyet limitcontrol(for
> eign == 0)
  4.                 count if e(sample) == 1
  5.                 eststo mh`var', title("efh `var'")
  6.         do "`here'/code/util/event_study_plot.do"
  7.         graph export "`here'/output/figure/event_study/`var'_`y'.png", replace
  8.     }
  9. }
       panel variable:  frame_id_numeric (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
Generating weights...

                          __000001
-------------------------------------------------------------
      Percentiles      Smallest
 1%            1              1
 5%            1              1
10%            1              1       Obs              24,010
25%            1              1       Sum of Wgt.      24,010

50%            1                      Mean                  1
                        Largest       Std. Dev.             0
75%            1              1
90%            1              1       Variance              0
95%            1              1       Skewness              .
99%            1              1       Kurtosis              .
Estimating lnQL: event_m3
Estimating lnQL: event_m2
Estimating lnQL: event_m1
Estimating lnQL: event_1
Estimating lnQL: event_2
Estimating lnQL: event_3
Estimating lnQL: event_4
Estimating lnQL: event_5
Estimating lnQL: event_6
Estimating lnQL: event_7
Estimating lnQL: event_8
Callaway Sant'Anna (2021)

                                                Number of obs     =      7,551

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    event_m3 |   .0295281   .0468162     0.63   0.528    -.0622299     .121286
    event_m2 |   .0340682    .040323     0.84   0.398    -.0449635    .1130999
    event_m1 |   .0408249    .027261     1.50   0.134    -.0126056    .0942554
     event_1 |   .0609539   .0368571     1.65   0.098    -.0112847    .1331926
     event_2 |   .0987463   .0452624     2.18   0.029     .0100336    .1874589
     event_3 |   .0976511   .0526097     1.86   0.063     -.005462    .2007641
     event_4 |   .0801137   .0638955     1.25   0.210    -.0451191    .2053466
     event_5 |   .1568872     .06935     2.26   0.024     .0209638    .2928106
     event_6 |   .1701854   .0768758     2.21   0.027     .0195116    .3208592
     event_7 |   .1803601   .0836042     2.16   0.031     .0164988    .3442214
     event_8 |   .2319142   .0977783     2.37   0.018     .0402723    .4235561
------------------------------------------------------------------------------
  7,551

. * assume attgt estimate with aggregate(e) option has been recently produced
. preserve

. clear

. 
. local Z 1.96

. 
. local T = colsof(e(b)) 

. local T1 = `T' + 1

. set obs `T1'
number of observations (_N) was 0, now 12

. 
. generate b = 0

. generate t = 0

. generate upper = 0

. generate lower = 0

. 
. local colnames : colnames e(b)

. local outcome : coleq e(b)

. local outcome : word 1 of `outcome'

. local treatment : word 3 of `e(cmdline)'

. 
. forvalues i = 1/`T' {
  2.     * get event time index
.     local name : word `i' of `colnames'
  3.     replace t = real(subinstr(subinstr("`name'", "event_", "", .), "m", "-", .)) in `i'
  4.     * get estimates from regression
.     replace b = e(b)[1, `i'] in `i'
  5.     replace upper = b + `Z' * sqrt(e(V)[`i', `i']) in `i'
  6.     replace lower = b - `Z' * sqrt(e(V)[`i', `i']) in `i'
  7. }
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

. sort t

. 
. twoway (rarea lower upper t, fcolor(blue%30) lwidth(none)) ///
>     (line b t, lcolor(blue)), ///
>     ytitle("`outcome'") xtitle("Year of `treatment'") ///
>     graphregion(color(white)) legend(off)

. 
. list

     +--------------------------------------+
     |        b    t      upper       lower |
     |--------------------------------------|
  1. | .0295281   -3   .1212877   -.0622316 |
  2. | .0340682   -2   .1131013   -.0449649 |
  3. | .0408249   -1   .0942564   -.0126066 |
  4. |        0    0          0           0 |
  5. | .0609539    1   .1331939   -.0112861 |
     |--------------------------------------|
  6. | .0987463    2   .1874606     .010032 |
  7. |  .097651    3    .200766   -.0054639 |
  8. | .0801137    4   .2053488   -.0451214 |
  9. | .1568872    5   .2928131    .0209613 |
 10. | .1701854    6    .320862    .0195088 |
     |--------------------------------------|
 11. | .1803601    7   .3442244    .0164957 |
 12. | .2319142    8   .4235596    .0402688 |
     +--------------------------------------+

. restore

. 
end of do-file
(file /Users/koren/Documents/workspace/expat//output/figure/event_study/foreign_hire_only_lnQL.png written in PNG
>  format)
       panel variable:  frame_id_numeric (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
Generating weights...

                          __000001
-------------------------------------------------------------
      Percentiles      Smallest
 1%            1              1
 5%            1              1
10%            1              1       Obs              24,010
25%            1              1       Sum of Wgt.      24,010

50%            1                      Mean                  1
                        Largest       Std. Dev.             0
75%            1              1
90%            1              1       Variance              0
95%            1              1       Skewness              .
99%            1              1       Kurtosis              .
Estimating lnK: event_m3
Estimating lnK: event_m2
Estimating lnK: event_m1
Estimating lnK: event_1
Estimating lnK: event_2
Estimating lnK: event_3
Estimating lnK: event_4
Estimating lnK: event_5
Estimating lnK: event_6
Estimating lnK: event_7
Estimating lnK: event_8
Callaway Sant'Anna (2021)

                                                Number of obs     =      7,551

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    event_m3 |   .2229073    .064913     3.43   0.001     .0956802    .3501343
    event_m2 |   .1906841   .0560457     3.40   0.001     .0808367    .3005316
    event_m1 |   .0573704   .0460578     1.25   0.213    -.0329012     .147642
     event_1 |  -.0840246   .0512391    -1.64   0.101    -.1844514    .0164023
     event_2 |  -.1391781   .0616673    -2.26   0.024    -.2600437   -.0183125
     event_3 |  -.2693636   .0896957    -3.00   0.003     -.445164   -.0935633
     event_4 |  -.3974947    .106588    -3.73   0.000    -.6064034    -.188586
     event_5 |  -.4786341   .1306561    -3.66   0.000    -.7347153   -.2225529
     event_6 |  -.5426375   .1376024    -3.94   0.000    -.8123332   -.2729418
     event_7 |  -.4291322   .1351629    -3.17   0.001    -.6940467   -.1642178
     event_8 |  -.4373457    .149953    -2.92   0.004    -.7312481   -.1434432
------------------------------------------------------------------------------
  7,551

. * assume attgt estimate with aggregate(e) option has been recently produced
. preserve

. clear

. 
. local Z 1.96

. 
. local T = colsof(e(b)) 

. local T1 = `T' + 1

. set obs `T1'
number of observations (_N) was 0, now 12

. 
. generate b = 0

. generate t = 0

. generate upper = 0

. generate lower = 0

. 
. local colnames : colnames e(b)

. local outcome : coleq e(b)

. local outcome : word 1 of `outcome'

. local treatment : word 3 of `e(cmdline)'

. 
. forvalues i = 1/`T' {
  2.     * get event time index
.     local name : word `i' of `colnames'
  3.     replace t = real(subinstr(subinstr("`name'", "event_", "", .), "m", "-", .)) in `i'
  4.     * get estimates from regression
.     replace b = e(b)[1, `i'] in `i'
  5.     replace upper = b + `Z' * sqrt(e(V)[`i', `i']) in `i'
  6.     replace lower = b - `Z' * sqrt(e(V)[`i', `i']) in `i'
  7. }
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

. sort t

. 
. twoway (rarea lower upper t, fcolor(blue%30) lwidth(none)) ///
>     (line b t, lcolor(blue)), ///
>     ytitle("`outcome'") xtitle("Year of `treatment'") ///
>     graphregion(color(white)) legend(off)

. 
. list

     +----------------------------------------+
     |         b    t       upper       lower |
     |----------------------------------------|
  1. |  .2229073   -3    .3501367    .0956778 |
  2. |  .1906841   -2    .3005336    .0808346 |
  3. |  .0573704   -1    .1476437   -.0329029 |
  4. |         0    0           0           0 |
  5. | -.0840246    1    .0164041   -.1844533 |
     |----------------------------------------|
  6. | -.1391781    2   -.0183102   -.2600459 |
  7. | -.2693636    3     -.09356   -.4451672 |
  8. | -.3974947    4   -.1885822   -.6064073 |
  9. | -.4786341    5   -.2225482     -.73472 |
 10. | -.5426375    6   -.2729369   -.8123382 |
     |----------------------------------------|
 11. | -.4291323    7    -.164213   -.6940516 |
 12. | -.4373457    8   -.1434378   -.7312535 |
     +----------------------------------------+

. restore

. 
end of do-file
(file /Users/koren/Documents/workspace/expat//output/figure/event_study/foreign_hire_only_lnK.png written in PNG 
> format)
       panel variable:  frame_id_numeric (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
Generating weights...

                          __000001
-------------------------------------------------------------
      Percentiles      Smallest
 1%            1              1
 5%            1              1
10%            1              1       Obs              24,010
25%            1              1       Sum of Wgt.      24,010

50%            1                      Mean                  1
                        Largest       Std. Dev.             0
75%            1              1
90%            1              1       Variance              0
95%            1              1       Skewness              .
99%            1              1       Kurtosis              .
Estimating lnL: event_m3
Estimating lnL: event_m2
Estimating lnL: event_m1
Estimating lnL: event_1
Estimating lnL: event_2
Estimating lnL: event_3
Estimating lnL: event_4
Estimating lnL: event_5
Estimating lnL: event_6
Estimating lnL: event_7
Estimating lnL: event_8
Callaway Sant'Anna (2021)

                                                Number of obs     =      7,551

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    event_m3 |   .0651824   .0388512     1.68   0.093    -.0109646    .1413294
    event_m2 |   .0116043   .0334227     0.35   0.728     -.053903    .0771116
    event_m1 |  -.0101803   .0247409    -0.41   0.681    -.0586715    .0383109
     event_1 |  -.0965287   .0397774    -2.43   0.015    -.1744909   -.0185665
     event_2 |  -.0950718   .0527043    -1.80   0.071    -.1983704    .0082268
     event_3 |  -.1330464   .0682592    -1.95   0.051     -.266832    .0007393
     event_4 |  -.1617916   .0818409    -1.98   0.048    -.3221968   -.0013864
     event_5 |  -.1458586   .0955469    -1.53   0.127     -.333127    .0414098
     event_6 |  -.2004945   .1054582    -1.90   0.057    -.4071889    .0061998
     event_7 |  -.0919341   .1129957    -0.81   0.416    -.3134015    .1295334
     event_8 |  -.0826833   .1305424    -0.63   0.526    -.3385417    .1731751
------------------------------------------------------------------------------
  7,551

. * assume attgt estimate with aggregate(e) option has been recently produced
. preserve

. clear

. 
. local Z 1.96

. 
. local T = colsof(e(b)) 

. local T1 = `T' + 1

. set obs `T1'
number of observations (_N) was 0, now 12

. 
. generate b = 0

. generate t = 0

. generate upper = 0

. generate lower = 0

. 
. local colnames : colnames e(b)

. local outcome : coleq e(b)

. local outcome : word 1 of `outcome'

. local treatment : word 3 of `e(cmdline)'

. 
. forvalues i = 1/`T' {
  2.     * get event time index
.     local name : word `i' of `colnames'
  3.     replace t = real(subinstr(subinstr("`name'", "event_", "", .), "m", "-", .)) in `i'
  4.     * get estimates from regression
.     replace b = e(b)[1, `i'] in `i'
  5.     replace upper = b + `Z' * sqrt(e(V)[`i', `i']) in `i'
  6.     replace lower = b - `Z' * sqrt(e(V)[`i', `i']) in `i'
  7. }
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

. sort t

. 
. twoway (rarea lower upper t, fcolor(blue%30) lwidth(none)) ///
>     (line b t, lcolor(blue)), ///
>     ytitle("`outcome'") xtitle("Year of `treatment'") ///
>     graphregion(color(white)) legend(off)

. 
. list

     +----------------------------------------+
     |         b    t       upper       lower |
     |----------------------------------------|
  1. |  .0651824   -3    .1413308    -.010966 |
  2. |  .0116043   -2    .0771128   -.0539043 |
  3. | -.0101803   -1    .0383118   -.0586724 |
  4. |         0    0           0           0 |
  5. | -.0965287    1    -.018565   -.1744924 |
     |----------------------------------------|
  6. | -.0950718    2    .0082287   -.1983723 |
  7. | -.1330464    3    .0007418   -.2668345 |
  8. | -.1617916    4   -.0013835   -.3221997 |
  9. | -.1458586    5    .0414133   -.3331304 |
 10. | -.2004945    6    .0062036   -.4071927 |
     |----------------------------------------|
 11. |  -.091934    7    .1295375   -.3134056 |
 12. | -.0826833    8    .1731798   -.3385464 |
     +----------------------------------------+

. restore

. 
end of do-file
(file /Users/koren/Documents/workspace/expat//output/figure/event_study/foreign_hire_only_lnL.png written in PNG 
> format)
       panel variable:  frame_id_numeric (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
Generating weights...

                          __000001
-------------------------------------------------------------
      Percentiles      Smallest
 1%            1              1
 5%            1              1
10%            1              1       Obs              24,010
25%            1              1       Sum of Wgt.      24,010

50%            1                      Mean                  1
                        Largest       Std. Dev.             0
75%            1              1
90%            1              1       Variance              0
95%            1              1       Skewness              .
99%            1              1       Kurtosis              .
Estimating exporter: event_m3
Estimating exporter: event_m2
Estimating exporter: event_m1
Estimating exporter: event_1
Estimating exporter: event_2
Estimating exporter: event_3
Estimating exporter: event_4
Estimating exporter: event_5
Estimating exporter: event_6
Estimating exporter: event_7
Estimating exporter: event_8
Callaway Sant'Anna (2021)

                                                Number of obs     =      7,551

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    event_m3 |  -.0360999   .0234318    -1.54   0.123    -.0820254    .0098255
    event_m2 |  -.0217818   .0193062    -1.13   0.259    -.0596212    .0160577
    event_m1 |  -.0099951   .0163623    -0.61   0.541    -.0420645    .0220744
     event_1 |    .008701   .0153409     0.57   0.571    -.0213666    .0387686
     event_2 |  -.0048114   .0212271    -0.23   0.821    -.0464158    .0367929
     event_3 |   .0117002   .0240086     0.49   0.626    -.0353559    .0587562
     event_4 |  -.0192565   .0316026    -0.61   0.542    -.0811964    .0426833
     event_5 |  -.0058122   .0361731    -0.16   0.872    -.0767102    .0650857
     event_6 |  -.0139831   .0380594    -0.37   0.713    -.0885781     .060612
     event_7 |  -.0254172   .0455899    -0.56   0.577    -.1147718    .0639375
     event_8 |  -.0249719   .0462835    -0.54   0.590    -.1156859     .065742
------------------------------------------------------------------------------
  7,551

. * assume attgt estimate with aggregate(e) option has been recently produced
. preserve

. clear

. 
. local Z 1.96

. 
. local T = colsof(e(b)) 

. local T1 = `T' + 1

. set obs `T1'
number of observations (_N) was 0, now 12

. 
. generate b = 0

. generate t = 0

. generate upper = 0

. generate lower = 0

. 
. local colnames : colnames e(b)

. local outcome : coleq e(b)

. local outcome : word 1 of `outcome'

. local treatment : word 3 of `e(cmdline)'

. 
. forvalues i = 1/`T' {
  2.     * get event time index
.     local name : word `i' of `colnames'
  3.     replace t = real(subinstr(subinstr("`name'", "event_", "", .), "m", "-", .)) in `i'
  4.     * get estimates from regression
.     replace b = e(b)[1, `i'] in `i'
  5.     replace upper = b + `Z' * sqrt(e(V)[`i', `i']) in `i'
  6.     replace lower = b - `Z' * sqrt(e(V)[`i', `i']) in `i'
  7. }
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

. sort t

. 
. twoway (rarea lower upper t, fcolor(blue%30) lwidth(none)) ///
>     (line b t, lcolor(blue)), ///
>     ytitle("`outcome'") xtitle("Year of `treatment'") ///
>     graphregion(color(white)) legend(off)

. 
. list

     +---------------------------------------+
     |         b    t      upper       lower |
     |---------------------------------------|
  1. | -.0360999   -3   .0098264   -.0820262 |
  2. | -.0217818   -2   .0160584   -.0596219 |
  3. | -.0099951   -1    .022075   -.0420651 |
  4. |         0    0          0           0 |
  5. |   .008701    1   .0387692   -.0213671 |
     |---------------------------------------|
  6. | -.0048114    2   .0367937   -.0464165 |
  7. |  .0117002    3   .0587571   -.0353567 |
  8. | -.0192565    4   .0426845   -.0811975 |
  9. | -.0058122    5   .0650871   -.0767115 |
 10. | -.0139831    6   .0606134   -.0885795 |
     |---------------------------------------|
 11. | -.0254172    7   .0639391   -.1147734 |
 12. | -.0249719    8   .0657437   -.1156876 |
     +---------------------------------------+

. restore

. 
end of do-file
(file /Users/koren/Documents/workspace/expat//output/figure/event_study/foreign_hire_only_exporter.png written in
>  PNG format)
       panel variable:  frame_id_numeric (unbalanced)
        time variable:  year, 1988 to 2018, but with gaps
                delta:  1 unit
Generating weights...
--Break--
r(1);

end of do-file

--Break--
r(1);

