----------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Google Drive/Research/expat/research_design/talk/output/
> estimate_heterogeneity.log
  log type:  text
 opened on:   5 Dec 2018, 07:45:31

. 
. 
. use temp/analysis_sample

. 
. *Dinamika
. scalar Tbefore = 4

. scalar Tduring = 6

. scalar Tafter = 4

. 
. gen byte analysis_window = (tenure>=-Tbefore-1)&(year-first_exit_year<=Tafter)

. 
. global sample_baseline (analysis_window==1)

. global sample_manufacturing $sample_baseline & (manufacturing==1)

. global sample_acquisitions $sample_baseline & (greenfield==0)

. global sample_1990s $sample_acquisitions & (enter_year>=1994 & enter_year<=1999)

. global sample_2000s $sample_acquisitions & (enter_year>=2000)

. global sample_ever_foreign $sample_acquisitions & (ever_foreign==1)

. 
. global samples baseline acquisitions

. 
. global outcomes lnL lnKL lnQL exporter

. global controls foreign i.ind_year i.age_cat

. 
. label var lnL "Employment (log)"

. label var lnKL "Capital per worker (log)"

. label var lnQL "Revenue per worker (log)"

. label var exporter "Firm is an exporter (dummy)"

. 
. egen person_tag = tag(frame_id manager_id)

. egen N = sum(person_tag), by(frame_id)

. gen inverse_weight = 1/N

. 
. * verify founders are not in analysis sample
. foreach X of var during* after* {
  2.         replace `X'=0 if founder==1
  3. }
(0 real changes made)
(132,464 real changes made)
(55,048 real changes made)
(73,335 real changes made)
(81,604 real changes made)
(46,715 real changes made)
(88,449 real changes made)
(96,285 real changes made)
(94,584 real changes made)
(20,057 real changes made)
(10,166 real changes made)
(13,405 real changes made)
(13,063 real changes made)
(15,361 real changes made)
(11,994 real changes made)
(13,939 real changes made)
(17,025 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(70,373 real changes made)
(35,951 real changes made)
(37,925 real changes made)
(38,899 real changes made)
(31,710 real changes made)
(44,472 real changes made)
(52,990 real changes made)
(32,396 real changes made)
(32,892 real changes made)
(19,164 real changes made)
(22,477 real changes made)
(19,915 real changes made)
(25,211 real changes made)
(20,097 real changes made)
(27,732 real changes made)
(15,077 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. 
. do est_`1'

. xtreg exporter during after during_expat after_expat $controls if $sample_acquis
> itions & H_exporter==0 [aw=inverse_weight], i(firm_person ) fe vce(cluster id)

Fixed-effects (within) regression               Number of obs      =    194426
Group variable: firm_person                     Number of groups   =     21812

R-sq:  within  = 0.0441                         Obs per group: min =         1
       between = 0.0711                                        avg =       8.9
       overall = 0.0580                                        max =        25

                                                F(78,8992)         =     14.01
corr(u_i, Xb)  = 0.0320                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 8,993 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      during |    .029348   .0041619     7.05   0.000     .0211897    .0375062
       after |   .0323605   .0070601     4.58   0.000      .018521       .0462
during_expat |   .1156187   .0252625     4.58   0.000     .0660984    .1651391
 after_expat |    .130164    .033702     3.86   0.000     .0641003    .1962276
     foreign |   .0366421   .0189021     1.94   0.053    -.0004103    .0736945
             |
    ind_year |
          2  |  -.0215265   .0119756    -1.80   0.072    -.0450014    .0019484
          3  |  -.0302479   .0142472    -2.12   0.034    -.0581757   -.0023202
          4  |  -.0270363   .0159583    -1.69   0.090    -.0583183    .0042456
          5  |  -.0179467   .0183796    -0.98   0.329    -.0539749    .0180814
          6  |  -.0199023   .0204048    -0.98   0.329    -.0599003    .0200957
          7  |  -.0170459   .0228639    -0.75   0.456    -.0618643    .0277726
          8  |  -.0206683   .0251853    -0.82   0.412    -.0700372    .0287006
          9  |  -.0136565   .0279572    -0.49   0.625    -.0684589    .0411459
         10  |  -.0204713   .0305723    -0.67   0.503    -.0804001    .0394575
         11  |  -.0177347   .0333826    -0.53   0.595    -.0831721    .0477028
         12  |  -.0200969   .0358839    -0.56   0.575    -.0904376    .0502439
         13  |  -.0100817   .0386616    -0.26   0.794    -.0858672    .0657038
         14  |    .006818   .0416754     0.16   0.870    -.0748753    .0885113
         15  |   .0231823   .0445693     0.52   0.603    -.0641837    .1105482
         16  |   .0486745   .0475259     1.02   0.306     -.044487    .1418361
         17  |   .0622286   .0504362     1.23   0.217    -.0366378    .1610949
         18  |    .069372   .0536104     1.29   0.196    -.0357166    .1744605
         19  |    .083715   .0566813     1.48   0.140    -.0273932    .1948232
         20  |   .0946589    .059553     1.59   0.112    -.0220785    .2113963
         21  |   .1014859   .0623351     1.63   0.104    -.0207052    .2236769
         22  |   .1099606    .065047     1.69   0.091    -.0175463    .2374676
         23  |   .1182389   .0677523     1.75   0.081    -.0145711    .2510489
         24  |   .0349977   .0704245     0.50   0.619    -.1030503    .1730457
         25  |   .0175983   .0732929     0.24   0.810    -.1260726    .1612691
         26  |  -.0150383   .0308933    -0.49   0.626    -.0755961    .0455195
         27  |  -.0356175   .0269087    -1.32   0.186    -.0883647    .0171297
         28  |   -.020241   .0259828    -0.78   0.436    -.0711732    .0306913
         29  |  -.0078365   .0261581    -0.30   0.765    -.0591124    .0434395
         30  |   .0023518   .0268984     0.09   0.930    -.0503751    .0550787
         31  |  -.0130744   .0275113    -0.48   0.635    -.0670028    .0408541
         32  |   .0080277   .0292427     0.27   0.784    -.0492947    .0653501
         33  |   .0118496   .0309904     0.38   0.702    -.0488986    .0725979
         34  |   .0133623   .0327576     0.41   0.683    -.0508501    .0775747
         35  |   .0255028   .0349377     0.73   0.465     -.042983    .0939886
         36  |   .0443519   .0373917     1.19   0.236    -.0289444    .1176482
         37  |   .0394972   .0395797     1.00   0.318     -.038088    .1170824
         38  |   .0391041   .0416484     0.94   0.348    -.0425363    .1207445
         39  |   .0625241   .0446337     1.40   0.161    -.0249681    .1500163
         40  |   .0642604   .0472278     1.36   0.174    -.0283167    .1568376
         41  |   .1072469   .0500133     2.14   0.032     .0092094    .2052843
         42  |   .1229349   .0527986     2.33   0.020     .0194376    .2264322
         43  |   .1337216   .0558755     2.39   0.017     .0241929    .2432504
         44  |   .1831663   .0591673     3.10   0.002     .0671849    .2991477
         45  |   .2041191   .0620123     3.29   0.001     .0825608    .3256774
         46  |   .2104671   .0648587     3.25   0.001     .0833292    .3376049
         47  |   .2378555   .0676025     3.52   0.000     .1053392    .3703719
         48  |   .2396743   .0696704     3.44   0.001     .1031044    .3762441
         49  |   .0459309   .0713801     0.64   0.520    -.0939903    .1858521
         50  |   .0136808    .074285     0.18   0.854    -.1319347    .1592963
             |
     age_cat |
          1  |   .0183258   .0066025     2.78   0.006     .0053835    .0312682
          2  |   .0213681    .008688     2.46   0.014     .0043377    .0383985
          3  |   .0253856   .0110863     2.29   0.022     .0036539    .0471173
          4  |   .0353827   .0138182     2.56   0.010     .0082959    .0624696
          5  |   .0389219   .0166029     2.34   0.019     .0063765    .0714673
          6  |   .0427689   .0194784     2.20   0.028     .0045868    .0809511
          7  |   .0382917   .0224005     1.71   0.087    -.0056184    .0822018
          8  |   .0495796    .025447     1.95   0.051    -.0003024    .0994615
          9  |   .0419919   .0284613     1.48   0.140    -.0137987    .0977824
         10  |   .0435612   .0313857     1.39   0.165     -.017962    .1050844
         11  |   .0470952   .0343921     1.37   0.171    -.0203212    .1145116
         12  |   .0463644   .0372839     1.24   0.214    -.0267207    .1194494
         13  |   .0502936    .040465     1.24   0.214    -.0290269    .1296142
         14  |   .0544513   .0435783     1.25   0.212    -.0309721    .1398748
         15  |   .0515336   .0465057     1.11   0.268    -.0396281    .1426954
         16  |   .0597942   .0498314     1.20   0.230    -.0378867    .1574751
         17  |   .0510624   .0528758     0.97   0.334    -.0525862     .154711
         18  |   .0582669   .0561319     1.04   0.299    -.0517644    .1682981
         19  |   .0497763   .0597411     0.83   0.405    -.0673298    .1668825
         20  |    .041404   .0651406     0.64   0.525    -.0862864    .1690943
         25  |   .0276479   .0751313     0.37   0.713    -.1196267    .1749224
         30  |   .1053023   .1141612     0.92   0.356    -.1184798    .3290843
         40  |   .0428732    .134434     0.32   0.750     -.220648    .3063944
         50  |   .0508765   .1390747     0.37   0.715    -.2217415    .3234945
             |
       _cons |   .0292031   .0198777     1.47   0.142    -.0097617    .0681678
-------------+----------------------------------------------------------------
     sigma_u |  .22033071
     sigma_e |   .2636724
         rho |  .41116399   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. local r2_w = `e(r2_w)'

. do regram output/regression/exporter_heterogeneity 1 Start R2_within "`r2_w'" 

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .04414345678549

. 
. estimates

----------------------------------------------------------------------------------
active results
----------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    194,426
Group variable: firm_person                     Number of groups  =     21,812

R-sq:                                           Obs per group:
     within  = 0.0441                                         min =          1
     between = 0.0711                                         avg =        8.9
     overall = 0.0580                                         max =         25

                                                F(78,8992)        =      14.01
corr(u_i, Xb)  = 0.0320                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 8,993 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      during |    .029348   .0041619     7.05   0.000     .0211897    .0375062
       after |   .0323605   .0070601     4.58   0.000      .018521       .0462
during_expat |   .1156187   .0252625     4.58   0.000     .0660984    .1651391
 after_expat |    .130164    .033702     3.86   0.000     .0641003    .1962276
     foreign |   .0366421   .0189021     1.94   0.053    -.0004103    .0736945
             |
    ind_year |
          2  |  -.0215265   .0119756    -1.80   0.072    -.0450014    .0019484
          3  |  -.0302479   .0142472    -2.12   0.034    -.0581757   -.0023202
          4  |  -.0270363   .0159583    -1.69   0.090    -.0583183    .0042456
          5  |  -.0179467   .0183796    -0.98   0.329    -.0539749    .0180814
          6  |  -.0199023   .0204048    -0.98   0.329    -.0599003    .0200957
          7  |  -.0170459   .0228639    -0.75   0.456    -.0618643    .0277726
          8  |  -.0206683   .0251853    -0.82   0.412    -.0700372    .0287006
          9  |  -.0136565   .0279572    -0.49   0.625    -.0684589    .0411459
         10  |  -.0204713   .0305723    -0.67   0.503    -.0804001    .0394575
         11  |  -.0177347   .0333826    -0.53   0.595    -.0831721    .0477028
         12  |  -.0200969   .0358839    -0.56   0.575    -.0904376    .0502439
         13  |  -.0100817   .0386616    -0.26   0.794    -.0858672    .0657038
         14  |    .006818   .0416754     0.16   0.870    -.0748753    .0885113
         15  |   .0231823   .0445693     0.52   0.603    -.0641837    .1105482
         16  |   .0486745   .0475259     1.02   0.306     -.044487    .1418361
         17  |   .0622286   .0504362     1.23   0.217    -.0366378    .1610949
         18  |    .069372   .0536104     1.29   0.196    -.0357166    .1744605
         19  |    .083715   .0566813     1.48   0.140    -.0273932    .1948232
         20  |   .0946589    .059553     1.59   0.112    -.0220785    .2113963
         21  |   .1014859   .0623351     1.63   0.104    -.0207052    .2236769
         22  |   .1099606    .065047     1.69   0.091    -.0175463    .2374676
         23  |   .1182389   .0677523     1.75   0.081    -.0145711    .2510489
         24  |   .0349977   .0704245     0.50   0.619    -.1030503    .1730457
         25  |   .0175983   .0732929     0.24   0.810    -.1260726    .1612691
         26  |  -.0150383   .0308933    -0.49   0.626    -.0755961    .0455195
         27  |  -.0356175   .0269087    -1.32   0.186    -.0883647    .0171297
         28  |   -.020241   .0259828    -0.78   0.436    -.0711732    .0306913
         29  |  -.0078365   .0261581    -0.30   0.765    -.0591124    .0434395
         30  |   .0023518   .0268984     0.09   0.930    -.0503751    .0550787
         31  |  -.0130744   .0275113    -0.48   0.635    -.0670028    .0408541
         32  |   .0080277   .0292427     0.27   0.784    -.0492947    .0653501
         33  |   .0118496   .0309904     0.38   0.702    -.0488986    .0725979
         34  |   .0133623   .0327576     0.41   0.683    -.0508501    .0775747
         35  |   .0255028   .0349377     0.73   0.465     -.042983    .0939886
         36  |   .0443519   .0373917     1.19   0.236    -.0289444    .1176482
         37  |   .0394972   .0395797     1.00   0.318     -.038088    .1170824
         38  |   .0391041   .0416484     0.94   0.348    -.0425363    .1207445
         39  |   .0625241   .0446337     1.40   0.161    -.0249681    .1500163
         40  |   .0642604   .0472278     1.36   0.174    -.0283167    .1568376
         41  |   .1072469   .0500133     2.14   0.032     .0092094    .2052843
         42  |   .1229349   .0527986     2.33   0.020     .0194376    .2264322
         43  |   .1337216   .0558755     2.39   0.017     .0241929    .2432504
         44  |   .1831663   .0591673     3.10   0.002     .0671849    .2991477
         45  |   .2041191   .0620123     3.29   0.001     .0825608    .3256774
         46  |   .2104671   .0648587     3.25   0.001     .0833292    .3376049
         47  |   .2378555   .0676025     3.52   0.000     .1053392    .3703719
         48  |   .2396743   .0696704     3.44   0.001     .1031044    .3762441
         49  |   .0459309   .0713801     0.64   0.520    -.0939903    .1858521
         50  |   .0136808    .074285     0.18   0.854    -.1319347    .1592963
             |
     age_cat |
          1  |   .0183258   .0066025     2.78   0.006     .0053835    .0312682
          2  |   .0213681    .008688     2.46   0.014     .0043377    .0383985
          3  |   .0253856   .0110863     2.29   0.022     .0036539    .0471173
          4  |   .0353827   .0138182     2.56   0.010     .0082959    .0624696
          5  |   .0389219   .0166029     2.34   0.019     .0063765    .0714673
          6  |   .0427689   .0194784     2.20   0.028     .0045868    .0809511
          7  |   .0382917   .0224005     1.71   0.087    -.0056184    .0822018
          8  |   .0495796    .025447     1.95   0.051    -.0003024    .0994615
          9  |   .0419919   .0284613     1.48   0.140    -.0137987    .0977824
         10  |   .0435612   .0313857     1.39   0.165     -.017962    .1050844
         11  |   .0470952   .0343921     1.37   0.171    -.0203212    .1145116
         12  |   .0463644   .0372839     1.24   0.214    -.0267207    .1194494
         13  |   .0502936    .040465     1.24   0.214    -.0290269    .1296142
         14  |   .0544513   .0435783     1.25   0.212    -.0309721    .1398748
         15  |   .0515336   .0465057     1.11   0.268    -.0396281    .1426954
         16  |   .0597942   .0498314     1.20   0.230    -.0378867    .1574751
         17  |   .0510624   .0528758     0.97   0.334    -.0525862     .154711
         18  |   .0582669   .0561319     1.04   0.299    -.0517644    .1682981
         19  |   .0497763   .0597411     0.83   0.405    -.0673298    .1668825
         20  |    .041404   .0651406     0.64   0.525    -.0862864    .1690943
         25  |   .0276479   .0751313     0.37   0.713    -.1196267    .1749224
         30  |   .1053023   .1141612     0.92   0.356    -.1184798    .3290843
         40  |   .0428732    .134434     0.32   0.750     -.220648    .3063944
         50  |   .0508765   .1390747     0.37   0.715    -.2217415    .3234945
             |
       _cons |   .0292031   .0198777     1.47   0.142    -.0097617    .0681678
-------------+----------------------------------------------------------------
     sigma_u |  .22033071
     sigma_e |   .2636724
         rho |  .41116399   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text repla
> ce

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _
> newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) 
> _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',
> "pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. xtreg exporter during after during_expat after_expat $controls if $sample_acquis
> itions & H_exporter==1 [aw=inverse_weight], i(firm_person ) fe vce(cluster id)

Fixed-effects (within) regression               Number of obs      =    160346
Group variable: firm_person                     Number of groups   =     17818

R-sq:  within  = 0.0751                         Obs per group: min =         1
       between = 0.0311                                        avg =       9.0
       overall = 0.0494                                        max =        25

                                                F(78,5535)         =     19.90
corr(u_i, Xb)  = 0.0620                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 5,536 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      during |  -.0637312   .0059631   -10.69   0.000    -.0754211   -.0520412
       after |  -.0959436   .0100816    -9.52   0.000    -.1157076   -.0761797
during_expat |   .0378659   .0154371     2.45   0.014      .007603    .0681288
 after_expat |   .0448207   .0206748     2.17   0.030     .0042899    .0853514
     foreign |   -.004569   .0171806    -0.27   0.790    -.0382498    .0291119
             |
    ind_year |
          2  |  -.0026412   .0196468    -0.13   0.893    -.0411567    .0358743
          3  |  -.0240987   .0245634    -0.98   0.327    -.0722525    .0240552
          4  |  -.0412979   .0256562    -1.61   0.108    -.0915941    .0089982
          5  |  -.0156003   .0279226    -0.56   0.576    -.0703395    .0391389
          6  |  -.0216694   .0297941    -0.73   0.467    -.0800777    .0367388
          7  |  -.0242468   .0313389    -0.77   0.439    -.0856833    .0371897
          8  |  -.0283572   .0328716    -0.86   0.388    -.0927984     .036084
          9  |  -.0332879   .0345465    -0.96   0.335    -.1010127    .0344369
         10  |   .0043803   .0359477     0.12   0.903    -.0660913    .0748519
         11  |  -.0075096   .0375071    -0.20   0.841    -.0810383     .066019
         12  |   .0163163   .0391436     0.42   0.677    -.0604205     .093053
         13  |   .0289762   .0410682     0.71   0.480    -.0515335    .1094859
         14  |   .0359528      .0425     0.85   0.398    -.0473638    .1192694
         15  |   .0512458   .0437633     1.17   0.242    -.0345475     .137039
         16  |   .0564717   .0451018     1.25   0.211    -.0319455    .1448889
         17  |   .0910889   .0468059     1.95   0.052    -.0006691    .1828469
         18  |   .1036105   .0484517     2.14   0.033     .0086262    .1985948
         19  |   .1059926   .0499434     2.12   0.034      .008084    .2039013
         20  |   .1188389   .0513291     2.32   0.021     .0182138     .219464
         21  |   .1021457   .0527104     1.94   0.053    -.0011873    .2054787
         22  |    .119267    .053775     2.22   0.027     .0138469    .2246872
         23  |   .1056423   .0550055     1.92   0.055    -.0021902    .2134747
         24  |  -.0434398   .0563345    -0.77   0.441    -.1538776     .066998
         25  |  -.1029388   .0580778    -1.77   0.076    -.2167941    .0109165
         26  |   .0304151   .0416476     0.73   0.465    -.0512305    .1120607
         27  |   .0567354   .0379575     1.49   0.135    -.0176762    .1311471
         28  |   .0830795   .0373427     2.22   0.026     .0098732    .1562858
         29  |   .0707998   .0368496     1.92   0.055    -.0014398    .1430394
         30  |   .1019017   .0366812     2.78   0.005     .0299923    .1738112
         31  |   .1090328   .0368762     2.96   0.003     .0367411    .1813246
         32  |   .1088352   .0372058     2.93   0.003     .0358973    .1817731
         33  |   .0957706   .0376546     2.54   0.011     .0219527    .1695885
         34  |   .1025548   .0389049     2.64   0.008     .0262859    .1788237
         35  |   .1216629   .0396885     3.07   0.002     .0438578     .199468
         36  |   .1172528   .0411306     2.85   0.004     .0366207    .1978849
         37  |   .1152686   .0424138     2.72   0.007     .0321209    .1984163
         38  |   .1192926   .0436885     2.73   0.006      .033646    .2049392
         39  |   .1194317   .0450692     2.65   0.008     .0310784     .207785
         40  |   .1499078   .0462189     3.24   0.001     .0593006    .2405149
         41  |   .1533926   .0475628     3.23   0.001     .0601509    .2466343
         42  |   .1657922   .0490478     3.38   0.001     .0696392    .2619452
         43  |   .1698315   .0507037     3.35   0.001     .0704323    .2692308
         44  |    .174825   .0523249     3.34   0.001     .0722476    .2774023
         45  |   .1790305   .0540614     3.31   0.001     .0730489    .2850121
         46  |   .1865871   .0559202     3.34   0.001     .0769616    .2962125
         47  |     .19458   .0571355     3.41   0.001      .082572     .306588
         48  |   .1837531    .058137     3.16   0.002     .0697818    .2977245
         49  |  -.1719465   .0603327    -2.85   0.004    -.2902223   -.0536707
         50  |  -.2299368   .0621721    -3.70   0.000    -.3518186    -.108055
             |
     age_cat |
          1  |   .1233151     .02072     5.95   0.000     .0826957    .1639345
          2  |   .1653813    .022013     7.51   0.000     .1222273    .2085354
          3  |   .1964644   .0233179     8.43   0.000     .1507521    .2421767
          4  |   .2287079   .0245225     9.33   0.000     .1806342    .2767815
          5  |   .2594797   .0257253    10.09   0.000      .209048    .3099114
          6  |   .2699365    .027329     9.88   0.000      .216361    .3235121
          7  |    .281607   .0289249     9.74   0.000     .2249029    .3383112
          8  |   .2896317   .0306106     9.46   0.000     .2296228    .3496405
          9  |   .2892449     .03209     9.01   0.000     .2263359     .352154
         10  |   .2837967   .0338253     8.39   0.000     .2174859    .3501076
         11  |   .2851982   .0353874     8.06   0.000      .215825    .3545713
         12  |   .2746976   .0370627     7.41   0.000     .2020401     .347355
         13  |   .2782703   .0388718     7.16   0.000     .2020664    .3544743
         14  |    .280764   .0406824     6.90   0.000     .2010105    .3605174
         15  |   .2911716   .0422761     6.89   0.000     .2082938    .3740494
         16  |    .281796   .0439063     6.42   0.000     .1957225    .3678696
         17  |   .2906626   .0456107     6.37   0.000     .2012476    .3800775
         18  |   .2847863   .0477022     5.97   0.000     .1912714    .3783013
         19  |   .2656694   .0495758     5.36   0.000     .1684813    .3628574
         20  |   .2811494   .0526796     5.34   0.000     .1778767    .3844221
         25  |   .3275065    .058968     5.55   0.000     .2119062    .4431069
         30  |   .2884386    .077151     3.74   0.000     .1371924    .4396847
         40  |   .2943331   .0840307     3.50   0.000     .1295999    .4590663
         50  |     .21162   .0891071     2.37   0.018     .0369352    .3863048
             |
       _cons |   .3536664   .0329623    10.73   0.000     .2890474    .4182855
-------------+----------------------------------------------------------------
     sigma_u |  .40434921
     sigma_e |   .3147831
         rho |  .62264499   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. local r2_w = `e(r2_w)'

. do regram output/regression/exporter_heterogeneity 2 Continue R2_within "`r2_w'"
>  

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0750901598019422

. 
. estimates

----------------------------------------------------------------------------------
active results
----------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    160,346
Group variable: firm_person                     Number of groups  =     17,818

R-sq:                                           Obs per group:
     within  = 0.0751                                         min =          1
     between = 0.0311                                         avg =        9.0
     overall = 0.0494                                         max =         25

                                                F(78,5535)        =      19.90
corr(u_i, Xb)  = 0.0620                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 5,536 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      during |  -.0637312   .0059631   -10.69   0.000    -.0754211   -.0520412
       after |  -.0959436   .0100816    -9.52   0.000    -.1157076   -.0761797
during_expat |   .0378659   .0154371     2.45   0.014      .007603    .0681288
 after_expat |   .0448207   .0206748     2.17   0.030     .0042899    .0853514
     foreign |   -.004569   .0171806    -0.27   0.790    -.0382498    .0291119
             |
    ind_year |
          2  |  -.0026412   .0196468    -0.13   0.893    -.0411567    .0358743
          3  |  -.0240987   .0245634    -0.98   0.327    -.0722525    .0240552
          4  |  -.0412979   .0256562    -1.61   0.108    -.0915941    .0089982
          5  |  -.0156003   .0279226    -0.56   0.576    -.0703395    .0391389
          6  |  -.0216694   .0297941    -0.73   0.467    -.0800777    .0367388
          7  |  -.0242468   .0313389    -0.77   0.439    -.0856833    .0371897
          8  |  -.0283572   .0328716    -0.86   0.388    -.0927984     .036084
          9  |  -.0332879   .0345465    -0.96   0.335    -.1010127    .0344369
         10  |   .0043803   .0359477     0.12   0.903    -.0660913    .0748519
         11  |  -.0075096   .0375071    -0.20   0.841    -.0810383     .066019
         12  |   .0163163   .0391436     0.42   0.677    -.0604205     .093053
         13  |   .0289762   .0410682     0.71   0.480    -.0515335    .1094859
         14  |   .0359528      .0425     0.85   0.398    -.0473638    .1192694
         15  |   .0512458   .0437633     1.17   0.242    -.0345475     .137039
         16  |   .0564717   .0451018     1.25   0.211    -.0319455    .1448889
         17  |   .0910889   .0468059     1.95   0.052    -.0006691    .1828469
         18  |   .1036105   .0484517     2.14   0.033     .0086262    .1985948
         19  |   .1059926   .0499434     2.12   0.034      .008084    .2039013
         20  |   .1188389   .0513291     2.32   0.021     .0182138     .219464
         21  |   .1021457   .0527104     1.94   0.053    -.0011873    .2054787
         22  |    .119267    .053775     2.22   0.027     .0138469    .2246872
         23  |   .1056423   .0550055     1.92   0.055    -.0021902    .2134747
         24  |  -.0434398   .0563345    -0.77   0.441    -.1538776     .066998
         25  |  -.1029388   .0580778    -1.77   0.076    -.2167941    .0109165
         26  |   .0304151   .0416476     0.73   0.465    -.0512305    .1120607
         27  |   .0567354   .0379575     1.49   0.135    -.0176762    .1311471
         28  |   .0830795   .0373427     2.22   0.026     .0098732    .1562858
         29  |   .0707998   .0368496     1.92   0.055    -.0014398    .1430394
         30  |   .1019017   .0366812     2.78   0.005     .0299923    .1738112
         31  |   .1090328   .0368762     2.96   0.003     .0367411    .1813246
         32  |   .1088352   .0372058     2.93   0.003     .0358973    .1817731
         33  |   .0957706   .0376546     2.54   0.011     .0219527    .1695885
         34  |   .1025548   .0389049     2.64   0.008     .0262859    .1788237
         35  |   .1216629   .0396885     3.07   0.002     .0438578     .199468
         36  |   .1172528   .0411306     2.85   0.004     .0366207    .1978849
         37  |   .1152686   .0424138     2.72   0.007     .0321209    .1984163
         38  |   .1192926   .0436885     2.73   0.006      .033646    .2049392
         39  |   .1194317   .0450692     2.65   0.008     .0310784     .207785
         40  |   .1499078   .0462189     3.24   0.001     .0593006    .2405149
         41  |   .1533926   .0475628     3.23   0.001     .0601509    .2466343
         42  |   .1657922   .0490478     3.38   0.001     .0696392    .2619452
         43  |   .1698315   .0507037     3.35   0.001     .0704323    .2692308
         44  |    .174825   .0523249     3.34   0.001     .0722476    .2774023
         45  |   .1790305   .0540614     3.31   0.001     .0730489    .2850121
         46  |   .1865871   .0559202     3.34   0.001     .0769616    .2962125
         47  |     .19458   .0571355     3.41   0.001      .082572     .306588
         48  |   .1837531    .058137     3.16   0.002     .0697818    .2977245
         49  |  -.1719465   .0603327    -2.85   0.004    -.2902223   -.0536707
         50  |  -.2299368   .0621721    -3.70   0.000    -.3518186    -.108055
             |
     age_cat |
          1  |   .1233151     .02072     5.95   0.000     .0826957    .1639345
          2  |   .1653813    .022013     7.51   0.000     .1222273    .2085354
          3  |   .1964644   .0233179     8.43   0.000     .1507521    .2421767
          4  |   .2287079   .0245225     9.33   0.000     .1806342    .2767815
          5  |   .2594797   .0257253    10.09   0.000      .209048    .3099114
          6  |   .2699365    .027329     9.88   0.000      .216361    .3235121
          7  |    .281607   .0289249     9.74   0.000     .2249029    .3383112
          8  |   .2896317   .0306106     9.46   0.000     .2296228    .3496405
          9  |   .2892449     .03209     9.01   0.000     .2263359     .352154
         10  |   .2837967   .0338253     8.39   0.000     .2174859    .3501076
         11  |   .2851982   .0353874     8.06   0.000      .215825    .3545713
         12  |   .2746976   .0370627     7.41   0.000     .2020401     .347355
         13  |   .2782703   .0388718     7.16   0.000     .2020664    .3544743
         14  |    .280764   .0406824     6.90   0.000     .2010105    .3605174
         15  |   .2911716   .0422761     6.89   0.000     .2082938    .3740494
         16  |    .281796   .0439063     6.42   0.000     .1957225    .3678696
         17  |   .2906626   .0456107     6.37   0.000     .2012476    .3800775
         18  |   .2847863   .0477022     5.97   0.000     .1912714    .3783013
         19  |   .2656694   .0495758     5.36   0.000     .1684813    .3628574
         20  |   .2811494   .0526796     5.34   0.000     .1778767    .3844221
         25  |   .3275065    .058968     5.55   0.000     .2119062    .4431069
         30  |   .2884386    .077151     3.74   0.000     .1371924    .4396847
         40  |   .2943331   .0840307     3.50   0.000     .1295999    .4590663
         50  |     .21162   .0891071     2.37   0.018     .0369352    .3863048
             |
       _cons |   .3536664   .0329623    10.73   0.000     .2890474    .4182855
-------------+----------------------------------------------------------------
     sigma_u |  .40434921
     sigma_e |   .3147831
         rho |  .62264499   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text repla
> ce

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _
> newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) 
> _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',
> "pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. xtreg exporter during after during_expat after_expat $controls if $sample_acquis
> itions & H_exporter==0 & lag_expat==0 [aw=inverse_weight], i(firm_person ) fe vc
> e(cluster id)

Fixed-effects (within) regression               Number of obs      =     73705
Group variable: firm_person                     Number of groups   =      7757

R-sq:  within  = 0.0549                         Obs per group: min =         1
       between = 0.0362                                        avg =       9.5
       overall = 0.0403                                        max =        25

                                                F(78,4435)         =      9.53
corr(u_i, Xb)  = -0.0397                        Prob > F           =    0.0000

                                 (Std. Err. adjusted for 4,436 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      during |   .0080787   .0052769     1.53   0.126    -.0022667     .018424
       after |  -.0011641   .0090144    -0.13   0.897    -.0188369    .0165087
during_expat |   .1155814   .0356875     3.24   0.001     .0456161    .1855466
 after_expat |   .1081358   .0404156     2.68   0.007      .028901    .1873705
     foreign |   .0200977   .0203847     0.99   0.324    -.0198665    .0600619
             |
    ind_year |
          2  |  -.0476226   .0320995    -1.48   0.138    -.1105536    .0153085
          3  |  -.0507166   .0349563    -1.45   0.147    -.1192484    .0178152
          4  |  -.0354266   .0382317    -0.93   0.354    -.1103798    .0395267
          5  |  -.0144801   .0397603    -0.36   0.716    -.0924301      .06347
          6  |  -.0210954   .0405757    -0.52   0.603     -.100644    .0584531
          7  |  -.0348988   .0420688    -0.83   0.407    -.1173747    .0475771
          8  |  -.0266578   .0440878    -0.60   0.545    -.1130919    .0597763
          9  |   -.022488   .0461502    -0.49   0.626    -.1129655    .0679895
         10  |  -.0370045   .0478925    -0.77   0.440    -.1308978    .0568888
         11  |   -.034483   .0500293    -0.69   0.491    -.1325654    .0635994
         12  |  -.0377556   .0520811    -0.72   0.469    -.1398606    .0643494
         13  |  -.0280695   .0541289    -0.52   0.604    -.1341892    .0780502
         14  |  -.0147886   .0564621    -0.26   0.793    -.1254825    .0959053
         15  |  -.0018877   .0587299    -0.03   0.974    -.1170277    .1132522
         16  |   .0323894   .0613134     0.53   0.597    -.0878154    .1525942
         17  |   .0532838   .0639657     0.83   0.405    -.0721209    .1786885
         18  |   .0612389   .0664734     0.92   0.357    -.0690821      .19156
         19  |   .0767909   .0690974     1.11   0.266    -.0586745    .2122562
         20  |   .0819394    .071403     1.15   0.251    -.0580461    .2219249
         21  |   .0813675   .0739391     1.10   0.271      -.06359    .2263249
         22  |   .0960942   .0764307     1.26   0.209    -.0537481    .2459364
         23  |   .0923768   .0784412     1.18   0.239     -.061407    .2461607
         24  |   .0204513   .0806061     0.25   0.800    -.1375769    .1784795
         25  |  -.0067557    .083221    -0.08   0.935    -.1699104     .156399
         26  |  -.0111979   .0742024    -0.15   0.880    -.1566716    .1342757
         27  |  -.0387994   .0601064    -0.65   0.519    -.1566379    .0790391
         28  |  -.0309453   .0540089    -0.57   0.567    -.1368296     .074939
         29  |  -.0184639   .0527102    -0.35   0.726    -.1218022    .0848745
         30  |  -.0292683   .0501631    -0.58   0.560     -.127613    .0690764
         31  |   -.041913   .0498329    -0.84   0.400    -.1396103    .0557842
         32  |  -.0158581   .0508359    -0.31   0.755    -.1155219    .0838056
         33  |  -.0055737   .0501517    -0.11   0.912     -.103896    .0927486
         34  |  -.0271386   .0516613    -0.53   0.599    -.1284205    .0741433
         35  |  -.0178481    .052455    -0.34   0.734     -.120686    .0849899
         36  |   .0186536   .0543889     0.34   0.732    -.0879759    .1252831
         37  |   .0211653    .055487     0.38   0.703    -.0876169    .1299476
         38  |   .0288979    .057297     0.50   0.614    -.0834328    .1412287
         39  |   .0404369   .0596241     0.68   0.498    -.0764561    .1573299
         40  |   .0534643   .0617648     0.87   0.387    -.0676255    .1745542
         41  |   .0858102   .0641427     1.34   0.181    -.0399415    .2115619
         42  |   .1127808   .0667006     1.69   0.091    -.0179856    .2435473
         43  |   .1194127   .0688976     1.73   0.083     -.015661    .2544863
         44  |   .1584915   .0717556     2.21   0.027     .0178147    .2991682
         45  |   .1644393   .0743032     2.21   0.027     .0187681    .3101106
         46  |   .1782744   .0766236     2.33   0.020     .0280538    .3284949
         47  |   .1958004   .0788821     2.48   0.013     .0411521    .3504487
         48  |   .1814188   .0804669     2.25   0.024     .0236636    .3391739
         49  |   .0170517   .0818258     0.21   0.835    -.1433678    .1774711
         50  |  -.0144564   .0845289    -0.17   0.864    -.1801751    .1512623
             |
     age_cat |
          1  |   .0484973   .0118013     4.11   0.000     .0253608    .0716338
          2  |   .0586781   .0134352     4.37   0.000     .0323384    .0850179
          3  |   .0736125   .0154262     4.77   0.000     .0433694    .1038556
          4  |    .095834   .0178218     5.38   0.000     .0608944    .1307737
          5  |   .1009368   .0203784     4.95   0.000      .060985    .1408885
          6  |   .1127275   .0229445     4.91   0.000     .0677448    .1577102
          7  |   .1146689   .0258043     4.44   0.000     .0640796    .1652582
          8  |   .1212213    .028601     4.24   0.000     .0651491    .1772935
          9  |   .1265702   .0315534     4.01   0.000     .0647099    .1884306
         10  |   .1274083   .0343739     3.71   0.000     .0600182    .1947983
         11  |   .1395013   .0371635     3.75   0.000     .0666424    .2123602
         12  |   .1489793   .0399817     3.73   0.000     .0705951    .2273634
         13  |   .1490199   .0431999     3.45   0.001     .0643266    .2337132
         14  |   .1502951   .0460008     3.27   0.001     .0601106    .2404795
         15  |   .1482761   .0488754     3.03   0.002     .0524558    .2440963
         16  |   .1591492   .0520657     3.06   0.002     .0570745    .2612239
         17  |   .1586596    .055299     2.87   0.004     .0502459    .2670733
         18  |    .157586   .0585298     2.69   0.007     .0428384    .2723336
         19  |   .1568812   .0623501     2.52   0.012     .0346439    .2791185
         20  |   .1569374   .0665923     2.36   0.018     .0263832    .2874916
         25  |   .1460769   .0750514     1.95   0.052    -.0010614    .2932151
         30  |   .3534454   .1504246     2.35   0.019     .0585382    .6483526
         40  |   .2620619   .1711809     1.53   0.126    -.0735381     .597662
         50  |   .2646326   .1853135     1.43   0.153    -.0986744    .6279396
             |
       _cons |  -.0087265   .0406724    -0.21   0.830    -.0884646    .0710116
-------------+----------------------------------------------------------------
     sigma_u |   .2572211
     sigma_e |  .27203617
         rho |  .47202973   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. local r2_w = `e(r2_w)'

. do regram output/regression/exporter_heterogeneity 3 Domestic R2_within "`r2_w'"
>  

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0548590912937563

. 
. estimates

----------------------------------------------------------------------------------
active results
----------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =     73,705
Group variable: firm_person                     Number of groups  =      7,757

R-sq:                                           Obs per group:
     within  = 0.0549                                         min =          1
     between = 0.0362                                         avg =        9.5
     overall = 0.0403                                         max =         25

                                                F(78,4435)        =       9.53
corr(u_i, Xb)  = -0.0397                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 4,436 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      during |   .0080787   .0052769     1.53   0.126    -.0022667     .018424
       after |  -.0011641   .0090144    -0.13   0.897    -.0188369    .0165087
during_expat |   .1155814   .0356875     3.24   0.001     .0456161    .1855466
 after_expat |   .1081358   .0404156     2.68   0.007      .028901    .1873705
     foreign |   .0200977   .0203847     0.99   0.324    -.0198665    .0600619
             |
    ind_year |
          2  |  -.0476226   .0320995    -1.48   0.138    -.1105536    .0153085
          3  |  -.0507166   .0349563    -1.45   0.147    -.1192484    .0178152
          4  |  -.0354266   .0382317    -0.93   0.354    -.1103798    .0395267
          5  |  -.0144801   .0397603    -0.36   0.716    -.0924301      .06347
          6  |  -.0210954   .0405757    -0.52   0.603     -.100644    .0584531
          7  |  -.0348988   .0420688    -0.83   0.407    -.1173747    .0475771
          8  |  -.0266578   .0440878    -0.60   0.545    -.1130919    .0597763
          9  |   -.022488   .0461502    -0.49   0.626    -.1129655    .0679895
         10  |  -.0370045   .0478925    -0.77   0.440    -.1308978    .0568888
         11  |   -.034483   .0500293    -0.69   0.491    -.1325654    .0635994
         12  |  -.0377556   .0520811    -0.72   0.469    -.1398606    .0643494
         13  |  -.0280695   .0541289    -0.52   0.604    -.1341892    .0780502
         14  |  -.0147886   .0564621    -0.26   0.793    -.1254825    .0959053
         15  |  -.0018877   .0587299    -0.03   0.974    -.1170277    .1132522
         16  |   .0323894   .0613134     0.53   0.597    -.0878154    .1525942
         17  |   .0532838   .0639657     0.83   0.405    -.0721209    .1786885
         18  |   .0612389   .0664734     0.92   0.357    -.0690821      .19156
         19  |   .0767909   .0690974     1.11   0.266    -.0586745    .2122562
         20  |   .0819394    .071403     1.15   0.251    -.0580461    .2219249
         21  |   .0813675   .0739391     1.10   0.271      -.06359    .2263249
         22  |   .0960942   .0764307     1.26   0.209    -.0537481    .2459364
         23  |   .0923768   .0784412     1.18   0.239     -.061407    .2461607
         24  |   .0204513   .0806061     0.25   0.800    -.1375769    .1784795
         25  |  -.0067557    .083221    -0.08   0.935    -.1699104     .156399
         26  |  -.0111979   .0742024    -0.15   0.880    -.1566716    .1342757
         27  |  -.0387994   .0601064    -0.65   0.519    -.1566379    .0790391
         28  |  -.0309453   .0540089    -0.57   0.567    -.1368296     .074939
         29  |  -.0184639   .0527102    -0.35   0.726    -.1218022    .0848745
         30  |  -.0292683   .0501631    -0.58   0.560     -.127613    .0690764
         31  |   -.041913   .0498329    -0.84   0.400    -.1396103    .0557842
         32  |  -.0158581   .0508359    -0.31   0.755    -.1155219    .0838056
         33  |  -.0055737   .0501517    -0.11   0.912     -.103896    .0927486
         34  |  -.0271386   .0516613    -0.53   0.599    -.1284205    .0741433
         35  |  -.0178481    .052455    -0.34   0.734     -.120686    .0849899
         36  |   .0186536   .0543889     0.34   0.732    -.0879759    .1252831
         37  |   .0211653    .055487     0.38   0.703    -.0876169    .1299476
         38  |   .0288979    .057297     0.50   0.614    -.0834328    .1412287
         39  |   .0404369   .0596241     0.68   0.498    -.0764561    .1573299
         40  |   .0534643   .0617648     0.87   0.387    -.0676255    .1745542
         41  |   .0858102   .0641427     1.34   0.181    -.0399415    .2115619
         42  |   .1127808   .0667006     1.69   0.091    -.0179856    .2435473
         43  |   .1194127   .0688976     1.73   0.083     -.015661    .2544863
         44  |   .1584915   .0717556     2.21   0.027     .0178147    .2991682
         45  |   .1644393   .0743032     2.21   0.027     .0187681    .3101106
         46  |   .1782744   .0766236     2.33   0.020     .0280538    .3284949
         47  |   .1958004   .0788821     2.48   0.013     .0411521    .3504487
         48  |   .1814188   .0804669     2.25   0.024     .0236636    .3391739
         49  |   .0170517   .0818258     0.21   0.835    -.1433678    .1774711
         50  |  -.0144564   .0845289    -0.17   0.864    -.1801751    .1512623
             |
     age_cat |
          1  |   .0484973   .0118013     4.11   0.000     .0253608    .0716338
          2  |   .0586781   .0134352     4.37   0.000     .0323384    .0850179
          3  |   .0736125   .0154262     4.77   0.000     .0433694    .1038556
          4  |    .095834   .0178218     5.38   0.000     .0608944    .1307737
          5  |   .1009368   .0203784     4.95   0.000      .060985    .1408885
          6  |   .1127275   .0229445     4.91   0.000     .0677448    .1577102
          7  |   .1146689   .0258043     4.44   0.000     .0640796    .1652582
          8  |   .1212213    .028601     4.24   0.000     .0651491    .1772935
          9  |   .1265702   .0315534     4.01   0.000     .0647099    .1884306
         10  |   .1274083   .0343739     3.71   0.000     .0600182    .1947983
         11  |   .1395013   .0371635     3.75   0.000     .0666424    .2123602
         12  |   .1489793   .0399817     3.73   0.000     .0705951    .2273634
         13  |   .1490199   .0431999     3.45   0.001     .0643266    .2337132
         14  |   .1502951   .0460008     3.27   0.001     .0601106    .2404795
         15  |   .1482761   .0488754     3.03   0.002     .0524558    .2440963
         16  |   .1591492   .0520657     3.06   0.002     .0570745    .2612239
         17  |   .1586596    .055299     2.87   0.004     .0502459    .2670733
         18  |    .157586   .0585298     2.69   0.007     .0428384    .2723336
         19  |   .1568812   .0623501     2.52   0.012     .0346439    .2791185
         20  |   .1569374   .0665923     2.36   0.018     .0263832    .2874916
         25  |   .1460769   .0750514     1.95   0.052    -.0010614    .2932151
         30  |   .3534454   .1504246     2.35   0.019     .0585382    .6483526
         40  |   .2620619   .1711809     1.53   0.126    -.0735381     .597662
         50  |   .2646326   .1853135     1.43   0.153    -.0986744    .6279396
             |
       _cons |  -.0087265   .0406724    -0.21   0.830    -.0884646    .0710116
-------------+----------------------------------------------------------------
     sigma_u |   .2572211
     sigma_e |  .27203617
         rho |  .47202973   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text repla
> ce

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _
> newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) 
> _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',
> "pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. xtreg exporter during after during_expat after_expat $controls if $sample_acquis
> itions & H_exporter==1 & lag_expat==1 [aw=inverse_weight], i(firm_person ) fe vc
> e(cluster id)
note: foreign omitted because of collinearity

Fixed-effects (within) regression               Number of obs      =      8581
Group variable: firm_person                     Number of groups   =       896

R-sq:  within  = 0.0266                         Obs per group: min =         1
       between = 0.0187                                        avg =       9.6
       overall = 0.0232                                        max =        25

                                                F(77,437)          =      1.40
corr(u_i, Xb)  = -0.0514                        Prob > F           =    0.0212

                                   (Std. Err. adjusted for 438 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      during |   -.012505   .0196349    -0.64   0.525    -.0510956    .0260857
       after |  -.0307067    .030351    -1.01   0.312    -.0903588    .0289455
during_expat |   .0125108    .029617     0.42   0.673    -.0456987    .0707202
 after_expat |   .0353488   .0340253     1.04   0.299    -.0315248    .1022224
     foreign |          0  (omitted)
             |
    ind_year |
          2  |  -.0491864   .0578686    -0.85   0.396    -.1629218    .0645489
          3  |  -.1375713   .0587119    -2.34   0.020    -.2529641   -.0221785
          4  |  -.0924558    .060158    -1.54   0.125    -.2106908    .0257791
          5  |  -.1704827   .0737094    -2.31   0.021    -.3153517   -.0256136
          6  |  -.2028547    .072725    -2.79   0.006    -.3457889   -.0599205
          7  |  -.1733188   .0767902    -2.26   0.024    -.3242429   -.0223947
          8  |  -.1814918   .0833216    -2.18   0.030    -.3452528   -.0177309
          9  |  -.2120766   .0892265    -2.38   0.018     -.387443   -.0367102
         10  |   -.193907   .0996476    -1.95   0.052    -.3897552    .0019412
         11  |  -.1802413    .102818    -1.75   0.080    -.3823205    .0218379
         12  |  -.1688577   .1072664    -1.57   0.116    -.3796799    .0419645
         13  |  -.2055416    .114888    -1.79   0.074    -.4313433    .0202601
         14  |  -.1451144    .117974    -1.23   0.219    -.3769813    .0867524
         15  |  -.1076836   .1191936    -0.90   0.367    -.3419475    .1265803
         16  |  -.0930645   .1258664    -0.74   0.460    -.3404433    .1543143
         17  |  -.0600211   .1317887    -0.46   0.649    -.3190395    .1989974
         18  |  -.0816242   .1421985    -0.57   0.566    -.3611022    .1978538
         19  |  -.0783297   .1465509    -0.53   0.593     -.366362    .2097025
         20  |  -.0747988   .1504692    -0.50   0.619     -.370532    .2209345
         21  |  -.0711162    .155285    -0.46   0.647    -.3763144    .2340821
         22  |  -.0550753   .1617161    -0.34   0.734    -.3729133    .2627627
         23  |  -.0333794   .1605084    -0.21   0.835    -.3488439    .2820851
         24  |  -.1182652   .1665445    -0.71   0.478     -.445593    .2090625
         25  |  -.1153201    .173708    -0.66   0.507    -.4567271    .2260868
         26  |  -.0115742   .0968904    -0.12   0.905    -.2020034     .178855
         27  |  -.0644691   .0876754    -0.74   0.463    -.2367869    .1078488
         28  |  -.0080493   .0836807    -0.10   0.923     -.172516    .1564174
         29  |  -.0625224   .0883319    -0.71   0.479    -.2361306    .1110858
         30  |  -.0697934   .0905187    -0.77   0.441    -.2476996    .1081127
         31  |  -.0411661   .0915356    -0.45   0.653    -.2210708    .1387386
         32  |  -.0739685   .0953807    -0.78   0.438    -.2614304    .1134933
         33  |  -.0576195   .0963974    -0.60   0.550    -.2470797    .1318407
         34  |  -.0697676    .099315    -0.70   0.483    -.2649621    .1254268
         35  |  -.0625542    .101135    -0.62   0.537    -.2613256    .1362172
         36  |  -.0886624   .1031047    -0.86   0.390    -.2913051    .1139803
         37  |   -.069346   .1066478    -0.65   0.516    -.2789522    .1402603
         38  |  -.0889072   .1067308    -0.83   0.405    -.2986768    .1208623
         39  |  -.0462554   .1130657    -0.41   0.683    -.2684756    .1759647
         40  |  -.0405305   .1155459    -0.35   0.726    -.2676252    .1865643
         41  |  -.0258021   .1208973    -0.21   0.831    -.2634145    .2118103
         42  |  -.0189754   .1241018    -0.15   0.879     -.262886    .2249351
         43  |  -.0146188   .1282664    -0.11   0.909    -.2667144    .2374769
         44  |  -.0425319   .1367112    -0.31   0.756    -.3112251    .2261613
         45  |  -.0372255   .1357696    -0.27   0.784    -.3040681    .2296171
         46  |   -.012637   .1423545    -0.09   0.929    -.2924216    .2671475
         47  |   .0331538   .1501979     0.22   0.825    -.2620463    .3283539
         48  |   .0385177   .1542866     0.25   0.803    -.2647183    .3417538
         49  |  -.0825458   .1638268    -0.50   0.615    -.4045322    .2394406
         50  |  -.0837404   .1686276    -0.50   0.620    -.4151624    .2476816
             |
     age_cat |
          1  |   .0668636   .0565455     1.18   0.238    -.0442713    .1779985
          2  |   .0331742   .0684295     0.48   0.628    -.1013176    .1676659
          3  |   .0843159   .0663123     1.27   0.204    -.0460147    .2146465
          4  |   .1115623   .0682556     1.63   0.103    -.0225877    .2457123
          5  |   .0909602   .0703082     1.29   0.196    -.0472241    .2291445
          6  |   .0883037   .0757039     1.17   0.244    -.0604852    .2370927
          7  |   .0895009   .0763864     1.17   0.242    -.0606294    .2396312
          8  |   .1138819   .0795244     1.43   0.153     -.042416    .2701799
          9  |    .089609   .0839165     1.07   0.286    -.0753211     .254539
         10  |   .0997143   .0864493     1.15   0.249    -.0701938    .2696224
         11  |   .0960248    .089289     1.08   0.283    -.0794644     .271514
         12  |   .0943349   .0940205     1.00   0.316    -.0904538    .2791236
         13  |   .1042795   .0972793     1.07   0.284    -.0869139     .295473
         14  |   .0638473   .1014775     0.63   0.530    -.1355974     .263292
         15  |    .065371   .1064133     0.61   0.539    -.1437745    .2745165
         16  |   .0554838   .1117638     0.50   0.620    -.1641775    .2751451
         17  |   .0295302   .1176392     0.25   0.802    -.2016787     .260739
         18  |   .0313749   .1235134     0.25   0.800    -.2113793     .274129
         19  |   .0230747   .1295722     0.18   0.859    -.2315875    .2777368
         20  |  -.0038062   .1368561    -0.03   0.978    -.2727841    .2651717
         25  |   .0263717   .1369146     0.19   0.847    -.2427212    .2954646
         30  |   .1872158   .1859346     1.01   0.315    -.1782214     .552653
         40  |   .2770413   .2105989     1.32   0.189    -.1368713    .6909538
         50  |   .2544103   .2287943     1.11   0.267    -.1952637    .7040843
             |
       _cons |   .8299749   .0894161     9.28   0.000     .6542359    1.005714
-------------+----------------------------------------------------------------
     sigma_u |  .31910422
     sigma_e |  .25495393
         rho |  .61037048   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. local r2_w = `e(r2_w)'

. do regram output/regression/exporter_heterogeneity 4 Global R2_within "`r2_w'" 

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0265922961991462

. 
. estimates

----------------------------------------------------------------------------------
active results
----------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =      8,581
Group variable: firm_person                     Number of groups  =        896

R-sq:                                           Obs per group:
     within  = 0.0266                                         min =          1
     between = 0.0187                                         avg =        9.6
     overall = 0.0232                                         max =         25

                                                F(77,437)         =       1.40
corr(u_i, Xb)  = -0.0514                        Prob > F          =     0.0212

                                   (Std. Err. adjusted for 438 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      during |   -.012505   .0196349    -0.64   0.525    -.0510956    .0260857
       after |  -.0307067    .030351    -1.01   0.312    -.0903588    .0289455
during_expat |   .0125108    .029617     0.42   0.673    -.0456987    .0707202
 after_expat |   .0353488   .0340253     1.04   0.299    -.0315248    .1022224
     foreign |          0  (omitted)
             |
    ind_year |
          2  |  -.0491864   .0578686    -0.85   0.396    -.1629218    .0645489
          3  |  -.1375713   .0587119    -2.34   0.020    -.2529641   -.0221785
          4  |  -.0924558    .060158    -1.54   0.125    -.2106908    .0257791
          5  |  -.1704827   .0737094    -2.31   0.021    -.3153517   -.0256136
          6  |  -.2028547    .072725    -2.79   0.006    -.3457889   -.0599205
          7  |  -.1733188   .0767902    -2.26   0.024    -.3242429   -.0223947
          8  |  -.1814918   .0833216    -2.18   0.030    -.3452528   -.0177309
          9  |  -.2120766   .0892265    -2.38   0.018     -.387443   -.0367102
         10  |   -.193907   .0996476    -1.95   0.052    -.3897552    .0019412
         11  |  -.1802413    .102818    -1.75   0.080    -.3823205    .0218379
         12  |  -.1688577   .1072664    -1.57   0.116    -.3796799    .0419645
         13  |  -.2055416    .114888    -1.79   0.074    -.4313433    .0202601
         14  |  -.1451144    .117974    -1.23   0.219    -.3769813    .0867524
         15  |  -.1076836   .1191936    -0.90   0.367    -.3419475    .1265803
         16  |  -.0930645   .1258664    -0.74   0.460    -.3404433    .1543143
         17  |  -.0600211   .1317887    -0.46   0.649    -.3190395    .1989974
         18  |  -.0816242   .1421985    -0.57   0.566    -.3611022    .1978538
         19  |  -.0783297   .1465509    -0.53   0.593     -.366362    .2097025
         20  |  -.0747988   .1504692    -0.50   0.619     -.370532    .2209345
         21  |  -.0711162    .155285    -0.46   0.647    -.3763144    .2340821
         22  |  -.0550753   .1617161    -0.34   0.734    -.3729133    .2627627
         23  |  -.0333794   .1605084    -0.21   0.835    -.3488439    .2820851
         24  |  -.1182652   .1665445    -0.71   0.478     -.445593    .2090625
         25  |  -.1153201    .173708    -0.66   0.507    -.4567271    .2260868
         26  |  -.0115742   .0968904    -0.12   0.905    -.2020034     .178855
         27  |  -.0644691   .0876754    -0.74   0.463    -.2367869    .1078488
         28  |  -.0080493   .0836807    -0.10   0.923     -.172516    .1564174
         29  |  -.0625224   .0883319    -0.71   0.479    -.2361306    .1110858
         30  |  -.0697934   .0905187    -0.77   0.441    -.2476996    .1081127
         31  |  -.0411661   .0915356    -0.45   0.653    -.2210708    .1387386
         32  |  -.0739685   .0953807    -0.78   0.438    -.2614304    .1134933
         33  |  -.0576195   .0963974    -0.60   0.550    -.2470797    .1318407
         34  |  -.0697676    .099315    -0.70   0.483    -.2649621    .1254268
         35  |  -.0625542    .101135    -0.62   0.537    -.2613256    .1362172
         36  |  -.0886624   .1031047    -0.86   0.390    -.2913051    .1139803
         37  |   -.069346   .1066478    -0.65   0.516    -.2789522    .1402603
         38  |  -.0889072   .1067308    -0.83   0.405    -.2986768    .1208623
         39  |  -.0462554   .1130657    -0.41   0.683    -.2684756    .1759647
         40  |  -.0405305   .1155459    -0.35   0.726    -.2676252    .1865643
         41  |  -.0258021   .1208973    -0.21   0.831    -.2634145    .2118103
         42  |  -.0189754   .1241018    -0.15   0.879     -.262886    .2249351
         43  |  -.0146188   .1282664    -0.11   0.909    -.2667144    .2374769
         44  |  -.0425319   .1367112    -0.31   0.756    -.3112251    .2261613
         45  |  -.0372255   .1357696    -0.27   0.784    -.3040681    .2296171
         46  |   -.012637   .1423545    -0.09   0.929    -.2924216    .2671475
         47  |   .0331538   .1501979     0.22   0.825    -.2620463    .3283539
         48  |   .0385177   .1542866     0.25   0.803    -.2647183    .3417538
         49  |  -.0825458   .1638268    -0.50   0.615    -.4045322    .2394406
         50  |  -.0837404   .1686276    -0.50   0.620    -.4151624    .2476816
             |
     age_cat |
          1  |   .0668636   .0565455     1.18   0.238    -.0442713    .1779985
          2  |   .0331742   .0684295     0.48   0.628    -.1013176    .1676659
          3  |   .0843159   .0663123     1.27   0.204    -.0460147    .2146465
          4  |   .1115623   .0682556     1.63   0.103    -.0225877    .2457123
          5  |   .0909602   .0703082     1.29   0.196    -.0472241    .2291445
          6  |   .0883037   .0757039     1.17   0.244    -.0604852    .2370927
          7  |   .0895009   .0763864     1.17   0.242    -.0606294    .2396312
          8  |   .1138819   .0795244     1.43   0.153     -.042416    .2701799
          9  |    .089609   .0839165     1.07   0.286    -.0753211     .254539
         10  |   .0997143   .0864493     1.15   0.249    -.0701938    .2696224
         11  |   .0960248    .089289     1.08   0.283    -.0794644     .271514
         12  |   .0943349   .0940205     1.00   0.316    -.0904538    .2791236
         13  |   .1042795   .0972793     1.07   0.284    -.0869139     .295473
         14  |   .0638473   .1014775     0.63   0.530    -.1355974     .263292
         15  |    .065371   .1064133     0.61   0.539    -.1437745    .2745165
         16  |   .0554838   .1117638     0.50   0.620    -.1641775    .2751451
         17  |   .0295302   .1176392     0.25   0.802    -.2016787     .260739
         18  |   .0313749   .1235134     0.25   0.800    -.2113793     .274129
         19  |   .0230747   .1295722     0.18   0.859    -.2315875    .2777368
         20  |  -.0038062   .1368561    -0.03   0.978    -.2727841    .2651717
         25  |   .0263717   .1369146     0.19   0.847    -.2427212    .2954646
         30  |   .1872158   .1859346     1.01   0.315    -.1782214     .552653
         40  |   .2770413   .2105989     1.32   0.189    -.1368713    .6909538
         50  |   .2544103   .2287943     1.11   0.267    -.1952637    .7040843
             |
       _cons |   .8299749   .0894161     9.28   0.000     .6542359    1.005714
-------------+----------------------------------------------------------------
     sigma_u |  .31910422
     sigma_e |  .25495393
         rho |  .61037048   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text repla
> ce

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _
> newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) 
> _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',
> "pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
end of do-file

. 
. log close
      name:  <unnamed>
       log:  /Users/koren/Google Drive/Research/expat/research_design/talk/output/
> estimate_heterogeneity.log
  log type:  text
 closed on:   5 Dec 2018, 07:49:09
----------------------------------------------------------------------------------
