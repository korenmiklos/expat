
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      17.0
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2021 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: Single-user 2-core  perpetual
Serial number: 501706328764
  Licensed to: Miklós Koren
               CEU MicroData

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000; see help set_maxvar.

. do code/create/firm_panel.do 

. *Betöltés
. set more off

. clear all

. capture log close

. 
. * find root folder
. here
/Users/koren/Documents/research/expat-monadic/

. local here = r(here)

. 
. log using "`here'/output/firm_panel", text replace
-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Documents/research/expat-monadic//output/firm_panel.l
> og
  log type:  text
 opened on:   4 May 2022, 23:59:31

. 
. * keep only sample from balance-small - NOTE: had to restructure as we have t
> o keep foreign which is different in years - so no collapse this time
. use "`here'/temp/balance-small-clean.dta"

. by frame_id_numeric: egen firm_birth = min(year)

. by frame_id_numeric: egen firm_death = max(year)

. keep frame_id year firm_birth firm_death foreign

. tempfile sample

. save `sample', replace
(file /var/folders/d3/0fbv6hwj19g5_2r8vdmfkmvh0000gn/T//St10172.000001 not
    found)
file /var/folders/d3/0fbv6hwj19g5_2r8vdmfkmvh0000gn/T//St10172.000001 saved
    as .dta format

. 
. * count expats in do - asterisk used
. *use "`here'/input/ceo-panel/ceo-panel.dta", clear // QUESTION: what is owner
. *rename person_id manager_id
. *merge m:1 frame_id_numeric year using `sample', keep(match) nogen
. *bys frame_id_numeric: egen ever_expat = max(expat == 1)
. *bys frame_id_numeri: egen ever_foreign = max(foreign == 1)
. *egen firm_tag = tag(frame_id_numeric)
. *count if ever_expat == 1 & ever_foreign == 0 & firm_tag == 1
. 
. foreach type in ceo nceo {
  2.         use "`here'/input/`type'-panel/`type'-panel.dta", clear // QUESTIO
> N: what is owner
  3.         rename person_id manager_id
  4.         
.         *for descriptives (number of ceo-s and nceo-s in original data, numbe
> r of ceo and nceo job-spells in original data)
.         count
  5.         egen company_manager_id = group(frame_id_numeric manager_id)
  6.         codebook manager_id
  7.         codebook company_manager_id
  8.         drop company_manager_id
  9. 
.         * only keep sample firms
.         merge m:1 frame_id_numeric year using `sample', keep(match) nogen
 10.         count if first_year_of_firm == firm_birth // QUESTION: why not the
>  same? - same for the last year
 11. 
.         * balance panel
.         egen company_manager_id = group(frame_id manager_id)
 12.         xtset company_manager_id year
 13.         by company_manager_id: generate gap = year - year[_n-1] - 1
 14.         replace gap = 0 if missing(gap)
 15.         tabulate gap
 16. 
.         * fill in gap if only 1 or 2-year long
.         
.         *forval i = 1(1)2 {
.         *       sort company_manager_id year
.         *       expand 1 + `i' if gap == `i', generate(filled_in_`i') // FIXM
> E OR QUESTION: maybe second year as well
.         *       replace year = year - `i' if filled_in_`i'
.         *       tab filled_in_`i'
.         *}
.         
.         *bys company_manager_id year: replace year = year + _n - 1 if filled_
> in_2
.         
.         expand 1 + (gap == 1), generate(filled_in)
 17.         replace year = year - 1 if filled_in
 18. 
.         * create contiguous spells
.         xtset company_manager_id year
 19.         gen change = ceo != L.ceo // intuition: should be ok in both files
>  (possible FIXME)
 20.         bysort company_manager_id (year): gen job_spell = sum(change)
 21. 
.         * create job begin and end for each manager spell
.         bys frame_id_numeric manager_id job_spell: egen job_begin = min(year)
 22.         bys frame_id_numeric manager_id job_spell: egen job_end = max(year
> )
 23.         keep frame_id_numeric manager_id job_spell year job_begin job_end 
> expat founder insider outsider firm_birth foreign country_code
 24. 
.         * if first managers arrive in year 1, extrapolate to year 0 - DROP SP
> ELL
.         bys frame_id_numeric: egen first_cohort = min(job_begin)
 25.         replace job_begin = job_begin - 1 if (first_cohort == firm_birth +
>  1) & (job_begin == first_cohort)
 26. 
.         * NOTE: no collapse and expand --> there might be holes
.         sort frame_id_numeric manager_id year
 27.         count if frame_id_numeric == frame_id_numeric[_n-1] & manager_id =
> = manager_id[_n-1] & year != (year[_n-1] + 1)
 28. 
.         * expat before 1990
.         replace expat = 0 if job_begin < 1990
 29. 
.         ***********************
.         * time invariant vars and drop entire series of firms from sample *
.         ***********************
.                 by frame_id_numeric: egen first_year_expat = min(cond(expat =
> = 1, job_begin,.))
 30.                 by frame_id_numeric: egen first_year_foreign = min(cond(fo
> reign == 1, year,.))
 31.                 
.                 * which of the two happened first?
.                 generate manager_after_owner = first_year_expat - first_year_
> foreign
 32.                 * event time relative to that
.                 generate event_time = year - first_year_expat
 33.                 
.                 * if foreign manager arrives up to 2 years before 1 year late
> r than foreign owner, use foreign manager as arrival date. this is easier to 
> implement
.                 replace foreign = 1 if (manager_after_owner == -2) & inlist(e
> vent_time, 0, 1)
 34.                 replace foreign = 1 if (manager_after_owner == -1) & inlis
> t(event_time, 0)
 35.                 replace foreign = 0 if (manager_after_owner == +1) & inlis
> t(event_time, -1)
 36. 
.                 * QUESTION: order of deletions (may be fine as all are firm l
> evel)
.                 * drop firms where expat arrives earlier than 2 years before 
> owner
.                 drop if manager_after_owner < -2
 37.                 
.                 * ever expat and foreign created after foreign changes (drops
>  were firm level before so should not mess with ever variables)
.                 foreach X of var expat foreign {
 38.                         by frame_id_numeric: egen ever_`X'_`type' = max(`X
> '==1)
 39.                 }
 40. 
.                 * drop if there was an expat but was never foreign
.                 drop if ever_expat == 1 & ever_foreign == 0
 41.                 scalar dropped_do3_expat_firmyears = r(N_drop)
 42.                 
.                 * drop too many CEO-s - FIXME AND QUESTION: should be moved i
> n the next file where spells are limited - but there cannot be created withou
> t manager level data
.                 egen fp_tag = tag(frame_id_numeric manager_id) 
 43.                 by frame_id_numeric: egen n_ceo_ever = sum(fp_tag)
 44.                 drop if n_ceo > 15
 45.                 scalar dropped_too_many_CEOs = r(N_drop)
 46.                 drop fp_tag n_ceo_ever
 47.                 
.         * hired or fired ceo since last observed year of firm - * POSSIBLE FI
> XME: expat, owner, insider, outsider, founder - hire, fire combinations later
.         tempvar previous_year
 48.         generate previous_year = .
 49.         forval t = 1985/2018 {
 50.                 by frame_id_numeric: egen `previous_year' = max(cond(year 
> < `t', year, .))
 51.                 replace previous_year = `previous_year' if year == `t'
 52.                 drop `previous_year'
 53.         }
 54. 
.         by frame_id_numeric: egen first_year = min(year)
 55.         bys frame_id_numeric (year): generate byte hire = cond(first_year 
> == year, 1, (job_begin <= year) & (job_begin > previous_year))
 56. 
.         tempvar next_year
 57.         generate next_year = .
 58.         forval t = 1985/2018 {
 59.                 by frame_id_numeric: egen `next_year' = min(cond(year > `t
> ', year, .))
 60.                 replace next_year = `next_year' if year == `t'
 61.                 drop `next_year'
 62.         }
 63. 
.         gen byte fire = ((job_end >= year) & (job_end < next_year))
 64.         tabulate hire fire 
 65. 
.         gen hire_expat_`type' = hire * expat
 66.         gen fire_expat_`type' = fire * expat
 67. 
.         * number of expats and locals
.         bys frame_id_numeric year: egen n_expat_`type' = total(cond(expat, 1,
>  0)) // could be in collapse but local not
 68.         bys frame_id_numeric year: egen n_local_`type' = total(cond(!expat
> , 1, 0))
 69.         
.         * create firm-year data
.         * FIXME: country_code may be different within a firm-year
.         collapse (sum) n_founder_`type' = founder n_insider_`type' = insider 
> n_outsider_`type' = outsider (firstnm) n_expat_`type' n_local_`type' foreign_
> `type' = foreign ever_expat_`type' ever_foreign_`type' (count) n_`type' = exp
> at (max) hire_`type' = hire fire_`type' = fire hire_expat_`type' fire_expat_`
> type', by(frame_id_numeric year)
 70. 
.         * managers in first year not classified as new hires and in last year
>  not classified as fired
.         bys frame_id_numeric (year): replace hire_`type' = 0 if (_n==1)
 71.         bys frame_id_numeric (year): replace fire_`type' = 0 if (_n==_N)
 72.         bys frame_id_numeric (year): replace hire_expat_`type' = 0 if (_n=
> =1)
 73.         bys frame_id_numeric (year): replace fire_expat_`type' = 0 if (_n=
> =_N)
 74.         bys frame_id_numeric (year): gen ceo_spell_`type' = sum(hire_`type
> ' | fire_`type') + 1 // so that index start from 1
 75. 
.         * create dummies from numbers
.         foreach var in expat local founder insider outsider {
 76.                 gen has_`var'_`type' = (n_`var'_`type' > 0) & n_`var'_`typ
> e' != .
 77.         }
 78.         
.         tempfile manager_`type'
 79.         save `manager_`type''
 80. }
  13,693,858

-------------------------------------------------------------------------------
manager_id                                       group(manager_id manager_type)
-------------------------------------------------------------------------------

                  Type: Numeric (long)

                 Range: [1,1470738]                   Units: 1
         Unique values: 1,352,073                 Missing .: 0/13,693,858

                  Mean: 794024
             Std. dev.: 376566

           Percentiles:    10%       25%       50%       75%       90%
                        272495    521712    781130   1.1e+06   1.3e+06

-------------------------------------------------------------------------------
company_manager_id                           group(frame_id_numeric manager_id)
-------------------------------------------------------------------------------

                  Type: Numeric (float)

                 Range: [1,2093703]                   Units: 1
         Unique values: 2,093,703                 Missing .: 0/13,693,858

                  Mean: 1.0e+06
             Std. dev.:  620419

           Percentiles:     10%       25%       50%       75%       90%
                         178211    458356   1.0e+06   1.5e+06   2.0e+06
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           487,453  
    -----------------------------------------
  236,925

Panel variable: company_manager_id (unbalanced)
 Time variable: year, 1985 to 2018, but with gaps
         Delta: 1 unit
(79,752 missing values generated)
(79,752 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    480,289       98.53       98.53
          1 |      3,908        0.80       99.33
          2 |      1,114        0.23       99.56
          3 |        636        0.13       99.69
          4 |        411        0.08       99.78
          5 |        327        0.07       99.84
          6 |        203        0.04       99.88
          7 |        133        0.03       99.91
          8 |        110        0.02       99.93
          9 |         93        0.02       99.95
         10 |         54        0.01       99.96
         11 |         34        0.01       99.97
         12 |         31        0.01       99.98
         13 |         27        0.01       99.98
         14 |         19        0.00       99.99
         15 |         15        0.00       99.99
         16 |         12        0.00       99.99
         17 |         10        0.00       99.99
         18 |          6        0.00      100.00
         19 |          5        0.00      100.00
         20 |          5        0.00      100.00
         21 |          5        0.00      100.00
         22 |          3        0.00      100.00
         23 |          1        0.00      100.00
         24 |          1        0.00      100.00
         25 |          1        0.00      100.00
------------+-----------------------------------
      Total |    487,453      100.00
(3,908 observations created)
(3,908 real changes made)

Panel variable: company_manager_id (unbalanced)
 Time variable: year, 1985 to 2018, but with gaps
         Delta: 1 unit
(43,751 real changes made)
  3,256
(322 real changes made)
(406,109 missing values generated)
(412,378 missing values generated)
(427,968 missing values generated)
(406,109 missing values generated)
(35 real changes made)
(52 real changes made)
(23 real changes made)
(5,676 observations deleted)
(21,859 observations deleted)
(11,970 observations deleted)
(451,856 missing values generated)
(451,856 missing values generated)
(0 real changes made)
(404,627 missing values generated)
(2,216 real changes made)
(402,693 missing values generated)
(2,412 real changes made)
(400,355 missing values generated)
(2,656 real changes made)
(398,989 missing values generated)
(2,725 real changes made)
(392,960 missing values generated)
(3,210 real changes made)
(350,877 missing values generated)
(6,375 real changes made)
(308,027 missing values generated)
(8,143 real changes made)
(254,237 missing values generated)
(10,018 real changes made)
(211,923 missing values generated)
(11,554 real changes made)
(180,320 missing values generated)
(12,415 real changes made)
(160,233 missing values generated)
(12,769 real changes made)
(140,527 missing values generated)
(13,194 real changes made)
(119,800 missing values generated)
(13,873 real changes made)
(103,916 missing values generated)
(14,253 real changes made)
(92,430 missing values generated)
(14,422 real changes made)
(78,557 missing values generated)
(14,796 real changes made)
(65,961 missing values generated)
(15,212 real changes made)
(56,373 missing values generated)
(15,400 real changes made)
(49,409 missing values generated)
(16,171 real changes made)
(42,832 missing values generated)
(16,339 real changes made)
(36,982 missing values generated)
(16,410 real changes made)
(30,773 missing values generated)
(16,707 real changes made)
(26,006 missing values generated)
(17,309 real changes made)
(20,866 missing values generated)
(17,090 real changes made)
(16,974 missing values generated)
(16,874 real changes made)
(13,594 missing values generated)
(16,586 real changes made)
(10,379 missing values generated)
(16,433 real changes made)
(7,773 missing values generated)
(16,435 real changes made)
(5,319 missing values generated)
(16,092 real changes made)
(3,230 missing values generated)
(15,049 real changes made)
(1,823 missing values generated)
(15,053 real changes made)
(803 missing values generated)
(15,004 real changes made)
(220 missing values generated)
(14,541 real changes made)
(451,856 missing values generated)
(2,216 real changes made)
(2,413 real changes made)
(10 missing values generated)
(2,664 real changes made)
(165 missing values generated)
(2,726 real changes made)
(256 missing values generated)
(3,212 real changes made)
(1,114 missing values generated)
(6,406 real changes made)
(5,194 missing values generated)
(8,323 real changes made)
(9,828 missing values generated)
(10,243 real changes made)
(13,915 missing values generated)
(11,480 real changes made)
(18,192 missing values generated)
(12,446 real changes made)
(22,083 missing values generated)
(12,803 real changes made)
(26,406 missing values generated)
(13,265 real changes made)
(30,657 missing values generated)
(13,737 real changes made)
(34,773 missing values generated)
(14,294 real changes made)
(40,385 missing values generated)
(14,267 real changes made)
(45,240 missing values generated)
(14,743 real changes made)
(49,805 missing values generated)
(15,088 real changes made)
(55,405 missing values generated)
(15,359 real changes made)
(61,018 missing values generated)
(15,428 real changes made)
(68,478 missing values generated)
(16,055 real changes made)
(74,993 missing values generated)
(16,250 real changes made)
(82,032 missing values generated)
(16,313 real changes made)
(89,249 missing values generated)
(16,562 real changes made)
(98,364 missing values generated)
(17,034 real changes made)
(106,707 missing values generated)
(16,821 real changes made)
(114,827 missing values generated)
(16,640 real changes made)
(122,708 missing values generated)
(16,438 real changes made)
(129,261 missing values generated)
(16,331 real changes made)
(139,303 missing values generated)
(16,182 real changes made)
(159,044 missing values generated)
(15,253 real changes made)
(166,949 missing values generated)
(14,920 real changes made)
(173,875 missing values generated)
(14,940 real changes made)
(186,485 missing values generated)
(14,455 real changes made)
(451,856 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |   319,789     58,692 |   378,481 
         1 |    58,692     14,683 |    73,375 
-----------+----------------------+----------
     Total |   378,481     73,375 |   451,856 
(25,748 real changes made)
(25,748 real changes made)
(1231 real changes made)
(1401 real changes made)
file /var/folders/d3/0fbv6hwj19g5_2r8vdmfkmvh0000gn/T//St10172.000002 saved
    as .dta format
  288,033

-------------------------------------------------------------------------------
manager_id                                                    group(manager_id)
-------------------------------------------------------------------------------

                  Type: Numeric (long)

                 Range: [80,1429833]                  Units: 1
         Unique values: 58,121                    Missing .: 0/288,033

                  Mean: 752768
             Std. dev.: 371598

           Percentiles:    10%       25%       50%       75%       90%
                        230023    478933    743701   1.1e+06   1.3e+06

-------------------------------------------------------------------------------
company_manager_id                           group(frame_id_numeric manager_id)
-------------------------------------------------------------------------------

                  Type: Numeric (float)

                 Range: [1,68173]                     Units: 1
         Unique values: 68,173                    Missing .: 0/288,033

                  Mean: 31559.5
             Std. dev.: 19323.1

           Percentiles:     10%       25%       50%       75%       90%
                           5716     14672     30905     47630     59335
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           120,537  
    -----------------------------------------
  35,371

Panel variable: company_manager_id (unbalanced)
 Time variable: year, 1988 to 2018, but with gaps
         Delta: 1 unit
(28,421 missing values generated)
(28,421 real changes made)

        gap |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    118,788       98.55       98.55
          1 |        829        0.69       99.24
          2 |        322        0.27       99.50
          3 |        195        0.16       99.67
          4 |        116        0.10       99.76
          5 |         89        0.07       99.84
          6 |         57        0.05       99.88
          7 |         40        0.03       99.92
          8 |         30        0.02       99.94
          9 |         20        0.02       99.96
         10 |         19        0.02       99.97
         11 |          7        0.01       99.98
         12 |          7        0.01       99.99
         13 |          4        0.00       99.99
         14 |          1        0.00       99.99
         15 |          4        0.00       99.99
         16 |          3        0.00      100.00
         17 |          3        0.00      100.00
         19 |          1        0.00      100.00
         22 |          1        0.00      100.00
         24 |          1        0.00      100.00
------------+-----------------------------------
      Total |    120,537      100.00
(829 observations created)
(829 real changes made)

Panel variable: company_manager_id (unbalanced)
 Time variable: year, 1988 to 2018, but with gaps
         Delta: 1 unit
(7,354 real changes made)
  920
(106 real changes made)
(88,507 missing values generated)
(91,816 missing values generated)
(100,993 missing values generated)
(88,507 missing values generated)
(6 real changes made)
(10 real changes made)
(94 real changes made)
(2,199 observations deleted)
(12,486 observations deleted)
(38,757 observations deleted)
(67,924 missing values generated)
(67,924 missing values generated)
(0 real changes made)
(67,924 missing values generated)
(0 real changes made)
(67,924 missing values generated)
(0 real changes made)
(67,924 missing values generated)
(0 real changes made)
(58,593 missing values generated)
(1,192 real changes made)
(57,811 missing values generated)
(1,277 real changes made)
(53,488 missing values generated)
(1,860 real changes made)
(50,024 missing values generated)
(1,944 real changes made)
(46,724 missing values generated)
(1,354 real changes made)
(41,433 missing values generated)
(1,639 real changes made)
(37,787 missing values generated)
(1,819 real changes made)
(36,140 missing values generated)
(1,782 real changes made)
(35,300 missing values generated)
(1,643 real changes made)
(34,153 missing values generated)
(1,538 real changes made)
(33,051 missing values generated)
(1,491 real changes made)
(30,406 missing values generated)
(1,512 real changes made)
(27,776 missing values generated)
(1,571 real changes made)
(25,455 missing values generated)
(1,658 real changes made)
(23,935 missing values generated)
(1,730 real changes made)
(22,007 missing values generated)
(1,945 real changes made)
(16,301 missing values generated)
(2,385 real changes made)
(13,378 missing values generated)
(2,426 real changes made)
(11,076 missing values generated)
(2,265 real changes made)
(9,231 missing values generated)
(2,347 real changes made)
(7,465 missing values generated)
(2,548 real changes made)
(5,861 missing values generated)
(2,567 real changes made)
(4,818 missing values generated)
(2,359 real changes made)
(3,714 missing values generated)
(2,414 real changes made)
(2,916 missing values generated)
(2,388 real changes made)
(2,131 missing values generated)
(2,399 real changes made)
(1,348 missing values generated)
(2,054 real changes made)
(822 missing values generated)
(2,038 real changes made)
(335 missing values generated)
(2,093 real changes made)
(101 missing values generated)
(2,016 real changes made)
(67,924 missing values generated)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(7 missing values generated)
(1,192 real changes made)
(54 missing values generated)
(1,280 real changes made)
(303 missing values generated)
(1,910 real changes made)
(1,609 missing values generated)
(2,043 real changes made)
(5,062 missing values generated)
(1,480 real changes made)
(5,890 missing values generated)
(1,660 real changes made)
(6,692 missing values generated)
(1,843 real changes made)
(7,283 missing values generated)
(1,848 real changes made)
(8,284 missing values generated)
(1,713 real changes made)
(9,574 missing values generated)
(1,570 real changes made)
(10,484 missing values generated)
(1,533 real changes made)
(11,812 missing values generated)
(1,587 real changes made)
(12,934 missing values generated)
(1,595 real changes made)
(14,112 missing values generated)
(1,682 real changes made)
(15,199 missing values generated)
(1,687 real changes made)
(17,920 missing values generated)
(1,643 real changes made)
(20,464 missing values generated)
(2,314 real changes made)
(22,054 missing values generated)
(2,466 real changes made)
(24,013 missing values generated)
(2,410 real changes made)
(25,569 missing values generated)
(2,268 real changes made)
(26,807 missing values generated)
(2,405 real changes made)
(28,908 missing values generated)
(2,518 real changes made)
(31,873 missing values generated)
(2,375 real changes made)
(33,429 missing values generated)
(2,327 real changes made)
(35,134 missing values generated)
(2,383 real changes made)
(36,577 missing values generated)
(2,352 real changes made)
(41,945 missing values generated)
(1,994 real changes made)
(43,946 missing values generated)
(1,989 real changes made)
(45,669 missing values generated)
(2,028 real changes made)
(47,659 missing values generated)
(1,967 real changes made)
(67,924 missing values generated)
(0 real changes made)

           |         fire
      hire |         0          1 |     Total
-----------+----------------------+----------
         0 |    39,237     12,558 |    51,795 
         1 |    12,558      3,571 |    16,129 
-----------+----------------------+----------
     Total |    51,795     16,129 |    67,924 
(5,181 real changes made)
(5,181 real changes made)
(143 real changes made)
(178 real changes made)
file /var/folders/d3/0fbv6hwj19g5_2r8vdmfkmvh0000gn/T//St10172.000003 saved
    as .dta format

. 
. use `manager_ceo'

. * merge on manager_countries
. merge 1:1 frame_id_numeric year using "`here'/temp/manager_country.dta", keep
> (master match) nogen

    Result                      Number of obs
    -----------------------------------------
    Not matched                           274
        from master                       274  
        from using                          0  

    Matched                           314,563  
    -----------------------------------------

. tabulate has_expat_ceo if missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        242       88.32       88.32
          1 |         32       11.68      100.00
------------+-----------------------------------
      Total |        274      100.00

. tabulate has_expat_ceo if !missing(country_list)

has_expat_c |
         eo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    295,854       94.05       94.05
          1 |     18,709        5.95      100.00
------------+-----------------------------------
      Total |    314,563      100.00

. rename country_list country_all_ceo

. rename language_list lang_all_ceo

. 
. merge 1:1 frame_id_numeric year using `manager_nceo', keep (1 3) nogen // 1, 
> only 1 and 3 to not have missing cases in tab has_expat_ceo, missing in analy
> sis-sample 2, merge here to makes sure to have only ceo-s when countries are 
> merged

    Result                      Number of obs
    -----------------------------------------
    Not matched                       284,799
        from master                   284,799  
        from using                          0  

    Matched                            30,038  
    -----------------------------------------

. 
. count
  314,837

. compress
  variable year was float now int
  variable n_expat_ceo was float now byte
  variable n_local_ceo was float now byte
  variable ever_expat_ceo was float now byte
  variable ever_foreign_ceo was float now byte
  variable n_ceo was long now byte
  variable hire_expat_ceo was float now byte
  variable fire_expat_ceo was float now byte
  variable ceo_spell_ceo was float now byte
  variable has_expat_ceo was float now byte
  variable has_local_ceo was float now byte
  variable has_founder_ceo was float now byte
  variable has_insider_ceo was float now byte
  variable has_outsider_ceo was float now byte
  variable n_expat_nceo was float now byte
  variable n_local_nceo was float now byte
  variable ever_expat_nceo was float now byte
  variable ever_foreign_nceo was float now byte
  variable n_nceo was long now byte
  variable hire_expat_nceo was float now byte
  variable fire_expat_nceo was float now byte
  variable ceo_spell_nceo was float now byte
  variable has_expat_nceo was float now byte
  variable has_local_nceo was float now byte
  variable has_founder_nceo was float now byte
  variable has_insider_nceo was float now byte
  variable has_outsider_nceo was float now byte
  variable n_founder_ceo was double now byte
  variable n_insider_ceo was double now byte
  variable n_outsider_ceo was double now byte
  variable n_founder_nceo was double now byte
  variable n_insider_nceo was double now byte
  variable n_outsider_nceo was double now byte
  variable lang_all_ceo was str6 now str3
  (39,354,625 bytes saved)

. *save_all_to_json
. save "`here'/temp/firm_events.dta", replace
(file /Users/koren/Documents/research/expat-monadic//temp/firm_events.dta not
    found)
file /Users/koren/Documents/research/expat-monadic//temp/firm_events.dta
    saved

. log close
      name:  <unnamed>
       log:  /Users/koren/Documents/research/expat-monadic//output/firm_panel.l
> og
  log type:  text
 closed on:   5 May 2022, 01:00:16
-------------------------------------------------------------------------------

. 
end of do-file
